var N3=Object.defineProperty,k3=Object.defineProperties;var O3=Object.getOwnPropertyDescriptors;var kM=Object.getOwnPropertySymbols,F3=Object.getPrototypeOf,L3=Object.prototype.hasOwnProperty,V3=Object.prototype.propertyIsEnumerable,U3=Reflect.get;var OM=(n,e,t)=>e in n?N3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})L3.call(e,t)&&OM(n,t,e[t]);if(kM)for(var t of kM(e))V3.call(e,t)&&OM(n,t,e[t]);return n},le=(n,e)=>k3(n,O3(e));var jo=(n,e,t)=>U3(F3(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var CE;function fp(){return CE}function ci(n){let e=CE;return CE=n,e}var FM=Symbol("NotFound");function hc(n){return n===FM||n?.name==="\u0275NotFound"}var dn=null,pp=!1,TE=1,j3=null,hn=Symbol("SIGNAL");function ye(n){let e=dn;return dn=n,e}function _p(){return dn}var fc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function pc(n){if(pp)throw new Error("");if(dn===null)return;dn.consumerOnSignalRead(n);let e=dn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=dn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:dn.producers,t!==void 0&&t.producer===n)){dn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===dn&&(!r||$3(i,dn)))return;let o=mc(dn),s={producer:n,consumer:dn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};dn.producersTail=s,e!==void 0?e.nextProducer=s:dn.producers=s,o&&jM(n,s)}function LM(){TE++}function yp(n){if(!(mc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===TE)){if(!n.producerMustRecompute(n)&&!$u(n)){vp(n);return}n.producerRecomputeValue(n),vp(n)}}function DE(n){if(n.consumers===void 0)return;let e=pp;pp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||B3(r)}}finally{pp=e}}function SE(){return dn?.consumerAllowSignalWrites!==!1}function B3(n){n.dirty=!0,DE(n),n.consumerMarkedDirty?.(n)}function vp(n){n.dirty=!1,n.lastCleanEpoch=TE}function gc(n){return n&&VM(n),ye(n)}function VM(n){n.producersTail=void 0,n.recomputing=!0}function Bu(n,e){ye(e),n&&UM(n)}function UM(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(mc(n))do t=AE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function $u(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(yp(t),r!==t.version))return!0}return!1}function Hu(n){if(mc(n)){let e=n.producers;for(;e!==void 0;)e=AE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function jM(n,e){let t=n.consumersTail,r=mc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)jM(i.producer,i)}function AE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!mc(e)){let o=e.producers;for(;o!==void 0;)o=AE(o)}return t}function mc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ep(n){j3?.(n)}function $3(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function wp(n,e){return Object.is(n,e)}function Ip(n,e){let t=Object.create(H3);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(yp(t),pc(t),t.value===ju)throw t.error;return t.value};return r[hn]=t,Ep(t),r}var gp=Symbol("UNSET"),mp=Symbol("COMPUTING"),ju=Symbol("ERRORED"),H3=le(U({},fc),{value:gp,dirty:!0,error:null,equal:wp,kind:"computed",producerMustRecompute(n){return n.value===gp||n.value===mp},producerRecomputeValue(n){if(n.value===mp)throw new Error("");let e=n.value;n.value=mp;let t=gc(n),r,i=!1;try{r=n.computation(),ye(null),i=e!==gp&&e!==ju&&r!==ju&&n.equal(e,r)}catch(o){r=ju,n.error=o}finally{Bu(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function q3(){throw new Error}var BM=q3;function $M(n){BM(n)}function xE(n){BM=n}var z3=null;function ME(n,e){let t=Object.create(bp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>HM(t);return r[hn]=t,Ep(t),[r,s=>vc(t,s),s=>RE(t,s)]}function HM(n){return pc(n),n.value}function vc(n,e){SE()||$M(n),n.equal(n.value,e)||(n.value=e,W3(n))}function RE(n,e){SE()||$M(n),vc(n,e(n.value))}var bp=le(U({},fc),{equal:wp,value:void 0,kind:"signal"});function W3(n){n.version++,LM(),DE(n),z3?.(n)}function Ee(n){return typeof n=="function"}function _c(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Cp=_c(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ks(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ee(r))try{r()}catch(o){e=o instanceof Cp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{qM(o)}catch(s){e=e??[],s instanceof Cp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Cp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ks(t,e)}remove(e){let{_finalizers:t}=this;t&&Ks(t,e),e instanceof n&&e._removeParent(this)}};yt.EMPTY=(()=>{let n=new yt;return n.closed=!0,n})();var PE=yt.EMPTY;function Tp(n){return n instanceof yt||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function qM(n){Ee(n)?n():n.unsubscribe()}var Ur={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yc={setTimeout(n,e,...t){let{delegate:r}=yc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=yc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Dp(n){yc.setTimeout(()=>{let{onUnhandledError:e}=Ur;if(e)e(n);else throw n})}function qu(){}var zM=NE("C",void 0,void 0);function WM(n){return NE("E",void 0,n)}function GM(n){return NE("N",n,void 0)}function NE(n,e,t){return{kind:n,value:e,error:t}}var Qs=null;function Ec(n){if(Ur.useDeprecatedSynchronousErrorHandling){let e=!Qs;if(e&&(Qs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Qs;if(Qs=null,t)throw r}}else n()}function KM(n){Ur.useDeprecatedSynchronousErrorHandling&&Qs&&(Qs.errorThrown=!0,Qs.error=n)}var Ys=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tp(e)&&e.add(this)):this.destination=Q3}static create(e,t,r){return new wc(e,t,r)}next(e){this.isStopped?OE(GM(e),this):this._next(e)}error(e){this.isStopped?OE(WM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?OE(zM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},G3=Function.prototype.bind;function kE(n,e){return G3.call(n,e)}var FE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Sp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Sp(r)}else Sp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Sp(t)}}},wc=class extends Ys{constructor(e,t,r){super();let i;if(Ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ur.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kE(e.next,o),error:e.error&&kE(e.error,o),complete:e.complete&&kE(e.complete,o)}):i=e}this.destination=new FE(i)}};function Sp(n){Ur.useDeprecatedSynchronousErrorHandling?KM(n):Dp(n)}function K3(n){throw n}function OE(n,e){let{onStoppedNotification:t}=Ur;t&&yc.setTimeout(()=>t(n,e))}var Q3={closed:!0,next:qu,error:K3,complete:qu};var Ic=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nr(n){return n}function Ap(...n){return LE(n)}function LE(n){return n.length===0?nr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Z3(t)?t:new wc(t,r,i);return Ec(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=QM(r),new r((i,o)=>{let s=new wc({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ic](){return this}pipe(...t){return LE(t)(this)}toPromise(t){return t=QM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function QM(n){var e;return(e=n??Ur.Promise)!==null&&e!==void 0?e:Promise}function Y3(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function Z3(n){return n&&n instanceof Ys||Y3(n)&&Tp(n)}function VE(n){return Ee(n?.lift)}function Oe(n){return e=>{if(VE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new UE(n,e,t,r,i)}var UE=class extends Ys{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bc(){return Oe((n,e)=>{let t=null;n._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Cc=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,VE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;let t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return bc()(this)}};var YM=_c(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var bt=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new xp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new YM}next(t){Ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?PE:(this.currentObservers=null,o.push(t),new yt(()=>{this.currentObservers=null,Ks(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new xp(e,t),n})(),xp=class extends bt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:PE}};var tn=class extends bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jE={now(){return(jE.delegate||Date).now()},delegate:void 0};var Mp=class extends yt{constructor(e,t){super()}schedule(e,t=0){return this}};var zu={setInterval(n,e,...t){let{delegate:r}=zu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=zu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Tc=class extends Mp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return zu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&zu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ks(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Dc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Dc.now=jE.now;var Sc=class extends Dc{constructor(e,t=Dc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var BE=new Sc(Tc);var Rp=class extends Tc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Pp=class extends Sc{};var $E=new Pp(Rp);var Un=new de(n=>n.complete());function ZM(n){return n&&Ee(n.schedule)}function XM(n){return n[n.length-1]}function Np(n){return Ee(XM(n))?n.pop():void 0}function Bo(n){return ZM(XM(n))?n.pop():void 0}function HE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function eR(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function JM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(n){return this instanceof Zs?(this.v=n,this):new Zs(n)}function tR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(b){return Promise.resolve(b).then(m,h)}}function a(m,b){r[m]&&(i[m]=function(N){return new Promise(function(k,B){o.push([m,N,k,B])>1||c(m,N)})},b&&(i[m]=b(i[m])))}function c(m,b){try{u(r[m](b))}catch(N){p(o[0][3],N)}}function u(m){m.value instanceof Zs?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,b){m(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function nR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof JM=="function"?JM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var kp=n=>n&&typeof n.length=="number"&&typeof n!="function";function Op(n){return Ee(n?.then)}function Fp(n){return Ee(n[Ic])}function Lp(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function Vp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function X3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Up=X3();function jp(n){return Ee(n?.[Up])}function Bp(n){return tR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zs(t.read());if(i)return yield Zs(void 0);yield yield Zs(r)}}finally{t.releaseLock()}})}function $p(n){return Ee(n?.getReader)}function Rt(n){if(n instanceof de)return n;if(n!=null){if(Fp(n))return J3(n);if(kp(n))return e4(n);if(Op(n))return t4(n);if(Lp(n))return rR(n);if(jp(n))return n4(n);if($p(n))return r4(n)}throw Vp(n)}function J3(n){return new de(e=>{let t=n[Ic]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function e4(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function t4(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Dp)})}function n4(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function rR(n){return new de(e=>{i4(n,e).catch(t=>e.error(t))})}function r4(n){return rR(Bp(n))}function i4(n,e){var t,r,i,o;return eR(this,void 0,void 0,function*(){try{for(t=nR(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function $o(n,e=0){return Oe((t,r)=>{t.subscribe(Ne(r,i=>jn(r,n,()=>r.next(i),e),()=>jn(r,n,()=>r.complete(),e),i=>jn(r,n,()=>r.error(i),e)))})}function Ho(n,e=0){return Oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function iR(n,e){return Rt(n).pipe(Ho(e),$o(e))}function oR(n,e){return Rt(n).pipe(Ho(e),$o(e))}function sR(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function aR(n,e){return new de(t=>{let r;return jn(t,e,()=>{r=n[Up](),jn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Ee(r?.return)&&r.return()})}function Hp(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{jn(t,e,()=>{let r=n[Symbol.asyncIterator]();jn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function cR(n,e){return Hp(Bp(n),e)}function lR(n,e){if(n!=null){if(Fp(n))return iR(n,e);if(kp(n))return sR(n,e);if(Op(n))return oR(n,e);if(Lp(n))return Hp(n,e);if(jp(n))return aR(n,e);if($p(n))return cR(n,e)}throw Vp(n)}function je(n,e){return e?lR(n,e):Rt(n)}function se(...n){let e=Bo(n);return je(n,e)}function qo(n,e){let t=Ee(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function qE(n){return!!n&&(n instanceof de||Ee(n.lift)&&Ee(n.subscribe))}var Wi=_c(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(n,e){return Oe((t,r)=>{let i=0;t.subscribe(Ne(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:o4}=Array;function s4(n,e){return o4(e)?n(...e):n(e)}function qp(n){return Ie(e=>s4(n,e))}var{isArray:a4}=Array,{getPrototypeOf:c4,prototype:l4,keys:u4}=Object;function zp(n){if(n.length===1){let e=n[0];if(a4(e))return{args:e,keys:null};if(d4(e)){let t=u4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function d4(n){return n&&typeof n=="object"&&c4(n)===l4}function Wp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Wu(...n){let e=Bo(n),t=Np(n),{args:r,keys:i}=zp(n);if(r.length===0)return je([],e);let o=new de(h4(r,e,i?s=>Wp(i,s):nr));return t?o.pipe(qp(t)):o}function h4(n,e,t=nr){return r=>{uR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)uR(e,()=>{let u=je(n[c],e),d=!1;u.subscribe(Ne(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function uR(n,e,t){n?jn(t,n,e):e()}function dR(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,h=!1,p=()=>{h&&!c.length&&!u&&e.complete()},m=N=>u<r?b(N):c.push(N),b=N=>{o&&e.next(N),u++;let k=!1;Rt(t(N,d++)).subscribe(Ne(e,B=>{i?.(B),o?m(B):e.next(B)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;c.length&&u<r;){let B=c.shift();s?jn(e,s,()=>b(B)):b(B)}p()}catch(B){e.error(B)}}))};return n.subscribe(Ne(e,m,()=>{h=!0,p()})),()=>{a?.()}}function Ct(n,e,t=1/0){return Ee(e)?Ct((r,i)=>Ie((o,s)=>e(r,o,i,s))(Rt(n(r,i))),t):(typeof e=="number"&&(t=e),Oe((r,i)=>dR(r,i,n,t)))}function zo(n=1/0){return Ct(nr,n)}function hR(){return zo(1)}function Ac(...n){return hR()(je(n,Bo(n)))}function Gu(n){return new de(e=>{Rt(n()).subscribe(e)})}function zE(...n){let e=Np(n),{args:t,keys:r}=zp(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let h=!1;Rt(t[d]).subscribe(Ne(o,p=>{h||(h=!0,u--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?Wp(r,a):a),o.complete())}))}});return e?i.pipe(qp(e)):i}function An(n,e){return Oe((t,r)=>{let i=0;t.subscribe(Ne(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Gi(n){return Oe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ne(t,void 0,void 0,s=>{o=Rt(n(s,Gi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function fR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ne(s,d=>{let h=u++;c=a?n(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Wo(n,e){return Ee(e)?Ct(n,e,1):Ct(n,1)}function Go(n){return Oe((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ki(n){return n<=0?()=>Un:Oe((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gp(n=f4){return Oe((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function f4(){return new Wi}function Ku(n){return Oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?An((i,o)=>n(i,o,r)):nr,Ki(1),t?Go(e):Gp(()=>new Wi))}function xc(n){return n<=0?()=>Un:Oe((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function WE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?An((i,o)=>n(i,o,r)):nr,xc(1),t?Go(e):Gp(()=>new Wi))}function Kp(n,e){return Oe(fR(n,e,arguments.length>=2,!0))}function Qp(...n){let e=Bo(n);return Oe((t,r)=>{(e?Ac(n,t,e):Ac(n,t)).subscribe(r)})}function xn(n,e){return Oe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ne(r,c=>{i?.unsubscribe();let u=0,d=o++;Rt(n(c,d)).subscribe(i=Ne(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yp(n){return Oe((e,t)=>{Rt(n).subscribe(Ne(t,()=>t.complete(),qu)),!t.closed&&e.subscribe(t)})}function Wt(n,e,t){let r=Ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?Oe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ne(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):nr}function pR(n){let e=ye(null);try{return n()}finally{ye(e)}}var Ko=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ow=new Ko("20.3.15");var eg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",K=class extends Error{code;constructor(e,t){super(Zo(e,t)),this.code=e}};function p4(n){return`NG0${Math.abs(n)}`}function Zo(n,e){return`${p4(n)}${e?": "+e:""}`}var Ji=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("")}function vR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Zi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function tg(n,e){return n?e?`${n} ${e}`:n:e||""}var g4=Ge({__forward_ref__:Ge});function rr(n){return n.__forward_ref__=rr,n.toString=function(){return Zi(this())},n}function nn(n){return sw(n)?n():n}function sw(n){return typeof n=="function"&&n.hasOwnProperty(g4)&&n.__forward_ref__===rr}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xu(n){return m4(n,ng)}function aw(n){return Xu(n)!==null}function m4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function v4(n){let e=n?.[ng]??null;return e||null}function KE(n){return n&&n.hasOwnProperty(Xp)?n[Xp]:null}var ng=Ge({\u0275prov:Ge}),Xp=Ge({\u0275inj:Ge}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cw(n){return n&&!!n.\u0275providers}var lw=Ge({\u0275cmp:Ge}),uw=Ge({\u0275dir:Ge}),dw=Ge({\u0275pipe:Ge}),hw=Ge({\u0275mod:Ge}),Yu=Ge({\u0275fac:Ge}),na=Ge({__NG_ELEMENT_ID__:Ge}),gR=Ge({__NG_ENV_ID__:Ge});function Xo(n){return typeof n=="string"?n:n==null?"":String(n)}function _R(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xo(n)}var yR=Ge({ngErrorCode:Ge}),_4=Ge({ngErrorMessage:Ge}),y4=Ge({ngTokenPath:Ge});function fw(n,e){return ER("",-200,e)}function rg(n,e){throw new K(-201,!1)}function ER(n,e,t){let r=new K(e,n);return r[yR]=e,r[_4]=n,t&&(r[y4]=t),r}function E4(n){return n[yR]}var QE;function wR(){return QE}function Mn(n){let e=QE;return QE=n,e}function pw(n,e,t){let r=Xu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;rg(n,"Injector")}var w4={},Xs=w4,YE="__NG_DI_FLAG__",ZE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Js(t)||0;try{return this.injector.get(e,r&8?null:Xs,r)}catch(i){if(hc(i))return i;throw i}}};function I4(n,e=0){let t=fp();if(t===void 0)throw new K(-203,!1);if(t===null)return pw(n,void 0,e);{let r=b4(e),i=t.retrieve(n,r);if(hc(i)){if(r.optional)return null;throw i}return i}}function he(n,e=0){return(wR()||I4)(nn(n),e)}function S(n,e){return he(n,Js(e))}function Js(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function b4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function XE(n){let e=[];for(let t=0;t<n.length;t++){let r=nn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=C4(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function IR(n,e){return n[YE]=e,n.prototype[YE]=e,n}function C4(n){return n[YE]}function Qo(n,e){let t=n.hasOwnProperty(Yu);return t?n[Yu]:null}function bR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function CR(n){return n.flat(Number.POSITIVE_INFINITY)}function ig(n,e){n.forEach(t=>Array.isArray(t)?ig(t,e):e(t))}function gw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ju(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function og(n,e,t){let r=Rc(n,e);return r>=0?n[r|1]=t:(r=~r,TR(n,r,e,t)),r}function sg(n,e){let t=Rc(n,e);if(t>=0)return n[t|1]}function Rc(n,e){return T4(n,e,1)}function T4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Jo={},Rn=[],eo=new Z(""),mw=new Z("",-1),vw=new Z(""),Zu=class{get(e,t=Xs){if(t===Xs){let i=ER("",-201);throw i.name="\u0275NotFound",i}return t}};function _w(n){return n[hw]||null}function to(n){return n[lw]||null}function yw(n){return n[uw]||null}function DR(n){return n[dw]||null}function Bn(n){return{\u0275providers:n}}function SR(n){return Bn([{provide:eo,multi:!0,useValue:n}])}function AR(...n){return{\u0275providers:Ew(!0,n),\u0275fromNgModule:!0}}function Ew(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ig(e,s=>{let a=s;Jp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xR(i,o),t}function xR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ww(i,o=>{e(o,r)})}}function Jp(n,e,t,r){if(n=nn(n),!n)return!1;let i=null,o=KE(n),s=!o&&to(n);if(!o&&!s){let c=n.ngModule;if(o=KE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Jp(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ig(o.imports,d=>{Jp(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&xR(u,e)}if(!a){let u=Qo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Rn},i),e({provide:vw,useValue:i,multi:!0},i),e({provide:eo,useValue:()=>he(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;ww(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function ww(n,e){for(let t of n)cw(t)&&(t=t.\u0275providers),Array.isArray(t)?ww(t,e):e(t)}var D4=Ge({provide:String,useValue:Ge});function MR(n){return n!==null&&typeof n=="object"&&D4 in n}function S4(n){return!!(n&&n.useExisting)}function A4(n){return!!(n&&n.useFactory)}function ea(n){return typeof n=="function"}function RR(n){return!!n.useClass}var ed=new Z(""),Zp={},mR={},GE;function td(){return GE===void 0&&(GE=new Zu),GE}var Tt=class{},ta=class extends Tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ew(e,s=>this.processProvider(s)),this.records.set(mw,Mc(void 0,this)),i.has("environment")&&this.records.set(Tt,Mc(void 0,this));let o=this.records.get(ed);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vw,Rn,{self:!0}))}retrieve(e,t){let r=Js(t)||0;try{return this.get(e,Xs,r)}catch(i){if(hc(i))return i;throw i}}destroy(){Qu(this),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return Qu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Qu(this);let t=ci(this),r=Mn(void 0),i;try{return e()}finally{ci(t),Mn(r)}}get(e,t=Xs,r){if(Qu(this),e.hasOwnProperty(gR))return e[gR](this);let i=Js(r),o,s=ci(this),a=Mn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=N4(e)&&Xu(e);d&&this.injectableDefInScope(d)?u=Mc(JE(e),Zp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?td():this.parent;return t=i&8&&t===Xs?null:t,c.get(e,t)}catch(c){let u=E4(c);throw u===-200||u===-201?new K(u,null):c}finally{Mn(a),ci(s)}}resolveInjectorInitializers(){let e=ye(null),t=ci(this),r=Mn(void 0),i;try{let o=this.get(eo,Rn,{self:!0});for(let s of o)s()}finally{ci(t),Mn(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Zi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=nn(e);let t=ea(e)?e:nn(e&&e.provide),r=M4(e);if(!ea(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Mc(void 0,Zp,!0),i.factory=()=>XE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ye(null);try{if(t.value===mR)throw fw(Zi(e));return t.value===Zp&&(t.value=mR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&P4(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=nn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function JE(n){let e=Xu(n),t=e!==null?e.factory:Qo(n);if(t!==null)return t;if(n instanceof Z)throw new K(204,!1);if(n instanceof Function)return x4(n);throw new K(204,!1)}function x4(n){if(n.length>0)throw new K(204,!1);let t=v4(n);return t!==null?()=>t.factory(n):()=>new n}function M4(n){if(MR(n))return Mc(void 0,n.useValue);{let e=Iw(n);return Mc(e,Zp)}}function Iw(n,e,t){let r;if(ea(n)){let i=nn(n);return Qo(i)||JE(i)}else if(MR(n))r=()=>nn(n.useValue);else if(A4(n))r=()=>n.useFactory(...XE(n.deps||[]));else if(S4(n))r=(i,o)=>he(nn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=nn(n&&(n.useClass||n.provide));if(R4(n))r=()=>new i(...XE(n.deps));else return Qo(i)||JE(i)}return r}function Qu(n){if(n.destroyed)throw new K(205,!1)}function Mc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function R4(n){return!!n.deps}function P4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function N4(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ew(n,e){for(let t of n)Array.isArray(t)?ew(t,e):t&&cw(t)?ew(t.\u0275providers,e):e(t)}function Pt(n,e){let t;n instanceof ta?(Qu(n),t=n):t=new ZE(n);let r,i=ci(t),o=Mn(void 0);try{return e()}finally{ci(i),Mn(o)}}function PR(){return wR()!==void 0||fp()!=null}var Br=0,ce=1,ge=2,Gt=3,pr=4,gr=5,nd=6,Pc=7,rn=8,es=9,li=10,ut=11,Nc=12,bw=13,ra=14,mr=15,ts=16,ia=17,ui=18,rd=19,Cw=20,Yi=21,ag=22,id=23,ir=24,oa=25,od=26,wt=27,NR=1;var ns=7,sd=8,sa=9,fn=10;function di(n){return Array.isArray(n)&&typeof n[NR]=="object"}function $r(n){return Array.isArray(n)&&n[NR]===!0}function Tw(n){return(n.flags&4)!==0}function rs(n){return n.componentOffset>-1}function kc(n){return(n.flags&1)===1}function hi(n){return!!n.template}function Oc(n){return(n[ge]&512)!==0}function aa(n){return(n[ge]&256)===256}var kR="svg",OR="math";function vr(n){for(;Array.isArray(n);)n=n[Br];return n}function Dw(n,e){return vr(e[n])}function Hr(n,e){return vr(e[n.index])}function ad(n,e){return n.data[e]}function cd(n,e){return n[e]}function Sw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function _r(n,e){let t=e[n];return di(t)?t:t[Br]}function FR(n){return(n[ge]&4)===4}function cg(n){return(n[ge]&128)===128}function LR(n){return $r(n[Gt])}function is(n,e){return e==null?null:n[e]}function Aw(n){n[ia]=0}function xw(n){n[ge]&1024||(n[ge]|=1024,cg(n)&&Fc(n))}function VR(n,e){for(;n>0;)e=e[ra],n--;return e}function ld(n){return!!(n[ge]&9216||n[ir]?.dirty)}function lg(n){n[li].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),ld(n)&&Fc(n)}function Fc(n){n[li].changeDetectionScheduler?.notify(0);let e=Yo(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!cg(e)));)e=Yo(e)}function Mw(n,e){if(aa(n))throw new K(911,!1);n[Yi]===null&&(n[Yi]=[]),n[Yi].push(e)}function UR(n,e){if(n[Yi]===null)return;let t=n[Yi].indexOf(e);t!==-1&&n[Yi].splice(t,1)}function Yo(n){let e=n[Gt];return $r(e)?e[Gt]:e}function Rw(n){return n[Pc]??=[]}function Pw(n){return n.cleanup??=[]}function jR(n,e,t,r){let i=Rw(e);i.push(t),n.firstCreatePass&&Pw(n).push(r,i.length-1)}var Ce={lFrame:rP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tw=!1;function BR(){return Ce.lFrame.elementDepthCount}function $R(){Ce.lFrame.elementDepthCount++}function HR(){Ce.lFrame.elementDepthCount--}function ug(){return Ce.bindingsEnabled}function qR(){return Ce.skipHydrationRootTNode!==null}function zR(n){return Ce.skipHydrationRootTNode===n}function WR(){Ce.skipHydrationRootTNode=null}function we(){return Ce.lFrame.lView}function Nt(){return Ce.lFrame.tView}function Q(n){return Ce.lFrame.contextLView=n,n[rn]}function Y(n){return Ce.lFrame.contextLView=null,n}function Kt(){let n=Nw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Nw(){return Ce.lFrame.currentTNode}function GR(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Lc(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function kw(){return Ce.lFrame.isParent}function KR(){Ce.lFrame.isParent=!1}function QR(){return Ce.lFrame.contextLView}function Ow(){return tw}function Fw(n){let e=tw;return tw=n,e}function ud(){let n=Ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function YR(){return Ce.lFrame.bindingIndex}function ZR(n){return Ce.lFrame.bindingIndex=n}function ca(){return Ce.lFrame.bindingIndex++}function dg(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XR(){return Ce.lFrame.inI18n}function JR(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,hg(e)}function eP(){return Ce.lFrame.currentDirectiveIndex}function hg(n){Ce.lFrame.currentDirectiveIndex=n}function tP(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Lw(){return Ce.lFrame.currentQueryIndex}function fg(n){Ce.lFrame.currentQueryIndex=n}function k4(n){let e=n[ce];return e.type===2?e.declTNode:e.type===1?n[gr]:null}function Vw(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=k4(o),i===null||(o=o[ra],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ce.lFrame=nP();return r.currentTNode=e,r.lView=n,!0}function pg(n){let e=nP(),t=n[ce];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nP(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?rP(n):e}function rP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iP(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Uw=iP;function gg(){let n=iP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function oP(n){return(Ce.lFrame.contextLView=VR(n,Ce.lFrame.contextLView))[rn]}function no(){return Ce.lFrame.selectedIndex}function os(n){Ce.lFrame.selectedIndex=n}function mg(){let n=Ce.lFrame;return ad(n.tView,n.selectedIndex)}function sP(){return Ce.lFrame.currentNamespace}var aP=!0;function vg(){return aP}function dd(n){aP=n}function nw(n,e=null,t=null,r){let i=jw(n,e,t,r);return i.resolveInjectorInitializers(),i}function jw(n,e=null,t=null,r,i=new Set){let o=[t||Rn,AR(n)];return r=r||(typeof n=="object"?void 0:Zi(n)),new ta(o,e||td(),r||null,i)}var Et=class n{static THROW_IF_NOT_FOUND=Xs;static NULL=new Zu;static create(e,t){if(Array.isArray(e))return nw({name:""},t,e,"");{let r=e.name??"";return nw({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>he(mw)});static __NG_ELEMENT_ID__=-1},Dt=new Z(""),yr=(()=>{class n{static __NG_ELEMENT_ID__=O4;static __NG_ENV_ID__=t=>t}return n})(),rw=class extends yr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return aa(this._lView)}onDestroy(e){let t=this._lView;return Mw(t,e),()=>UR(t,e)}};function O4(){return new rw(we())}var jr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},pn=new Z("",{providedIn:"root",factory:()=>{let n=S(Tt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(jr),e.handleError(t))}}}),cP={provide:eo,useValue:()=>void S(jr),multi:!0},F4=new Z("",{providedIn:"root",factory:()=>{let n=S(Dt).defaultView;if(!n)return;let e=S(pn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),S(yr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Bw(){return Bn([SR(()=>void S(F4))])}function $w(n){return typeof n=="function"&&n[hn]!==void 0}function ee(n,e){let[t,r,i]=ME(n,e?.equal),o=t,s=o[hn];return o.set=r,o.update=i,o.asReadonly=lP.bind(o),o}function lP(){let n=this[hn];if(n.readonlyFn===void 0){let e=()=>this();e[hn]=n,n.readonlyFn=e}return n.readonlyFn}function Hw(n){return $w(n)&&typeof n.set=="function"}var _g=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=L4}return n})();function L4(){return new _g(we(),Kt())}var Xi=class{},hd=new Z("",{providedIn:"root",factory:()=>!1});var qw=new Z(""),zw=new Z(""),fi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new tn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vc=(()=>{class n{internalPendingTasks=S(fi);scheduler=S(Xi);errorHandler=S(pn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();function fd(...n){}var Ww=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new iw})}return n})(),iw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function qc(n){return{toString:n}.toString()}var yg="__parameters__";function z4(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function W4(n,e,t){return qc(()=>{let r=z4(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let h=c.hasOwnProperty(yg)?c[yg]:Object.defineProperty(c,yg,{value:[]})[yg];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var or=IR(W4("Optional"),8);function G4(n){return typeof n=="function"}var Sg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function BP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var wr=(()=>{let n=()=>$P;return n.ngInherit=!0,n})();function $P(n){return n.type.prototype.ngOnChanges&&(n.setInput=Q4),K4}function K4(){let n=qP(this),e=n?.current;if(e){let t=n.previous;if(t===Jo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Q4(n,e,t,r,i){let o=this.declaredInputs[r],s=qP(n)||Y4(n,{previous:Jo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Sg(u&&u.currentValue,t,c===Jo),BP(n,e,i,t)}var HP="__ngSimpleChanges__";function qP(n){return n[HP]||null}function Y4(n,e){return n[HP]=e}var uP=[];var Qe=function(n,e=null,t){for(let r=0;r<uP.length;r++){let i=uP[r];i(n,e,t)}};function Z4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=$P(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function zP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function bg(n,e,t){WP(n,e,3,t)}function Cg(n,e,t,r){(n[ge]&3)===t&&WP(n,e,t,r)}function Gw(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function WP(n,e,t,r){let i=r!==void 0?n[ia]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ia]+=65536),(a<o||o==-1)&&(X4(n,t,e,c),n[ia]=(n[ia]&4294901760)+c+2),c++}function dP(n,e){Qe(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),Qe(5,n,e)}}function X4(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ge]>>14<n[ia]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,dP(a,o)):dP(a,o)}var jc=-1,ua=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function J4(n){return(n.flags&8)!==0}function e$(n){return(n.flags&16)!==0}function t$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];n$(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function GP(n){return n===3||n===4||n===6}function n$(n){return n.charCodeAt(0)===64}function md(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hP(n,t,i,null,e[++r]):hP(n,t,i,null,null))}}return n}function hP(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function KP(n){return n!==jc}function Ag(n){return n&32767}function r$(n){return n>>16}function xg(n,e){let t=r$(n),r=e;for(;t>0;)r=r[ra],t--;return r}var i0=!0;function Mg(n){let e=i0;return i0=n,e}var i$=256,QP=i$-1,YP=5,o$=0,pi={};function s$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(na)&&(r=t[na]),r==null&&(r=t[na]=o$++);let i=r&QP,o=1<<i;e.data[n+(i>>YP)]|=o}function Rg(n,e){let t=ZP(n,e);if(t!==-1)return t;let r=e[ce];r.firstCreatePass&&(n.injectorIndex=e.length,Kw(r.data,n),Kw(e,null),Kw(r.blueprint,null));let i=M0(n,e),o=n.injectorIndex;if(KP(i)){let s=Ag(i),a=xg(i,e),c=a[ce].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Kw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ZP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function M0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=n1(i),r===null)return jc;if(t++,i=i[ra],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return jc}function o0(n,e,t){s$(n,e,t)}function a$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(GP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function XP(n,e,t){if(t&8||n!==void 0)return n;rg(e,"NodeInjector")}function JP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[es],o=Mn(void 0);try{return i?i.get(e,r,t&8):pw(e,r,t&8)}finally{Mn(o)}}return XP(r,e,t)}function e1(n,e,t,r=0,i){if(n!==null){if(e[ge]&2048&&!(r&2)){let s=d$(n,e,t,r,pi);if(s!==pi)return s}let o=t1(n,e,t,r,pi);if(o!==pi)return o}return JP(e,t,r,i)}function t1(n,e,t,r,i){let o=l$(t);if(typeof o=="function"){if(!Vw(e,n,r))return r&1?XP(i,t,r):JP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))rg(t);else return s}finally{Uw()}}else if(typeof o=="number"){let s=null,a=ZP(n,e),c=jc,u=r&1?e[mr][gr]:null;for((a===-1||r&4)&&(c=a===-1?M0(n,e):e[a+8],c===jc||!pP(r,!1)?a=-1:(s=e[ce],a=Ag(c),e=xg(c,e)));a!==-1;){let d=e[ce];if(fP(o,a,d.data)){let h=c$(a,e,t,s,r,u);if(h!==pi)return h}c=e[a+8],c!==jc&&pP(r,e[ce].data[a+8]===u)&&fP(o,a,e)?(s=d,a=Ag(c),e=xg(c,e)):a=-1}}return i}function c$(n,e,t,r,i,o){let s=e[ce],a=s.data[n+8],c=r==null?rs(a)&&i0:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=Tg(a,s,t,c,u);return d!==null?vd(e,s,d,a,i):pi}function Tg(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,h=r?a:a+d,p=i?a+d:u;for(let m=h;m<p;m++){let b=s[m];if(m<c&&t===b||m>=c&&b.type===t)return m}if(i){let m=s[c];if(m&&hi(m)&&m.type===t)return c}return null}function vd(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ua){let a=o;if(a.resolving){let m=_R(s[t]);throw fw(m)}let c=Mg(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,h=a.injectImpl?Mn(a.injectImpl):null,p=Vw(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Z4(t,s[t],e)}finally{h!==null&&Mn(h),Mg(c),a.resolving=!1,Uw()}}return o}function l$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(na)?n[na]:void 0;return typeof e=="number"?e>=0?e&QP:u$:e}function fP(n,e,t){let r=1<<n;return!!(t[e+(n>>YP)]&r)}function pP(n,e){return!(n&2)&&!(n&1&&e)}var la=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return e1(this._tNode,this._lView,e,Js(r),t)}};function u$(){return new la(Kt(),we())}function io(n){return qc(()=>{let e=n.prototype.constructor,t=e[Yu]||s0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Yu]||s0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function s0(n){return sw(n)?()=>{let e=s0(nn(n));return e&&e()}:Qo(n)}function d$(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!Oc(s);){let a=t1(o,s,t,r|2,pi);if(a!==pi)return a;let c=o.parent;if(!c){let u=s[Cw];if(u){let d=u.get(t,pi,r);if(d!==pi)return d}c=n1(s),s=s[ra]}o=c}return i}function n1(n){let e=n[ce],t=e.type;return t===2?e.declTNode:t===1?n[gr]:null}function wd(n){return a$(Kt(),n)}function h$(){return zc(Kt(),we())}function zc(n,e){return new gn(Hr(n,e))}var gn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=h$}return n})();function f$(n){return n instanceof gn?n.nativeElement:n}function p$(){return this._results[Symbol.iterator]()}var Pg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new bt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=CR(e);(this._changesDetected=!bR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=p$};function r1(n){return(n.flags&128)===128}var R0=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(R0||{}),i1=new Map,g$=0;function m$(){return g$++}function v$(n){i1.set(n[rd],n)}function a0(n){i1.delete(n[rd])}var gP="__ngContext__";function Bc(n,e){di(e)?(n[gP]=e[rd],v$(e)):n[gP]=e}function o1(n){return a1(n[Nc])}function s1(n){return a1(n[pr])}function a1(n){for(;n!==null&&!$r(n);)n=n[pr];return n}var c0;function P0(n){c0=n}function c1(){if(c0!==void 0)return c0;if(typeof document<"u")return document;throw new K(210,!1)}var zg=new Z("",{providedIn:"root",factory:()=>_$}),_$="ng",Wg=new Z(""),ga=new Z("",{providedIn:"platform",factory:()=>"unknown"});var Gg=new Z("",{providedIn:"root",factory:()=>c1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var y$="h",E$="b";var l1=!1,u1=new Z("",{providedIn:"root",factory:()=>l1});var N0=new Z("");var w$=(n,e,t,r)=>{};function I$(n,e,t,r){w$(n,e,t,r)}function k0(n){return(n.flags&32)===32}var b$=()=>null;function d1(n,e,t=!1){return b$(n,e,t)}function h1(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];fg(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function l0(n,e,t){fg(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function O0(n,e,t){if(Tw(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ye(r)}}}var ro=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ro||{});var Eg;function C$(){if(Eg===void 0&&(Eg=null,Ji.trustedTypes))try{Eg=Ji.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Eg}function mP(n){return C$()?.createScriptURL(n)||n}var Ng=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eg})`}};function Wc(n){return n instanceof Ng?n.changingThisBreaksApplicationSecurity:n}function F0(n,e){let t=f1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${eg})`)}return t===e}function f1(n){return n instanceof Ng&&n.getTypeName()||null}var T$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function p1(n){return n=String(n),n.match(T$)?n:"unsafe:"+n}var D$=/^>|^->|<!--|-->|--!>|<!-$/g,S$=/(<|>)/g,A$="\u200B$1\u200B";function x$(n){return n.replace(D$,e=>e.replace(S$,A$))}function M$(n,e){return n.createText(e)}function R$(n,e,t){n.setValue(e,t)}function P$(n,e){return n.createComment(x$(e))}function g1(n,e,t){return n.createElement(e,t)}function kg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function m1(n,e,t){n.appendChild(e,t)}function vP(n,e,t,r,i){r!==null?kg(n,e,t,r,i):m1(n,e,t)}function N$(n,e,t,r){n.removeChild(null,e,t,r)}function k$(n,e,t){n.setAttribute(e,"style",t)}function O$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function v1(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&t$(n,e,r),i!==null&&O$(n,e,i),o!==null&&k$(n,e,o)}var Kg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Kg||{});function Qt(n){let e=y1();return e?e.sanitize(Kg.URL,n)||"":F0(n,"URL")?Wc(n):p1(Xo(n))}function _1(n){let e=y1();if(e)return mP(e.sanitize(Kg.RESOURCE_URL,n)||"");if(F0(n,"ResourceURL"))return mP(Wc(n));throw new K(904,!1)}function F$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?_1:Qt}function L0(n,e,t){return F$(e,t)(n)}function y1(){let n=we();return n&&n[li].sanitizer}function E1(n){return n instanceof Function?n():n}function L$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var w1="ng-template";function V$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&L$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(V0(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function V0(n){return n.type===4&&n.value!==w1}function U$(n,e,t){let r=n.type===4&&!t?w1:n.value;return e===r}function j$(n,e,t){let r=4,i=n.attrs,o=i!==null?H$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!qr(r)&&!qr(c))return!1;if(s&&qr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!U$(n,c,t)||c===""&&e.length===1){if(qr(r))return!1;s=!0}}else if(r&8){if(i===null||!V$(n,i,c,t)){if(qr(r))return!1;s=!0}}else{let u=e[++a],d=B$(c,i,V0(n),t);if(d===-1){if(qr(r))return!1;s=!0;continue}if(u!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(qr(r))return!1;s=!0}}}}return qr(r)||s}function qr(n){return(n&1)===0}function B$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return q$(e,n)}function $$(n,e,t=!1){for(let r=0;r<e.length;r++)if(j$(n,e[r],t))return!0;return!1}function H$(n){for(let e=0;e<n.length;e++){let t=n[e];if(GP(t))return e}return n.length}function q$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _P(n,e){return n?":not("+e.trim()+")":e}function z$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qr(s)&&(e+=_P(o,i),i=""),r=s,o=o||!qr(r);t++}return i!==""&&(e+=_P(o,i)),e}function W$(n){return n.map(z$).join(",")}function G$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!qr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Pn={};function U0(n,e,t,r,i,o,s,a,c,u,d){let h=wt+r,p=h+i,m=K$(h,p),b=typeof u=="function"?u():u;return m[ce]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:d}}function K$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pn);return t}function Q$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=U0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function j0(n,e,t,r,i,o,s,a,c,u,d){let h=e.blueprint.slice();return h[Br]=i,h[ge]=r|4|128|8|64|1024,(u!==null||n&&n[ge]&2048)&&(h[ge]|=2048),Aw(h),h[Gt]=h[ra]=n,h[rn]=t,h[li]=s||n&&n[li],h[ut]=a||n&&n[ut],h[es]=c||n&&n[es]||null,h[gr]=o,h[rd]=m$(),h[nd]=d,h[Cw]=u,h[mr]=e.type==2?n[mr]:h,h}function Y$(n,e,t){let r=Hr(e,n),i=Q$(t),o=n[li].rendererFactory,s=B0(n,j0(n,i,null,I1(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function I1(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function b1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function B0(n,e){return n[Nc]?n[bw][pr]=e:n[Nc]=e,n[bw]=e,e}function w(n=1){C1(Nt(),we(),no()+n,!1)}function C1(n,e,t,r){if(!r)if((e[ge]&3)===3){let o=n.preOrderCheckHooks;o!==null&&bg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Cg(e,o,0,t)}os(t)}var Qg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Qg||{});function u0(n,e,t,r){let i=ye(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Qg.SignalBased)!==0&&(c=e[o][hn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):BP(e,c,o,r)}finally{ye(i)}}var Wr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Wr||{}),Z$;function $0(n,e){return Z$(n,e)}var $c=new Set,Yg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Yg||{}),ma=new Z(""),yP=new Set;function gi(n){yP.has(n)||(yP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var T1=!1,d0=class extends bt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,PR()&&(this.destroyRef=S(yr,{optional:!0})??void 0,this.pendingTasks=S(fi,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof yt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=d0;function D1(n){let e,t;function r(){n=fd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function EP(n){return queueMicrotask(()=>n()),()=>{n=fd}}var H0="isAngularZone",Og=H0+"_ID",X$=0,$e=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=T1}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(H0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,J$,fd,fd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},J$={};function q0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eH(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){D1(()=>{n.callbackScheduled=!1,h0(n),n.isCheckStableRunning=!0,q0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),h0(n)}function tH(n){let e=()=>{eH(n)},t=X$++;n._inner=n._inner.fork({name:"angular",properties:{[H0]:!0,[Og]:t,[Og+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(nH(c))return r.invokeTask(o,s,a,c);try{return wP(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),IP(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return wP(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rH(c)&&e(),IP(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,h0(n),q0(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function h0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function IP(n){n._nesting--,q0(n)}var Fg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nH(n){return S1(n,"__ignore_ng_zone__")}function rH(n){return S1(n,"__scheduler_tick__")}function S1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var z0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),A1=[0,1,2,3],x1=(()=>{class n{ngZone=S($e);scheduler=S(Xi);errorHandler=S(jr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(ma,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Qe(16),this.executing=!0;for(let r of A1)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Qe(17)}register(t){let{view:r}=t;r!==void 0?((r[oa]??=[]).push(t),Fc(r),r[ge]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Yg.AFTER_NEXT_RENDER,t):t()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Lg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[oa];e&&(this.view[oa]=e.filter(t=>t!==this))}};function Id(n,e){let t=e?.injector??S(Et);return gi("NgAfterNextRender"),oH(n,t,e,!0)}function iH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oH(n,e,t,r){let i=e.get(z0);i.impl??=e.get(x1);let o=e.get(ma,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(yr):null,a=e.get(_g,null,{optional:!0}),c=new Lg(i.impl,iH(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var sH=new Z("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function M1(n,e,t){let r=n.get(sH);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function aH(n,e){for(let[t,r]of e)M1(n,r.animateFns)}function bP(n,e,t,r){let i=n?.[od]?.enter;e!==null&&i&&i.has(t.index)&&aH(r,i)}function Uc(n,e,t,r,i,o,s,a){if(i!=null){let c,u=!1;$r(i)?c=i:di(i)&&(u=!0,i=i[Br]);let d=vr(i);n===0&&r!==null?(bP(a,r,o,t),s==null?m1(e,r,d):kg(e,r,d,s||null,!0)):n===1&&r!==null?(bP(a,r,o,t),kg(e,r,d,s||null,!0)):n===2?CP(a,o,t,h=>{N$(e,d,u,h)}):n===3&&CP(a,o,t,()=>{e.destroyNode(d)}),c!=null&&EH(e,n,t,c,o,r,s)}}function cH(n,e){R1(n,e),e[Br]=null,e[gr]=null}function lH(n,e,t,r,i,o){r[Br]=i,r[gr]=e,Zg(n,r,t,1,i,o)}function R1(n,e){e[li].changeDetectionScheduler?.notify(9),Zg(n,e,e[ut],2,null,null)}function uH(n){let e=n[Nc];if(!e)return Qw(n[ce],n);for(;e;){let t=null;if(di(e))t=e[Nc];else{let r=e[fn];r&&(t=r)}if(!t){for(;e&&!e[pr]&&e!==n;)di(e)&&Qw(e[ce],e),e=e[Gt];e===null&&(e=n),di(e)&&Qw(e[ce],e),t=e&&e[pr]}e=t}}function W0(n,e){let t=n[sa],r=t.indexOf(e);t.splice(r,1)}function G0(n,e){if(aa(e))return;let t=e[ut];t.destroyNode&&Zg(n,e,t,3,null,null),uH(e)}function Qw(n,e){if(aa(e))return;let t=ye(null);try{e[ge]&=-129,e[ge]|=256,e[ir]&&Hu(e[ir]),fH(n,e),hH(n,e),e[ce].type===1&&e[ut].destroy();let r=e[ts];if(r!==null&&$r(e[Gt])){r!==e[Gt]&&W0(r,e);let i=e[ui];i!==null&&i.detachView(n)}a0(e)}finally{ye(t)}}function CP(n,e,t,r){let i=n?.[od];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&$c.add(n),M1(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),dH(n,r)}else n&&$c.delete(n),r(!1)},i)}function dH(n,e){let t=n[od]?.running;if(t){t.then(()=>{n[od].running=void 0,$c.delete(n),e(!0)});return}e(!1)}function hH(n,e){let t=n.cleanup,r=e[Pc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Pc]=null);let i=e[Yi];if(i!==null){e[Yi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[id];if(o!==null){e[id]=null;for(let s of o)s.destroy()}}function fH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ua)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Qe(4,a,c);try{c.call(a)}finally{Qe(5,a,c)}}else{Qe(4,i,o);try{o.call(i)}finally{Qe(5,i,o)}}}}}function pH(n,e,t){return gH(n,e.parent,t)}function gH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Br];if(rs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ro.None||i===ro.Emulated)return null}return Hr(r,t)}function mH(n,e,t){return _H(n,e,t)}function vH(n,e,t){return n.type&40?Hr(n,t):null}var _H=vH,TP;function K0(n,e,t,r){let i=pH(n,r,e),o=e[ut],s=r.parent||e[gr],a=mH(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)vP(o,i,t[c],a,!1);else vP(o,i,t,a,!1);TP!==void 0&&TP(o,r,e,t,i)}function pd(n,e){if(e!==null){let t=e.type;if(t&3)return Hr(e,n);if(t&4)return f0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return pd(n,r);{let i=n[e.index];return $r(i)?f0(-1,i):vr(i)}}else{if(t&128)return pd(n,e.next);if(t&32)return $0(e,n)()||vr(n[e.index]);{let r=P1(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Yo(n[mr]);return pd(i,r)}else return pd(n,e.next)}}}return null}function P1(n,e){if(e!==null){let r=n[mr][gr],i=e.projection;return r.projection[i]}return null}function f0(n,e){let t=fn+n+1;if(t<e.length){let r=e[t],i=r[ce].firstChild;if(i!==null)return pd(r,i)}return e[ns]}function Q0(n,e,t,r,i,o,s){for(;t!=null;){let a=r[es];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&Bc(vr(c),r),t.flags|=2),!k0(t))if(u&8)Q0(n,e,t.child,r,i,o,!1),Uc(e,n,a,i,c,t,o,r);else if(u&32){let d=$0(t,r),h;for(;h=d();)Uc(e,n,a,i,h,t,o,r);Uc(e,n,a,i,c,t,o,r)}else u&16?yH(n,e,r,t,i,o):Uc(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Zg(n,e,t,r,i,o){Q0(t,r,n.firstChild,e,i,o,!1)}function yH(n,e,t,r,i,o){let s=t[mr],c=s[gr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Uc(e,n,t[es],i,d,r,o,t)}else{let u=c,d=s[Gt];r1(r)&&(u.flags|=128),Q0(n,e,u,d,i,o,!0)}}function EH(n,e,t,r,i,o,s){let a=r[ns],c=vr(r);a!==c&&Uc(e,n,t,o,a,i,s);for(let u=fn;u<r.length;u++){let d=r[u];Zg(d[ce],d,n,e,o,a)}}function wH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Wr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wr.Important),n.setStyle(t,r,i,o))}}function N1(n,e,t,r,i){let o=no(),s=r&2;try{os(-1),s&&e.length>wt&&C1(n,e,wt,!1),Qe(s?2:0,i,t),t(r,i)}finally{os(o),Qe(s?3:1,i,t)}}function Xg(n,e,t){AH(n,e,t),(t.flags&64)===64&&xH(n,e,t)}function Jg(n,e,t=Hr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function IH(n,e,t,r){let o=r.get(u1,l1)||t===ro.ShadowDom,s=n.selectRootElement(e,o);return bH(s),s}function bH(n){CH(n)}var CH=()=>null;function TH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function k1(n,e,t,r,i,o){let s=e[ce];if(Z0(n,s,e,t,r)){rs(n)&&SH(e,n.index);return}n.type&3&&(t=TH(t)),DH(n,e,t,r,i,o)}function DH(n,e,t,r,i,o){if(n.type&3){let s=Hr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function SH(n,e){let t=_r(e,n);t[ge]&16||(t[ge]|=64)}function AH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;rs(t)&&Y$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Rg(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=vd(e,n,s,t);if(Bc(c,e),o!==null&&NH(e,s-r,c,a,t,o),hi(a)){let u=_r(t.index,e);u[rn]=vd(e,n,s,t)}}}function xH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=eP();try{os(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];hg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&MH(c,u)}}finally{os(-1),hg(s)}}function MH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Y0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];$$(e,o.selectors,!1)&&(r??=[],hi(o)?r.unshift(o):r.push(o))}return r}function RH(n,e,t,r,i,o){let s=Hr(n,e);PH(e[ut],s,o,n.value,t,r,i)}function PH(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Xo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function NH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];u0(r,t,c,u)}}function O1(n,e,t,r,i){let o=wt+t,s=e[ce],a=i(s,e,n,r,t);e[o]=a,Lc(n,!0);let c=n.type===2;return c?(v1(e[ut],a,n),(BR()===0||kc(n))&&Bc(a,e),$R()):Bc(a,e),vg()&&(!c||!k0(n))&&K0(s,e,a,n),n}function F1(n){let e=n;return kw()?KR():(e=e.parent,Lc(e,!1)),e}function kH(n,e){let t=n[es];if(!t)return;let r;try{r=t.get(pn,null)}catch{r=null}r?.(e)}function Z0(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],h=e.data[u];u0(h,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];u0(d,u,r,i),a=!0}return a}function OH(n,e){let t=_r(e,n),r=t[ce];FH(r,t);let i=t[Br];i!==null&&t[nd]===null&&(t[nd]=d1(i,t[es])),Qe(18),X0(r,t,t[rn]),Qe(19,t[rn])}function FH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function X0(n,e,t){pg(e);try{let r=n.viewQuery;r!==null&&l0(1,r,t);let i=n.template;i!==null&&N1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ui]?.finishViewCreation(n),n.staticContentQueries&&h1(n,e),n.staticViewQueries&&l0(2,n.viewQuery,t);let o=n.components;o!==null&&LH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,gg()}}function LH(n,e){for(let t=0;t<e.length;t++)OH(n,e[t])}function L1(n,e,t,r){let i=ye(null);try{let o=e.tView,a=n[ge]&4096?4096:16,c=j0(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ts]=u;let d=n[ui];return d!==null&&(c[ui]=d.createEmbeddedView(o)),X0(o,c,t),c}finally{ye(i)}}function p0(n,e){return!e||e.firstChild===null||r1(n)}function _d(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vr(o)),$r(o)&&V1(o,r);let s=t.type;if(s&8)_d(n,e,t.child,r);else if(s&32){let a=$0(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=P1(e,t);if(Array.isArray(a))r.push(...a);else{let c=Yo(e[mr]);_d(c[ce],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function V1(n,e){for(let t=fn;t<n.length;t++){let r=n[t],i=r[ce].firstChild;i!==null&&_d(r[ce],r,i,e)}n[ns]!==n[Br]&&e.push(n[ns])}function U1(n){if(n[oa]!==null){for(let e of n[oa])e.impl.addSequence(e);n[oa].length=0}}var j1=[];function VH(n){return n[ir]??UH(n)}function UH(n){let e=j1.pop()??Object.create(BH);return e.lView=n,e}function jH(n){n.lView[ir]!==n&&(n.lView=null,j1.push(n))}var BH=le(U({},fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Fc(n.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function $H(n){let e=n[ir]??Object.create(HH);return e.lView=n,e}var HH=le(U({},fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Yo(n.lView);for(;e&&!B1(e[ce]);)e=Yo(e);e&&xw(e)},consumerOnSignalRead(){this.lView[ir]=this}});function B1(n){return n.type!==2}function $1(n){if(n[id]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[id])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ge]&8192)}}var qH=100;function H1(n,e=0){let r=n[li].rendererFactory,i=!1;i||r.begin?.();try{zH(n,e)}finally{i||r.end?.()}}function zH(n,e){let t=Ow();try{Fw(!0),g0(n,e);let r=0;for(;ld(n);){if(r===qH)throw new K(103,!1);r++,g0(n,1)}}finally{Fw(t)}}function WH(n,e,t,r){if(aa(e))return;let i=e[ge],o=!1,s=!1;pg(e);let a=!0,c=null,u=null;o||(B1(n)?(u=VH(e),c=gc(u)):_p()===null?(a=!1,u=$H(e),c=gc(u)):e[ir]&&(Hu(e[ir]),e[ir]=null));try{Aw(e),ZR(n.bindingStartIndex),t!==null&&N1(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&bg(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Cg(e,m,0,null),Gw(e,0)}if(s||GH(e),$1(e),q1(e,0),n.contentQueries!==null&&h1(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&bg(e,m)}else{let m=n.contentHooks;m!==null&&Cg(e,m,1),Gw(e,1)}QH(n,e);let h=n.components;h!==null&&W1(e,h,0);let p=n.viewQuery;if(p!==null&&l0(2,p,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&bg(e,m)}else{let m=n.viewHooks;m!==null&&Cg(e,m,2),Gw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ag]){for(let m of e[ag])m();e[ag]=null}o||(U1(e),e[ge]&=-73)}catch(d){throw o||Fc(e),d}finally{u!==null&&(Bu(u,c),a&&jH(u)),gg()}}function q1(n,e){for(let t=o1(n);t!==null;t=s1(t))for(let r=fn;r<t.length;r++){let i=t[r];z1(i,e)}}function GH(n){for(let e=o1(n);e!==null;e=s1(e)){if(!(e[ge]&2))continue;let t=e[sa];for(let r=0;r<t.length;r++){let i=t[r];xw(i)}}}function KH(n,e,t){Qe(18);let r=_r(e,n);z1(r,t),Qe(19,r[rn])}function z1(n,e){cg(n)&&g0(n,e)}function g0(n,e){let r=n[ce],i=n[ge],o=n[ir],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$u(o)),s||=!1,o&&(o.dirty=!1),n[ge]&=-9217,s)WH(r,n,r.template,n[rn]);else if(i&8192){let a=ye(null);try{$1(n),q1(n,1);let c=r.components;c!==null&&W1(n,c,1),U1(n)}finally{ye(a)}}}function W1(n,e,t){for(let r=0;r<e.length;r++)KH(n,e[r],t)}function QH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)os(~i);else{let o=i,s=t[++r],a=t[++r];JR(s,o);let c=e[o];Qe(24,c),a(2,c),Qe(25,c)}}}finally{os(-1)}}function J0(n,e){let t=Ow()?64:1088;for(n[li].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let r=Yo(n);if(Oc(n)&&!r)return n;n=r}return null}function G1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YH(n,e){let t=fn+e;if(t<n.length)return n[t]}function K1(n,e,t,r=!0){let i=e[ce];if(XH(i,e,n,t),r){let s=f0(t,n),a=e[ut],c=a.parentNode(n[ns]);c!==null&&lH(i,n[gr],a,e,c,s)}let o=e[nd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ZH(n,e){let t=Vg(n,e);return t!==void 0&&G0(t[ce],t),t}function Vg(n,e){if(n.length<=fn)return;let t=fn+e,r=n[t];if(r){let i=r[ts];i!==null&&i!==n&&W0(i,r),e>0&&(n[t-1][pr]=r[pr]);let o=Ju(n,fn+e);cH(r[ce],r);let s=o[ui];s!==null&&s.detachView(o[ce]),r[Gt]=null,r[pr]=null,r[ge]&=-129}return r}function XH(n,e,t,r){let i=fn+r,o=t.length;r>0&&(t[i-1][pr]=e),r<o-fn?(e[pr]=t[i],gw(t,fn+r,e)):(t.push(e),e[pr]=null),e[Gt]=t;let s=e[ts];s!==null&&t!==s&&Q1(s,e);let a=e[ui];a!==null&&a.insertView(n),lg(e),e[ge]|=128}function Q1(n,e){let t=n[sa],r=e[Gt];if(di(r))n[ge]|=2;else{let i=r[Gt][mr];e[mr]!==i&&(n[ge]|=2)}t===null?n[sa]=[e]:t.push(e)}var ss=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ce];return _d(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return aa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if($r(e)){let t=e[sd],r=t?t.indexOf(this):-1;r>-1&&(Vg(e,r),Ju(t,r))}this._attachedToViewContainer=!1}G0(this._lView[ce],this._lView)}onDestroy(e){Mw(this._lView,e)}markForCheck(){J0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){lg(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,H1(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Oc(this._lView),t=this._lView[ts];t!==null&&!e&&W0(t,this._lView),R1(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=Oc(this._lView),r=this._lView[ts];r!==null&&!t&&Q1(r,this._lView),lg(this._lView)}};var as=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=JH;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=L1(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ss(o)}}return n})();function JH(){return eI(Kt(),we())}function eI(n,e){return n.type&4?new as(e,n,zc(n,e)):null}function em(n,e,t,r,i){let o=n.data[e];if(o===null)o=e5(n,e,t,r,i),XR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=GR();o.injectorIndex=s===null?-1:s.injectorIndex}return Lc(o,!0),o}function e5(n,e,t,r,i){let o=Nw(),s=kw(),a=s?o:o&&o.parent,c=n.data[e]=n5(n,a,t,e,r,i);return t5(n,c,o,s),c}function t5(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function n5(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return qR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Yue=new RegExp(`^(\\d+)*(${E$}|${y$})*(.*)`);var r5=()=>null,i5=()=>null;function DP(n,e){return r5(n,e)}function o5(n,e,t){return i5(n,e,t)}var Y1=class{},tm=class{},m0=class{resolveComponentFactory(e){throw new K(917,!1)}},bd=class{static NULL=new m0},da=class{},Ir=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>s5()}return n})();function s5(){let n=we(),e=Kt(),t=_r(e.index,n);return(di(t)?t:n)[ut]}var Z1=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var Dg={},v0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Dg,r);return i!==Dg||t===Dg?i:this.parentInjector.get(e,t,r)}};function SP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tg(i,a);else if(o==2){let c=a,u=e[++s];r=tg(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ne(n,e=0){let t=we();if(t===null)return he(n,e);let r=Kt();return e1(r,t,nn(n),e)}function tI(){let n="invalid";throw new Error(n)}function X1(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}l5(n,e,t,a,o,c,u)}o!==null&&r!==null&&a5(t,r,o)}function a5(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}function c5(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function l5(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let p=0;p<a;p++){let m=r[p];!c&&hi(m)&&(c=!0,c5(n,t,p)),o0(Rg(t,e),n,m.type)}g5(t,n.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let u=!1,d=!1,h=b1(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(t.mergedAttrs=md(t.mergedAttrs,m.hostAttrs),d5(n,t,e,h,m),p5(h,m,i),s!==null&&s.has(m)){let[N,k]=s.get(m);t.directiveToIndex.set(m.type,[h,N+t.directiveStart,k+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,h);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let b=m.type.prototype;!u&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}u5(n,t,o)}function u5(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))AP(0,e,i,r),AP(1,e,i,r),MP(e,r,!1);else{let o=t.get(i);xP(0,e,o,r),xP(1,e,o,r),MP(e,r,!0)}}}function AP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),J1(e,o)}}function xP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),J1(e,s)}}function J1(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function MP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||V0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function d5(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qo(i.type,!0)),s=new ua(o,hi(i),ne,null);n.blueprint[r]=s,t[r]=s,h5(n,e,r,b1(n,t,i.hostVars,Pn),i)}function h5(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;f5(s)!=a&&s.push(a),s.push(t,r,o)}}function f5(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function p5(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;hi(e)&&(t[""]=n)}}function g5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function nI(n,e,t,r,i,o,s,a){let c=e[ce],u=c.consts,d=is(u,s),h=em(c,n,t,r,d);return o&&X1(c,e,h,is(u,a),i),h.mergedAttrs=md(h.mergedAttrs,h.attrs),h.attrs!==null&&SP(h,h.attrs,!1),h.mergedAttrs!==null&&SP(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function rI(n,e){zP(n,e),Tw(e)&&n.queries.elementEnd(e)}function iI(n){return nm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function eN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function nm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function oI(n,e,t){return n[e]=t}function Er(n,e,t){if(t===Pn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function sI(n,e,t,r){let i=Er(n,e,t);return Er(n,e+1,r)||i}function m5(n,e,t,r,i){let o=sI(n,e,t,r);return Er(n,e+2,i)||o}function Yw(n,e,t){return function r(i){let o=rs(n)?_r(n.index,e):e;J0(o,5);let s=e[rn],a=RP(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=RP(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function RP(n,e,t,r){let i=ye(null);try{return Qe(6,e,t),t(r)!==!1}catch(o){return kH(n,o),!1}finally{Qe(7,e,t),ye(i)}}function v5(n,e,t,r,i,o,s,a){let c=kc(n),u=!1,d=null;if(!r&&c&&(d=y5(e,t,o,n.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let h=Hr(n,t),p=r?r(h):h;I$(t,p,o,a);let m=i.listen(p,o,a);if(!_5(o)){let b=r?N=>r(vr(N[n.index])):n.index;tN(b,e,t,o,a,m,!1)}}return u}function _5(n){return n.startsWith("animation")||n.startsWith("transition")}function y5(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Pc],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function tN(n,e,t,r,i,o,s){let a=e.firstCreatePass?Pw(e):null,c=Rw(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function PP(n,e,t,r,i,o){let s=e[t],a=e[ce],u=a.data[t].outputs[r],h=s[u].subscribe(o);tN(n.index,a,e,i,o,h,!0)}var _0=Symbol("BINDING");var Ug=class extends bd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=to(e);return new ha(t,this.ngModule)}};function E5(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Qg.SignalBased)!==0};return i&&(o.transform=i),o})}function w5(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function I5(n,e,t){let r=e instanceof Tt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new v0(t,r):t}function b5(n){let e=n.get(da,null);if(e===null)throw new K(407,!1);let t=n.get(Z1,null),r=n.get(Xi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function C5(n,e){let t=nN(n);return g1(e,t,t==="svg"?kR:t==="math"?OR:null)}function nN(n){return(n.selectors[0][0]||"div").toLowerCase()}var ha=class extends tm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=E5(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=w5(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=W$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Qe(22);let a=ye(null);try{let c=this.componentDef,u=T5(r,c,s,o),d=I5(c,i||this.ngModule,e),h=b5(d),p=h.rendererFactory.createRenderer(null,c),m=r?IH(p,r,c.encapsulation,d):C5(c,p),b=s?.some(NP)||o?.some(B=>typeof B!="function"&&B.bindings.some(NP)),N=j0(null,u,null,512|I1(c),null,null,h,p,d,null,d1(m,d,!0));N[wt]=m,pg(N);let k=null;try{let B=nI(wt,N,2,"#host",()=>u.directiveRegistry,!0,0);v1(p,m,B),Bc(m,N),Xg(u,N,B),O0(u,B,N),rI(u,B),t!==void 0&&S5(B,this.ngContentSelectors,t),k=_r(B.index,N),N[rn]=k[rn],X0(u,N,null)}catch(B){throw k!==null&&a0(k),a0(N),B}finally{Qe(23),gg()}return new jg(this.componentType,N,!!b)}finally{ye(a)}}};function T5(n,e,t,r){let i=n?["ng-version","20.3.15"]:G$(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[_0].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let p of h.bindings){a+=p[_0].requiredVars;let m=d+1;p.create&&(p.targetIdx=m,(o??=[]).push(p)),p.update&&(p.targetIdx=m,(s??=[]).push(p))}}let c=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,p=yw(h);c.push(p)}return U0(0,null,D5(o,s),1,a,c,null,null,null,[i],null)}function D5(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function NP(n){let e=n[_0].kind;return e==="input"||e==="twoWay"}var jg=class extends Y1{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ad(t[ce],wt),this.location=zc(this._tNode,t),this.instance=_r(this._tNode.index,t)[rn],this.hostView=this.changeDetectorRef=new ss(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Z0(r,i[ce],i,e,t);this.previousInputValues.set(e,t);let s=_r(r.index,i);J0(s,1)}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function S5(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var oo=(()=>{class n{static __NG_ELEMENT_ID__=A5}return n})();function A5(){let n=Kt();return iN(n,we())}var x5=oo,rN=class extends x5{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zc(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){let e=M0(this._hostTNode,this._hostLView);if(KP(e)){let t=xg(e,this._hostLView),r=Ag(e),i=t[ce].data[r+8];return new la(i,t)}else return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=DP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,p0(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!G4(e),u;if(c)u=t;else{let k=t||{};u=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef,s=k.directives,a=k.bindings}let d=c?e:new ha(to(e)),h=r||this.parentInjector;if(!o&&d.ngModule==null){let B=(c?h:this.parentInjector).get(Tt,null);B&&(o=B)}let p=to(d.componentType??{}),m=DP(this._lContainer,p?.id??null),b=m?.firstChild??null,N=d.create(h,i,b,o,s,a);return this.insertImpl(N.hostView,u,p0(this._hostTNode,m)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(LR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Gt],u=new rN(c,c[gr],c[Gt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return K1(s,i,o,r),e.attachToViewContainerRef(),gw(Zw(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Vg(this._lContainer,t);r&&(Ju(Zw(this._lContainer),t),G0(r[ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=Vg(this._lContainer,t);return r&&Ju(Zw(this._lContainer),t)!=null?new ss(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kP(n){return n[sd]}function Zw(n){return n[sd]||(n[sd]=[])}function iN(n,e){let t,r=e[n.index];return $r(r)?t=r:(t=G1(r,e,null,n),e[n.index]=t,B0(e,t)),R5(t,e,n,r),new rN(t,n,e)}function M5(n,e){let t=n[ut],r=t.createComment(""),i=Hr(e,n),o=t.parentNode(i);return kg(t,o,r,t.nextSibling(i),!1),r}var R5=k5,P5=()=>!1;function N5(n,e,t){return P5(n,e,t)}function k5(n,e,t,r){if(n[ns])return;let i;t.type&8?i=vr(r):i=M5(e,t),n[ns]=i}var y0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},E0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)aI(e,t).matches!==null&&this.queries[t].setDirty()}},w0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=$5(e):this.predicate=e}},I0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},b0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,O5(t,o)),this.matchTNodeWithReadOption(e,t,Tg(t,e,o,!1,!1))}else r===as?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Tg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===gn||i===oo||i===as&&t.type&4)this.addMatch(t.index,-2);else{let o=Tg(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function O5(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function F5(n,e){return n.type&11?zc(n,e):n.type&4?eI(n,e):null}function L5(n,e,t,r){return t===-1?F5(e,n):t===-2?V5(n,e,r):vd(n,n[ce],t,e)}function V5(n,e,t){if(t===gn)return zc(e,n);if(t===as)return eI(e,n);if(t===oo)return iN(e,n)}function oN(n,e,t,r){let i=e[ui].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(L5(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function C0(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=oN(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let h=fn;h<d.length;h++){let p=d[h];p[ts]===p[Gt]&&C0(p[ce],p,u,r)}if(d[sa]!==null){let h=d[sa];for(let p=0;p<h.length;p++){let m=h[p];C0(m[ce],m,u,r)}}}}}return r}function U5(n,e){return n[ui].queries[e].queryList}function j5(n,e,t){let r=new Pg((t&4)===4);return jR(n,e,r,r.destroy),(e[ui]??=new E0).queries.push(new y0(r))-1}function B5(n,e,t,r){let i=Nt();if(i.firstCreatePass){let o=Kt();H5(i,new w0(e,t,r),o.index),q5(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return j5(i,we(),t)}function $5(n){return n.split(",").map(e=>e.trim())}function H5(n,e,t){n.queries===null&&(n.queries=new I0),n.queries.track(new b0(e,t))}function q5(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function aI(n,e){return n.queries.getByIndex(e)}function z5(n,e){let t=n[ce],r=aI(t,e);return r.crossesNgTemplate?C0(t,n,e,[]):oN(t,n,r,e)}var fa=class{},rm=class{};var Bg=class extends fa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ug(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=_w(e);this._bootstrapComponents=E1(o.bootstrap),this._r3Injector=jw(e,t,[{provide:fa,useValue:this},{provide:bd,useValue:this.componentFactoryResolver},...r],Zi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$g=class extends rm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Bg(this.moduleType,e,[])}};var yd=class extends fa{injector;componentFactoryResolver=new Ug(this);instance=null;constructor(e){super();let t=new ta([...e.providers,{provide:fa,useValue:this},{provide:bd,useValue:this.componentFactoryResolver}],e.parent||td(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gc(n,e,t=null){return new yd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var W5=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ew(!1,t.type),i=r.length>0?Gc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(he(Tt))})}return n})();function Ve(n){return qc(()=>{let e=sN(n),t=le(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===R0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(W5).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ro.Emulated,styles:n.styles||Rn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&gi("NgStandalone"),aN(t);let r=n.dependencies;return t.directiveDefs=OP(r,G5),t.pipeDefs=OP(r,DR),t.id=Y5(t),t})}function G5(n){return to(n)||yw(n)}function Gr(n){return qc(()=>({type:n.type,bootstrap:n.bootstrap||Rn,declarations:n.declarations||Rn,imports:n.imports||Rn,exports:n.exports||Rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function K5(n,e){if(n==null)return Jo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Qg.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function Q5(n){if(n==null)return Jo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tt(n){return qc(()=>{let e=sN(n);return aN(e),e})}function Cd(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function sN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Jo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:K5(n.inputs,e),outputs:Q5(n.outputs),debugInfo:null}}function aN(n){n.features?.forEach(e=>e(n))}function OP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Y5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Z5(n){return Object.getPrototypeOf(n.prototype).constructor}function $n(n){let e=Z5(n.type),t=!0,r=[n];for(;e;){let i;if(hi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Xw(n.inputs),s.declaredInputs=Xw(n.declaredInputs),s.outputs=Xw(n.outputs);let a=i.hostBindings;a&&n6(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&e6(n,c),u&&t6(n,u),X5(n,i),vR(n.outputs,i.outputs),hi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===$n&&(t=!1)}}e=Object.getPrototypeOf(e)}J5(r)}function X5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function J5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=md(i.hostAttrs,t=md(t,i.hostAttrs))}}function Xw(n){return n===Jo?{}:n===Rn?[]:n}function e6(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function t6(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function n6(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cN(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=md(n.mergedAttrs,n.attrs);let d=n.tView=U0(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Lc(n,!1);let c=i6(t,e,n,r);vg()&&K0(t,e,c,n),Bc(c,e);let u=G1(c,e,c,n);e[r+wt]=u,B0(e,u),N5(u,n,e)}function r6(n,e,t,r,i,o,s,a,c,u,d){let h=t+wt,p;return e.firstCreatePass?(p=em(e,h,4,s||null,a||null),ug()&&X1(e,n,p,is(e.consts,u),Y0),zP(e,p)):p=e.data[h],cN(p,n,e,t,r,i,o,c),kc(p)&&Xg(e,n,p),u!=null&&Jg(n,p,d),p}function lN(n,e,t,r,i,o,s,a,c,u,d){let h=t+wt,p;if(e.firstCreatePass){if(p=em(e,h,4,s||null,a||null),u!=null){let m=is(e.consts,u);p.localNames=[];for(let b=0;b<m.length;b+=2)p.localNames.push(m[b],-1)}}else p=e.data[h];return cN(p,n,e,t,r,i,o,c),u!=null&&Jg(n,p,d),p}function W(n,e,t,r,i,o,s,a){let c=we(),u=Nt(),d=is(u.consts,o);return r6(c,u,n,e,t,r,i,d,void 0,s,a),W}var i6=o6;function o6(n,e,t,r){return dd(!0),e[ut].createComment("")}var cI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var lI=new Z("");function so(n){return!!n&&typeof n.then=="function"}function im(n){return!!n&&typeof n.subscribe=="function"}var uI=new Z("");function om(n){return Bn([{provide:uI,multi:!0,useValue:n}])}var dI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(uI,{optional:!0})??[];injector=S(Et);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Pt(this.injector,i);if(so(o))t.push(o);else if(im(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Td=new Z("");function uN(){xE(()=>{let n="";throw new K(600,n)})}function dN(n){return n.isBoundToModule}var s6=10;var ao=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(pn);afterRenderManager=S(z0);zonelessEnabled=S(hd);rootEffectScheduler=S(Ww);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new bt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(fi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ie(t=>!t))}constructor(){S(ma,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(Tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Et.NULL){return this._injector.get($e).run(()=>{Qe(10);let s=t instanceof tm;if(!this._injector.get(dI).done){let b="";throw new K(405,b)}let c;s?c=t:c=this._injector.get(bd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=dN(c)?void 0:this._injector.get(fa),d=r||c.selector,h=c.create(i,[],d,u),p=h.location.nativeElement,m=h.injector.get(lI,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),gd(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),Qe(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Qe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new K(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(t),this.afterTick.next(),Qe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(da,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<s6;)Qe(14),this.synchronizeOnce(),Qe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ld(i))continue;let o=r&&!this.zonelessEnabled?0:1;H1(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ld(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Td,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mi(n,e,t,r){let i=we(),o=ca();if(Er(i,o,e)){let s=Nt(),a=mg();RH(a,i,n,e,t,r)}return mi}var rde=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function mn(n,e,t,r,i,o,s,a){gi("NgControlFlow");let c=we(),u=Nt(),d=is(u.consts,o);return lN(c,u,n,e,t,r,i,d,256,s,a),hI}function hI(n,e,t,r,i,o,s,a){gi("NgControlFlow");let c=we(),u=Nt(),d=is(u.consts,o);return lN(c,u,n,e,t,r,i,d,512,s,a),hI}function vn(n,e){gi("NgControlFlow");let t=we(),r=ca(),i=t[r]!==Pn?t[r]:-1,o=i!==-1?FP(t,wt+i):void 0,s=0;if(Er(t,r,n)){let a=ye(null);try{if(o!==void 0&&ZH(o,s),n!==-1){let c=wt+n,u=FP(t,c),d=a6(t[ce],c),h=o5(u,d,t),p=L1(t,d,e,{dehydratedView:h});K1(u,p,s,p0(d,h))}}finally{ye(a)}}else if(o!==void 0){let a=YH(o,s);a!==void 0&&(a[rn]=e)}}function FP(n,e){return n[e]}function a6(n,e){return ad(n,e)}function M(n,e,t){let r=we(),i=ca();if(Er(r,i,e)){let o=Nt(),s=mg();k1(s,r,n,e,r[ut],t)}return M}function T0(n,e,t,r,i){Z0(e,n,t,i?"class":"style",r)}function y(n,e,t,r){let i=we(),o=i[ce],s=n+wt,a=o.firstCreatePass?nI(s,i,2,e,Y0,ug(),t,r):o.data[s];if(O1(a,i,n,e,c6),kc(a)){let c=i[ce];Xg(c,i,a),O0(c,a,i)}return r!=null&&Jg(i,a),y}function _(){let n=Nt(),e=Kt(),t=F1(e);return n.firstCreatePass&&rI(n,t),zR(t)&&WR(),HR(),t.classesWithoutHost!=null&&J4(t)&&T0(n,t,we(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&e$(t)&&T0(n,t,we(),t.stylesWithoutHost,!1),_}function ae(n,e,t,r){return y(n,e,t,r),_(),ae}var c6=(n,e,t,r,i)=>(dd(!0),g1(e[ut],r,sP()));function co(n,e,t){let r=we(),i=r[ce],o=n+wt,s=i.firstCreatePass?nI(o,r,8,"ng-container",Y0,ug(),e,t):i.data[o];if(O1(s,r,n,"ng-container",l6),kc(s)){let a=r[ce];Xg(a,r,s),O0(a,s,r)}return t!=null&&Jg(r,s),co}function lo(){let n=Nt(),e=Kt(),t=F1(e);return n.firstCreatePass&&rI(n,t),lo}var l6=(n,e,t,r,i)=>(dd(!0),P$(e[ut],""));function me(){return we()}var wg=void 0;function u6(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var d6=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wg,"{1} 'at' {0}",wg],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",u6],Jw={};function sr(n){let e=h6(n),t=LP(e);if(t)return t;let r=e.split("-")[0];if(t=LP(r),t)return t;if(r==="en")return d6;throw new K(701,!1)}function LP(n){return n in Jw||(Jw[n]=Ji.ng&&Ji.ng.common&&Ji.ng.common.locales&&Ji.ng.common.locales[n]),Jw[n]}var St=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(St||{});function h6(n){return n.toLowerCase().replace(/_/g,"-")}var Dd="en-US";var f6=Dd;function hN(n){typeof n=="string"&&(f6=n.toLowerCase().replace(/_/g,"-"))}function $(n,e,t){let r=we(),i=Nt(),o=Kt();return fN(i,r,r[ut],o,n,e,t),$}function fN(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Yw(r,e,o),v5(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let p=d[h],m=d[h+1];c??=Yw(r,e,o),PP(r,e,p,m,i,c)}if(u&&u.length)for(let h of u)c??=Yw(r,e,o),PP(r,e,h,i,i,c)}}function F(n=1){return oP(n)}function fI(n,e,t,r){B5(n,e,t,r)}function pI(n){let e=we(),t=Nt(),r=Lw();fg(r+1);let i=aI(t,r);if(n.dirty&&FR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=z5(e,r);n.reset(o,f$),n.notifyOnChanges()}return!0}return!1}function gI(){return U5(we(),Lw())}function mI(n){let e=QR();return cd(e,wt+n)}function Ig(n,e){return n<<17|e<<2}function pa(n){return n>>17&32767}function p6(n){return(n&2)==2}function g6(n,e){return n&131071|e<<17}function D0(n){return n|2}function Hc(n){return(n&131068)>>2}function e0(n,e){return n&-131069|e<<2}function m6(n){return(n&1)===1}function S0(n){return n|1}function v6(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pa(s),c=Hc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||Rc(h,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let p=pa(n[a+1]);n[r+1]=Ig(p,a),p!==0&&(n[p+1]=e0(n[p+1],r)),n[a+1]=g6(n[a+1],r)}else n[r+1]=Ig(a,0),a!==0&&(n[a+1]=e0(n[a+1],r)),a=r;else n[r+1]=Ig(c,0),a===0?a=r:n[c+1]=e0(n[c+1],r),c=r;u&&(n[r+1]=D0(n[r+1])),VP(n,d,r,!0),VP(n,d,r,!1),_6(e,d,n,r,o),s=Ig(a,c),o?e.classBindings=s:e.styleBindings=s}function _6(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Rc(o,e)>=0&&(t[r+1]=S0(t[r+1]))}function VP(n,e,t,r){let i=n[t+1],o=e===null,s=r?pa(i):Hc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];y6(c,e)&&(a=!0,n[s+1]=r?S0(u):D0(u)),s=r?pa(u):Hc(u)}a&&(n[t+1]=r?D0(i):S0(i))}function y6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Rc(n,e)>=0:!1}var zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function E6(n){return n.substring(zr.key,zr.keyEnd)}function w6(n){return I6(n),pN(n,gN(n,0,zr.textEnd))}function pN(n,e){let t=zr.textEnd;return t===e?-1:(e=zr.keyEnd=b6(n,zr.key=e,t),gN(n,e,t))}function I6(n){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=n.length}function gN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function b6(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function vi(n,e,t){return mN(n,e,t,!1),vi}function at(n,e){return mN(n,e,null,!0),at}function vI(n){T6(R6,C6,n,!0)}function C6(n,e){for(let t=w6(e);t>=0;t=pN(e,t))og(n,E6(e),!0)}function mN(n,e,t,r){let i=we(),o=Nt(),s=dg(2);if(o.firstUpdatePass&&_N(o,n,s,r),e!==Pn&&Er(i,s,e)){let a=o.data[no()];yN(o,a,i,i[ut],n,i[s+1]=N6(e,t),r,s)}}function T6(n,e,t,r){let i=Nt(),o=dg(2);i.firstUpdatePass&&_N(i,null,o,r);let s=we();if(t!==Pn&&Er(s,o,t)){let a=i.data[no()];if(EN(a,r)&&!vN(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=tg(c,t||"")),T0(i,a,s,t,r)}else P6(i,a,s,s[ut],s[o+1],s[o+1]=M6(n,e,t),r,o)}}function vN(n,e){return e>=n.expandoStartIndex}function _N(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[no()],s=vN(n,t);EN(o,r)&&e===null&&!s&&(e=!1),e=D6(i,o,e,r),v6(i,o,e,t,s,r)}}function D6(n,e,t,r){let i=tP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=t0(null,n,e,t,r),t=Ed(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=t0(i,n,e,t,r),o===null){let c=S6(n,e,r);c!==void 0&&Array.isArray(c)&&(c=t0(null,n,e,c[1],r),c=Ed(c,e.attrs,r),A6(n,e,r,c))}else o=x6(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function S6(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Hc(r)!==0)return n[pa(r)]}function A6(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[pa(i)]=r}function x6(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ed(r,s,t)}return Ed(r,e.attrs,t)}function t0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ed(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ed(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),og(n,s,t?!0:e[++o]))}return n===void 0?null:n}function M6(n,e,t){if(t==null||t==="")return Rn;let r=[],i=Wc(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function R6(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&og(n,r,t)}function P6(n,e,t,r,i,o,s,a){i===Pn&&(i=Rn);let c=0,u=0,d=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,m=u<o.length?o[u+1]:void 0,b=null,N;d===h?(c+=2,u+=2,p!==m&&(b=h,N=m)):h===null||d!==null&&d<h?(c+=2,b=d):(u+=2,b=h,N=m),b!==null&&yN(n,e,t,r,b,N,s,a),d=c<i.length?i[c]:null,h=u<o.length?o[u]:null}}function yN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=m6(u)?UP(c,e,t,i,Hc(u),s):void 0;if(!Hg(d)){Hg(o)||p6(u)&&(o=UP(c,null,t,i,a,s));let h=Dw(no(),t);wH(r,s,h,i,o)}}function UP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,h=d===null,p=t[i+1];p===Pn&&(p=h?Rn:void 0);let m=h?sg(p,r):d===r?p:void 0;if(u&&!Hg(m)&&(m=sg(c,r)),Hg(m)&&(a=m,s))return a;let b=n[i+1];i=s?pa(b):Hc(b)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=sg(c,r))}return a}function Hg(n){return n!==void 0}function N6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Zi(Wc(n)))),n}function EN(n,e){return(n.flags&(e?8:16))!==0}function I(n,e=""){let t=we(),r=Nt(),i=n+wt,o=r.firstCreatePass?em(r,i,1,e,null):r.data[i],s=k6(r,t,o,e,n);t[i]=s,vg()&&K0(r,t,s,o),Lc(o,!1)}var k6=(n,e,t,r,i)=>(dd(!0),M$(e[ut],r));function wN(n,e,t,r=""){return Er(n,ca(),t)?e+Xo(t)+r:Pn}function O6(n,e,t,r,i,o=""){let s=YR(),a=sI(n,s,t,i);return dg(2),a?e+Xo(t)+r+Xo(i)+o:Pn}function Re(n){return ve("",n),Re}function ve(n,e,t){let r=we(),i=wN(r,n,e,t);return i!==Pn&&IN(r,no(),i),ve}function Kc(n,e,t,r,i){let o=we(),s=O6(o,n,e,t,r,i);return s!==Pn&&IN(o,no(),s),Kc}function IN(n,e,t){let r=Dw(e,n);R$(n[ut],r,t)}function br(n,e,t){Hw(e)&&(e=e());let r=we(),i=ca();if(Er(r,i,e)){let o=Nt(),s=mg();k1(s,r,n,e,r[ut],t)}return br}function Kr(n,e){let t=Hw(n);return t&&n.set(e),t}function Cr(n,e){let t=we(),r=Nt(),i=Kt();return fN(r,t,t[ut],i,n,e),Cr}function uo(n){return Er(we(),ca(),n)?Xo(n):Pn}function Qc(n,e,t=""){return wN(we(),n,e,t)}function F6(n,e,t){let r=Nt();if(r.firstCreatePass){let i=hi(n);A0(t,r.data,r.blueprint,i,!0),A0(e,r.data,r.blueprint,i,!1)}}function A0(n,e,t,r,i){if(n=nn(n),Array.isArray(n))for(let o=0;o<n.length;o++)A0(n[o],e,t,r,i);else{let o=Nt(),s=we(),a=Kt(),c=ea(n)?n:nn(n.provide),u=Iw(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(ea(n)||!n.multi){let m=new ua(u,i,ne,null),b=r0(c,e,i?d:d+p,h);b===-1?(o0(Rg(a,s),o,c),n0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[b]=m,s[b]=m)}else{let m=r0(c,e,d+p,h),b=r0(c,e,d,d+p),N=m>=0&&t[m],k=b>=0&&t[b];if(i&&!k||!i&&!N){o0(Rg(a,s),o,c);let B=U6(i?V6:L6,t.length,i,r,u,n);!i&&k&&(t[b].providerFactory=B),n0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=bN(t[i?b:m],u,!i&&r);n0(o,n,m>-1?m:b,B)}!i&&r&&k&&t[b].componentProviders++}}}function n0(n,e,t,r){let i=ea(e),o=RR(e);if(i||o){let c=(o?nn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function bN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function r0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function L6(n,e,t,r,i){return x0(this.multi,[])}function V6(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=vd(r,r[ce],this.providerFactory.index,i);s=c.slice(0,a),x0(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],x0(o,s);return s}function x0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function U6(n,e,t,r,i,o){let s=new ua(n,t,ne,null);return s.multi=[],s.index=e,s.componentProviders=0,bN(s,i,r&&!t),s}function _i(n,e=[]){return t=>{t.providersResolver=(r,i)=>F6(r,i?i(n):n,e)}}function _n(n,e,t,r){return CN(we(),ud(),n,e,t,r)}function _I(n,e){let t=n[e];return t===Pn?void 0:t}function CN(n,e,t,r,i,o){let s=e+t;return Er(n,s,i)?oI(n,s+1,o?r.call(o,i):r(i)):_I(n,s+1)}function j6(n,e,t,r,i,o,s){let a=e+t;return sI(n,a,i,o)?oI(n,a+2,s?r.call(s,i,o):r(i,o)):_I(n,a+2)}function B6(n,e,t,r,i,o,s,a){let c=e+t;return m5(n,c,i,o,s)?oI(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):_I(n,c+3)}function ho(n,e){let t=Nt(),r,i=n+wt;t.firstCreatePass?(r=$6(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Qo(r.type,!0)),s,a=Mn(ne);try{let c=Mg(!1),u=o();return Mg(c),Sw(t,we(),i,u),u}finally{Mn(a)}}function $6(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function yI(n,e,t){let r=n+wt,i=we(),o=cd(i,r);return wI(i,r)?CN(i,ud(),e,o.transform,t,o):o.transform(t)}function EI(n,e,t,r){let i=n+wt,o=we(),s=cd(o,i);return wI(o,i)?j6(o,ud(),e,s.transform,t,r,s):s.transform(t,r)}function Sd(n,e,t,r,i){let o=n+wt,s=we(),a=cd(s,o);return wI(s,o)?B6(s,ud(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function wI(n,e){return n[ce].data[e].pure}var qg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},II=(()=>{class n{compileModuleSync(t){return new $g(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_w(t),o=E1(i.declarations).reduce((s,a)=>{let c=to(a);return c&&s.push(new ha(c)),s},[]);return new qg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var H6=(()=>{class n{zone=S($e);changeDetectionScheduler=S(Xi);applicationRef=S(ao);applicationErrorHandler=S(pn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TN=new Z("",{factory:()=>!1});function bI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new $e(le(U({},TI()),{scheduleInRootZone:t})),[{provide:$e,useFactory:n},{provide:eo,multi:!0,useFactory:()=>{let r=S(H6,{optional:!0});return()=>r.initialize()}},{provide:eo,multi:!0,useFactory:()=>{let r=S(q6);return()=>{r.initialize()}}},e===!0?{provide:qw,useValue:!0}:[],{provide:zw,useValue:t??T1},{provide:pn,useFactory:()=>{let r=S($e),i=S(Tt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(jr),o.handleError(s))})}}}]}function CI(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=bI({ngZoneFactory:()=>{let i=TI(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&gi("NgZone_CoalesceEvent"),new $e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Bn([{provide:TN,useValue:!0},{provide:hd,useValue:!1},r])}function TI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var q6=(()=>{class n{subscription=new yt;initialized=!1;zone=S($e);pendingTasks=S(fi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DN=(()=>{class n{applicationErrorHandler=S(pn);appRef=S(ao);taskService=S(fi);ngZone=S($e);zonelessEnabled=S(hd);tracing=S(ma,{optional:!0});disableScheduling=S(qw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new yt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Og):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(zw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?EP:D1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Og+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,EP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z6(){return typeof $localize<"u"&&$localize.locale||Dd}var Ad=new Z("",{providedIn:"root",factory:()=>S(Ad,{optional:!0,skipSelf:!0})||z6()});function At(n){return pR(n)}function va(n,e){return Ip(n,e?.equal)}var SN=class{[hn];constructor(e){this[hn]=e}destroy(){this[hn].destroy()}};var NN=Symbol("InputSignalNode#UNSET"),r8=le(U({},bp),{transformFn:void 0,applyValueToInputSignal(n,e){vc(n,e)}});function kN(n,e){let t=Object.create(r8);t.value=n,t.transformFn=e?.transform;function r(){if(pc(t),t.value===NN){let i=null;throw new K(-950,i)}return t.value}return r[hn]=t,r}var am=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>wd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},i8=new Z("");i8.__NG_ELEMENT_ID__=n=>{let e=Kt();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new K(204,!1)};function AN(n,e){return kN(n,e)}function o8(n){return kN(NN,n)}var ON=(AN.required=o8,AN);var DI=new Z(""),s8=new Z("");function xd(n){return!n.moduleRef}function a8(n){let e=xd(n)?n.r3Injector:n.moduleRef.injector,t=e.get($e);return t.run(()=>{xd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),xd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(DI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(DI);s.add(o),n.moduleRef.onDestroy(()=>{gd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return l8(r,t,()=>{let o=e.get(fi),s=o.add(),a=e.get(dI);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ad,Dd);if(hN(c||Dd),!e.get(s8,!0))return xd(n)?e.get(ao):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(xd(n)){let d=e.get(ao);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return c8?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var c8;function l8(n,e,t){try{let r=t();return so(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var sm=null;function u8(n=[],e){return Et.create({name:e,providers:[{provide:ed,useValue:"platform"},{provide:DI,useValue:new Set([()=>sm=null])},...n]})}function d8(n=[]){if(sm)return sm;let e=u8(n);return sm=e,uN(),h8(e),e}function h8(n){let e=n.get(Wg,null);Pt(n,()=>{e?.forEach(t=>t())})}function kI(){return!1}var yi=(()=>{class n{static __NG_ELEMENT_ID__=f8}return n})();function f8(n){return p8(Kt(),we(),(n&16)===16)}function p8(n,e,t){if(rs(n)&&!t){let r=_r(n.index,e);return new ss(r,r)}else if(n.type&175){let r=e[mr];return new ss(r,e)}return null}var SI=class{constructor(){}supports(e){return iI(e)}create(e){return new AI(e)}},g8=(n,e)=>e,AI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||g8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<xN(r,i,o)?t:r,a=xN(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let p=0;p<u;p++){let m=p<o.length?o[p]:o[p]=0,b=m+p;d<=b&&b<u&&(o[p]=m+1)}let h=s.previousIndex;o[h]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!iI(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,eN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new xI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},xI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},MI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new MI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var RI=class{constructor(){}supports(e){return e instanceof Map||nm(e)}create(){return new PI}},PI=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||nm(e)))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new NI(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},NI=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function MN(){return new OI([new SI])}var OI=(()=>{class n{factories;static \u0275prov=G({token:n,providedIn:"root",factory:MN});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=S(n,{optional:!0,skipSelf:!0});return n.create(t,r||MN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function RN(){return new FI([new RI])}var FI=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:RN});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=S(n,{optional:!0,skipSelf:!0});return n.create(t,r||RN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();function FN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Qe(8);try{let o=i?.injector??d8(r),s=[bI({}),{provide:Xi,useExisting:DN},cP,...t||[]],a=new yd({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return a8({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Qe(9)}}function cs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function LN(n){let e=to(n);if(!e)return null;let t=new ha(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jN=null;function Tr(){return jN}function LI(n){jN??=n}var Md=class{},Rd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(BN),providedIn:"platform"})}return n})(),VI=new Z(""),BN=(()=>{class n extends Rd{_location;_history;_doc=S(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tr().getBaseHref(this._doc)}onPopState(t){let r=Tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function lm(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function VN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qr(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(dm),providedIn:"root"})}return n})(),um=new Z(""),dm=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(he(Rd),he(um,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ls=(()=>{class n{_subject=new bt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=_8(VN(UN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(v8(this._basePath,UN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qr;static joinWithSlash=lm;static stripTrailingSlash=VN;static \u0275fac=function(r){return new(r||n)(he(Yr))};static \u0275prov=G({token:n,factory:()=>m8(),providedIn:"root"})}return n})();function m8(){return new ls(he(Yr))}function v8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UN(n){return n.replace(/\/index.html$/,"")}function _8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var qI=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=lm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(he(Rd),he(um,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();var yn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(yn||{}),Ye=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ye||{}),Hn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Hn||{}),po={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function zN(n){return sr(n)[St.LocaleId]}function WN(n,e,t){let r=sr(n),i=[r[St.DayPeriodsFormat],r[St.DayPeriodsStandalone]],o=Dr(i,e);return Dr(o,t)}function GN(n,e,t){let r=sr(n),i=[r[St.DaysFormat],r[St.DaysStandalone]],o=Dr(i,e);return Dr(o,t)}function KN(n,e,t){let r=sr(n),i=[r[St.MonthsFormat],r[St.MonthsStandalone]],o=Dr(i,e);return Dr(o,t)}function QN(n,e){let r=sr(n)[St.Eras];return Dr(r,e)}function Pd(n,e){let t=sr(n);return Dr(t[St.DateFormat],e)}function Nd(n,e){let t=sr(n);return Dr(t[St.TimeFormat],e)}function kd(n,e){let r=sr(n)[St.DateTimeFormat];return Dr(r,e)}function Od(n,e){let t=sr(n),r=t[St.NumberSymbols][e];if(typeof r>"u"){if(e===po.CurrencyDecimal)return t[St.NumberSymbols][po.Decimal];if(e===po.CurrencyGroup)return t[St.NumberSymbols][po.Group]}return r}function YN(n){if(!n[St.ExtraData])throw new K(2303,!1)}function ZN(n){let e=sr(n);return YN(e),(e[St.ExtraData][2]||[]).map(r=>typeof r=="string"?UI(r):[UI(r[0]),UI(r[1])])}function XN(n,e,t){let r=sr(n);YN(r);let i=[r[St.ExtraData][0],r[St.ExtraData][1]],o=Dr(i,e)||[];return Dr(o,t)||[]}function Dr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new K(2304,!1)}function UI(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var y8=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hm={},E8=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function JN(n,e,t,r){let i=x8(n);e=fo(t,e)||e;let s=[],a;for(;e;)if(a=E8.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=tk(r,c),i=A8(i,r));let u="";return s.forEach(d=>{let h=D8(d);u+=h?h(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function vm(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function fo(n,e){let t=zN(n);if(hm[t]??={},hm[t][e])return hm[t][e];let r="";switch(e){case"shortDate":r=Pd(n,Hn.Short);break;case"mediumDate":r=Pd(n,Hn.Medium);break;case"longDate":r=Pd(n,Hn.Long);break;case"fullDate":r=Pd(n,Hn.Full);break;case"shortTime":r=Nd(n,Hn.Short);break;case"mediumTime":r=Nd(n,Hn.Medium);break;case"longTime":r=Nd(n,Hn.Long);break;case"fullTime":r=Nd(n,Hn.Full);break;case"short":let i=fo(n,"shortTime"),o=fo(n,"shortDate");r=fm(kd(n,Hn.Short),[i,o]);break;case"medium":let s=fo(n,"mediumTime"),a=fo(n,"mediumDate");r=fm(kd(n,Hn.Medium),[s,a]);break;case"long":let c=fo(n,"longTime"),u=fo(n,"longDate");r=fm(kd(n,Hn.Long),[c,u]);break;case"full":let d=fo(n,"fullTime"),h=fo(n,"fullDate");r=fm(kd(n,Hn.Full),[d,h]);break}return r&&(hm[t][e]=r),r}function fm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Zr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function w8(n,e){return Zr(n,3).substring(0,e)}function kt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=I8(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return w8(a,e);let c=Od(s,po.MinusSign);return Zr(a,e,c,r,i)}}function I8(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new K(2301,!1)}}function ct(n,e,t=yn.Format,r=!1){return function(i,o){return b8(i,o,n,e,t,r)}}function b8(n,e,t,r,i,o){switch(t){case 2:return KN(e,i,r)[n.getMonth()];case 1:return GN(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=ZN(e),d=XN(e,i,r),h=u.findIndex(p=>{if(Array.isArray(p)){let[m,b]=p,N=s>=m.hours&&a>=m.minutes,k=s<b.hours||s===b.hours&&a<b.minutes;if(m.hours<b.hours){if(N&&k)return!0}else if(N||k)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return WN(e,i,r)[s<12?0:1];case 3:return QN(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new K(2302,!1)}}function pm(n){return function(e,t,r){let i=-1*r,o=Od(t,po.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Zr(s,2,o)+Zr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Zr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Zr(s,2,o)+":"+Zr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Zr(s,2,o)+":"+Zr(Math.abs(i%60),2,o);default:throw new K(2310,!1)}}}var C8=0,mm=4;function T8(n){let e=vm(n,C8,1).getDay();return vm(n,0,1+(e<=mm?mm:mm+7)-e)}function ek(n){let e=n.getDay(),t=e===0?-3:mm-e;return vm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function jI(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=ek(t),s=T8(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Zr(i,n,Od(r,po.MinusSign))}}function gm(n,e=!1){return function(t,r){let o=ek(t).getFullYear();return Zr(o,n,Od(r,po.MinusSign),e)}}var BI={};function D8(n){if(BI[n])return BI[n];let e;switch(n){case"G":case"GG":case"GGG":e=ct(3,Ye.Abbreviated);break;case"GGGG":e=ct(3,Ye.Wide);break;case"GGGGG":e=ct(3,Ye.Narrow);break;case"y":e=kt(0,1,0,!1,!0);break;case"yy":e=kt(0,2,0,!0,!0);break;case"yyy":e=kt(0,3,0,!1,!0);break;case"yyyy":e=kt(0,4,0,!1,!0);break;case"Y":e=gm(1);break;case"YY":e=gm(2,!0);break;case"YYY":e=gm(3);break;case"YYYY":e=gm(4);break;case"M":case"L":e=kt(1,1,1);break;case"MM":case"LL":e=kt(1,2,1);break;case"MMM":e=ct(2,Ye.Abbreviated);break;case"MMMM":e=ct(2,Ye.Wide);break;case"MMMMM":e=ct(2,Ye.Narrow);break;case"LLL":e=ct(2,Ye.Abbreviated,yn.Standalone);break;case"LLLL":e=ct(2,Ye.Wide,yn.Standalone);break;case"LLLLL":e=ct(2,Ye.Narrow,yn.Standalone);break;case"w":e=jI(1);break;case"ww":e=jI(2);break;case"W":e=jI(1,!0);break;case"d":e=kt(2,1);break;case"dd":e=kt(2,2);break;case"c":case"cc":e=kt(7,1);break;case"ccc":e=ct(1,Ye.Abbreviated,yn.Standalone);break;case"cccc":e=ct(1,Ye.Wide,yn.Standalone);break;case"ccccc":e=ct(1,Ye.Narrow,yn.Standalone);break;case"cccccc":e=ct(1,Ye.Short,yn.Standalone);break;case"E":case"EE":case"EEE":e=ct(1,Ye.Abbreviated);break;case"EEEE":e=ct(1,Ye.Wide);break;case"EEEEE":e=ct(1,Ye.Narrow);break;case"EEEEEE":e=ct(1,Ye.Short);break;case"a":case"aa":case"aaa":e=ct(0,Ye.Abbreviated);break;case"aaaa":e=ct(0,Ye.Wide);break;case"aaaaa":e=ct(0,Ye.Narrow);break;case"b":case"bb":case"bbb":e=ct(0,Ye.Abbreviated,yn.Standalone,!0);break;case"bbbb":e=ct(0,Ye.Wide,yn.Standalone,!0);break;case"bbbbb":e=ct(0,Ye.Narrow,yn.Standalone,!0);break;case"B":case"BB":case"BBB":e=ct(0,Ye.Abbreviated,yn.Format,!0);break;case"BBBB":e=ct(0,Ye.Wide,yn.Format,!0);break;case"BBBBB":e=ct(0,Ye.Narrow,yn.Format,!0);break;case"h":e=kt(3,1,-12);break;case"hh":e=kt(3,2,-12);break;case"H":e=kt(3,1);break;case"HH":e=kt(3,2);break;case"m":e=kt(4,1);break;case"mm":e=kt(4,2);break;case"s":e=kt(5,1);break;case"ss":e=kt(5,2);break;case"S":e=kt(6,1);break;case"SS":e=kt(6,2);break;case"SSS":e=kt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=pm(0);break;case"ZZZZZ":e=pm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=pm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=pm(2);break;default:return null}return BI[n]=e,e}function tk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function S8(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function A8(n,e,t){let i=n.getTimezoneOffset(),o=tk(e,i);return S8(n,-1*(o-i))}function x8(n){if($N(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return vm(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(y8))return M8(r)}let e=new Date(n);if(!$N(e))throw new K(2311,!1);return e}function M8(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function $N(n){return n instanceof Date&&!isNaN(n.valueOf())}var _m=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Sr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _m(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),HN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);HN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ne(oo),ne(as),ne(OI))};static \u0275dir=tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function HN(n,e){n.context.$implicit=e.item}var nt=(()=>{class n{_viewContainer;_context=new ym;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ne(oo),ne(as))};static \u0275dir=tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ym=class{$implicit=null;ngIf=null};function qN(n,e){if(n&&!n.createEmbeddedView)throw new K(2020,!1)}var zI=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Wr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(ne(gn),ne(FI),ne(Ir))};static \u0275dir=tt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function WI(n,e){return new K(2100,!1)}var $I=class{createSubscription(e,t,r){return At(()=>e.subscribe({next:t,error:r}))}dispose(e){At(()=>e.unsubscribe())}},HI=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},R8=new HI,P8=new $I,GI=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=S(pn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(so(t))return R8;if(im(t))return P8;throw WI(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ne(yi,16))};static \u0275pipe=Cd({name:"async",type:n,pure:!1})}return n})();var N8="mediumDate",nk=new Z(""),rk=new Z(""),KI=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??N8,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return JN(t,s,o||this.locale,a)}catch(s){throw WI(n,s.message)}}static \u0275fac=function(r){return new(r||n)(ne(Ad,16),ne(nk,24),ne(rk,24))};static \u0275pipe=Cd({name:"date",type:n,pure:!0})}return n})();var Fd=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw WI(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Cd({name:"slice",type:n,pure:!1})}return n})();var Be=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gr({type:n});static \u0275inj=fr({})}return n})();function QI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ld=class{};var ik="browser";var ok=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new YI(S(Dt),window)})}return n})(),YI=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(le(U({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=k8(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Zo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(le(U({},t),{left:i-s[0],top:o-s[1]}))}};function k8(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vd=class{_doc;constructor(e){this._doc=e}manager},Em=(()=>{class n extends Vd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(he(Dt))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Im=new Z(""),tb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Em));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Em);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(he(Im),he($e))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),ZI="ng-app-id";function sk(n){for(let e of n)e.remove()}function ak(n,e){let t=e.createElement("style");return t.textContent=n,t}function O8(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ZI}="${e}"],link[${ZI}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ZI),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function JI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var nb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,O8(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ak);r?.forEach(i=>this.addUsage(i,this.external,JI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(sk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])sk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ak(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,JI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(he(Dt),he(zg),he(Gg,8),he(ga))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),XI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rb=/%COMP%/g;var lk="%COMP%",F8=`_nghost-${lk}`,L8=`_ngcontent-${lk}`,V8=!0,U8=new Z("",{providedIn:"root",factory:()=>V8});function j8(n){return L8.replace(rb,n)}function B8(n){return F8.replace(rb,n)}function uk(n,e){return e.map(t=>t.replace(rb,n))}var ib=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Ud(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof wm?i.applyToHost(t):i instanceof jd&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case ro.Emulated:o=new wm(c,u,r,this.appId,d,s,a,h,p);break;case ro.ShadowDom:return new eb(c,u,t,r,s,a,this.nonce,h,p);default:o=new jd(c,u,r,d,s,a,h,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(he(tb),he(nb),he(zg),he(U8),he(Dt),he($e),he(Gg),he(ma,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Ud=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(XI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ck(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ck(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=XI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=XI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wr.DashCase|Wr.Important)?e.style.setProperty(t,r,i&Wr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Tr().getGlobalEventTarget(this.doc,e),!e))throw new K(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function ck(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var eb=class extends Ud{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=uk(i.id,d);for(let p of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let h=i.getExternalStyles?.();if(h)for(let p of h){let m=JI(p,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jd=class extends Ud{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?uk(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&$c.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wm=class extends jd{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=j8(d),this.hostAttr=B8(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var bm=class n extends Md{supportsDOMEvents=!0;static makeCurrent(){LI(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=$8();return t==null?null:H8(t)}resetBaseElement(){Bd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QI(document.cookie,e)}},Bd=null;function $8(){return Bd=Bd||document.head.querySelector("base"),Bd?Bd.getAttribute("href"):null}function H8(n){return new URL(n,document.baseURI).pathname}var q8=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),dk=["alt","control","meta","shift"],z8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},W8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hk=(()=>{class n extends Vd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),dk.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=z8[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),dk.forEach(s=>{if(s!==i){let a=W8[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(he(Dt))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function ob(n,e,t){let r=U({rootComponent:n,platformRef:t?.platformRef},G8(e));return FN(r)}function G8(n){return{appProviders:[...X8,...n?.providers??[]],platformProviders:Z8}}function K8(){bm.makeCurrent()}function Q8(){return new jr}function Y8(){return P0(document),document}var Z8=[{provide:ga,useValue:ik},{provide:Wg,useValue:K8,multi:!0},{provide:Dt,useFactory:Y8}];var X8=[{provide:ed,useValue:"root"},{provide:jr,useFactory:Q8},{provide:Im,useClass:Em,multi:!0,deps:[Dt]},{provide:Im,useClass:hk,multi:!0,deps:[Dt]},ib,nb,tb,{provide:da,useExisting:ib},{provide:Ld,useClass:q8},[]];var fk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(he(Dt))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _e="primary",eh=Symbol("RouteTitle"),ub=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ea(n){return new ub(n)}function wk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function eq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ei(n[t],e[t]))return!1;return!0}function Ei(n,e){let t=n?db(n):void 0,r=e?db(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ik(n[i],e[i]))return!1;return!0}function db(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ik(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function bk(n){return n.length>0?n[n.length-1]:null}function go(n){return qE(n)?n:so(n)?je(Promise.resolve(n)):se(n)}var tq={exact:Tk,subset:Dk},Ck={exact:nq,subset:rq,ignored:()=>!0};function pk(n,e,t){return tq[t.paths](n.root,e.root,t.matrixParams)&&Ck[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function nq(n,e){return Ei(n,e)}function Tk(n,e,t){if(!_a(n.segments,e.segments)||!Dm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Tk(n.children[r],e.children[r],t))return!1;return!0}function rq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ik(n[t],e[t]))}function Dk(n,e,t){return Sk(n,e,e.segments,t)}function Sk(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!_a(i,t)||e.hasChildren()||!Dm(i,t,r))}else if(n.segments.length===t.length){if(!_a(n.segments,t)||!Dm(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Dk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!_a(n.segments,i)||!Dm(n.segments,i,r)||!n.children[_e]?!1:Sk(n.children[_e],e,o,r)}}function Dm(n,e,t){return e.every((r,i)=>Ck[t](n[i].parameters,r.parameters))}var Ii=class{root;queryParams;fragment;_queryParamMap;constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){return sq.serialize(this)}},qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sm(this)}},us=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ea(this.parameters),this._parameterMap}toString(){return xk(this)}};function iq(n,e){return _a(n,e)&&n.every((t,r)=>Ei(t.parameters,e[r].parameters))}function _a(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function oq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===_e&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==_e&&(t=t.concat(e(i,r)))}),t}var wa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new ds,providedIn:"root"})}return n})(),ds=class{parse(e){let t=new fb(e);return new Ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$d(e.root,!0)}`,r=lq(e.queryParams),i=typeof e.fragment=="string"?`#${aq(e.fragment)}`:"";return`${t}${r}${i}`}},sq=new ds;function Sm(n){return n.segments.map(e=>xk(e)).join("/")}function $d(n,e){if(!n.hasChildren())return Sm(n);if(e){let t=n.children[_e]?$d(n.children[_e],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${$d(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=oq(n,(r,i)=>i===_e?[$d(n.children[_e],!1)]:[`${i}:${$d(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${Sm(n)}/${t[0]}`:`${Sm(n)}/(${t.join("//")})`}}function Ak(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cm(n){return Ak(n).replace(/%3B/gi,";")}function aq(n){return encodeURI(n)}function hb(n){return Ak(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Am(n){return decodeURIComponent(n)}function gk(n){return Am(n.replace(/\+/g,"%20"))}function xk(n){return`${hb(n.path)}${cq(n.parameters)}`}function cq(n){return Object.entries(n).map(([e,t])=>`;${hb(e)}=${hb(t)}`).join("")}function lq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Cm(t)}=${Cm(i)}`).join("&"):`${Cm(t)}=${Cm(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uq=/^[^\/()?;#]+/;function sb(n){let e=n.match(uq);return e?e[0]:""}var dq=/^[^\/()?;=#]+/;function hq(n){let e=n.match(dq);return e?e[0]:""}var fq=/^[^=?&#]+/;function pq(n){let e=n.match(fq);return e?e[0]:""}var gq=/^[^&#]+/;function mq(n){let e=n.match(gq);return e?e[0]:""}var fb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_e]=new qe(e,t)),r}parseSegment(){let e=sb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new us(Am(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=sb(this.remaining);i&&(r=i,this.capture(r))}e[Am(t)]=Am(r)}parseQueryParam(e){let t=pq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=mq(this.remaining);s&&(r=s,this.capture(r))}let i=gk(t),o=gk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);let s=this.parseChildren();t[o??_e]=Object.keys(s).length===1&&s[_e]?s[_e]:new qe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function Mk(n){return n.segments.length>0?new qe([],{[_e]:n}):n}function Rk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Rk(i);if(r===_e&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new qe(n.segments,e);return vq(t)}function vq(n){if(n.numberOfChildren===1&&n.children[_e]){let e=n.children[_e];return new qe(n.segments.concat(e.segments),e.children)}return n}function hs(n){return n instanceof Ii}function Pk(n,e,t=null,r=null){let i=Nk(n);return kk(i,e,t,r)}function Nk(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new qe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Mk(r);return e??i}function kk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ab(i,i,i,t,r);let o=_q(e);if(o.toRoot())return ab(i,i,new qe([],{}),t,r);let s=yq(o,i,n),a=s.processChildren?qd(s.segmentGroup,s.index,o.commands):Fk(s.segmentGroup,s.index,o.commands);return ab(i,s.segmentGroup,a,t,r)}function xm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wd(n){return typeof n=="object"&&n!=null&&n.outlets}function ab(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=Ok(n,e,t);let a=Mk(Rk(s));return new Ii(a,o,i)}function Ok(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Ok(o,e,t)}),new qe(n.segments,r)}var Mm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xm(r[0]))throw new K(4003,!1);let i=r.find(Wd);if(i&&i!==bk(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _q(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Mm(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Mm(t,e,r)}var Xc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function yq(n,e,t){if(n.isAbsolute)return new Xc(e,!0,0);if(!t)return new Xc(e,!1,NaN);if(t.parent===null)return new Xc(t,!0,0);let r=xm(n.commands[0])?0:1,i=t.segments.length-1+r;return Eq(t,i,n.numberOfDoubleDots)}function Eq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new Xc(r,!1,i-o)}function wq(n){return Wd(n[0])?n[0].outlets:{[_e]:n}}function Fk(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return qd(n,e,t);let r=Iq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new qe(n.segments.slice(0,r.pathIndex),{});return o.children[_e]=new qe(n.segments.slice(r.pathIndex),n.children),qd(o,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?pb(n,e,t):r.match?qd(n,0,i):pb(n,e,t)}function qd(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=wq(t),i={};if(Object.keys(r).some(o=>o!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let o=qd(n.children[_e],e,t);return new qe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Fk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new qe(n.segments,i)}}function Iq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Wd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!vk(c,u,s))return o;r+=2}else{if(!vk(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Wd(o)){let c=bq(o.outlets);return new qe(r,c)}if(i===0&&xm(t[0])){let c=n.segments[e];r.push(new us(c.path,mk(t[0]))),i++;continue}let s=Wd(o)?o.outlets[_e]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&xm(a)?(r.push(new us(s,mk(a))),i+=2):(r.push(new us(s,{})),i++)}return new qe(r,{})}function bq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=pb(new qe([],{}),0,r))}),e}function mk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vk(n,e,t){return n==t.path&&Ei(e,t.parameters)}var Jc="imperative",$t=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})($t||{}),cr=class{id;url;constructor(e,t){this.id=e,this.url=t}},fs=class extends cr{type=$t.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lr=class extends cr{urlAfterRedirects;type=$t.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(kn||{}),tl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(tl||{}),wi=class extends cr{reason;code;type=$t.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bi=class extends cr{reason;code;type=$t.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},nl=class extends cr{error;target;type=$t.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gd=class extends cr{urlAfterRedirects;state;type=$t.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rm=class extends cr{urlAfterRedirects;state;type=$t.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pm=class extends cr{urlAfterRedirects;state;shouldActivate;type=$t.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nm=class extends cr{urlAfterRedirects;state;type=$t.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},km=class extends cr{urlAfterRedirects;state;type=$t.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Om=class{route;type=$t.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fm=class{route;type=$t.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lm=class{snapshot;type=$t.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vm=class{snapshot;type=$t.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Um=class{snapshot;type=$t.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jm=class{snapshot;type=$t.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rl=class{routerEvent;position;anchor;type=$t.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Kd=class{},il=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Cq(n){return!(n instanceof Kd)&&!(n instanceof il)}function Tq(n,e){return n.providers&&!n._injector&&(n._injector=Gc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xr(n){return n.outlet||_e}function Dq(n,e){let t=n.filter(r=>Xr(r)===e);return t.push(...n.filter(r=>Xr(r)!==e)),t}function al(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Bm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return al(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ia(this.rootInjector)}},Ia=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Bm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(he(Tt))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$m=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mb(e,this._root).map(t=>t.value)}};function gb(n,e){if(n===e.value)return e;for(let t of e.children){let r=gb(n,t);if(r)return r}return null}function mb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mb(n,t);if(r.length)return r.unshift(e),r}return[]}var ar=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Zc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qd=class extends $m{snapshot;constructor(e,t){super(e),this.snapshot=t,Cb(this,e)}toString(){return this.snapshot.toString()}};function Lk(n){let e=Sq(n),t=new tn([new us("",{})]),r=new tn({}),i=new tn({}),o=new tn({}),s=new tn(""),a=new En(t,r,o,s,i,_e,n,e.root);return a.snapshot=e.root,new Qd(new ar(a,[]),e)}function Sq(n){let e={},t={},r={},o=new ya([],e,r,"",t,_e,n,null,{});return new Yd("",new ar(o,[]))}var En=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[eh]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>Ea(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>Ea(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&Uk(i)&&(r.resolve[eh]=i.title),r}var ya=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[eh]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ea(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yd=class extends $m{url;constructor(e,t){super(t),this.url=e,Cb(this,t)}toString(){return Vk(this._root)}};function Cb(n,e){e.value._routerState=n,e.children.forEach(t=>Cb(n,t))}function Vk(n){let e=n.children.length>0?` { ${n.children.map(Vk).join(", ")} } `:"";return`${n.value}${e}`}function cb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ei(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ei(e.params,t.params)||n.paramsSubject.next(t.params),eq(e.url,t.url)||n.urlSubject.next(t.url),Ei(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vb(n,e){let t=Ei(n.params,e.params)&&iq(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||vb(n.parent,e.parent))}function Uk(n){return typeof n.title=="string"||n.title===null}var jk=new Z(""),th=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=ON();parentContexts=S(Ia);location=S(oo);changeDetector=S(yi);inputBinder=S(nh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new _b(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wr]})}return n})(),_b=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===En?this.route:e===Ia?this.childContexts:e===jk?this.outletData:this.parent.get(e,t)}},nh=new Z(""),Tb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Wu([r.queryParams,r.params,r.data]).pipe(xn(([o,s,a],c)=>(a=U(U(U({},o),s),a),c===0?se(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=LN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Db=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ve({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ae(0,"router-outlet")},dependencies:[th],encapsulation:2})}return n})();function Sb(n){let e=n.children&&n.children.map(Sb),t=e?le(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_e&&(t.component=Db),t}function Aq(n,e,t){let r=Zd(n,e._root,t?t._root:void 0);return new Qd(r,e)}function Zd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xq(n,e,t);return new ar(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zd(n,a)),s}}let r=Mq(e.value),i=e.children.map(o=>Zd(n,o));return new ar(r,i)}}function xq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zd(n,r,i);return Zd(n,r)})}function Mq(n){return new En(new tn(n.url),new tn(n.params),new tn(n.queryParams),new tn(n.fragment),new tn(n.data),n.outlet,n.component,n)}var ol=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Bk="ngNavigationCancelingError";function qm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=hs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$k(!1,kn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $k(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Bk]=!0,t.cancellationCode=e,t}function Rq(n){return Hk(n)&&hs(n.url)}function Hk(n){return!!n&&n[Bk]}var Pq=(n,e,t,r)=>Ie(i=>(new yb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),yb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Zc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Zc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(cb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},zm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},el=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Nq(n,e,t){let r=n._root,i=e?e._root:null;return Hd(r,i,t,[r.value])}function kq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function cl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!aw(n)?n:e.get(n):r}function Hd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Zc(e);return n.children.forEach(s=>{Oq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zd(a,t.getContext(s),i)),i}function Oq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Fq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new zm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hd(n,e,a?a.children:null,r,i):Hd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new el(a.outlet.component,s))}else s&&zd(e,a,i),i.canActivateChecks.push(new zm(r)),o.component?Hd(n,null,a?a.children:null,r,i):Hd(n,null,t,r,i);return i}function Fq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_a(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_a(n.url,e.url)||!Ei(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vb(n,e)||!Ei(n.queryParams,e.queryParams);case"paramsChange":default:return!vb(n,e)}}function zd(n,e,t){let r=Zc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zd(s,e.children.getContext(o),t):zd(s,null,t):zd(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new el(e.outlet.component,i)):t.canDeactivateChecks.push(new el(null,i)):t.canDeactivateChecks.push(new el(null,i))}function rh(n){return typeof n=="function"}function Lq(n){return typeof n=="boolean"}function Vq(n){return n&&rh(n.canLoad)}function Uq(n){return n&&rh(n.canActivate)}function jq(n){return n&&rh(n.canActivateChild)}function Bq(n){return n&&rh(n.canDeactivate)}function $q(n){return n&&rh(n.canMatch)}function qk(n){return n instanceof Wi||n?.name==="EmptyError"}var Tm=Symbol("INITIAL_VALUE");function sl(){return xn(n=>Wu(n.map(e=>e.pipe(Ki(1),Qp(Tm)))).pipe(Ie(e=>{for(let t of e)if(t!==!0){if(t===Tm)return Tm;if(t===!1||Hq(t))return t}return!0}),An(e=>e!==Tm),Ki(1)))}function Hq(n){return hs(n)||n instanceof ol}function qq(n,e){return Ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(le(U({},t),{guardsResult:!0})):zq(s,r,i,n).pipe(Ct(a=>a&&Lq(a)?Wq(r,o,n,e):se(a)),Ie(a=>le(U({},t),{guardsResult:a})))})}function zq(n,e,t,r){return je(n).pipe(Ct(i=>Zq(i.component,i.route,t,e,r)),Qi(i=>i!==!0,!0))}function Wq(n,e,t,r){return je(e).pipe(Wo(i=>Ac(Kq(i.route.parent,r),Gq(i.route,r),Yq(n,i.path,t),Qq(n,i.route,t))),Qi(i=>i!==!0,!0))}function Gq(n,e){return n!==null&&e&&e(new Um(n)),se(!0)}function Kq(n,e){return n!==null&&e&&e(new Lm(n)),se(!0)}function Qq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Gu(()=>{let s=al(e)??t,a=cl(o,s),c=Uq(a)?a.canActivate(e,n):Pt(s,()=>a(e,n));return go(c).pipe(Qi())}));return se(i).pipe(sl())}function Yq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>kq(s)).filter(s=>s!==null).map(s=>Gu(()=>{let a=s.guards.map(c=>{let u=al(s.node)??t,d=cl(c,u),h=jq(d)?d.canActivateChild(r,n):Pt(u,()=>d(r,n));return go(h).pipe(Qi())});return se(a).pipe(sl())}));return se(o).pipe(sl())}function Zq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=al(e)??i,u=cl(a,c),d=Bq(u)?u.canDeactivate(n,e,t,r):Pt(c,()=>u(n,e,t,r));return go(d).pipe(Qi())});return se(s).pipe(sl())}function Xq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=cl(s,n),c=Vq(a)?a.canLoad(e,t):Pt(n,()=>a(e,t));return go(c)});return se(o).pipe(sl(),zk(r))}function zk(n){return Ap(Wt(e=>{if(typeof e!="boolean")throw qm(n,e)}),Ie(e=>e===!0))}function Jq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=cl(s,n),c=$q(a)?a.canMatch(e,t):Pt(n,()=>a(e,t));return go(c)});return se(o).pipe(sl(),zk(r))}var Xd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Yc(n){return qo(new Xd(n))}function ez(n){return qo(new K(4e3,!1))}function tz(n){return qo($k(!1,kn.GuardRejected))}var Eb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[_e])return ez(`${e.redirectTo}`);i=i.children[_e]}}applyRedirectCommands(e,t,r,i,o){return nz(t,i,o).pipe(Ie(s=>{if(s instanceof Ii)throw new Jd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Jd(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ii(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function nz(n,e,t){if(typeof n=="string")return se(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return go(Pt(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var wb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rz(n,e,t,r,i){let o=Wk(n,e,t);return o.matched?(r=Tq(e,r),Jq(r,e,t,i).pipe(Ie(s=>s===!0?o:U({},wb)))):se(o)}function Wk(n,e,t){if(e.path==="**")return iz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},wb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wk)(t,n,e);if(!i)return U({},wb);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function iz(n){return{matched:!0,parameters:n.length>0?bk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _k(n,e,t,r){return t.length>0&&az(n,t,r)?{segmentGroup:new qe(e,sz(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&cz(n,t,r)?{segmentGroup:new qe(n.segments,oz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function oz(n,e,t,r){let i={};for(let o of t)if(Gm(n,e,o)&&!r[Xr(o)]){let s=new qe([],{});i[Xr(o)]=s}return U(U({},r),i)}function sz(n,e){let t={};t[_e]=e;for(let r of n)if(r.path===""&&Xr(r)!==_e){let i=new qe([],{});t[Xr(r)]=i}return t}function az(n,e,t){return t.some(r=>Gm(n,e,r)&&Xr(r)!==_e)}function cz(n,e,t){return t.some(r=>Gm(n,e,r))}function Gm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function lz(n,e,t){return e.length===0&&!n.children[t]}var Ib=class{};function uz(n,e,t,r,i,o,s="emptyOnly"){return new bb(n,e,t,r,i,s,o).recognize()}var dz=31,bb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Eb(this.urlSerializer,this.urlTree)}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=_k(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:t,rootSnapshot:r})=>{let i=new ar(r,t),o=new Yd("",i),s=Pk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ya([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,t).pipe(Ie(r=>({children:r,rootSnapshot:t})),Gi(r=>{if(r instanceof Jd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof ar?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return je(o).pipe(Wo(s=>{let a=r.children[s],c=Dq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Kp((s,a)=>(s.push(...a),s)),Go(null),WE(),Ct(s=>{if(s===null)return Yc(r);let a=Gk(s);return hz(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return je(t).pipe(Wo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Gi(u=>{if(u instanceof Xd)return se(null);throw u}))),Qi(c=>!!c),Gi(c=>{if(qk(c))return lz(r,i,o)?se(new Ib):Yc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Xr(r)!==s&&(s===_e||!Gm(i,o,r))?Yc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Yc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=Wk(t,i,o);if(!c)return Yc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dz&&(this.allowRedirects=!1));let m=new ya(o,u,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,yk(i),Xr(i),i.component??i._loadedComponent??null,i,Ek(i)),b=Hm(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(b.params),m.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e).pipe(xn(k=>this.applyRedirects.lineralizeSegments(i,k)),Ct(k=>this.processSegment(e,r,t,k.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=rz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(xn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,b=new ya(p,h,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,yk(r),Xr(r),r.component??r._loadedComponent??null,r,Ek(r)),N=Hm(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:k,slicedSegments:B}=_k(t,p,m,u);if(B.length===0&&k.hasChildren())return this.processChildren(d,u,k,b).pipe(Ie(J=>new ar(b,J)));if(u.length===0&&B.length===0)return se(new ar(b,[]));let te=Xr(r)===o;return this.processSegment(d,u,k,B,te?_e:o,!0,b).pipe(Ie(J=>new ar(b,J instanceof ar?[J]:[])))}))):Yc(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):Xq(e,t,r,this.urlSerializer).pipe(Ct(i=>i?this.configLoader.loadChildren(e,t).pipe(Wt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):tz(t))):se({routes:[],injector:e})}};function hz(n){n.sort((e,t)=>e.value.outlet===_e?-1:t.value.outlet===_e?1:e.value.outlet.localeCompare(t.value.outlet))}function fz(n){let e=n.value.routeConfig;return e&&e.path===""}function Gk(n){let e=[],t=new Set;for(let r of n){if(!fz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Gk(r.children);e.push(new ar(r.value,i))}return e.filter(r=>!t.has(r))}function yk(n){return n.data||{}}function Ek(n){return n.resolve||{}}function pz(n,e,t,r,i,o){return Ct(s=>uz(n,e,t,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>le(U({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function gz(n,e){return Ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Kk(c))s.add(u);let a=0;return je(s).pipe(Wo(c=>o.has(c)?mz(c,r,n,e):(c.data=Hm(c,c.parent,n).resolve,se(void 0))),Wt(()=>a++),xc(1),Ct(c=>a===s.size?se(t):Un))})}function Kk(n){let e=n.children.map(t=>Kk(t)).flat();return[n,...e]}function mz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Uk(i)&&(o[eh]=i.title),Gu(()=>(n.data=Hm(n,n.parent,t).resolve,vz(o,n,e,r).pipe(Ie(s=>(n._resolvedData=s,n.data=U(U({},n.data),s),null)))))}function vz(n,e,t,r){let i=db(n);if(i.length===0)return se({});let o={};return je(i).pipe(Ct(s=>_z(n[s],e,t,r).pipe(Qi(),Wt(a=>{if(a instanceof ol)throw qm(new ds,a);o[s]=a}))),xc(1),Ie(()=>o),Gi(s=>qk(s)?Un:qo(s)))}function _z(n,e,t,r){let i=al(e)??r,o=cl(n,i),s=o.resolve?o.resolve(e,t):Pt(i,()=>o(e,t));return go(s)}function lb(n){return xn(e=>{let t=n(e);return t?je(t).pipe(Ie(()=>e)):se(e)})}var Ab=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===_e);return r}getResolvedTitleForRoute(t){return t.data[eh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(Qk),providedIn:"root"})}return n})(),Qk=(()=>{class n extends Ab{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(he(fk))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ps=new Z("",{providedIn:"root",factory:()=>({})}),ba=new Z(""),Km=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(II);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=go(Pt(t,()=>r.loadComponent())).pipe(Ie(Zk),xn(Xk),Wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ku(()=>{this.componentLoaders.delete(r)})),o=new Cc(i,()=>new bt).pipe(bc());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Yk(r,this.compiler,t,this.onLoadEndListener).pipe(Ku(()=>{this.childrenLoaders.delete(r)})),s=new Cc(o,()=>new bt).pipe(bc());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yk(n,e,t,r){return go(Pt(t,()=>n.loadChildren())).pipe(Ie(Zk),xn(Xk),Ct(i=>i instanceof rm||Array.isArray(i)?se(i):je(e.compileModuleAsync(i))),Ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ba,[],{optional:!0,self:!0}).flat()),{routes:s.map(Sb),injector:o}}))}function yz(n){return n&&typeof n=="object"&&"default"in n}function Zk(n){return yz(n)?n.default:n}function Xk(n){return se(n)}var Qm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(Ez),providedIn:"root"})}return n})(),Ez=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xb=new Z(""),Mb=new Z("");function Jk(n,e,t){let r=n.get(Mb),i=n.get(Dt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),wz(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&Pt(n,()=>c({transition:a,from:e,to:t})),s}function wz(n){return new Promise(e=>{Id({read:()=>setTimeout(e)},{injector:n})})}var Rb=new Z(""),Ym=(()=>{class n{currentNavigation=ee(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new bt;transitionAbortWithErrorSubject=new bt;configLoader=S(Km);environmentInjector=S(Tt);destroyRef=S(yr);urlSerializer=S(wa);rootContexts=S(Ia);location=S(ls);inputBindingEnabled=S(nh,{optional:!0})!==null;titleStrategy=S(Ab);options=S(ps,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Qm);createViewTransition=S(xb,{optional:!0});navigationErrorHandler=S(Rb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Om(i)),r=i=>this.events.next(new Fm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;At(()=>{this.transitions?.next(le(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new tn(null),this.transitions.pipe(An(r=>r!==null),xn(r=>{let i=!1;return se(r).pipe(xn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",kn.SupersededByNewNavigation),Un;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?le(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new bi(o.id,this.urlSerializer.serialize(o.rawUrl),"",tl.IgnoredSameUrlNavigation)),o.resolve(!1),Un;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return se(o).pipe(xn(c=>(this.events.next(new fs(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Un:Promise.resolve(c))),pz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Wt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));let u=new Gd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:p}=o,m=new fs(c,this.urlSerializer.serialize(u),d,h);this.events.next(m);let b=Lk(this.rootComponentType).snapshot;return this.currentTransition=r=le(U({},o),{targetSnapshot:b,urlAfterRedirects:u,extras:le(U({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=u,N)),se(r)}else return this.events.next(new bi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",tl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Un}),Wt(o=>{let s=new Rm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ie(o=>(this.currentTransition=r=le(U({},o),{guards:Nq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),qq(this.environmentInjector,o=>this.events.next(o)),Wt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw qm(this.urlSerializer,o.guardsResult);let s=new Pm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),An(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",kn.GuardRejected),!1)),lb(o=>{if(o.guards.canActivateChecks.length!==0)return se(o).pipe(Wt(s=>{let a=new Nm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),xn(s=>{let a=!1;return se(s).pipe(gz(this.paramsInheritanceStrategy,this.environmentInjector),Wt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",kn.NoDataFromResolver)}}))}),Wt(s=>{let a=new km(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lb(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=al(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Wt(d=>{a.component=d}),Ie(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Wu(s(o.targetSnapshot.root)).pipe(Go(null),Ki(1))}),lb(()=>this.afterPreactivation()),xn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?je(a).pipe(Ie(()=>r)):se(r)}),Ie(o=>{let s=Aq(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=le(U({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Wt(()=>{this.events.next(new Kd)}),Pq(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ki(1),Yp(new de(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(An(()=>!i&&!r.targetRouterState),Wt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",kn.Aborted)}))),Wt({next:o=>{i=!0,this.lastSuccessfulNavigation=At(this.currentNavigation),this.events.next(new lr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Yp(this.transitionAbortWithErrorSubject.pipe(Wt(o=>{throw o}))),Ku(()=>{i||this.cancelNavigationTransition(r,"",kn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gi(o=>{if(this.destroyed)return r.resolve(!1),Un;if(i=!0,Hk(o))this.events.next(new wi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Rq(o)?this.events.next(new il(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new nl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Pt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ol){let{message:c,cancellationCode:u}=qm(this.urlSerializer,a);this.events.next(new wi(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new il(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Un}))}))}cancelNavigationTransition(t,r,i){let o=new wi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=At(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Iz(n){return n!==Jc}var eO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(bz),providedIn:"root"})}return n})(),Wm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},bz=(()=>{class n extends Wm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tO=(()=>{class n{urlSerializer=S(wa);options=S(ps,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(ls);urlHandlingStrategy=S(Qm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ii;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ii?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Lk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>S(Cz),providedIn:"root"})}return n})(),Cz=(()=>{class n extends tO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof fs?this.updateStateMemento():t instanceof bi?this.commitTransition(r):t instanceof Gd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof wi&&t.code!==kn.SupersededByNewNavigation&&t.code!==kn.Redirect?this.restoreHistory(r):t instanceof nl?this.restoreHistory(r,!0):t instanceof lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zm(n,e){n.events.pipe(An(t=>t instanceof lr||t instanceof wi||t instanceof nl||t instanceof bi),Ie(t=>t instanceof lr||t instanceof bi?0:(t instanceof wi?t.code===kn.Redirect||t.code===kn.SupersededByNewNavigation:!1)?2:1),An(t=>t!==2),Ki(1)).subscribe(()=>{e()})}var Tz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(cI);stateManager=S(tO);options=S(ps,{optional:!0})||{};pendingTasks=S(fi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(Ym);urlSerializer=S(wa);location=S(ls);urlHandlingStrategy=S(Qm);injector=S(Tt);_events=new bt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(eO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(ba,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(nh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new yt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=At(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wi&&r.code!==kn.Redirect&&r.code!==kn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof lr)this.navigated=!0;else if(r instanceof il){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Iz(i.source)},s);this.scheduleNavigation(a,Jc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Cq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(pn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return At(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Sb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=i?i.snapshot:this.routerState.snapshot.root;h=Nk(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return kk(h,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=hs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Jc,null,r)}navigate(t,r={skipLocationChange:!1}){return Sz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Zo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},Tz):r===!1?i=U({},Dz):i=r,hs(t))return pk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,c=p});let d=this.pendingTasks.add();return Zm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}var dt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ee(null);get href(){return At(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new bt;applicationErrorHandler=S(pn);options=S(ps,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new am("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof lr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:hs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ne(Ze),ne(En),wd("tabindex"),ne(Ir),ne(gn),ne(Yr))};static \u0275dir=tt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&mi("href",i.reactiveHref(),L0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cs],replaceUrl:[2,"replaceUrl","replaceUrl",cs],routerLink:"routerLink"},features:[wr]})}return n})(),Nb=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new pt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof lr&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(zo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=je(t).pipe(zo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Az(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ne(Ze),ne(gn),ne(Ir),ne(yi),ne(dt,8))};static \u0275dir=tt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&fI(o,dt,5),r&2){let s;pI(s=gI())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[wr]})}return n})();function Az(n){return!!n.paths}var ih=class{};var nO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(An(t=>t instanceof lr),Wo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Gc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return je(i).pipe(zo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=se(null);let o=i.pipe(Ct(s=>s===null?se(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return je([o,s]).pipe(zo())}else return o})}static \u0275fac=function(r){return new(r||n)(he(Ze),he(Tt),he(ih),he(Km))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rO=new Z(""),xz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Jc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bi&&t.code===tl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof rl))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new rl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tI()};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function kb(n,...e){return Bn([{provide:ba,multi:!0,useValue:n},[],{provide:En,useFactory:iO,deps:[Ze]},{provide:Td,multi:!0,useFactory:oO},e.map(t=>t.\u0275providers)])}function iO(n){return n.routerState.root}function oh(n,e){return{\u0275kind:n,\u0275providers:e}}function oO(){let n=S(Et);return e=>{let t=n.get(ao);if(e!==t.components[0])return;let r=n.get(Ze),i=n.get(sO);n.get(Ob)===1&&r.initialNavigation(),n.get(lO,null,{optional:!0})?.setUpPreloading(),n.get(rO,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sO=new Z("",{factory:()=>new bt}),Ob=new Z("",{providedIn:"root",factory:()=>1});function aO(){let n=[{provide:N0,useValue:!0},{provide:Ob,useValue:0},om(()=>{let e=S(Et);return e.get(VI,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ze),o=e.get(sO);Zm(i,()=>{r(!0)}),e.get(Ym).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))})];return oh(2,n)}function cO(){let n=[om(()=>{S(Ze).setUpLocationChangeListener()}),{provide:Ob,useValue:2}];return oh(3,n)}var lO=new Z("");function uO(n){return oh(0,[{provide:lO,useExisting:nO},{provide:ih,useExisting:n}])}function dO(){return oh(8,[Tb,{provide:nh,useExisting:Tb}])}function hO(n){gi("NgRouterViewTransitions");let e=[{provide:xb,useValue:Jk},{provide:Mb,useValue:U({skipNextTransition:!!n?.skipInitialTransition},n)}];return oh(9,e)}var fO=[ls,{provide:wa,useClass:ds},Ze,Ia,{provide:En,useFactory:iO,deps:[Ze]},Km,[]],xt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[fO,[],{provide:ba,multi:!0,useValue:t},[],r?.errorHandler?{provide:Rb,useValue:r.errorHandler}:[],{provide:ps,useValue:r||{}},r?.useHash?Rz():Pz(),Mz(),r?.preloadingStrategy?uO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Nz(r):[],r?.bindToComponentInputs?dO().\u0275providers:[],r?.enableViewTransitions?hO().\u0275providers:[],kz()]}}static forChild(t){return{ngModule:n,providers:[{provide:ba,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gr({type:n});static \u0275inj=fr({})}return n})();function Mz(){return{provide:rO,useFactory:()=>{let n=S(ok),e=S($e),t=S(ps),r=S(Ym),i=S(wa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xz(i,r,n,e,t)}}}function Rz(){return{provide:Yr,useClass:qI}}function Pz(){return{provide:Yr,useClass:dm}}function Nz(n){return[n.initialNavigation==="disabled"?cO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?aO().\u0275providers:[]]}var Pb=new Z("");function kz(){return[{provide:Pb,useFactory:oO},{provide:Td,multi:!0,useExisting:Pb}]}var pO=()=>{};var Lb={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var q=function(n,e){if(!n)throw Ca(e)},Ca=function(n){return new Error("Firebase Database ("+Lb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var vO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Oz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},dl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4,p=(a&15)<<2|u>>6,m=u&63;c||(m=64,s||(p=64)),r.push(t[d],t[h],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Oz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||h==null)throw new Vb;let p=o<<2|a>>4;if(r.push(p),u!==64){let m=a<<4&240|u>>2;if(r.push(m),h!==64){let b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Vb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},jb=function(n){let e=vO(n);return dl.encodeByteArray(e,!0)},ah=function(n){return jb(n).replace(/\./g,"")},ll=function(n){try{return dl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _O(n){return yO(void 0,n)}function yO(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!Fz(t)||(n[t]=yO(n[t],e[t]));return n}function Fz(n){return n!=="__proto__"}function Bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Lz=()=>Bb().__FIREBASE_DEFAULTS__,Vz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Uz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ll(n[1]);return e&&JSON.parse(e)},Jm=()=>{try{return pO()||Lz()||Vz()||Uz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$b=n=>{var e,t;return(t=(e=Jm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hl=n=>{let e=$b(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hb=()=>{var n;return(n=Jm())===null||n===void 0?void 0:n.config},qb=n=>{var e;return(e=Jm())===null||e===void 0?void 0:e[`_${n}`]};var wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function zn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function gs(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function fl(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ah(JSON.stringify(t)),ah(JSON.stringify(s)),""].join(".")}var sh={};function jz(){let n={prod:[],emulator:[]};for(let e of Object.keys(sh))sh[e]?n.emulator.push(e):n.prod.push(e);return n}function Bz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var gO=!1;function ms(n,e){if(typeof window>"u"||typeof document>"u"||!zn(window.location.host)||sh[n]===e||sh[n]||gO)return;sh[n]=e;function t(p){return`__firebase__banner__${p}`}let r="__firebase__banner",o=jz().prod.length>0;function s(){let p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{gO=!0,s()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){let p=Bz(r),m=t("text"),b=document.getElementById(m)||document.createElement("span"),N=t("learnmore"),k=document.getElementById(N)||document.createElement("a"),B=t("preprendIcon"),te=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let J=p.element;a(J),d(k,N);let ue=u();c(te,B),J.append(te,b,k,ue),document.body.appendChild(J)}o?(b.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ch(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function $z(){var n;let e=(n=Jm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ev(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IO(){let n=Yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ti(){return Lb.NODE_CLIENT===!0||Lb.NODE_ADMIN===!0}function bO(){return!$z()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lh(){try{return typeof indexedDB=="object"}catch{return!1}}function CO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Hz="FirebaseError",On=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Hz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jr.prototype.create)}},Jr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?qz(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new On(i,a,r)}};function qz(n,e){return n.replace(zz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zz=/\{\$([^}]+)}/g;function ul(n){return JSON.parse(n)}function Ht(n){return JSON.stringify(n)}var TO=function(n){let e={},t={},r={},i="";try{let o=n.split(".");e=ul(ll(o[0])||""),t=ul(ll(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var DO=function(n){let e=TO(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},SO=function(n){let e=TO(n).claims;return typeof e=="object"&&e.admin===!0};function ei(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ta(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function pl(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uh(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Ar(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(mO(o)&&mO(s)){if(!Ar(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function mO(n){return n!==null&&typeof n=="object"}function Da(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ml(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Xm=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){let p=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^o&(s^a),d=1518500249):(u=o^s^a,d=1859775393):h<60?(u=o&s|a&(o|s),d=2400959708):(u=o^s^a,d=3395469782);let p=(i<<5|i>>>27)+u+c+d+r[h]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<t;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function AO(n,e){let t=new Ub(n,e);return t.subscribe.bind(t)}var Ub=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Wz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Fb),i.error===void 0&&(i.error=Fb),i.complete===void 0&&(i.complete=Fb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Wz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fb(){}function Sa(n,e){return`${n} failed: ${e} argument `}var xO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,q(r<n.length,"Surrogate pair missing trail surrogate.");let s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},dh=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Qye=14400*1e3;function Ae(n){return n&&n._delegate?n._delegate:n}var qt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Aa="[DEFAULT]";var tv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kz(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gz(n){return n===Aa?void 0:n}function Kz(n){return n.instantiationMode==="EAGER"}var hh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new tv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Qz=[],Te=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Te||{}),Yz={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Zz=Te.INFO,Xz={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Jz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Xz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xr=class{constructor(e){this.name=e,this._logLevel=Zz,this._logHandler=Jz,this._userLogHandler=null,Qz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var eW=(n,e)=>e.some(t=>n instanceof t),MO,RO;function tW(){return MO||(MO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nW(){return RO||(RO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var PO=new WeakMap,Wb=new WeakMap,NO=new WeakMap,zb=new WeakMap,Kb=new WeakMap;function rW(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Di(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&PO.set(t,n)}).catch(()=>{}),Kb.set(e,n),e}function iW(n){if(Wb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Wb.set(n,e)}var Gb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Di(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kO(n){Gb=n(Gb)}function oW(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(nv(this),e,...t);return NO.set(r,e.sort?e.sort():[e]),Di(r)}:nW().includes(n)?function(...e){return n.apply(nv(this),e),Di(PO.get(this))}:function(...e){return Di(n.apply(nv(this),e))}}function sW(n){return typeof n=="function"?oW(n):(n instanceof IDBTransaction&&iW(n),eW(n,tW())?new Proxy(n,Gb):n)}function Di(n){if(n instanceof IDBRequest)return rW(n);if(zb.has(n))return zb.get(n);let e=sW(n);return e!==n&&(zb.set(n,e),Kb.set(e,n)),e}var nv=n=>Kb.get(n);function FO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Di(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Di(s.result),c.oldVersion,c.newVersion,Di(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var aW=["get","getKey","getAll","getAllKeys","count"],cW=["put","add","delete","clear"],Qb=new Map;function OO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qb.get(e))return Qb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=cW.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aW.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return Qb.set(e,o),o}kO(n=>le(U({},n),{get:(e,t,r)=>OO(e,t)||n.get(e,t,r),has:(e,t)=>!!OO(e,t)||n.has(e,t)}));var Zb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function lW(n){let e=n.getComponent();return e?.type==="VERSION"}var Xb="@firebase/app",LO="0.13.2";var mo=new xr("@firebase/app"),uW="@firebase/app-compat",dW="@firebase/analytics-compat",hW="@firebase/analytics",fW="@firebase/app-check-compat",pW="@firebase/app-check",gW="@firebase/auth",mW="@firebase/auth-compat",vW="@firebase/database",_W="@firebase/data-connect",yW="@firebase/database-compat",EW="@firebase/functions",wW="@firebase/functions-compat",IW="@firebase/installations",bW="@firebase/installations-compat",CW="@firebase/messaging",TW="@firebase/messaging-compat",DW="@firebase/performance",SW="@firebase/performance-compat",AW="@firebase/remote-config",xW="@firebase/remote-config-compat",MW="@firebase/storage",RW="@firebase/storage-compat",PW="@firebase/firestore",NW="@firebase/ai",kW="@firebase/firestore-compat",OW="firebase",FW="11.10.0";var Jb="[DEFAULT]",LW={[Xb]:"fire-core",[uW]:"fire-core-compat",[hW]:"fire-analytics",[dW]:"fire-analytics-compat",[pW]:"fire-app-check",[fW]:"fire-app-check-compat",[gW]:"fire-auth",[mW]:"fire-auth-compat",[vW]:"fire-rtdb",[_W]:"fire-data-connect",[yW]:"fire-rtdb-compat",[EW]:"fire-fn",[wW]:"fire-fn-compat",[IW]:"fire-iid",[bW]:"fire-iid-compat",[CW]:"fire-fcm",[TW]:"fire-fcm-compat",[DW]:"fire-perf",[SW]:"fire-perf-compat",[AW]:"fire-rc",[xW]:"fire-rc-compat",[MW]:"fire-gcs",[RW]:"fire-gcs-compat",[PW]:"fire-fst",[kW]:"fire-fst-compat",[NW]:"fire-vertex","fire-js":"fire-js",[OW]:"fire-js-all"};var fh=new Map,VW=new Map,eC=new Map;function VO(n,e){try{n.container.addComponent(e)}catch(t){mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fn(n){let e=n.name;if(eC.has(e))return mo.debug(`There were multiple attempts to register component ${e}.`),!1;eC.set(e,n);for(let t of fh.values())VO(t,n);for(let t of VW.values())VO(t,n);return!0}function Si(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zt(n){return n==null?!1:n.settings!==void 0}var UW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Jr("app","Firebase",UW);var tC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}};var Mr=FW;function iC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(t||(t=Hb()),!t)throw vs.create("no-options");let o=fh.get(i);if(o){if(Ar(t,o.options)&&Ar(r,o.config))return o;throw vs.create("duplicate-app",{appName:i})}let s=new hh(i);for(let c of eC.values())s.addComponent(c);let a=new tC(t,r,s);return fh.set(i,a),a}function ti(n=Jb){let e=fh.get(n);if(!e&&n===Jb&&Hb())return iC();if(!e)throw vs.create("no-app",{appName:n});return e}function rv(){return Array.from(fh.values())}function Xe(n,e,t){var r;let i=(r=LW[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mo.warn(a.join(" "));return}Fn(new qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var jW="firebase-heartbeat-database",BW=1,ph="firebase-heartbeat-store",Yb=null;function $O(){return Yb||(Yb=FO(jW,BW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ph)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Yb}function $W(n){return E(this,null,function*(){try{let t=(yield $O()).transaction(ph),r=yield t.objectStore(ph).get(HO(n));return yield t.done,r}catch(e){if(e instanceof On)mo.warn(e.message);else{let t=vs.create("idb-get",{originalErrorMessage:e?.message});mo.warn(t.message)}}})}function UO(n,e){return E(this,null,function*(){try{let r=(yield $O()).transaction(ph,"readwrite");yield r.objectStore(ph).put(e,HO(n)),yield r.done}catch(t){if(t instanceof On)mo.warn(t.message);else{let r=vs.create("idb-set",{originalErrorMessage:t?.message});mo.warn(r.message)}}})}function HO(n){return`${n.name}!${n.options.appId}`}var HW=1024,qW=30,nC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new rC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>qW){let s=WW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mo.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=jO(),{heartbeatsToSend:r,unsentEntries:i}=zW(this._heartbeatsCache.heartbeats),o=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mo.warn(t),""}})}};function jO(){return new Date().toISOString().substring(0,10)}function zW(n,e=HW){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),BO(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var rC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return lh()?CO().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield $W(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function BO(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}function WW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GW(n){Fn(new qt("platform-logger",e=>new Zb(e),"PRIVATE")),Fn(new qt("heartbeat",e=>new nC(e),"PRIVATE")),Xe(Xb,LO,n),Xe(Xb,LO,"esm2017"),Xe("fire-js","")}GW("");var KW="firebase",QW="11.10.0";Xe(KW,QW,"app");function qO(n){n===void 0&&(n=S(Et));let e=n.get(Vc);return t=>new de(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var _s=new Ko("ANGULARFIRE2_VERSION");function gh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var _l=(n,e)=>{let t=e?[e]:rv(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},vl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(vl||{}),zO=kI()&&typeof Zone<"u"?vl.WARN:vl.SILENT;var iv=class{zone;delegate;constructor(e,t=$E){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ys=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S($e);this.outsideAngular=t.runOutsideAngular(()=>new iv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new iv(typeof Zone>"u"?void 0:Zone.current,BE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WO=!1;function YW(n,e){!WO&&(zO>vl.SILENT||kI())&&(WO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),zO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function ZW(n){let e=S($e,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function xa(n){let e=S($e,{optional:!0});return e?e.run(()=>n()):n()}var XW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Pt(t,()=>xa(()=>n.apply(void 0,r)))),rt=(n,e,t)=>(t||=e?vl.WARN:vl.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(ys),s=S(Vc),a=S(Tt)}catch{return YW(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=xa(()=>s.add())),i[u]=XW(i[u],r,a));let c=ZW(()=>n.apply(this,i));return e?c instanceof de?c.pipe(Ho(o.outsideAngular),$o(o.insideAngular),qO(a)):c instanceof Promise?xa(()=>{let u=s.add();return new Promise((d,h)=>{c.then(p=>Pt(a,()=>xa(()=>d(p))),p=>Pt(a,()=>xa(()=>h(p)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:xa(()=>c):c instanceof de?c.pipe(Ho(o.outsideAngular),$o(o.insideAngular)):xa(()=>c)});var vo=class{constructor(e){return e}},Ma=class{constructor(){return rv()}};function JW(n){return n&&n.length===1?n[0]:new vo(ti())}var oC=new Z("angularfire2._apps"),eG={provide:vo,useFactory:JW,deps:[[new or,oC]]},tG={provide:Ma,deps:[[new or,oC]]};function nG(n){return(e,t)=>{let r=t.get(ga);Xe("angularfire",_s.full,"core"),Xe("angularfire",_s.full,"app"),Xe("angular",ow.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new vo(i)}}function GO(n,...e){return Bn([eG,tG,{provide:oC,useFactory:nG(n),multi:!0,deps:[$e,Et,ys,...e]}])}var KO=rt(iC,!0);var rG=new Map,iG={activated:!1,tokenObservers:[]},oG={initialized:!1,enabled:!1};function ni(n){return rG.get(n)||Object.assign({},iG)}function XO(){return oG}var sG="https://content-firebaseappcheck.googleapis.com/v1";var aG="exchangeDebugToken",QO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},XEe=1440*60*1e3;var cC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new wn,this.pending.promise.catch(t=>{}),yield cG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function cG(n){return new Promise(e=>{setTimeout(e,n)})}var lG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Es=new Jr("appCheck","AppCheck",lG);function JO(n){if(!ni(n).activated)throw Es.create("use-before-activation",{appName:n.name})}function eF(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw Es.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Es.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw Es.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:u.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function tF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sG}/projects/${t}/apps/${r}:${aG}?key=${i}`,body:{debug_token:e}}}var uG="firebase-app-check-database",dG=1,lC="firebase-app-check-store";var ov=null;function hG(){return ov||(ov=new Promise((n,e)=>{try{let t=indexedDB.open(uG,dG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Es.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lC,{keyPath:"compositeKey"})}}}catch(t){e(Es.create("storage-open",{originalErrorMessage:t?.message}))}}),ov)}function fG(n,e){return pG(gG(n),e)}function pG(n,e){return E(this,null,function*(){let r=(yield hG()).transaction(lC,"readwrite"),o=r.objectStore(lC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Es.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function gG(n){return`${n.options.appId}-${n.name}`}var mh=new xr("@firebase/app-check");function sC(n,e){return lh()?fG(n,e).catch(t=>{mh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nF(){return XO().enabled}function rF(){return E(this,null,function*(){let n=XO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var mG={error:"UNKNOWN_ERROR"};function vG(n){return dl.encodeString(JSON.stringify(n),!1)}function uC(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;JO(r);let i=ni(r),o=i.token,s;if(o&&!vh(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(vh(u)?o=u:yield sC(r,void 0))}if(!e&&o&&vh(o))return{token:o.token};let a=!1;if(nF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=eF(tF(r,yield rF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield sC(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?mh.warn(u.message):t&&mh.error(u),aC(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ni(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?mh.warn(u.message):t&&mh.error(u),s=u}let c;return o?s?vh(o)?c={token:o.token,internalError:s}:c=aC(s):(c={token:o.token},i.token=o,yield sC(r,o)):c=aC(s),a&&wG(r,c),c})}function _G(n){return E(this,null,function*(){let e=n.app;JO(e);let{provider:t}=ni(e);if(nF()){let r=yield rF(),{token:i}=yield eF(tF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yG(n,e,t,r){let{app:i}=n,o=ni(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&vh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),YO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>YO(n))}function iF(n,e){let t=ni(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function YO(n){let{app:e}=n,t=ni(e),r=t.tokenRefresher;r||(r=EG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function EG(n){let{app:e}=n;return new cC(()=>E(null,null,function*(){let t=ni(e),r;if(t.token?r=yield uC(n,!0):r=yield uC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},QO.RETRIAL_MIN_WAIT,QO.RETRIAL_MAX_WAIT)}function wG(n,e){let t=ni(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function vh(n){return n.expireTimeMillis-Date.now()>0}function aC(n){return{token:vG(mG),error:n}}var dC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ni(this.app);for(let t of e)iF(this.app,t.next);return Promise.resolve()}};function IG(n,e){return new dC(n,e)}function bG(n){return{getToken:e=>uC(n,e),getLimitedUseToken:()=>_G(n),addTokenListener:e=>yG(n,"INTERNAL",e),removeTokenListener:e=>iF(n.app,e)}}var CG="@firebase/app-check",TG="0.10.1";var DG="app-check",ZO="app-check-internal";function SG(){Fn(new qt(DG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return IG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZO).initialize()})),Fn(new qt(ZO,n=>{let e=n.getProvider("app-check").getImmediate();return bG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xe(CG,TG)}SG();var AG="app-check";var yl=class{constructor(){return _l(AG)}};var xG=["localhost","0.0.0.0","127.0.0.1"],dwe=typeof window<"u"&&xG.includes(window.location.hostname);function EF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wF=EF,IF=new Jr("auth","Firebase",EF());var dv=new xr("@firebase/auth");function MG(n,...e){dv.logLevel<=Te.WARN&&dv.warn(`Auth (${Mr}): ${n}`,...e)}function av(n,...e){dv.logLevel<=Te.ERROR&&dv.error(`Auth (${Mr}): ${n}`,...e)}function xi(n,...e){throw FC(n,...e)}function Ra(n,...e){return FC(n,...e)}function bF(n,e,t){let r=Object.assign(Object.assign({},wF()),{[e]:t});return new Jr("auth","Firebase",r).create(e,{appName:n.name})}function Eo(n){return bF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return IF.create(n,...e)}function oe(n,e,...t){if(!n)throw FC(e,...t)}function _o(n){let e="INTERNAL ASSERTION FAILED: "+n;throw av(e),new Error(e)}function bs(n,e){n||_o(e)}function gC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function RG(){return oF()==="http:"||oF()==="https:"}function oF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function PG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RG()||wO()||"connection"in navigator)?navigator.onLine:!0}function NG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Pa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,bs(t>e,"Short delay should be less than long delay!"),this.isMobile=ch()||ev()}get(){return PG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function LC(n,e){bs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var hv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var kG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var OG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FG=new Pa(3e4,6e4);function wo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Mi(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return CF(n,i,()=>E(null,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let h=Da(Object.assign({key:n.config.apiKey},d)).slice(1),p=yield n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:p},u);return EO()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&zn(n.emulatorConfig.host)&&(m.credentials="include"),hv.fetch()(yield TF(n,n.config.apiHost,t,h),m)}))})}function CF(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},kG),e);try{let i=new mC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw sv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw sv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw sv(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bF(n,d,u);xi(n,d)}}catch(i){if(i instanceof On)throw i;xi(n,"network-request-failed",{message:String(i)})}})}function Th(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let u=yield Mi(n,e,t,r,i);return"mfaPendingCredential"in u&&xi(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function TF(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?LC(n.config,i):`${n.config.apiScheme}://${i}`;return OG.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function LG(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var mC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ra(this.auth,"network-request-failed")),FG.get())})}};function sv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ra(n,e,r);return i.customData._tokenResponse=t,i}function sF(n){return n!==void 0&&n.enterprise!==void 0}var vC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LG(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function VG(n,e){return E(this,null,function*(){return Mi(n,"GET","/v2/recaptchaConfig",wo(n,e))})}function UG(n,e){return E(this,null,function*(){return Mi(n,"POST","/v1/accounts:delete",e)})}function fv(n,e){return E(this,null,function*(){return Mi(n,"POST","/v1/accounts:lookup",e)})}function yh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function VC(n,e=!1){return E(this,null,function*(){let t=Ae(n),r=yield t.getIdToken(e),i=UC(r);oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yh(hC(i.auth_time)),issuedAtTime:yh(hC(i.iat)),expirationTime:yh(hC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function hC(n){return Number(n)*1e3}function UC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return av("JWT malformed, contained fewer than 3 sections"),null;try{let i=ll(t);return i?JSON.parse(i):(av("Failed to decode base64 JWT payload"),null)}catch(i){return av("Caught error parsing JWT payload as JSON",i?.toString()),null}}function aF(n){let e=UC(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function El(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof On&&jG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function jG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var _C=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yh(this.lastLoginAt),this.creationTime=yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pv(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield El(n,fv(t,{idToken:r}));oe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DF(o.providerUserInfo):[],a=BG(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new wh(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function jC(n){return E(this,null,function*(){let e=Ae(n);yield pv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function BG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DF(n){return n.map(e=>{var{providerId:t}=e,r=HE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function $G(n,e){return E(this,null,function*(){let t=yield CF(n,{},()=>E(null,null,function*(){let r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield TF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&zn(n.emulatorConfig.host)&&(c.credentials="include"),hv.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function HG(n,e){return E(this,null,function*(){return Mi(n,"POST","/v2/accounts:revokeToken",wo(n,e))})}var Eh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");let t=aF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield $G(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(oe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(oe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _o("not implemented")}};function ws(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Is=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=HE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield El(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return VC(this,e)}reload(){return jC(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Zt(this.auth.app))return Promise.reject(Eo(this.auth));let e=yield this.getIdToken();return yield El(this,UG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,B=(u=t.createdAt)!==null&&u!==void 0?u:void 0,te=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:J,emailVerified:ue,isAnonymous:vt,providerData:Pe,stsTokenManager:x}=t;oe(J&&x,e,"internal-error");let C=Eh.fromJSON(this.name,x);oe(typeof J=="string",e,"internal-error"),ws(h,e.name),ws(p,e.name),oe(typeof ue=="boolean",e,"internal-error"),oe(typeof vt=="boolean",e,"internal-error"),ws(m,e.name),ws(b,e.name),ws(N,e.name),ws(k,e.name),ws(B,e.name),ws(te,e.name);let T=new n({uid:J,auth:e,email:p,emailVerified:ue,displayName:h,isAnonymous:vt,photoURL:b,phoneNumber:m,tenantId:N,stsTokenManager:C,createdAt:B,lastLoginAt:te});return Pe&&Array.isArray(Pe)&&(T.providerData=Pe.map(A=>Object.assign({},A))),k&&(T._redirectEventId=k),T}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Eh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];oe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?DF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Eh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var cF=new Map;function yo(n){bs(n instanceof Function,"Expected a class definition");let e=cF.get(n);return e?(bs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cF.set(n,e),e)}var qG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yC=qG;function cv(n,e,t){return`firebase:${n}:${e}:${t}`}var gv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=cv(this.userKey,i.apiKey,o),this.fullPersistenceKey=cv("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield fv(this.auth,{idToken:e}).catch(()=>{});return t?Is._fromGetAccountInfoResponse(this.auth,t,e):null}return Is._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(yo(yC),e,r);let i=(yield Promise.all(t.map(u=>E(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||yo(yC),s=cv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let h;if(typeof d=="string"){let p=yield fv(e,{idToken:d}).catch(()=>{});if(!p)break;h=yield Is._fromGetAccountInfoResponse(e,p,d)}else h=Is._fromJSON(e,d);u!==o&&(a=h),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function lF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PF(e))return"Blackberry";if(NF(e))return"Webos";if(AF(e))return"Safari";if((e.includes("chrome/")||xF(e))&&!e.includes("edge/"))return"Chrome";if(RF(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function SF(n=Yt()){return/firefox\//i.test(n)}function AF(n=Yt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xF(n=Yt()){return/crios\//i.test(n)}function MF(n=Yt()){return/iemobile/i.test(n)}function RF(n=Yt()){return/android/i.test(n)}function PF(n=Yt()){return/blackberry/i.test(n)}function NF(n=Yt()){return/webos/i.test(n)}function BC(n=Yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zG(n=Yt()){var e;return BC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WG(){return IO()&&document.documentMode===10}function kF(n=Yt()){return BC(n)||RF(n)||NF(n)||PF(n)||/windows phone/i.test(n)||MF(n)}function OF(n,e=[]){let t;switch(n){case"Browser":t=lF(Yt());break;case"Worker":t=`${lF(Yt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mr}/${r}`}var EC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function GG(t){return E(this,arguments,function*(n,e={}){return Mi(n,"GET","/v2/passwordPolicy",wo(n,e))})}var KG=6,wC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:KG,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var IC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new EC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield gv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield fv(this,{idToken:e}),r=yield Is._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Zt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield pv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=NG()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Zt(this.app))return Promise.reject(Eo(this));let t=e?Ae(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Zt(this.app)?Promise.reject(Eo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zt(this.app)?Promise.reject(Eo(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(yo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield GG(this),t=new wC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield HG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&yo(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=yield gv.create(this,[yo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&MG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ka(n){return Ae(n)}var mv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AO(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QG(n){bv=n}function FF(n){return bv.loadJS(n)}function YG(){return bv.recaptchaEnterpriseScript}function ZG(){return bv.gapiScript}function LF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var bC=class{constructor(){this.enterprise=new CC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},CC=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var XG="recaptcha-enterprise",VF="NO_RECAPTCHA",TC=class{constructor(e){this.type=XG,this.auth=ka(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(o){return E(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>E(null,null,function*(){VG(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new vC(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;sF(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(VF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bC().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&sF(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=YG();c.length!==0&&(c+=a),FF(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function _h(n,e,t,r=!1,i=!1){return E(this,null,function*(){let o=new TC(n),s;if(i)s=VF;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function DC(n,e,t,r,i){return E(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield _h(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>E(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield _h(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield _h(n,e,t);return r(n,a).catch(c=>E(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield _h(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield _h(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function $C(n,e){let t=Si(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ar(o,e??{}))return i;xi(i,"already-initialized")}return t.initialize({options:e})}function JG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function HC(n,e,t){let r=ka(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=UF(e),{host:s,port:a}=e9(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Ar(u,r.config.emulator)&&Ar(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,zn(s)?(gs(`${o}//${s}${c}`),ms("Auth",!0)):i||t9()}function UF(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function e9(n){let e=UF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:uF(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:uF(s)}}}function uF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function t9(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ih=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _o("not implemented")}_getIdTokenResponse(e){return _o("not implemented")}_linkToIdToken(e,t){return _o("not implemented")}_getReauthenticationResolver(e){return _o("not implemented")}};function n9(n,e){return E(this,null,function*(){return Mi(n,"POST","/v1/accounts:signUp",e)})}function r9(n,e){return E(this,null,function*(){return Th(n,"POST","/v1/accounts:signInWithPassword",wo(n,e))})}function i9(n,e){return E(this,null,function*(){return Mi(n,"POST","/v1/accounts:sendOobCode",wo(n,e))})}function o9(n,e){return E(this,null,function*(){return i9(n,e)})}function s9(n,e){return E(this,null,function*(){return Th(n,"POST","/v1/accounts:signInWithEmailLink",wo(n,e))})}function a9(n,e){return E(this,null,function*(){return Th(n,"POST","/v1/accounts:signInWithEmailLink",wo(n,e))})}var bh=class n extends Ih{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DC(e,t,"signInWithPassword",r9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return s9(e,{email:this._email,oobCode:this._password});default:xi(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DC(e,r,"signUpPassword",n9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a9(e,{idToken:t,email:this._email,oobCode:this._password});default:xi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function fC(n,e){return E(this,null,function*(){return Th(n,"POST","/v1/accounts:signInWithIdp",wo(n,e))})}function c9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l9(n){let e=gl(ml(n)).link,t=e?gl(ml(e)).deep_link_id:null,r=gl(ml(n)).deep_link_id;return(r?gl(ml(r)).link:null)||r||t||e||n}var vv=class n{constructor(e){var t,r,i,o,s,a;let c=gl(ml(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,h=c9((i=c.mode)!==null&&i!==void 0?i:null);oe(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=l9(e);try{return new n(t)}catch{return null}}};var jF=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return bh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=vv.parseLink(r);return oe(i,"argument-error"),bh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),_v=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var SC=class extends _v{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function u9(n,e){return E(this,null,function*(){return Th(n,"POST","/v1/accounts:signUp",wo(n,e))})}var wl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield Is._fromIdTokenResponse(e,r,i),s=dF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=dF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function dF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var AC=class n extends On{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function BF(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?AC._fromErrorAndOperation(n,o,e,r):o})}function d9(n,e,t=!1){return E(this,null,function*(){let r=yield El(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return wl._forOperation(n,"link",r)})}function h9(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Zt(r.app))return Promise.reject(Eo(r));let i="reauthenticate";try{let o=yield El(n,BF(r,i,e,n),t);oe(o.idToken,r,"internal-error");let s=UC(o.idToken);oe(s,r,"internal-error");let{sub:a}=s;return oe(n.uid===a,r,"user-mismatch"),wl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&xi(r,"user-mismatch"),o}})}function $F(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(Eo(n));let r="signIn",i=yield BF(n,r,e),o=yield wl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function qC(n,e){return E(this,null,function*(){return $F(ka(n),e)})}function f9(n,e,t){var r;oe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),oe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),oe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(oe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(oe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function HF(n){return E(this,null,function*(){let e=ka(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function zC(n,e,t){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(Eo(n));let r=ka(n),s=yield DC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u9,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&HF(n),c}),a=yield wl._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function WC(n,e,t){return Zt(n.app)?Promise.reject(Eo(n)):qC(Ae(n),jF.credential(e,t)).catch(r=>E(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&HF(n),r}))}function GC(n,e){return E(this,null,function*(){let t=Ae(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&f9(t.auth,i,e);let{email:o}=yield o9(t.auth,i);o!==n.email&&(yield n.reload())})}function p9(n,e){return E(this,null,function*(){return Mi(n,"POST","/v1/accounts:update",e)})}function KC(r,i){return E(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Ae(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield El(o,p9(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let u=o.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=o.displayName,u.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function Dh(n,e,t,r){return Ae(n).onIdTokenChanged(e,t,r)}function QC(n,e,t){return Ae(n).beforeAuthStateChanged(e,t)}function Sh(n){return Ae(n).signOut()}var yv="__sak";var Ev=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yv,"1"),this.storage.removeItem(yv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var g9=1e3,m9=10,v9=(()=>{class n extends Ev{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);WG()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,m9):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},g9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield jo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield jo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield jo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),qF=v9;var _9=(()=>{class n extends Ev{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),YC=_9;function y9(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var E9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>E(this,null,function*(){return d(r.origin,s)})),u=yield y9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zF(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var xC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=zF("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ai(){return window}function w9(n){Ai().location.href=n}function WF(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}function I9(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function b9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function C9(){return WF()?self:null}var GF="firebaseLocalStorageDb",T9=1,wv="firebaseLocalStorage",KF="fbase_key",Na=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cv(n,e){return n.transaction([wv],e?"readwrite":"readonly").objectStore(wv)}function D9(){let n=indexedDB.deleteDatabase(GF);return new Na(n).toPromise()}function MC(){let n=indexedDB.open(GF,T9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(wv,{keyPath:KF})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(wv)?e(r):(r.close(),yield D9(),e(yield MC()))}))})}function hF(n,e,t){return E(this,null,function*(){let r=Cv(n,!0).put({[KF]:e,value:t});return new Na(r).toPromise()})}function S9(n,e){return E(this,null,function*(){let t=Cv(n,!1).get(e),r=yield new Na(t).toPromise();return r===void 0?null:r.value})}function fF(n,e){let t=Cv(n,!0).delete(e);return new Na(t).toPromise()}var A9=800,x9=3,M9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield MC(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>x9)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return WF()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=E9._getInstance(C9()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield I9(),!this.activeServiceWorker)return;this.sender=new xC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||b9()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield MC();return yield hF(t,yv,"1"),yield fF(t,yv),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>hF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>S9(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>fF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=Cv(o,!1).getAll();return new Na(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),A9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),QF=M9;var ywe=LF("rcb"),Ewe=new Pa(3e4,6e4);function R9(n,e){return e?yo(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ch=class extends Ih{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function P9(n){return $F(n.auth,new Ch(n),n.bypassAuthState)}function N9(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),h9(t,new Ch(n),n.bypassAuthState)}function k9(n){return E(this,null,function*(){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),d9(t,new Ch(n),n.bypassAuthState)})}var RC=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P9;case"linkViaPopup":case"linkViaRedirect":return k9;case"reauthViaPopup":case"reauthViaRedirect":return N9;default:xi(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wwe=new Pa(2e3,1e4);var O9="pendingRedirect",lv=new Map,PC=class n extends RC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=lv.get(this.auth._key());if(!e){try{let r=(yield F9(this.resolver,this.auth))?yield jo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lv.set(this.auth._key(),e)}return this.bypassAuthState||lv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return jo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,jo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function F9(n,e){return E(this,null,function*(){let t=U9(e),r=V9(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function L9(n,e){lv.set(n._key(),e)}function V9(n){return yo(n._redirectPersistence)}function U9(n){return cv(O9,n.config.apiKey,n.name)}function j9(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(Eo(n));let r=ka(n),i=R9(r,e),s=yield new PC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var B9=600*1e3,NC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ra(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B9&&this.cachedEventUids.clear(),this.cachedEventUids.has(pF(e))}saveEventToCache(e){this.cachedEventUids.add(pF(e)),this.lastProcessedEventTime=Date.now()}};function pF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YF(n);default:return!1}}function H9(t){return E(this,arguments,function*(n,e={}){return Mi(n,"GET","/v1/projects",e)})}var q9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z9=/^https?/;function W9(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield H9(n);for(let t of e)try{if(G9(t))return}catch{}xi(n,"unauthorized-domain")})}function G9(n){let e=gC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!z9.test(t))return!1;if(q9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var K9=new Pa(3e4,6e4);function gF(){let n=Ai().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q9(n){return new Promise((e,t)=>{var r,i,o;function s(){gF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gF(),t(Ra(n,"network-request-failed"))},timeout:K9.get()})}if(!((i=(r=Ai().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ai().gapi)===null||o===void 0)&&o.load)s();else{let a=LF("iframefcb");return Ai()[a]=()=>{gapi.load?s():t(Ra(n,"network-request-failed"))},FF(`${ZG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw uv=null,e})}var uv=null;function Y9(n){return uv=uv||Q9(n),uv}var Z9=new Pa(5e3,15e3),X9="__/auth/iframe",J9="emulator/auth/iframe",e7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n7(n){let e=n.config;oe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?LC(e,J9):`https://${n.config.authDomain}/${X9}`,r={apiKey:e.apiKey,appName:n.name,v:Mr},i=t7.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Da(r).slice(1)}`}function r7(n){return E(this,null,function*(){let e=yield Y9(n),t=Ai().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:n7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e7,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ra(n,"network-request-failed"),a=Ai().setTimeout(()=>{o(s)},Z9.get());function c(){Ai().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var i7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o7=500,s7=600,a7="_blank",c7="http://localhost",Iv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function l7(n,e,t,r=o7,i=s7){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},i7),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Yt().toLowerCase();t&&(a=xF(u)?a7:t),SF(u)&&(e=e||c7,c.scrollbars="yes");let d=Object.entries(c).reduce((p,[m,b])=>`${p}${m}=${b},`,"");if(zG(u)&&a!=="_self")return u7(e||"",a),new Iv(null);let h=window.open(e||"",a,d);oe(h,n,"popup-blocked");try{h.focus()}catch{}return new Iv(h)}function u7(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var d7="__/auth/handler",h7="emulator/auth/handler",f7=encodeURIComponent("fac");function mF(n,e,t,r,i,o){return E(this,null,function*(){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mr,eventId:i};if(e instanceof _v){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",pl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof SC){let d=e.getScopes().filter(h=>h!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${f7}=${encodeURIComponent(c)}`:"";return`${p7(n)}?${Da(a).slice(1)}${u}`})}function p7({config:n}){return n.emulator?LC(n,h7):`https://${n.authDomain}/${d7}`}var pC="webStorageSupport",kC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YC,this._completeRedirectFn=j9,this._overrideRedirectResult=L9}_openPopup(e,t,r,i){return E(this,null,function*(){var o;bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield mF(e,t,r,gC(),i);return l7(e,s,zF())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield mF(e,t,r,gC(),i);return w9(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(bs(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield r7(e),r=new NC(e);return t.register("authEvent",i=>(oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pC,{type:pC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[pC];s!==void 0&&t(!!s),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=W9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kF()||AF()||BC()}},ZF=kC;var vF="@firebase/auth",_F="1.10.8";var OC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function g7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m7(n){Fn(new qt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;oe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OF(n)},u=new IC(r,i,o,c);return JG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fn(new qt("auth-internal",e=>{let t=ka(e.getProvider("auth").getImmediate());return(r=>new OC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(vF,_F,g7(n)),Xe(vF,_F,"esm2017")}var v7=300,_7=qb("authIdTokenMaxAge")||v7,yF=null,y7=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_7)return;let i=t?.token;yF!==i&&(yF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Tv(n=ti()){let e=Si(n,"auth");if(e.isInitialized())return e.getImmediate();let t=$C(n,{popupRedirectResolver:ZF,persistence:[QF,qF,YC]}),r=qb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=y7(o.toString());QC(t,s,()=>s(t.currentUser)),Dh(t,a=>s(a))}}let i=$b("auth");return i&&HC(t,`http://${i}`),t}function E7(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}QG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ra("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",E7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m7("Browser");function eL(n){return new de(function(e){var t=Dh(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var tL="auth",Ke=class{constructor(e){return e}},Ah=class{constructor(){return _l(tL)}};var ZC=new Z("angularfire2.auth-instances");function oK(n,e){let t=gh(tL,n,e);return t&&new Ke(t)}function sK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ke(r)}}var aK={provide:Ah,deps:[[new or,ZC]]},cK={provide:Ke,useFactory:oK,deps:[[new or,ZC],vo]};function nL(n,...e){return Xe("angularfire",_s.full,"auth"),Bn([cK,aK,{provide:ZC,useFactory:sK(n),multi:!0,deps:[$e,Et,ys,Ma,[new or,yl],...e]}])}var rL=rt(eL,!0);var iL=rt(zC,!0,2);var XC=rt(GC,!0,2);var oL=rt(WC,!0,2);var JC=rt(Sh,!0,2);var sL=rt(KC,!0,2);var Rr=class n{firebaseAuth=S(Ke);user$=rL(this.firebaseAuth);currentUserSig=ee(void 0);register(e,t,r){console.log("=== REGISTRATION ATTEMPT ==="),console.log("Email:",e),console.log("Username:",t),console.log("Password length:",r?r.length:0),console.log("Password (first/last chars visible):",r?`${r.charAt(0)}***${r.charAt(r.length-1)}`:"EMPTY"),console.log("Calling Firebase: createUserWithEmailAndPassword(auth, email, password)");let i=iL(this.firebaseAuth,e,r).then(o=>(console.log("\u2705 Firebase registration successful for user:",o.user.uid),sL(o.user,{displayName:t}).then(()=>(console.log("\u2705 Profile updated with displayName:",t),XC(o.user))).then(()=>{console.log("\u2705 Verification email sent to:",e)}).catch(s=>{throw console.error("\u274C Error in updateProfile or sendEmailVerification:",s),this.handleAuthError(s)}))).catch(o=>{throw console.error("\u274C Firebase registration failed:",o),this.handleAuthError(o)});return je(i)}login(e,t){let r=oL(this.firebaseAuth,e,t).then(i=>i.user.emailVerified?Promise.resolve():JC(this.firebaseAuth).then(()=>{let o=new Error("Email not verified");throw o.code="auth/user-not-verified",o})).catch(i=>{throw this.handleAuthError(i)});return je(r)}logout(){let e=JC(this.firebaseAuth);return je(e)}resendVerificationEmail(){let e=this.firebaseAuth.currentUser;if(!e)return qo(()=>new Error("No user logged in"));let t=XC(e).catch(r=>{throw this.handleAuthError(r)});return je(t)}handleAuthError(e){console.error("=== FIREBASE AUTH ERROR ==="),console.error("Full Error Object:",e),console.error("Error Code:",e?.code),console.error("Error Message:",e?.message),console.error("Error Name:",e?.name),e?.customData&&console.error("Custom Data:",e.customData),e?.response&&console.error("HTTP Response:",e.response);let t=e?.code||"",r={"auth/invalid-email":!0,"auth/user-disabled":!0,"auth/user-not-found":!0,"auth/wrong-password":!0,"auth/email-already-in-use":!0,"auth/weak-password":!0,"auth/password-does-not-meet-requirements":!0,"auth/operation-not-allowed":!0,"auth/too-many-requests":!0,"auth/network-request-failed":!0,"auth/account-exists-with-different-credential":!0,"auth/invalid-credential":!0,"auth/internal-error":!0,"auth/missing-email":!0,"auth/missing-password":!0},i=new Error(e?.message||"Authentication failed");return i.code=r[t]?t:t||"auth/internal-error",console.error("Processed Error Code:",i.code),i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var it=class n{modals=new Map;openModal(e){this.modals.set(e,!0)}closeModal(e){this.modals.set(e,!1)}toggleModal(e){let t=this.modals.get(e)??!1;this.modals.set(e,!t)}isOpen(e){return this.modals.get(e)??!1}closeAllModals(){this.modals.forEach((e,t)=>{this.modals.set(t,!1)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var aL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cL={};var Io,eT;(function(){var n;function e(x,C){function T(){}T.prototype=C.prototype,x.D=C.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(A,R,O){for(var D=Array(arguments.length-2),Hi=2;Hi<arguments.length;Hi++)D[Hi-2]=arguments[Hi];return C.prototype[R].apply(A,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,C,T){T||(T=0);var A=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)A[R]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(R=0;16>R;++R)A[R]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=x.g[0],T=x.g[1],R=x.g[2];var O=x.g[3],D=C+(O^T&(R^O))+A[0]+3614090360&4294967295;C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+A[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+A[2]+606105819&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+A[3]+3250441966&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+A[4]+4118548399&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+A[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+A[6]+2821735955&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+A[7]+4249261313&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+A[8]+1770035416&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+A[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+A[10]+4294925233&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+A[11]+2304563134&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+A[12]+1804603682&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+A[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+A[14]+2792965006&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+A[15]+1236535329&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(R^O&(T^R))+A[1]+4129170786&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+A[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+A[11]+643717713&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+A[0]+3921069994&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+A[5]+3593408605&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+A[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+A[15]+3634488961&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+A[4]+3889429448&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+A[9]+568446438&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+A[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+A[3]+4107603335&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+A[8]+1163531501&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+A[13]+2850285829&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+A[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+A[7]+1735328473&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+A[12]+2368359562&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(T^R^O)+A[5]+4294588738&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+A[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+A[11]+1839030562&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+A[14]+4259657740&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+A[1]+2763975236&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+A[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+A[7]+4139469664&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+A[10]+3200236656&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+A[13]+681279174&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+A[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+A[3]+3572445317&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+A[6]+76029189&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+A[9]+3654602809&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+A[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+A[15]+530742520&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+A[2]+3299628645&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(R^(T|~O))+A[0]+4096336452&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+A[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+A[14]+2878612391&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+A[5]+4237533241&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+A[12]+1700485571&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+A[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+A[10]+4293915773&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+A[1]+2240044497&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+A[8]+1873313359&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+A[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+A[6]+2734768916&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+A[13]+1309151649&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+A[4]+4149444226&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+A[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+A[2]+718787259&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var T=C-this.blockSize,A=this.B,R=this.h,O=0;O<C;){if(R==0)for(;O<=T;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<C;)if(A[R++]=x.charCodeAt(O++),R==this.blockSize){i(this,A),R=0;break}}else for(;O<C;)if(A[R++]=x[O++],R==this.blockSize){i(this,A),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var T=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=T&255,T/=256;for(this.u(x),x=Array(16),C=T=0;4>C;++C)for(var A=0;32>A;A+=8)x[T++]=this.g[C]>>>A&255;return x};function o(x,C){var T=a;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=C(x)}function s(x,C){this.h=C;for(var T=[],A=!0,R=x.length-1;0<=R;R--){var O=x[R]|0;A&&O==C||(T[R]=O,A=!1)}this.g=T}var a={};function c(x){return-128<=x&&128>x?o(x,function(C){return new s([C|0],0>C?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return k(u(-x));for(var C=[],T=1,A=0;x>=T;A++)C[A]=x/T|0,T*=4294967296;return new s(C,0)}function d(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return k(d(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(C,8)),A=h,R=0;R<x.length;R+=8){var O=Math.min(8,x.length-R),D=parseInt(x.substring(R,R+O),C);8>O?(O=u(Math.pow(C,O)),A=A.j(O).add(u(D))):(A=A.j(T),A=A.add(u(D)))}return A}var h=c(0),p=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-k(this).m();for(var x=0,C=1,T=0;T<this.g.length;T++){var A=this.i(T);x+=(0<=A?A:4294967296+A)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(N(this))return"-"+k(this).toString(x);for(var C=u(Math.pow(x,6)),T=this,A="";;){var R=ue(T,C).g;T=B(T,R.j(C));var O=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=R,b(T))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function N(x){return x.h==-1}n.l=function(x){return x=B(this,x),N(x)?-1:b(x)?0:1};function k(x){for(var C=x.g.length,T=[],A=0;A<C;A++)T[A]=~x.g[A];return new s(T,~x.h).add(p)}n.abs=function(){return N(this)?k(this):this},n.add=function(x){for(var C=Math.max(this.g.length,x.g.length),T=[],A=0,R=0;R<=C;R++){var O=A+(this.i(R)&65535)+(x.i(R)&65535),D=(O>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);A=D>>>16,O&=65535,D&=65535,T[R]=D<<16|O}return new s(T,T[T.length-1]&-2147483648?-1:0)};function B(x,C){return x.add(k(C))}n.j=function(x){if(b(this)||b(x))return h;if(N(this))return N(x)?k(this).j(k(x)):k(k(this).j(x));if(N(x))return k(this.j(k(x)));if(0>this.l(m)&&0>x.l(m))return u(this.m()*x.m());for(var C=this.g.length+x.g.length,T=[],A=0;A<2*C;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<x.g.length;R++){var O=this.i(A)>>>16,D=this.i(A)&65535,Hi=x.i(R)>>>16,wu=x.i(R)&65535;T[2*A+2*R]+=D*wu,te(T,2*A+2*R),T[2*A+2*R+1]+=O*wu,te(T,2*A+2*R+1),T[2*A+2*R+1]+=D*Hi,te(T,2*A+2*R+1),T[2*A+2*R+2]+=O*Hi,te(T,2*A+2*R+2)}for(A=0;A<C;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=C;A<2*C;A++)T[A]=0;return new s(T,0)};function te(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function J(x,C){this.g=x,this.h=C}function ue(x,C){if(b(C))throw Error("division by zero");if(b(x))return new J(h,h);if(N(x))return C=ue(k(x),C),new J(k(C.g),k(C.h));if(N(C))return C=ue(x,k(C)),new J(k(C.g),C.h);if(30<x.g.length){if(N(x)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var T=p,A=C;0>=A.l(x);)T=vt(T),A=vt(A);var R=Pe(T,1),O=Pe(A,1);for(A=Pe(A,2),T=Pe(T,2);!b(A);){var D=O.add(A);0>=D.l(x)&&(R=R.add(T),O=D),A=Pe(A,1),T=Pe(T,1)}return C=B(x,R.j(C)),new J(R,C)}for(R=h;0<=x.l(C);){for(T=Math.max(1,Math.floor(x.m()/C.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=u(T),D=O.j(C);N(D)||0<D.l(x);)T-=A,O=u(T),D=O.j(C);b(O)&&(O=p),R=R.add(O),x=B(x,D)}return new J(R,x)}n.A=function(x){return ue(this,x).h},n.and=function(x){for(var C=Math.max(this.g.length,x.g.length),T=[],A=0;A<C;A++)T[A]=this.i(A)&x.i(A);return new s(T,this.h&x.h)},n.or=function(x){for(var C=Math.max(this.g.length,x.g.length),T=[],A=0;A<C;A++)T[A]=this.i(A)|x.i(A);return new s(T,this.h|x.h)},n.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),T=[],A=0;A<C;A++)T[A]=this.i(A)^x.i(A);return new s(T,this.h^x.h)};function vt(x){for(var C=x.g.length+1,T=[],A=0;A<C;A++)T[A]=x.i(A)<<1|x.i(A-1)>>>31;return new s(T,x.h)}function Pe(x,C){var T=C>>5;C%=32;for(var A=x.g.length-T,R=[],O=0;O<A;O++)R[O]=0<C?x.i(O+T)>>>C|x.i(O+T+1)<<32-C:x.i(O+T);return new s(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eT=cL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Io=cL.Integer=s}).apply(typeof aL<"u"?aL:typeof self<"u"?self:typeof window<"u"?window:{});var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bo={};var tT,lK,Il,nT,xh,Sv,rT,iT,oT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dv=="object"&&Dv];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var P=l[v];if(!(P in g))break e;g=g[P]}l=l[l.length-1],v=g[l],f=f(v),f!=v&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function o(l,f){l instanceof String&&(l+="");var g=0,v=!1,P={next:function(){if(!v&&g<l.length){var L=g++;return{value:f(L,l[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(f,g){return g})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),l.apply(f,P)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function b(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,P,L){for(var z=Array(arguments.length-2),et=2;et<arguments.length;et++)z[et-2]=arguments[et];return f.prototype[P].apply(v,z)}}function N(l){let f=l.length;if(0<f){let g=Array(f);for(let v=0;v<f;v++)g[v]=l[v];return g}return[]}function k(l,f){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(c(v)){let P=l.length||0,L=v.length||0;l.length=P+L;for(let z=0;z<L;z++)l[P+z]=v[z]}else l.push(v)}}class B{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function te(l){return/^[\s\xa0]*$/.test(l)}function J(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ue(l){return ue[" "](l),l}ue[" "]=function(){};var vt=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Pe(l,f,g){for(let v in l)f.call(g,l[v],v,l)}function x(l,f){for(let g in l)f.call(void 0,l[g],g,l)}function C(l){let f={};for(let g in l)f[g]=l[g];return f}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let g,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(g in v)l[g]=v[g];for(let L=0;L<T.length;L++)g=T[L],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function R(l){var f=1;l=l.split(":");let g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function O(l){a.setTimeout(()=>{throw l},0)}function D(){var l=Jy;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Hi{constructor(){this.h=this.g=null}add(f,g){let v=wu.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var wu=new B(()=>new JB,l=>l.reset());class JB{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Iu,bu=!1,Jy=new Hi,Nx=()=>{let l=a.Promise.resolve(void 0);Iu=()=>{l.then(e3)}};var e3=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){O(g)}var f=wu;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}bu=!1};function Fo(){this.s=this.s,this.C=this.C}Fo.prototype.s=!1,Fo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function an(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var t3=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l})();function Cu(l,f){if(an.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(vt){e:{try{ue(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:n3[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Cu.aa.h.call(this)}}b(Cu,an);var n3={2:"touch",3:"pen",4:"mouse"};Cu.prototype.h=function(){Cu.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Tu="closure_listenable_"+(1e6*Math.random()|0),r3=0;function i3(l,f,g,v,P){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=P,this.key=++r3,this.da=this.fa=!1}function Yf(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Zf(l){this.src=l,this.g={},this.h=0}Zf.prototype.add=function(l,f,g,v,P){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var z=tE(l,f,v,P);return-1<z?(f=l[z],g||(f.fa=!1)):(f=new i3(f,this.src,L,!!v,P),f.fa=g,l.push(f)),f};function eE(l,f){var g=f.type;if(g in l.g){var v=l.g[g],P=Array.prototype.indexOf.call(v,f,void 0),L;(L=0<=P)&&Array.prototype.splice.call(v,P,1),L&&(Yf(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function tE(l,f,g,v){for(var P=0;P<l.length;++P){var L=l[P];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==v)return P}return-1}var nE="closure_lm_"+(1e6*Math.random()|0),rE={};function kx(l,f,g,v,P){if(v&&v.once)return Fx(l,f,g,v,P);if(Array.isArray(f)){for(var L=0;L<f.length;L++)kx(l,f[L],g,v,P);return null}return g=aE(g),l&&l[Tu]?l.K(f,g,u(v)?!!v.capture:!!v,P):Ox(l,f,g,!1,v,P)}function Ox(l,f,g,v,P,L){if(!f)throw Error("Invalid event type");var z=u(P)?!!P.capture:!!P,et=oE(l);if(et||(l[nE]=et=new Zf(l)),g=et.add(f,g,v,z,L),g.proxy)return g;if(v=o3(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)t3||(P=z),P===void 0&&(P=!1),l.addEventListener(f.toString(),v,P);else if(l.attachEvent)l.attachEvent(Vx(f.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function o3(){function l(g){return f.call(l.src,l.listener,g)}let f=s3;return l}function Fx(l,f,g,v,P){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Fx(l,f[L],g,v,P);return null}return g=aE(g),l&&l[Tu]?l.L(f,g,u(v)?!!v.capture:!!v,P):Ox(l,f,g,!0,v,P)}function Lx(l,f,g,v,P){if(Array.isArray(f))for(var L=0;L<f.length;L++)Lx(l,f[L],g,v,P);else v=u(v)?!!v.capture:!!v,g=aE(g),l&&l[Tu]?(l=l.i,f=String(f).toString(),f in l.g&&(L=l.g[f],g=tE(L,g,v,P),-1<g&&(Yf(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[f],l.h--)))):l&&(l=oE(l))&&(f=l.g[f.toString()],l=-1,f&&(l=tE(f,g,v,P)),(g=-1<l?f[l]:null)&&iE(g))}function iE(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Tu])eE(f.i,l);else{var g=l.type,v=l.proxy;f.removeEventListener?f.removeEventListener(g,v,l.capture):f.detachEvent?f.detachEvent(Vx(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=oE(f))?(eE(g,l),g.h==0&&(g.src=null,f[nE]=null)):Yf(l)}}}function Vx(l){return l in rE?rE[l]:rE[l]="on"+l}function s3(l,f){if(l.da)l=!0;else{f=new Cu(f,this);var g=l.listener,v=l.ha||l.src;l.fa&&iE(l),l=g.call(v,f)}return l}function oE(l){return l=l[nE],l instanceof Zf?l:null}var sE="__closure_events_fn_"+(1e9*Math.random()>>>0);function aE(l){return typeof l=="function"?l:(l[sE]||(l[sE]=function(f){return l.handleEvent(f)}),l[sE])}function cn(){Fo.call(this),this.i=new Zf(this),this.M=this,this.F=null}b(cn,Fo),cn.prototype[Tu]=!0,cn.prototype.removeEventListener=function(l,f,g,v){Lx(this,l,f,g,v)};function Dn(l,f){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=f.type||f,typeof f=="string")f=new an(f,l);else if(f instanceof an)f.target=f.target||l;else{var P=f;f=new an(v,l),A(f,P)}if(P=!0,g)for(var L=g.length-1;0<=L;L--){var z=f.g=g[L];P=Xf(z,v,!0,f)&&P}if(z=f.g=l,P=Xf(z,v,!0,f)&&P,P=Xf(z,v,!1,f)&&P,g)for(L=0;L<g.length;L++)z=f.g=g[L],P=Xf(z,v,!1,f)&&P}cn.prototype.N=function(){if(cn.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],v=0;v<g.length;v++)Yf(g[v]);delete l.g[f],l.h--}}this.F=null},cn.prototype.K=function(l,f,g,v){return this.i.add(String(l),f,!1,g,v)},cn.prototype.L=function(l,f,g,v){return this.i.add(String(l),f,!0,g,v)};function Xf(l,f,g,v){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,L=0;L<f.length;++L){var z=f[L];if(z&&!z.da&&z.capture==g){var et=z.listener,en=z.ha||z.src;z.fa&&eE(l.i,z),P=et.call(en,v)!==!1&&P}}return P&&!v.defaultPrevented}function Ux(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function jx(l){l.g=Ux(()=>{l.g=null,l.i&&(l.i=!1,jx(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class a3 extends Fo{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:jx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Du(l){Fo.call(this),this.h=l,this.g={}}b(Du,Fo);var Bx=[];function $x(l){Pe(l.g,function(f,g){this.g.hasOwnProperty(g)&&iE(f)},l),l.g={}}Du.prototype.N=function(){Du.aa.N.call(this),$x(this)},Du.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cE=a.JSON.stringify,c3=a.JSON.parse,l3=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function lE(){}lE.prototype.h=null;function Hx(l){return l.h||(l.h=l.i())}function qx(){}var Su={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uE(){an.call(this,"d")}b(uE,an);function dE(){an.call(this,"c")}b(dE,an);var qs={},zx=null;function Jf(){return zx=zx||new cn}qs.La="serverreachability";function Wx(l){an.call(this,qs.La,l)}b(Wx,an);function Au(l){let f=Jf();Dn(f,new Wx(f))}qs.STAT_EVENT="statevent";function Gx(l,f){an.call(this,qs.STAT_EVENT,l),this.stat=f}b(Gx,an);function Sn(l){let f=Jf();Dn(f,new Gx(f,l))}qs.Ma="timingevent";function Kx(l,f){an.call(this,qs.Ma,l),this.size=f}b(Kx,an);function xu(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Mu(){this.g=!0}Mu.prototype.xa=function(){this.g=!1};function u3(l,f,g,v,P,L){l.info(function(){if(l.g)if(L)for(var z="",et=L.split("&"),en=0;en<et.length;en++){var Ue=et[en].split("=");if(1<Ue.length){var ln=Ue[0];Ue=Ue[1];var un=ln.split("_");z=2<=un.length&&un[1]=="type"?z+(ln+"="+Ue+"&"):z+(ln+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+f+`
`+g+`
`+z})}function d3(l,f,g,v,P,L,z){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+f+`
`+g+`
`+L+" "+z})}function cc(l,f,g,v){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+f3(l,g)+(v?" "+v:"")})}function h3(l,f){l.info(function(){return"TIMEOUT: "+f})}Mu.prototype.info=function(){};function f3(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return cE(g)}catch{return f}}var ep={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hE;function tp(){}b(tp,lE),tp.prototype.g=function(){return new XMLHttpRequest},tp.prototype.i=function(){return{}},hE=new tp;function Lo(l,f,g,v){this.j=l,this.i=f,this.l=g,this.R=v||1,this.U=new Du(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yx}function Yx(){this.i=null,this.g="",this.h=!1}var Zx={},fE={};function pE(l,f,g){l.L=1,l.v=op(qi(f)),l.m=g,l.P=!0,Xx(l,null)}function Xx(l,f){l.F=Date.now(),np(l),l.A=qi(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),hM(g.i,"t",v),l.C=0,g=l.j.J,l.h=new Yx,l.g=MM(l.j,g?f:null,!l.m),0<l.O&&(l.M=new a3(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,v=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Bx[0]=P.toString()),P=Bx);for(var L=0;L<P.length;L++){var z=kx(g,P[L],v||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.H?C(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Au(),u3(l.i,l.u,l.A,l.l,l.R,l.m)}Lo.prototype.ca=function(l){l=l.target;let f=this.M;f&&zi(l)==3?f.j():this.Y(l)},Lo.prototype.Y=function(l){try{if(l==this.g)e:{let un=zi(this.g);var f=this.g.Ba();let dc=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||yM(this.g)))){this.J||un!=4||f==7||(f==8||0>=dc?Au(3):Au(2)),gE(this);var g=this.g.Z();this.X=g;t:if(Jx(this)){var v=yM(this.g);l="";var P=v.length,L=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),Ru(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,l+=this.h.i.decode(v[f],{stream:!(L&&f==P-1)});v.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,d3(this.i,this.u,this.A,this.l,this.R,un,g),this.o){if(this.T&&!this.K){t:{if(this.g){var et,en=this.g;if((et=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(et)){var Ue=et;break t}}Ue=null}if(g=Ue)cc(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mE(this,g);else{this.o=!1,this.s=3,Sn(12),zs(this),Ru(this);break e}}if(this.P){g=!0;let Vr;for(;!this.J&&this.C<z.length;)if(Vr=p3(this,z),Vr==fE){un==4&&(this.s=4,Sn(14),g=!1),cc(this.i,this.l,null,"[Incomplete Response]");break}else if(Vr==Zx){this.s=4,Sn(15),cc(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else cc(this.i,this.l,Vr,null),mE(this,Vr);if(Jx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||z.length!=0||this.h.h||(this.s=1,Sn(16),g=!1),this.o=this.o&&g,!g)cc(this.i,this.l,z,"[Invalid Chunked Response]"),zs(this),Ru(this);else if(0<z.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),IE(ln),ln.M=!0,Sn(11))}}else cc(this.i,this.l,z,null),mE(this,z);un==4&&zs(this),this.o&&!this.J&&(un==4?DM(this.j,this):(this.o=!1,np(this)))}else R3(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Sn(12)):(this.s=0,Sn(13)),zs(this),Ru(this)}}}catch{}finally{}};function Jx(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function p3(l,f){var g=l.C,v=f.indexOf(`
`,g);return v==-1?fE:(g=Number(f.substring(g,v)),isNaN(g)?Zx:(v+=1,v+g>f.length?fE:(f=f.slice(v,v+g),l.C=v+g,f)))}Lo.prototype.cancel=function(){this.J=!0,zs(this)};function np(l){l.S=Date.now()+l.I,eM(l,l.I)}function eM(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=xu(p(l.ba,l),f)}function gE(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Lo.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(h3(this.i,this.A),this.L!=2&&(Au(),Sn(17)),zs(this),this.s=2,Ru(this)):eM(this,this.S-l)};function Ru(l){l.j.G==0||l.J||DM(l.j,l)}function zs(l){gE(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,$x(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function mE(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||vE(g.h,l))){if(!l.K&&vE(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)up(g),cp(g);else break e;wE(g),Sn(18)}}else g.za=P[1],0<g.za-g.T&&37500>P[2]&&g.F&&g.v==0&&!g.C&&(g.C=xu(p(g.Za,g),6e3));if(1>=rM(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Gs(g,11)}else if((l.K||g.g==l)&&up(g),!te(f))for(P=g.Da.g.parse(f),f=0;f<P.length;f++){let Ue=P[f];if(g.T=Ue[0],Ue=Ue[1],g.G==2)if(Ue[0]=="c"){g.K=Ue[1],g.ia=Ue[2];let ln=Ue[3];ln!=null&&(g.la=ln,g.j.info("VER="+g.la));let un=Ue[4];un!=null&&(g.Aa=un,g.j.info("SVER="+g.Aa));let dc=Ue[5];dc!=null&&typeof dc=="number"&&0<dc&&(v=1.5*dc,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let Vr=l.g;if(Vr){let hp=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hp){var L=v.h;L.g||hp.indexOf("spdy")==-1&&hp.indexOf("quic")==-1&&hp.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(_E(L,L.h),L.h=null))}if(v.D){let bE=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;bE&&(v.ya=bE,lt(v.I,v.D,bE))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var z=l;if(v.qa=xM(v,v.J?v.ia:null,v.W),z.K){iM(v.h,z);var et=z,en=v.L;en&&(et.I=en),et.B&&(gE(et),np(et)),v.g=z}else CM(v);0<g.i.length&&lp(g)}else Ue[0]!="stop"&&Ue[0]!="close"||Gs(g,7);else g.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Gs(g,7):EE(g):Ue[0]!="noop"&&g.l&&g.l.ta(Ue),g.v=0)}}Au(4)}catch{}}var g3=class{constructor(l,f){this.g=l,this.map=f}};function tM(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nM(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function rM(l){return l.h?1:l.g?l.g.size:0}function vE(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function _E(l,f){l.g?l.g.add(f):l.h=f}function iM(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}tM.prototype.cancel=function(){if(this.i=oM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function oM(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let g of l.g.values())f=f.concat(g.D);return f}return N(l.i)}function m3(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],g=l.length,v=0;v<g;v++)f.push(l[v]);return f}f=[],g=0;for(v in l)f[g++]=l[v];return f}function v3(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(let v in l)f[g++]=v;return f}}}function sM(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=v3(l),v=m3(l),P=v.length,L=0;L<P;L++)f.call(void 0,v[L],g&&g[L],l)}var aM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _3(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),P=null;if(0<=v){var L=l[g].substring(0,v);P=l[g].substring(v+1)}else L=l[g];f(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Ws(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ws){this.h=l.h,rp(this,l.j),this.o=l.o,this.g=l.g,ip(this,l.s),this.l=l.l;var f=l.i,g=new ku;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),cM(this,g),this.m=l.m}else l&&(f=String(l).match(aM))?(this.h=!1,rp(this,f[1]||"",!0),this.o=Pu(f[2]||""),this.g=Pu(f[3]||"",!0),ip(this,f[4]),this.l=Pu(f[5]||"",!0),cM(this,f[6]||"",!0),this.m=Pu(f[7]||"")):(this.h=!1,this.i=new ku(null,this.h))}Ws.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Nu(f,lM,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Nu(f,lM,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Nu(g,g.charAt(0)=="/"?w3:E3,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Nu(g,b3)),l.join("")};function qi(l){return new Ws(l)}function rp(l,f,g){l.j=g?Pu(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function ip(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function cM(l,f,g){f instanceof ku?(l.i=f,C3(l.i,l.h)):(g||(f=Nu(f,I3)),l.i=new ku(f,l.h))}function lt(l,f,g){l.i.set(f,g)}function op(l){return lt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pu(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Nu(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,y3),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function y3(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var lM=/[#\/\?@]/g,E3=/[#\?:]/g,w3=/[#\?]/g,I3=/[#\?@]/g,b3=/#/g;function ku(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Vo(l){l.g||(l.g=new Map,l.h=0,l.i&&_3(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=ku.prototype,n.add=function(l,f){Vo(this),this.i=null,l=lc(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function uM(l,f){Vo(l),f=lc(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function dM(l,f){return Vo(l),f=lc(l,f),l.g.has(f)}n.forEach=function(l,f){Vo(this),this.g.forEach(function(g,v){g.forEach(function(P){l.call(f,P,v,this)},this)},this)},n.na=function(){Vo(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){let P=l[v];for(let L=0;L<P.length;L++)g.push(f[v])}return g},n.V=function(l){Vo(this);let f=[];if(typeof l=="string")dM(this,l)&&(f=f.concat(this.g.get(lc(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},n.set=function(l,f){return Vo(this),this.i=null,l=lc(this,l),dM(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function hM(l,f,g){uM(l,f),0<g.length&&(l.i=null,l.g.set(lc(l,f),N(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];let L=encodeURIComponent(String(v)),z=this.V(v);for(v=0;v<z.length;v++){var P=L;z[v]!==""&&(P+="="+encodeURIComponent(String(z[v]))),l.push(P)}}return this.i=l.join("&")};function lc(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function C3(l,f){f&&!l.j&&(Vo(l),l.i=null,l.g.forEach(function(g,v){var P=v.toLowerCase();v!=P&&(uM(this,v),hM(this,P,g))},l)),l.j=f}function T3(l,f){let g=new Mu;if(a.Image){let v=new Image;v.onload=m(Uo,g,"TestLoadImage: loaded",!0,f,v),v.onerror=m(Uo,g,"TestLoadImage: error",!1,f,v),v.onabort=m(Uo,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=m(Uo,g,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else f(!1)}function D3(l,f){let g=new Mu,v=new AbortController,P=setTimeout(()=>{v.abort(),Uo(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:v.signal}).then(L=>{clearTimeout(P),L.ok?Uo(g,"TestPingServer: ok",!0,f):Uo(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),Uo(g,"TestPingServer: error",!1,f)})}function Uo(l,f,g,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(g)}catch{}}function S3(){this.g=new l3}function A3(l,f,g){let v=g||"";try{sM(l,function(P,L){let z=P;u(P)&&(z=cE(P)),f.push(v+L+"="+encodeURIComponent(z))})}catch(P){throw f.push(v+"type="+encodeURIComponent("_badmap")),P}}function Ou(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Ou,lE),Ou.prototype.g=function(){return new sp(this.l,this.j)},Ou.prototype.i=(function(l){return function(){return l}})({});function sp(l,f){cn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(sp,cn),n=sp.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Lu(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fu(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Lu(this)),this.g&&(this.readyState=3,Lu(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fM(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function fM(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Fu(this):Lu(this),this.readyState==3&&fM(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Fu(this))},n.Qa=function(l){this.g&&(this.response=l,Fu(this))},n.ga=function(){this.g&&Fu(this)};function Fu(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Lu(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Lu(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(sp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function pM(l){let f="";return Pe(l,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function yE(l,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=pM(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):lt(l,f,g))}function _t(l){cn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(_t,cn);var x3=/^https?$/i,M3=["POST","PUT"];n=_t.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hE.g(),this.v=this.o?Hx(this.o):Hx(hE),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(L){gM(this,L);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)g.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let L of v.keys())g.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(M3,f,void 0))||v||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,z]of g)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_M(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){gM(this,L)}};function gM(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,mM(l),ap(l)}function mM(l){l.A||(l.A=!0,Dn(l,"complete"),Dn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Dn(this,"complete"),Dn(this,"abort"),ap(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ap(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vM(this):this.bb())},n.bb=function(){vM(this)};function vM(l){if(l.h&&typeof s<"u"&&(!l.v[1]||zi(l)!=4||l.Z()!=2)){if(l.u&&zi(l)==4)Ux(l.Ea,0,l);else if(Dn(l,"readystatechange"),zi(l)==4){l.h=!1;try{let z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=z===0){var P=String(l.D).match(aM)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),v=!x3.test(P?P.toLowerCase():"")}g=v}if(g)Dn(l,"complete"),Dn(l,"success");else{l.m=6;try{var L=2<zi(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",mM(l)}}finally{ap(l)}}}}function ap(l,f){if(l.g){_M(l);let g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Dn(l,"ready");try{g.onreadystatechange=v}catch{}}}function _M(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function zi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),c3(f)}};function yM(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function R3(l){let f={};l=(l.g&&2<=zi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(te(l[v]))continue;var g=R(l[v]);let P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let L=f[P]||[];f[P]=L,L.push(g)}x(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vu(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function EM(l){this.Aa=0,this.i=[],this.j=new Mu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vu("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vu("baseRetryDelayMs",5e3,l),this.cb=Vu("retryDelaySeedMs",1e4,l),this.Wa=Vu("forwardChannelMaxRetries",2,l),this.wa=Vu("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new tM(l&&l.concurrentRequestLimit),this.Da=new S3,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=EM.prototype,n.la=8,n.G=1,n.connect=function(l,f,g,v){Sn(0),this.W=l,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=xM(this,null,this.W),lp(this)};function EE(l){if(wM(l),l.G==3){var f=l.U++,g=qi(l.I);if(lt(g,"SID",l.K),lt(g,"RID",f),lt(g,"TYPE","terminate"),Uu(l,g),f=new Lo(l,l.j,f),f.L=2,f.v=op(qi(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=MM(f.j,null),f.g.ea(f.v)),f.F=Date.now(),np(f)}AM(l)}function cp(l){l.g&&(IE(l),l.g.cancel(),l.g=null)}function wM(l){cp(l),l.u&&(a.clearTimeout(l.u),l.u=null),up(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function lp(l){if(!nM(l.h)&&!l.s){l.s=!0;var f=l.Ga;Iu||Nx(),bu||(Iu(),bu=!0),Jy.add(f,l),l.B=0}}function P3(l,f){return rM(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=xu(p(l.Ga,l,f),SM(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new Lo(this,this.j,l),L=this.o;if(this.S&&(L?(L=C(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=bM(this,P,f),g=qi(this.I),lt(g,"RID",l),lt(g,"CVER",22),this.D&&lt(g,"X-HTTP-Session-Id",this.D),Uu(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(pM(L)))+"&"+f:this.m&&yE(g,this.m,L)),_E(this.h,P),this.Ua&&lt(g,"TYPE","init"),this.P?(lt(g,"$req",f),lt(g,"SID","null"),P.T=!0,pE(P,g,null)):pE(P,g,f),this.G=2}}else this.G==3&&(l?IM(this,l):this.i.length==0||nM(this.h)||IM(this))};function IM(l,f){var g;f?g=f.l:g=l.U++;let v=qi(l.I);lt(v,"SID",l.K),lt(v,"RID",g),lt(v,"AID",l.T),Uu(l,v),l.m&&l.o&&yE(v,l.m,l.o),g=new Lo(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=bM(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_E(l.h,g),pE(g,v,f)}function Uu(l,f){l.H&&Pe(l.H,function(g,v){lt(f,v,g)}),l.l&&sM({},function(g,v){lt(f,v,g)})}function bM(l,f,g){g=Math.min(l.i.length,g);var v=l.l?p(l.l.Na,l.l,l):null;e:{var P=l.i;let L=-1;for(;;){let z=["count="+g];L==-1?0<g?(L=P[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let et=!0;for(let en=0;en<g;en++){let Ue=P[en].g,ln=P[en].map;if(Ue-=L,0>Ue)L=Math.max(0,P[en].g-100),et=!1;else try{A3(ln,z,"req"+Ue+"_")}catch{v&&v(ln)}}if(et){v=z.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,v}function CM(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Iu||Nx(),bu||(Iu(),bu=!0),Jy.add(f,l),l.v=0}}function wE(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=xu(p(l.Fa,l),SM(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,TM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=xu(p(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sn(10),cp(this),TM(this))};function IE(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function TM(l){l.g=new Lo(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=qi(l.qa);lt(f,"RID","rpc"),lt(f,"SID",l.K),lt(f,"AID",l.T),lt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&lt(f,"TO",l.ja),lt(f,"TYPE","xmlhttp"),Uu(l,f),l.m&&l.o&&yE(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=op(qi(f)),g.m=null,g.P=!0,Xx(g,l)}n.Za=function(){this.C!=null&&(this.C=null,cp(this),wE(this),Sn(19))};function up(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function DM(l,f){var g=null;if(l.g==f){up(l),IE(l),l.g=null;var v=2}else if(vE(l.h,f))g=f.D,iM(l.h,f),v=1;else return;if(l.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var P=l.B;v=Jf(),Dn(v,new Kx(v,g)),lp(l)}else CM(l);else if(P=f.s,P==3||P==0&&0<f.X||!(v==1&&P3(l,f)||v==2&&wE(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),P){case 1:Gs(l,5);break;case 4:Gs(l,10);break;case 3:Gs(l,6);break;default:Gs(l,2)}}}function SM(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Gs(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),v=l.Xa;let P=!v;v=new Ws(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rp(v,"https"),op(v),P?T3(v.toString(),g):D3(v.toString(),g)}else Sn(2);l.G=0,l.l&&l.l.sa(f),AM(l),wM(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function AM(l){if(l.G=0,l.ka=[],l.l){let f=oM(l.h);(f.length!=0||l.i.length!=0)&&(k(l.ka,f),k(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function xM(l,f,g){var v=g instanceof Ws?qi(g):new Ws(g);if(v.g!="")f&&(v.g=f+"."+v.g),ip(v,v.s);else{var P=a.location;v=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var L=new Ws(null);v&&rp(L,v),f&&(L.g=f),P&&ip(L,P),g&&(L.l=g),v=L}return g=l.D,f=l.ya,g&&f&&lt(v,g,f),lt(v,"VER",l.la),Uu(l,v),v}function MM(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new _t(new Ou({eb:g})):new _t(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function RM(){}n=RM.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dp(){}dp.prototype.g=function(l,f){return new tr(l,f)};function tr(l,f){cn.call(this),this.g=new EM(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!te(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!te(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new uc(this)}b(tr,cn),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){EE(this.g)},tr.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=cE(l),l=g);f.i.push(new g3(f.Ya++,l)),f.G==3&&lp(f)},tr.prototype.N=function(){this.g.l=null,delete this.j,EE(this.g),delete this.g,tr.aa.N.call(this)};function PM(l){uE.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}b(PM,uE);function NM(){dE.call(this),this.status=1}b(NM,dE);function uc(l){this.g=l}b(uc,RM),uc.prototype.ua=function(){Dn(this.g,"a")},uc.prototype.ta=function(l){Dn(this.g,new PM(l))},uc.prototype.sa=function(l){Dn(this.g,new NM)},uc.prototype.ra=function(){Dn(this.g,"b")},dp.prototype.createWebChannel=dp.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,oT=bo.createWebChannelTransport=function(){return new dp},iT=bo.getStatEventTarget=function(){return Jf()},rT=bo.Event=qs,Sv=bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ep.NO_ERROR=0,ep.TIMEOUT=8,ep.HTTP_ERROR=6,xh=bo.ErrorCode=ep,Qx.COMPLETE="complete",nT=bo.EventType=Qx,qx.EventType=Su,Su.OPEN="a",Su.CLOSE="b",Su.ERROR="c",Su.MESSAGE="d",cn.prototype.listen=cn.prototype.K,Il=bo.WebChannel=qx,lK=bo.FetchXmlHttpFactory=Ou,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,tT=bo.XhrIo=_t}).apply(typeof Dv<"u"?Dv:typeof self<"u"?self:typeof window<"u"?window:{});var lL="@firebase/firestore",uL="4.8.0";var Xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");var Hl="11.10.0";var Va=new xr("@firebase/firestore");function bl(){return Va.logLevel}function X(n,...e){if(Va.logLevel<=Te.DEBUG){let t=e.map(ZD);Va.debug(`Firestore (${Hl}): ${n}`,...t)}}function To(n,...e){if(Va.logLevel<=Te.ERROR){let t=e.map(ZD);Va.error(`Firestore (${Hl}): ${n}`,...t)}}function xs(n,...e){if(Va.logLevel<=Te.WARN){let t=e.map(ZD);Va.warn(`Firestore (${Hl}): ${n}`,...t)}}function ZD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tV(n,r,t)}function tV(n,e,t){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw To(r),new Error(r)}function Le(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||tV(e,i,r)}function pe(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends On{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},lT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xt.UNAUTHENTICATED))}shutdown(){}},uT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},dT=class{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new kv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}},hT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new hT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ov=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Le(this.o===void 0,3512);let r=o=>{o.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,X("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ov(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ov(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function uK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function nV(){return new TextEncoder}var Fh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=uK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function gT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return De(r,i);{let o=nV(),s=dK(o.encode(dL(n,t)),o.encode(dL(e,t)));return s!==0?s:De(r,i)}}t+=r>65535?2:1}return De(n.length,e.length)}function dL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dK(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function Rl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hL="__name__",Fv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return De(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):gT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Io.fromString(e.substring(4,e.length-2))}},ot=class n extends Fv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},hK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ur=class n extends Fv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return hK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hL}static keyField(){return new n([hL])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var re=class n{constructor(e){this.path=e}static fromPath(e){return new n(ot.fromString(e))}static fromName(e){return new n(ot.fromString(e).popFirst(5))}static empty(){return new n(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ot(e.slice()))}};function rV(n,e,t){if(!t)throw new H(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fK(n,e,t,r){if(e===!0&&r===!0)throw new H(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fL(n){if(!re.isDocumentKey(n))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pL(n){if(re.isDocumentKey(n))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iV(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function v_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie(12329,{type:typeof n})}function Vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=v_(n);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oV(n,e){if(e<=0)throw new H(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Vt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qh(n,e){if(!iV(n))throw new H(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(V.INVALID_ARGUMENT,t);return!0}var gL=-62135596800,mL=1e6,Ut=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gL)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mL}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qh(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-gL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:Vt("string",Ut._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};var fe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ut(0,0))}static max(){return new n(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lh=-1,mT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};mT.UNKNOWN_ID=-1;function pK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new Ut(t+1,0):new Ut(t,r));return new Ua(i,re.empty(),e)}function gK(n){return new Ua(n.readTime,n.key,Lh)}var Ua=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),re.empty(),Lh)}static max(){return new n(fe.max(),re.empty(),Lh)}};function mK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var vK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ql(n){return E(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==vK)throw n;X("LocalStore","Unexpectedly lost primary lease")})}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function _K(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(n){return n.name==="IndexedDbTransactionError"}var XD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),JD=-1;function Yh(n){return n==null}function Vh(n){return n===0&&1/n==-1/0}function yK(n){return typeof n=="number"&&Number.isInteger(n)&&!Vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var sV="";function EK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vL(e)),e=wK(n.get(t),e);return vL(e)}function wK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case sV:t+="";break;default:t+=o}}return t}function vL(n){return n+sV+""}var IK="remoteDocuments",aV="owner";var cV="mutationQueues";var lV="mutations";var uV="documentMutations",bK="remoteDocumentsV14";var dV="remoteDocumentGlobal";var hV="targets";var fV="targetDocuments";var pV="targetGlobal",gV="collectionParents";var mV="clientMetadata";var vV="bundles";var _V="namedQueries";var CK="indexConfiguration";var TK="indexState";var DK="indexEntries";var yV="documentOverlays";var SK="globals";var AK=[cV,lV,uV,IK,hV,aV,pV,fV,mV,dV,gV,vV,_V],k0e=[...AK,yV],xK=[cV,lV,uV,bK,hV,aV,pV,fV,mV,dV,gV,vV,_V,yV],MK=xK,RK=[...MK,CK,TK,DK];var O0e=[...RK,SK];function _L(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ks(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var It=class n{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sl(this.root,e,this.comparator,!0)}},Sl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ri=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}};Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1;Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ri(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Jt=class n{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Lv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Nr=class n{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new n([])}unionWith(e){let t=new Jt(ur.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Vv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Vv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bn.EMPTY_BYTE_STRING=new bn("");var PK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(n){if(Le(!!n,39018),typeof n=="string"){let e=0,t=PK.exec(n);if(Le(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function So(n){return typeof n=="string"?bn.fromBase64String(n):bn.fromUint8Array(n)}var wV="server_timestamp",IV="__type__",bV="__previous_value__",CV="__local_write_time__";function __(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[IV])===null||t===void 0?void 0:t.stringValue)===wV}function y_(n){let e=n.mapValue.fields[bV];return __(e)?y_(e):e}function Uh(n){let e=Do(n.mapValue.fields[CV].timestampValue);return new Ut(e.seconds,e.nanos)}var _T=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Uv="(default)",jv=class n{constructor(e,t){this.projectId=e,this.database=t||Uv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Uv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var eS="__type__",TV="__max__",Av={mapValue:{fields:{__type__:{stringValue:TV}}}},tS="__vector__",Pl="value";function Ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__(n)?4:SV(n)?9007199254740991:DV(n)?10:11:ie(28295,{value:n})}function Ni(n,e){if(n===e)return!0;let t=Ms(n);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uh(n).isEqual(Uh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Do(i.timestampValue),a=Do(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return So(i.bytesValue).isEqual(So(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?Vh(s)===Vh(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Rl(n.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(_L(s)!==_L(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ni(s[c],a[c])))return!1;return!0})(n,e);default:return ie(52216,{left:n})}}function jh(n,e){return(n.values||[]).find(t=>Ni(t,e))!==void 0}function Nl(n,e){if(n===e)return 0;let t=Ms(n),r=Ms(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return yL(n.timestampValue,e.timestampValue);case 4:return yL(Uh(n),Uh(e));case 5:return gT(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=So(o),c=So(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=De(a[u],c[u]);if(d!==0)return d}return De(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=De(ht(o.latitude),ht(s.latitude));return a!==0?a:De(ht(o.longitude),ht(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return EL(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,d;let h=o.fields||{},p=s.fields||{},m=(a=h[Pl])===null||a===void 0?void 0:a.arrayValue,b=(c=p[Pl])===null||c===void 0?void 0:c.arrayValue,N=De(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=b?.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:EL(m,b)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Av.mapValue&&s===Av.mapValue)return 0;if(o===Av.mapValue)return 1;if(s===Av.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=gT(c[h],d[h]);if(p!==0)return p;let m=Nl(a[c[h]],u[d[h]]);if(m!==0)return m}return De(c.length,d.length)})(n.mapValue,e.mapValue);default:throw ie(23264,{le:t})}}function yL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=Do(n),r=Do(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function EL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Nl(t[i],r[i]);if(o)return o}return De(t.length,r.length)}function kl(n){return yT(n)}function yT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Do(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return So(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=yT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${yT(t.fields[s])}`;return i+"}"})(n.mapValue):ie(61005,{value:n})}function Rv(n){switch(Ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=y_(n);return e?16+Rv(e):16;case 5:return 2*n.stringValue.length;case 6:return So(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Rv(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ks(r.fields,(o,s)=>{i+=o.length+Rv(s)}),i})(n.mapValue);default:throw ie(13486,{value:n})}}function Bv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ET(n){return!!n&&"integerValue"in n}function nS(n){return!!n&&"arrayValue"in n}function wL(n){return!!n&&"nullValue"in n}function IL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pv(n){return!!n&&"mapValue"in n}function DV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eS])===null||t===void 0?void 0:t.stringValue)===tS}function Ph(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ks(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ph(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ph(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TV}var L0e={mapValue:{fields:{[eS]:{stringValue:tS},[Pl]:{arrayValue:{}}}}};var Wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ph(t)}setAll(e){let t=ur.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ph(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Pv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ks(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ph(this.value))}};function AV(n){let e=[];return ks(n.fields,(t,r)=>{let i=new ur([t]);if(Pv(r)){let o=AV(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Nr(e)}var hr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),Wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Rs=class{constructor(e,t){this.position=e,this.inclusive=t}};function bL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(s.referenceValue),t.key):r=Nl(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ni(n.position[t],e.position[t]))return!1;return!0}var ja=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function NK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $v=class{},Lt=class n extends $v{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new IT(e,t,r):t==="array-contains"?new TT(e,r):t==="in"?new DT(e,r):t==="not-in"?new ST(e,r):t==="array-contains-any"?new AT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bT(e,r):new CT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nl(t,this.value)):t!==null&&Ms(this.value)===Ms(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ri=class n extends $v{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return xV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function xV(n){return n.op==="and"}function MV(n){return kK(n)&&xV(n)}function kK(n){for(let e of n.filters)if(e instanceof ri)return!1;return!0}function wT(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+kl(n.value);if(MV(n))return n.filters.map(e=>wT(e)).join(",");{let e=n.filters.map(t=>wT(t)).join(",");return`${n.op}(${e})`}}function RV(n,e){return n instanceof Lt?(function(r,i){return i instanceof Lt&&r.op===i.op&&r.field.isEqual(i.field)&&Ni(r.value,i.value)})(n,e):n instanceof ri?(function(r,i){return i instanceof ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&RV(s,i.filters[a]),!0):!1})(n,e):void ie(19439)}function PV(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(PV).join(" ,")+"}"})(n):"Filter"}var IT=class extends Lt{constructor(e,t,r){super(e,t,r),this.key=re.fromName(r.referenceValue)}matches(e){let t=re.comparator(e.key,this.key);return this.matchesComparison(t)}},bT=class extends Lt{constructor(e,t){super(e,"in",t),this.keys=NV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},CT=class extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=NV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function NV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>re.fromName(r.referenceValue))}var TT=class extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nS(t)&&jh(t.arrayValue,this.value)}},DT=class extends Lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jh(this.value.arrayValue,t)}},ST=class extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jh(this.value.arrayValue,t)}},AT=class extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jh(this.value.arrayValue,r))}};var xT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function TL(n,e=null,t=[],r=[],i=null,o=null,s=null){return new xT(n,e,t,r,i,o,s)}function rS(n){let e=pe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kl(r)).join(",")),e.Pe=t}return e.Pe}function iS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CL(n.startAt,e.startAt)&&CL(n.endAt,e.endAt)}function MT(n){return re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ki=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function OK(n,e,t,r,i,o,s,a){return new ki(n,e,t,r,i,o,s,a)}function E_(n){return new ki(n)}function DL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oS(n){return n.collectionGroup!==null}function Al(n){let e=pe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Jt(ur.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ja(o,r))}),t.has(ur.keyField().canonicalString())||e.Te.push(new ja(ur.keyField(),r))}return e.Te}function Pi(n){let e=pe(n);return e.Ie||(e.Ie=FK(e,Al(n))),e.Ie}function FK(n,e){if(n.limitType==="F")return TL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ja(i.field,o)});let t=n.endAt?new Rs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rs(n.startAt.position,n.startAt.inclusive):null;return TL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RT(n,e){let t=n.filters.concat([e]);return new ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hv(n,e,t){return new ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function w_(n,e){return iS(Pi(n),Pi(e))&&n.limitType===e.limitType}function kV(n){return`${rS(Pi(n))}|lt:${n.limitType}`}function Cl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PV(i)).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>kl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>kl(i)).join(",")),`Target(${r})`})(Pi(n))}; limitType=${n.limitType})`}function I_(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Al(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=bL(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Al(r),i)||r.endAt&&!(function(s,a,c){let u=bL(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Al(r),i))})(n,e)}function LK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OV(n){return(e,t)=>{let r=!1;for(let i of Al(n)){let o=VK(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function VK(n,e,t){let r=n.field.isKeyField()?re.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Nl(c,u):ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:n.dir})}}var Ao=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return EV(this.inner)}size(){return this.innerSize}};var UK=new It(re.comparator);function xo(){return UK}var FV=new It(re.comparator);function Mh(...n){let e=FV;for(let t of n)e=e.insert(t.key,t);return e}function LV(n){let e=FV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oa(){return Nh()}function VV(){return Nh()}function Nh(){return new Ao(n=>n.toString(),(n,e)=>n.isEqual(e))}var jK=new It(re.comparator),BK=new Jt(re.comparator);function ke(...n){let e=BK;for(let t of n)e=e.add(t);return e}var $K=new Jt(De);function HK(){return $K}function sS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function UV(n){return{integerValue:""+n}}function qK(n,e){return yK(e)?UV(e):sS(n,e)}var Ol=class{constructor(){this._=void 0}};function zK(n,e,t){return n instanceof Ba?(function(i,o){let s={fields:{[IV]:{stringValue:wV},[CV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&__(o)&&(o=y_(o)),o&&(s.fields[bV]=o),{mapValue:s}})(t,e):n instanceof $a?BV(n,e):n instanceof Ha?$V(n,e):(function(i,o){let s=jV(i,o),a=SL(s)+SL(i.Ee);return ET(s)&&ET(i.Ee)?UV(a):sS(i.serializer,a)})(n,e)}function WK(n,e,t){return n instanceof $a?BV(n,e):n instanceof Ha?$V(n,e):t}function jV(n,e){return n instanceof Fl?(function(r){return ET(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ba=class extends Ol{},$a=class extends Ol{constructor(e){super(),this.elements=e}};function BV(n,e){let t=HV(e);for(let r of n.elements)t.some(i=>Ni(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ha=class extends Ol{constructor(e){super(),this.elements=e}};function $V(n,e){let t=HV(e);for(let r of n.elements)t=t.filter(i=>!Ni(i,r));return{arrayValue:{values:t}}}var Fl=class extends Ol{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function SL(n){return ht(n.integerValue||n.doubleValue)}function HV(n){return nS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var PT=class{constructor(e,t){this.field=e,this.transform=t}};function GK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof $a&&i instanceof $a||r instanceof Ha&&i instanceof Ha?Rl(r.elements,i.elements,Ni):r instanceof Fl&&i instanceof Fl?Ni(r.Ee,i.Ee):r instanceof Ba&&i instanceof Ba})(n.transform,e.transform)}var NT=class{constructor(e,t){this.version=e,this.transformResults=t}},Ln=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ll=class{};function qV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vl(n.key,Ln.none()):new qa(n.key,n.data,Ln.none());{let t=n.data,r=Wn.empty(),i=new Jt(ur.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Oi(n.key,r,new Nr(i.toArray()),Ln.none())}}function KK(n,e,t){n instanceof qa?(function(i,o,s){let a=i.value.clone(),c=xL(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Oi?(function(i,o,s){if(!Nv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=xL(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(zV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function kh(n,e,t,r){return n instanceof qa?(function(o,s,a,c){if(!Nv(o.precondition,s))return a;let u=o.value.clone(),d=ML(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Oi?(function(o,s,a,c){if(!Nv(o.precondition,s))return a;let u=ML(o.fieldTransforms,c,s),d=s.data;return d.setAll(zV(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return Nv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function QK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=jV(r.transform,i||null);o!=null&&(t===null&&(t=Wn.empty()),t.set(r.field,o))}return t||null}function AL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rl(r,i,(o,s)=>GK(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var qa=class extends Ll{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Oi=class extends Ll{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function zV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function xL(n,e,t){let r=new Map;Le(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,WK(s,a,t[i]))}return r}function ML(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,zK(o,s,e))}return r}var Vl=class extends Ll{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qv=class extends Ll{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var kT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&KK(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=kh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=kh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=VV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=qV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(t,r)=>AL(t,r))&&Rl(this.baseMutations,e.baseMutations,(t,r)=>AL(t,r))}},OT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return jK})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var FT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var LT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ot,Fe;function WV(n){switch(n){case V.OK:return ie(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ie(15467,{code:n})}}function GV(n){if(n===void 0)return To("GRPC error has no .code"),V.UNKNOWN;switch(n){case Ot.OK:return V.OK;case Ot.CANCELLED:return V.CANCELLED;case Ot.UNKNOWN:return V.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return V.INTERNAL;case Ot.UNAVAILABLE:return V.UNAVAILABLE;case Ot.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ot.NOT_FOUND:return V.NOT_FOUND;case Ot.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ot.ABORTED:return V.ABORTED;case Ot.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ot.DATA_LOSS:return V.DATA_LOSS;default:return ie(39323,{code:n})}}(Fe=Ot||(Ot={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var RL=null;var YK=new Io([4294967295,4294967295],0);function PL(n){let e=nV().encode(n),t=new eT;return t.update(e),new Uint8Array(t.digest())}function NL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Io([t,r],0),new Io([i,o],0)]}var VT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fa(`Invalid padding: ${t}`);if(r<0)throw new Fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Io.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Io.fromNumber(r)));return i.compare(YK)===1&&(i=new Io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=PL(e),[r,i]=NL(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=PL(e),[r,i]=NL(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new It(De),xo(),ke())}},Bh=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ke(),ke(),ke())}};var xl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Wv=class{constructor(e,t){this.targetId=e,this.De=t}},Gv=class{constructor(e,t,r=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kv=class{constructor(){this.ve=0,this.Ce=kL(),this.Fe=bn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),t=ke(),r=ke();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie(38017,{changeType:o})}}),new Bh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=kL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},UT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=xo(),this.je=xv(),this.Je=xv(),this.He=new It(De)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(MT(o))if(r===0){let s=new re(o.path);this.Xe(t,s,hr.newNoDocument(s,fe.min()))}else Le(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}RL?.ct((function(d,h,p,m,b){var N,k,B,te,J,ue;let vt={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},Pe=h.unchangedNames;return Pe&&(vt.bloomFilter={applied:b===0,hashCount:(N=Pe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(te=(B=(k=Pe?.bits)===null||k===void 0?void 0:k.bitmap)===null||B===void 0?void 0:B.length)!==null&&te!==void 0?te:0,padding:(ue=(J=Pe?.bits)===null||J===void 0?void 0:J.padding)!==null&&ue!==void 0?ue:0,mightContain:x=>{var C;return(C=m?.mightContain(x))!==null&&C!==void 0&&C}}),vt})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=So(r).toUint8Array()}catch(c){if(c instanceof Vv)return xs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new VT(s,i,o)}catch(c){return xs(c instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&MT(a.target)){let c=new re(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,hr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ke();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new zv(e,t,this.He,this.ze,r);return this.ze=xo(),this.je=xv(),this.Je=xv(),this.He=new It(De),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Kv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Jt(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Jt(De),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Kv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function xv(){return new It(re.comparator)}function kL(){return new It(re.comparator)}var ZK={asc:"ASCENDING",desc:"DESCENDING"},XK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JK={and:"AND",or:"OR"},jT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function BT(n,e){return n.useProto3Json||Yh(e)?e:{value:e}}function Qv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eQ(n,e){return Qv(n,e.toTimestamp())}function dr(n){return Le(!!n,49232),fe.fromTimestamp((function(t){let r=Do(t);return new Ut(r.seconds,r.nanos)})(n))}function aS(n,e){return $T(n,e).canonicalString()}function $T(n,e){let t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QV(n){let e=ot.fromString(n);return Le(t2(e),10190,{key:e.toString()}),e}function Yv(n,e){return aS(n.databaseId,e.path)}function Oh(n,e){let t=QV(e);if(t.get(1)!==n.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new re(ZV(t))}function YV(n,e){return aS(n.databaseId,e)}function tQ(n){let e=QV(n);return e.length===4?ot.emptyPath():ZV(e)}function HT(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZV(n){return Le(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OL(n,e,t){return{name:Yv(n,e),fields:t.value.mapValue.fields}}function nQ(n,e){return"found"in e?(function(r,i){Le(!!i.found,43571),i.found.name,i.found.updateTime;let o=Oh(r,i.found.name),s=dr(i.found.updateTime),a=i.found.createTime?dr(i.found.createTime):fe.min(),c=new Wn({mapValue:{fields:i.found.fields}});return hr.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){Le(!!i.missing,3894),Le(!!i.readTime,22933);let o=Oh(r,i.missing),s=dr(i.readTime);return hr.newNoDocument(o,s)})(n,e):ie(7234,{result:e})}function rQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,d){return u.useProto3Json?(Le(d===void 0||typeof d=="string",58123),bn.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),bn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let d=u.code===void 0?V.UNKNOWN:GV(u.code);return new H(d,u.message||"")})(s);t=new Gv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Oh(n,r.document.name),o=dr(r.document.updateTime),s=r.document.createTime?dr(r.document.createTime):fe.min(),a=new Wn({mapValue:{fields:r.document.fields}}),c=hr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new xl(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Oh(n,r.document),o=r.readTime?dr(r.readTime):fe.min(),s=hr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new xl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Oh(n,r.document),o=r.removedTargetIds||[];t=new xl([],o,i,null)}else{if(!("filter"in e))return ie(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new LT(i,o),a=r.targetId;t=new Wv(a,s)}}return t}function XV(n,e){let t;if(e instanceof qa)t={update:OL(n,e.key,e.value)};else if(e instanceof Vl)t={delete:Yv(n,e.key)};else if(e instanceof Oi)t={update:OL(n,e.key,e.data),updateMask:hQ(e.fieldMask)};else{if(!(e instanceof qv))return ie(16599,{Rt:e.type});t={verify:Yv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ba)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $a)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ha)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fl)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ie(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:eQ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie(27497)})(n,e.precondition)),t}function iQ(n,e){return n&&n.length>0?(Le(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?dr(i.updateTime):dr(o);return s.isEqual(fe.min())&&(s=dr(o)),new NT(s,i.transformResults||[])})(t,e))):[]}function oQ(n,e){return{documents:[YV(n,e.path)]}}function sQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YV(n,i);let o=(function(u){if(u.length!==0)return e2(ri.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(d=>(function(p){return{field:Tl(p.field),direction:lQ(p.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=BT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function aQ(n){let e=tQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Le(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(h){let p=JV(h);return p instanceof ri&&MV(p)?p.getFilters():[p]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(p=>(function(b){return new ja(Dl(b.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let p;return p=typeof h=="object"?h.value:h,Yh(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(h){let p=!!h.before,m=h.values||[];return new Rs(m,p)})(t.startAt));let u=null;return t.endAt&&(u=(function(h){let p=!h.before,m=h.values||[];return new Rs(m,p)})(t.endAt)),OK(e,i,s,o,a,"F",c,u)}function cQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Dl(t.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Dl(t.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Dl(t.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Dl(t.unaryFilter.field);return Lt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(Dl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map(r=>JV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(t.compositeFilter.op))})(n):ie(30097,{filter:n})}function lQ(n){return ZK[n]}function uQ(n){return XK[n]}function dQ(n){return JK[n]}function Tl(n){return{fieldPath:n.canonicalString()}}function Dl(n){return ur.fromServerFormat(n.fieldPath)}function e2(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(IL(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(wL(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IL(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(wL(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:uQ(t.op),value:t.value}}})(n):n instanceof ri?(function(t){let r=t.getFilters().map(i=>e2(i));return r.length===1?r[0]:{compositeFilter:{op:dQ(t.op),filters:r}}})(n):ie(54877,{filter:n})}function hQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var $h=class n{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=bn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qT=class{constructor(e){this.gt=e}};function fQ(n){let e=aQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hv(e,e.limit,"L"):e}var Zv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Vh(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Do(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(So(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?SV(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):DV(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ie(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Pl,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ht(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),re.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Zv.Ut=new Zv;var zT=class{constructor(){this.Dn=new WT}addToCollectionParentIndex(e,t){return this.Dn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Ua.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},WT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Jt(ot.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jt(ot.comparator)).toArray()}};var V0e=new Uint8Array(0);var FL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n2=41943040,Pr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(n2,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);var Hh=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var LL="LruGarbageCollector",pQ=1048576;function VL([n,e],[t,r]){let i=De(n,t);return i===0?De(e,r):i}var GT=class{constructor(e){this.Tr=e,this.buffer=new Jt(VL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();VL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},KT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(LL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){zl(t)?X(LL,"Ignoring IndexedDB error during garbage collection: ",t):yield ql(t)}yield this.Rr(3e5)}))}},QT=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(XD.ue);let r=new GT(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(FL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),bl()<=Te.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function gQ(n,e){return new QT(n,e)}var YT=class{constructor(){this.changes=new Ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ZT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var XT=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&kh(r.mutation,i,Nr.empty(),Ut.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){let i=Oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Mh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=xo(),s=Nh(),a=(function(){return Nh()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Oi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),kh(d.mutation,u,d.mutation.getFieldMask(),Ut.now())):s.set(u.key,Nr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var h;return a.set(u,new ZT(d,(h=s.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Nh(),i=new It((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Nr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let h=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,h=VV();d.forEach(p=>{if(!o.has(p)){let m=qV(t.get(p),r.get(p));m!==null&&h.set(p,m),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(Oa()),a=Lh,c=o;return s.next(u=>j.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ke())).next(d=>({batchId:a,changes:LV(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next(r=>{let i=Mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Mh();return this.indexManager.getCollectionParents(e,o).next(a=>j.forEach(a,c=>{let u=(function(h,p){return new ki(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,hr.newInvalidDocument(d)))});let a=Mh();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&kh(d.mutation,u,Nr.empty(),Ut.now()),I_(t,u)&&(a=a.insert(c,u))}),a})}};var JT=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return j.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:fQ(i.bundledQuery),readTime:dr(i.readTime)}})(t)),j.resolve()}};var eD=class{constructor(){this.overlays=new It(re.comparator),this.kr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Oa();return j.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=Oa(),o=t.length+1,s=new re(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new It((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Oa(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Oa(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return j.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new FT(t,r));let o=this.kr.get(t);o===void 0&&(o=ke(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var tD=class{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var qh=class{constructor(){this.qr=new Jt(Ft.Qr),this.$r=new Jt(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ft(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new re(new ot([])),r=new Ft(t,e),i=new Ft(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new re(new ot([])),r=new Ft(t,e),i=new Ft(t,e+1),o=ke();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ft(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ft=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return re.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||re.comparator(e.key,t.key)}};var nD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Jt(Ft.Qr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new kT(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?JD:this.er-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jt(De);return t.forEach(i=>{let o=new Ft(i,0),s=new Ft(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),j.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;re.isDocumentKey(o)||(o=o.child(""));let s=new Ft(new re(o),0),a=new Jt(De);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),j.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Le(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return j.forEach(t.mutations,i=>{let o=new Ft(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ft(t,0),i=this.Yr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rD=class{constructor(e){this.ni=e,this.docs=(function(){return new It(re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=xo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hr.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xo(),s=t.path,a=new re(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||mK(gK(d),r)<=0||(i.has(d.key)||I_(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ie(9500)}ri(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iD(this)}getSize(e){return j.resolve(this.size)}},iD=class extends YT{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var oD=class{constructor(e){this.persistence=e,this.ii=new Ao(t=>rS(t),iS),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.si=0,this.oi=new qh,this.targetCount=0,this._i=Hh.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),j.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Hh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.hr(t),j.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.oi.containsKey(t))}};var Xv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new XD(0),this.ci=!1,this.ci=!0,this.li=new tD,this.referenceDelegate=e(this),this.hi=new oD(this),this.indexManager=new zT,this.remoteDocumentCache=(function(i){return new rD(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new qT(t),this.Ti=new JT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new nD(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);let i=new sD(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return j.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},sD=class extends vT{constructor(e){super(),this.currentSequenceNumber=e}},aD=class n{constructor(e){this.persistence=e,this.Ai=new qh,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ie(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.mi,r=>{let i=re.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return j.or([()=>j.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Jv=class n{constructor(e,t){this.persistence=e,this.gi=new Ao(r=>EK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=gQ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return j.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,fe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),j.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rv(e.data.value)),t}Sr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var cD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ke(),i=ke();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var lD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var uD=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return bO()?8:_K(Yt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new lD;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(bl()<=Te.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Cl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(bl()<=Te.DEBUG&&X("QueryEngine","Query:",Cl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(bl()<=Te.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Cl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):j.resolve())}ps(e,t){if(DL(t))return j.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Hv(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ke(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,Hv(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return DL(t)||i.isEqual(fe.min())?j.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?j.resolve(null):(bl()<=Te.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cl(t)),this.vs(e,s,t,pK(i,Lh)).next(a=>a))})}bs(e,t){let r=new Jt(OV(e));return t.forEach((i,o)=>{I_(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return bl()<=Te.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Cl(t)),this.gs.getDocumentsMatchingQuery(e,t,Ua.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var cS="LocalStore",mQ=3e8,dD=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new It(De),this.Ms=new Ao(o=>rS(o),iS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function vQ(n,e,t,r){return new dD(n,e,t,r)}function r2(n,e){return E(this,null,function*(){let t=pe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ke();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function _Q(n,e){let t=pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let h=u.batch,p=h.keys(),m=j.resolve();return p.forEach(b=>{m=m.next(()=>d.getEntry(c,b)).next(N=>{let k=u.docVersions.get(b);Le(k!==null,48541),N.version.compareTo(k)<0&&(h.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),d.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function i2(n){let e=pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function yQ(n,e){let t=pe(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,h)));let m=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(bn.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),(function(N,k,B){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=mQ?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(p,m,d)&&a.push(t.hi.updateTargetData(o,m))});let c=xo(),u=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(EQ(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(fe.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return j.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function EQ(n,e,t){let r=ke(),i=ke();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=xo();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):X(cS,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function wQ(n,e){let t=pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=JD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IQ(n,e){let t=pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new $h(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function hD(n,e,t){return E(this,null,function*(){let r=pe(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zl(s))throw s;X(cS,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function UL(n,e,t){let r=pe(n),i=fe.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,d){let h=pe(c),p=h.Ms.get(d);return p!==void 0?j.resolve(h.Fs.get(p)):h.hi.getTargetData(u,d)})(r,s,Pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:ke())).next(a=>(bQ(r,LK(e),a),{documents:a,qs:o})))}function bQ(n,e,t){let r=n.xs.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var e_=class{constructor(){this.activeTargetIds=HK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var fD=class{constructor(){this.Fo=new e_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new e_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pD=class{xo(e){}shutdown(){}};var jL="ConnectivityMonitor",t_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(jL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){X(jL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mv=null;function gD(){return Mv===null?Mv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mv++,"0x"+Mv.toString(16)}var sT="RestConnection",CQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},mD=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Uv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=gD(),a=this.Go(e,t.toUriEncodedString());X(sT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),d=zn(u);return this.jo(e,a,c,r,d).then(h=>(X(sT,`Received RPC '${e}' ${s}: `,h),h),h=>{throw xs(sT,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=CQ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var vD=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var In="WebChannelConnection",_D=class extends mD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=gD();return new Promise((a,c)=>{let u=new tT;u.setWithCredentials(!0),u.listenOnce(nT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xh.NO_ERROR:let h=u.getResponseJson();X(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case xh.TIMEOUT:X(In,`RPC '${e}' ${s} timed out`),c(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:let p=u.getStatus();if(X(In,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let b=m?.error;if(b&&b.status&&b.message){let N=(function(B){let te=B.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(te)>=0?te:V.UNKNOWN})(b.status);c(new H(N,b.message))}else c(new H(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H(V.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{X(In,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);X(In,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=gD(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=oT(),a=iT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");X(In,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=s.createWebChannel(d,c);this.T_(h);let p=!1,m=!1,b=new vD({Ho:k=>{m?X(In,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(X(In,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),X(In,`RPC '${e}' stream ${i} sending:`,k),h.send(k))},Yo:()=>h.close()}),N=(k,B,te)=>{k.listen(B,J=>{try{te(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return N(h,Il.EventType.OPEN,()=>{m||(X(In,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),N(h,Il.EventType.CLOSE,()=>{m||(m=!0,X(In,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(h))}),N(h,Il.EventType.ERROR,k=>{m||(m=!0,xs(In,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),b.__(new H(V.UNAVAILABLE,"The operation could not be completed")))}),N(h,Il.EventType.MESSAGE,k=>{var B;if(!m){let te=k.data[0];Le(!!te,16349);let J=te,ue=J?.error||((B=J[0])===null||B===void 0?void 0:B.error);if(ue){X(In,`RPC '${e}' stream ${i} received error:`,ue);let vt=ue.status,Pe=(function(T){let A=Ot[T];if(A!==void 0)return GV(A)})(vt),x=ue.message;Pe===void 0&&(Pe=V.INTERNAL,x="Unknown error status: "+vt+" with message "+ue.message),m=!0,b.__(new H(Pe,x)),h.close()}else X(In,`RPC '${e}' stream ${i} received:`,te),b.a_(te)}}),N(a,rT.STAT_EVENT,k=>{k.stat===Sv.PROXY?X(In,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Sv.NOPROXY&&X(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function aT(){return typeof document<"u"?document:null}function b_(n){return new jT(n,!0)}var zh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var BL="PersistentStream",n_=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zh(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(To(t.toString()),To("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return X(BL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(X(BL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yD=class extends n_{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=rQ(this.serializer,e),r=(function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?dr(s.readTime):fe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=HT(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=MT(c)?{documents:oQ(o,c)}:{query:sQ(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KV(o,s.resumeToken);let u=BT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=Qv(o,s.snapshotVersion.toTimestamp());let u=BT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=cQ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=HT(this.serializer),t.removeTarget=e,this.k_(t)}},ED=class extends n_{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=iQ(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=HT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>XV(this.serializer,r))};this.k_(t)}};var wD=class{},ID=class extends wD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,$T(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,$T(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(V.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},bD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(To(t),this._a=!1):X("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var za="RemoteStore",CD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Qa(this)&&(X(za,"Restarting streams for network reachability change."),yield(function(c){return E(this,null,function*(){let u=pe(c);u.Ia.add(4),yield Zh(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield C_(u)})})(this))}))}),this.Aa=new bD(r,i)}};function C_(n){return E(this,null,function*(){if(Qa(n))for(let e of n.da)yield e(!0)})}function Zh(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function o2(n,e){let t=pe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),hS(t)?dS(t):Wl(t).x_()&&uS(t,e))}function lS(n,e){let t=pe(n),r=Wl(t);t.Ta.delete(e),r.x_()&&s2(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qa(t)&&t.Aa.set("Unknown"))}function uS(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(n).H_(e)}function s2(n,e){n.Ra.$e(e),Wl(n).Y_(e)}function dS(n){n.Ra=new UT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Wl(n).start(),n.Aa.aa()}function hS(n){return Qa(n)&&!Wl(n).M_()&&n.Ta.size>0}function Qa(n){return pe(n).Ia.size===0}function a2(n){n.Ra=void 0}function TQ(n){return E(this,null,function*(){n.Aa.set("Online")})}function DQ(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{uS(n,e)})})}function SQ(n,e){return E(this,null,function*(){a2(n),hS(n)?(n.Aa.la(e),dS(n)):n.Aa.set("Unknown")})}function AQ(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof Gv&&e.state===2&&e.cause)try{yield(function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){X(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield r_(n,r)}else if(e instanceof xl?n.Ra.Ye(e):e instanceof Wv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(fe.min()))try{let r=yield i2(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(bn.EMPTY_BYTE_STRING,d.snapshotVersion)),s2(o,c);let h=new $h(d.target,c,u,d.sequenceNumber);uS(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){X(za,"Failed to raise snapshot:",r),yield r_(n,r)}})}function r_(n,e,t){return E(this,null,function*(){if(!zl(e))throw e;n.Ia.add(1),yield Zh(n),n.Aa.set("Offline"),t||(t=()=>i2(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){X(za,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield C_(n)}))})}function c2(n,e){return e().catch(t=>r_(n,t,e))}function T_(n){return E(this,null,function*(){let e=pe(n),t=Ps(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:JD;for(;xQ(e);)try{let i=yield wQ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,MQ(e,i)}catch(i){yield r_(e,i)}l2(e)&&u2(e)})}function xQ(n){return Qa(n)&&n.Pa.length<10}function MQ(n,e){n.Pa.push(e);let t=Ps(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function l2(n){return Qa(n)&&!Ps(n).M_()&&n.Pa.length>0}function u2(n){Ps(n).start()}function RQ(n){return E(this,null,function*(){Ps(n).na()})}function PQ(n){return E(this,null,function*(){let e=Ps(n);for(let t of n.Pa)e.X_(t.mutations)})}function NQ(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=OT.from(r,e,t);yield c2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield T_(n)})}function kQ(n,e){return E(this,null,function*(){e&&Ps(n).Z_&&(yield(function(r,i){return E(this,null,function*(){if((function(s){return WV(s)&&s!==V.ABORTED})(i.code)){let o=r.Pa.shift();Ps(r).N_(),yield c2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield T_(r)}})})(n,e)),l2(n)&&u2(n)})}function $L(n,e){return E(this,null,function*(){let t=pe(n);t.asyncQueue.verifyOperationInProgress(),X(za,"RemoteStore received new credentials");let r=Qa(t);t.Ia.add(3),yield Zh(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield C_(t)})}function OQ(n,e){return E(this,null,function*(){let t=pe(n);e?(t.Ia.delete(2),yield C_(t)):e||(t.Ia.add(2),yield Zh(t),t.Aa.set("Unknown"))})}function Wl(n){return n.Va||(n.Va=(function(t,r,i){let o=pe(t);return o.ia(),new yD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:TQ.bind(null,n),e_:DQ.bind(null,n),n_:SQ.bind(null,n),J_:AQ.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),hS(n)?dS(n):n.Aa.set("Unknown")):(yield n.Va.stop(),a2(n))}))),n.Va}function Ps(n){return n.ma||(n.ma=(function(t,r,i){let o=pe(t);return o.ia(),new ED(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:RQ.bind(null,n),n_:kQ.bind(null,n),ea:PQ.bind(null,n),ta:NQ.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield T_(n)):(yield n.ma.stop(),n.Pa.length>0&&(X(za,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var TD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fS(n,e){if(To("AsyncQueue",`${e}: ${n}`),zl(n))return new H(V.UNAVAILABLE,`${e}: ${n}`);throw n}var i_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||re.comparator(t.key,r.key):(t,r)=>re.comparator(t.key,r.key),this.keyedMap=Mh(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var o_=class{constructor(){this.fa=new It(re.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ie(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ul=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,i_.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var DD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},SD=class{constructor(){this.queries=HL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=pe(t),o=i.queries;i.queries=HL(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new H(V.ABORTED,"Firestore shutting down"))}};function HL(){return new Ao(n=>kV(n),w_)}function pS(n,e){return E(this,null,function*(){let t=pe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new DD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=fS(s,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&mS(t)})}function gS(n,e){return E(this,null,function*(){let t=pe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function FQ(n,e){let t=pe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&mS(t)}function LQ(n,e,t){let r=pe(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function mS(n){n.Da.forEach(e=>{e.next()})}var AD,qL;(qL=AD||(AD={})).Fa="default",qL.Cache="cache";var Wh=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==AD.Cache}};var s_=class{constructor(e){this.key=e}},a_=class{constructor(e){this.key=e}},xD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=OV(e),this.eu=new i_(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new o_,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),m=I_(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),k=!1;p&&m?p.data.isEqual(m.data)?b!==N&&(r.track({type:3,doc:m}),k=!0):this.iu(p,m)||(r.track({type:2,doc:m}),k=!0,(c&&this.Xa(m,c)>0||u&&this.Xa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),k=!0):p&&!m&&(r.track({type:1,doc:p}),k=!0,(c||u)&&(a=!0)),k&&(m?(s=s.add(m),o=N?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,h)=>(function(m,b){let N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{At:k})}};return N(m)-N(b)})(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Ul(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new o_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new a_(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new s_(r))}),t}uu(e){this.Ha=e.qs,this.Za=ke();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ul.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},vS="SyncEngine",MD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},RD=class{constructor(e){this.key=e,this.lu=!1}},PD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ao(a=>kV(a),w_),this.Tu=new Map,this.Iu=new Set,this.du=new It(re.comparator),this.Eu=new Map,this.Au=new qh,this.Ru={},this.Vu=new Map,this.mu=Hh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function VQ(n,e,t=!0){return E(this,null,function*(){let r=m2(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield d2(r,e,t,!0),i})}function UQ(n,e){return E(this,null,function*(){let t=m2(n);yield d2(t,e,!0,!1)})}function d2(n,e,t,r){return E(this,null,function*(){let i=yield IQ(n.localStore,Pi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield jQ(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&o2(n.remoteStore,i),a})}function jQ(n,e,t,r,i){return E(this,null,function*(){n.gu=(h,p,m)=>(function(N,k,B,te){return E(this,null,function*(){let J=k.view.nu(B);J.Ds&&(J=yield UL(N.localStore,k.query,!1).then(({documents:x})=>k.view.nu(x,J)));let ue=te&&te.targetChanges.get(k.targetId),vt=te&&te.targetMismatches.get(k.targetId)!=null,Pe=k.view.applyChanges(J,N.isPrimaryClient,ue,vt);return WL(N,k.targetId,Pe._u),Pe.snapshot})})(n,h,p,m);let o=yield UL(n.localStore,e,!0),s=new xD(e,o.qs),a=s.nu(o.documents),c=Bh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);WL(n,t,u._u);let d=new MD(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function BQ(n,e,t){return E(this,null,function*(){let r=pe(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!w_(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lS(r.remoteStore,i.targetId),ND(r,i.targetId)}).catch(ql))):(ND(r,i.targetId),yield hD(r.localStore,i.targetId,!0))})}function $Q(n,e){return E(this,null,function*(){let t=pe(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lS(t.remoteStore,r.targetId))})}function HQ(n,e,t){return E(this,null,function*(){let r=YQ(n);try{let i=yield(function(s,a){let c=pe(s),u=Ut.now(),d=a.reduce((m,b)=>m.add(b.key),ke()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=xo(),N=ke();return c.Os.getEntries(m,d).next(k=>{b=k,b.forEach((B,te)=>{te.isValidDocument()||(N=N.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,b)).next(k=>{h=k;let B=[];for(let te of a){let J=QK(te,h.get(te.key).overlayedDocument);J!=null&&B.push(new Oi(te.key,J,AV(J.value.mapValue),Ln.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,B,a)}).next(k=>{p=k;let B=k.applyToLocalDocumentSet(h,N);return c.documentOverlayCache.saveOverlays(m,k.batchId,B)})}).then(()=>({batchId:p.batchId,changes:LV(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new It(De)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),yield Xh(r,i.changes),yield T_(r.remoteStore)}catch(i){let o=fS(i,"Failed to persist write");t.reject(o)}})}function h2(n,e){return E(this,null,function*(){let t=pe(n);try{let r=yield yQ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Le(s.lu,14607):i.removedDocuments.size>0&&(Le(s.lu,42227),s.lu=!1))}),yield Xh(t,r,e)}catch(r){yield ql(r)}})}function zL(n,e,t){let r=pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=pe(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(let p of h.wa)p.va(a)&&(u=!0)}),u&&mS(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qQ(n,e,t){return E(this,null,function*(){let r=pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new It(re.comparator);s=s.insert(o,hr.newNoDocument(o,fe.min()));let a=ke().add(o),c=new zv(fe.min(),new Map,new It(De),s,a);yield h2(r,c),r.du=r.du.remove(o),r.Eu.delete(e),_S(r)}else yield hD(r.localStore,e,!1).then(()=>ND(r,e,t)).catch(ql)})}function zQ(n,e){return E(this,null,function*(){let t=pe(n),r=e.batch.batchId;try{let i=yield _Q(t.localStore,e);p2(t,r,null),f2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xh(t,i)}catch(i){yield ql(i)}})}function WQ(n,e,t){return E(this,null,function*(){let r=pe(n);try{let i=yield(function(s,a){let c=pe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(Le(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);p2(r,e,t),f2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xh(r,i)}catch(i){yield ql(i)}})}function f2(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function p2(n,e,t){let r=pe(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ND(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||g2(n,r)})}function g2(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lS(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),_S(n))}function WL(n,e,t){for(let r of t)r instanceof s_?(n.Au.addReference(r.key,e),GQ(n,r)):r instanceof a_?(X(vS,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||g2(n,r.key)):ie(19791,{yu:r})}function GQ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(X(vS,"New document in limbo: "+t),n.Iu.add(r),_S(n))}function _S(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new re(ot.fromString(e)),r=n.mu.next();n.Eu.set(r,new RD(t)),n.du=n.du.insert(t,r),o2(n.remoteStore,new $h(Pi(E_(t.path)),r,"TargetPurposeLimboResolution",XD.ue))}}function Xh(n,e,t){return E(this,null,function*(){let r=pe(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=cD.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,u){return E(this,null,function*(){let d=pe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(u,p=>j.forEach(p.Is,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>j.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!zl(h))throw h;X(cS,"Failed to update sequence numbers: "+h)}for(let h of u){let p=h.targetId;if(!h.fromCache){let m=d.Fs.get(p),b=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(b);d.Fs=d.Fs.insert(p,N)}}})})(r.localStore,o))})}function KQ(n,e){return E(this,null,function*(){let t=pe(n);if(!t.currentUser.isEqual(e)){X(vS,"User change. New user:",e.toKey());let r=yield r2(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new H(V.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xh(t,r.Bs)}})}function QQ(n,e){let t=pe(n),r=t.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function m2(n){let e=pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=h2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qQ.bind(null,e),e.hu.J_=FQ.bind(null,e.eventManager),e.hu.pu=LQ.bind(null,e.eventManager),e}function YQ(n){let e=pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WQ.bind(null,e),e}var v2=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=b_(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return vQ(this.persistence,new uD,t.initialUser,this.serializer)}Du(t){return new Xv(aD.Vi,this.serializer)}bu(t){return new fD}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),kD=class extends v2{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Le(this.persistence.referenceDelegate instanceof Jv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new KT(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new Xv(r=>Jv.Vi(r,t),this.serializer)}};var ZQ=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KQ.bind(null,this.syncEngine),yield OQ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new SD})()}createDatastore(t){let r=b_(t.databaseInfo.databaseId),i=(function(s){return new _D(s)})(t.databaseInfo);return(function(s,a,c,u){return new ID(s,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new CD(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>zL(this.syncEngine,r,0),(function(){return t_.C()?new t_:new pD})())}createSyncEngine(t,r){return(function(o,s,a,c,u,d,h){let p=new PD(o,s,a,c,u,d);return h&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield(function(o){return E(this,null,function*(){let s=pe(o);X(za,"RemoteStore shutting down."),s.Ia.add(5),yield Zh(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Gh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):To("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var OD=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return E(this,null,function*(){let s=pe(i),a={documents:o.map(h=>Yv(s.serializer,h))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,ot.emptyPath(),a,o.length),u=new Map;c.forEach(h=>{let p=nQ(s.serializer,h);u.set(p.key.toString(),p)});let d=[];return o.forEach(h=>{let p=u.get(h.toString());Le(!!p,55234,{key:h}),d.push(p)}),d})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=re.fromPath(r);this.mutations.push(new qv(i,this.precondition(i)))}),yield(function(r,i){return E(this,null,function*(){let o=pe(r),s={writes:i.map(a=>XV(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,ot.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie(50498,{Wu:e.constructor.name});t=fe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new H(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fe.min())?Ln.exists(!1):Ln.updateTime(t):Ln.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fe.min()))throw new H(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(t)}return Ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var FD=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new zh(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>E(this,null,function*(){let e=new OD(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Yh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!WV(t)}return!1}};var Ns="FirestoreClient",LD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xt.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){X(Ns,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(X(Ns,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function cT(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),X(Ns,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield r2(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{xs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function GL(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield XQ(n);X(Ns,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$L(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$L(e.remoteStore,i)),n._onlineComponents=e})}function XQ(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(Ns,"Using user provided OfflineComponentProvider");try{yield cT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xs("Error using user provided cache. Falling back to memory cache: "+t),yield cT(n,new v2)}}else X(Ns,"Using default OfflineComponentProvider"),yield cT(n,new kD(void 0));return n._offlineComponents})}function yS(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(Ns,"Using user provided OnlineComponentProvider"),yield GL(n,n._uninitializedComponentsProvider._online)):(X(Ns,"Using default OnlineComponentProvider"),yield GL(n,new ZQ))),n._onlineComponents})}function JQ(n){return yS(n).then(e=>e.syncEngine)}function eY(n){return yS(n).then(e=>e.datastore)}function c_(n){return E(this,null,function*(){let e=yield yS(n),t=e.eventManager;return t.onListen=VQ.bind(null,e.syncEngine),t.onUnlisten=BQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$Q.bind(null,e.syncEngine),t})}function tY(n,e,t={}){let r=new kr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return(function(o,s,a,c,u){let d=new Gh({next:p=>{d.Ou(),s.enqueueAndForget(()=>gS(o,h));let m=p.docs.has(a);!m&&p.fromCache?u.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?u.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Wh(E_(a.path),d,{includeMetadataChanges:!0,ka:!0});return pS(o,h)})(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}function nY(n,e,t={}){let r=new kr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return(function(o,s,a,c,u){let d=new Gh({next:p=>{d.Ou(),s.enqueueAndForget(()=>gS(o,h)),p.fromCache&&c.source==="server"?u.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Wh(a,d,{includeMetadataChanges:!0,ka:!0});return pS(o,h)})(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}function _2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var KL=new Map;var y2="firestore.googleapis.com",QL=!0,l_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y2,this.ssl=QL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:QL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pQ)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lT;switch(r.type){case"firstParty":return new fT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=KL.get(t);r&&(X("ComponentProvider","Removing Datastore"),KL.delete(t),r.terminate())})(this),Promise.resolve()}};function E2(n,e,t,r={}){var i;n=Vn(n,jl);let o=zn(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(gs(`https://${c}`),ms("Firestore",!0)),s.host!==y2&&s.host!==c&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Ar(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Xt.MOCK_USER;else{d=fl(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Xt(p)}n._authCredentials=new uT(new kv(d,h))}}var ii=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qh(t,n._jsonSchema))return new n(e,r||null,new re(ot.fromString(t.referencePath)))}};jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Vt("string",jt._jsonSchemaVersion),referencePath:Vt("string")};var Ts=class n extends ii{constructor(e,t,r){super(e,t,E_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new re(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function w2(n,e,...t){if(n=Ae(n),rV("collection","path",e),n instanceof jl){let r=ot.fromString(e,...t);return pL(r),new Ts(n,null,r)}{if(!(n instanceof jt||n instanceof Ts))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return pL(r),new Ts(n.firestore,null,r)}}function ES(n,e,...t){if(n=Ae(n),arguments.length===1&&(e=Fh.newId()),rV("doc","path",e),n instanceof jl){let r=ot.fromString(e,...t);return fL(r),new jt(n,null,new re(r))}{if(!(n instanceof jt||n instanceof Ts))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return fL(r),new jt(n.firestore,n instanceof Ts?n.converter:null,new re(r))}}var YL="AsyncQueue",u_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zh(this,"async_queue_retry"),this.oc=()=>{let r=aT();r&&X(YL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=aT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=aT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new kr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zl(e))throw e;X(YL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,To("INTERNAL UNHANDLED ERROR: ",ZL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=TD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ie(47125,{hc:ZL(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function ZL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function XL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Or=class extends jl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new u_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,yield e}})}};function I2(n,e){let t=typeof n=="object"?n:ti(),r=typeof n=="string"?n:e||Uv,i=Si(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hl("firestore");o&&E2(i,...o)}return i}function Jh(n){if(n._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rY(n),n._firestoreClient}function rY(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,u,d){return new _T(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new LD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Co=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(bn.fromBase64String(e))}catch(t){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qh(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Co._jsonSchemaVersion="firestore/bytes/1.0",Co._jsonSchema={type:Vt("string",Co._jsonSchemaVersion),bytes:Vt("string")};var Wa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bl=class{constructor(e){this._methodName=e}};var Ds=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qh(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Vt("string",Ds._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};var Ss=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qh(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:Vt("string",Ss._jsonSchemaVersion),vectorValues:Vt("object")};var iY=/^__.*__$/,VD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new qa(e,this.data,t,this.fieldTransforms)}},d_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function b2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ec:n})}}var UD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return f_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(b2(this.Ec)&&iY.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||b_(e)}Dc(e,t,r,i=!1){return new UD({Ec:e,methodName:t,bc:r,path:ur.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Gl(n){let e=n._freezeSettings(),t=b_(n._databaseId);return new jD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wS(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);IS("Data must be an object, but it was:",s,r);let a=S2(r,s),c,u;if(o.merge)c=new Nr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let p=$D(e,h,t);if(!s.contains(p))throw new H(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);x2(d,p)||d.push(p)}c=new Nr(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new VD(new Wn(a),c,u)}var h_=class n extends Bl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var BD=class n extends Bl{_toFieldTransform(e){return new PT(e.path,new Ba)}isEqual(e){return e instanceof n}};function C2(n,e,t,r){let i=n.Dc(1,e,t);IS("Data must be an object, but it was:",i,r);let o=[],s=Wn.empty();ks(r,(c,u)=>{let d=bS(e,c,t);u=Ae(u);let h=i.gc(d);if(u instanceof h_)o.push(d);else{let p=ef(u,h);p!=null&&(o.push(d),s.set(d,p))}});let a=new Nr(o);return new d_(s,a,i.fieldTransforms)}function T2(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[$D(e,r,t)],c=[i];if(o.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push($D(e,o[p])),c.push(o[p+1]);let u=[],d=Wn.empty();for(let p=a.length-1;p>=0;--p)if(!x2(u,a[p])){let m=a[p],b=c[p];b=Ae(b);let N=s.gc(m);if(b instanceof h_)u.push(m);else{let k=ef(b,N);k!=null&&(u.push(m),d.set(m,k))}}let h=new Nr(u);return new d_(d,h,s.fieldTransforms)}function D2(n,e,t,r=!1){return ef(t,n.Dc(r?4:3,e))}function ef(n,e){if(A2(n=Ae(n)))return IS("Unsupported field value:",e,n),S2(n,e);if(n instanceof Bl)return(function(r,i){if(!b2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=ef(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ut.fromDate(r);return{timestampValue:Qv(i.serializer,o)}}if(r instanceof Ut){let o=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qv(i.serializer,o)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:KV(i.serializer,r._byteString)};if(r instanceof jt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:aS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ss)return(function(s,a){return{mapValue:{fields:{[eS]:{stringValue:tS},[Pl]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return sS(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${v_(r)}`)})(n,e)}function S2(n,e){let t={};return EV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(n,(r,i)=>{let o=ef(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function A2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof Ds||n instanceof Co||n instanceof jt||n instanceof Bl||n instanceof Ss)}function IS(n,e,t){if(!A2(t)||!iV(t)){let r=v_(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function $D(n,e,t){if((e=Ae(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return bS(n,e);throw f_("Field path arguments must be of type string or ",n,!1,void 0,t)}var oY=new RegExp("[~\\*/\\[\\]]");function bS(n,e,t){if(e.search(oY)>=0)throw f_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wa(...e.split("."))._internalPath}catch{throw f_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function f_(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new H(V.INVALID_ARGUMENT,a+n+c)}function x2(n,e){return n.some(t=>t.isEqual(e))}var Ga=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(D_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},HD=class extends Ga{data(){return super.data()}};function D_(n,e){return typeof e=="string"?bS(n,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}function M2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kh=class{},Ka=class extends Kh{};function R2(n,e,...t){let r=[];e instanceof Kh&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof qD).length,a=o.filter(c=>c instanceof p_).length;if(s>1||s>0&&a>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var p_=class n extends Ka{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return L2(e._query,t),new ii(e.firestore,e.converter,RT(e._query,t))}_parse(e){let t=Gl(e.firestore);return(function(o,s,a,c,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){eV(h,d);let b=[];for(let N of h)b.push(JL(c,o,N));p={arrayValue:{values:b}}}else p=JL(c,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||eV(h,d),p=D2(a,s,h,d==="in"||d==="not-in");return Lt.create(u,d,p)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function P2(n,e,t){let r=e,i=D_("where",n);return p_._create(i,r,t)}var qD=class n extends Kh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)L2(s,c),s=RT(s,c)})(e._query,t),new ii(e.firestore,e.converter,RT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var zD=class n extends Ka{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(o,s)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new ki(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function N2(n,e="asc"){let t=e,r=D_("orderBy",n);return zD._create(r,t)}var g_=class n extends Ka{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ii(e.firestore,e.converter,Hv(e._query,this._limit,this._limitType))}};function k2(n){return oV("limit",n),g_._create("limit",n,"F")}function CS(n){return oV("limitToLast",n),g_._create("limitToLast",n,"L")}var WD=class n extends Ka{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=F2(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function O2(...n){return WD._create("startAfter",n,!1)}var GD=class n extends Ka{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=F2(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function S_(...n){return GD._create("endBefore",n,!1)}function F2(n,e,t,r){if(t[0]=Ae(t[0]),t[0]instanceof Ga)return(function(o,s,a,c,u){if(!c)throw new H(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of Al(o))if(h.field.isKeyField())d.push(Bv(s,c.key));else{let p=c.data.field(h.field);if(__(p))throw new H(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new H(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Rs(d,u)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Gl(n.firestore);return(function(s,a,c,u,d,h){let p=s.explicitOrderBy;if(d.length>p.length)throw new H(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let b=0;b<d.length;b++){let N=d[b];if(p[b].field.isKeyField()){if(typeof N!="string")throw new H(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof N}`);if(!oS(s)&&N.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${N}' contains a slash.`);let k=s.path.child(ot.fromString(N));if(!re.isDocumentKey(k))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);let B=new re(k);m.push(Bv(a,B))}else{let k=D2(c,u,N);m.push(k)}}return new Rs(m,h)})(n._query,n.firestore._databaseId,i,e,t,r)}}function JL(n,e,t){if(typeof(t=Ae(t))=="string"){if(t==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oS(e)&&t.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ot.fromString(t));if(!re.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bv(n,new re(r))}if(t instanceof jt)return Bv(n,t._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${v_(t)}.`)}function eV(n,e){if(!Array.isArray(n)||n.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L2(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var m_=class{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ks(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Pl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ht(s.doubleValue));return new Ss(o)}convertGeoPoint(e){return new Ds(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=y_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uh(e));default:return null}}convertTimestamp(e){let t=Do(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ot.fromString(e);Le(t2(r),9688,{name:e});let i=new jv(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(t)||To(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function TS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var KD=class extends m_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};var Cs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},As=class n extends Ga{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(D_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:Vt("string",As._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};var Ml=class extends As{data(e={}){return super.data(e)}},La=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ml(this._firestore,this._userDataWriter,r.key,r,new Cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ml(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ml(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:sY(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function sY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:n})}}function V2(n){n=Vn(n,jt);let e=Vn(n.firestore,Or);return tY(Jh(e),n._key).then(t=>q2(e,n,t))}La._jsonSchemaVersion="firestore/querySnapshot/1.0",La._jsonSchema={type:Vt("string",La._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};var $l=class extends m_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};function U2(n){n=Vn(n,ii);let e=Vn(n.firestore,Or),t=Jh(e),r=new $l(e);return M2(n._query),nY(t,n._query).then(i=>new La(e,r,n,i))}function j2(n,e,t){n=Vn(n,jt);let r=Vn(n.firestore,Or),i=TS(n.converter,e,t);return A_(r,[wS(Gl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ln.none())])}function B2(n,e,t,...r){n=Vn(n,jt);let i=Vn(n.firestore,Or),o=Gl(i),s;return s=typeof(e=Ae(e))=="string"||e instanceof Wa?T2(o,"updateDoc",n._key,e,t,r):C2(o,"updateDoc",n._key,e),A_(i,[s.toMutation(n._key,Ln.exists(!0))])}function $2(n){return A_(Vn(n.firestore,Or),[new Vl(n._key,Ln.none())])}function H2(n,e){let t=Vn(n.firestore,Or),r=ES(n),i=TS(n.converter,e);return A_(t,[wS(Gl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ln.exists(!1))]).then(()=>r)}function Ya(n,...e){var t,r,i;n=Ae(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||XL(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(XL(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(n instanceof jt)u=Vn(n.firestore,Or),d=E_(n._key.path),c={next:h=>{e[s]&&e[s](q2(u,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Vn(n,ii);u=Vn(h.firestore,Or),d=h._query;let p=new $l(u);c={next:m=>{e[s]&&e[s](new La(u,p,h,m))},error:e[s+1],complete:e[s+2]},M2(n._query)}return(function(p,m,b,N){let k=new Gh(N),B=new Wh(m,k,b);return p.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return pS(yield c_(p),B)})),()=>{k.Ou(),p.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return gS(yield c_(p),B)}))}})(Jh(u),d,a,c)}function A_(n,e){return(function(r,i){let o=new kr;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return HQ(yield JQ(r),i,o)})),o.promise})(Jh(n),e)}function q2(n,e,t){let r=t.docs.get(e._key),i=new $l(n);return new As(n,i,e._key,r,new Cs(t.hasPendingWrites,t.fromCache),e.converter)}var aY={maxAttempts:5};function Rh(n,e){if((n=Ae(n)).firestore!==e)throw new H(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var QD=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gl(e)}get(e){let t=Rh(e,this._firestore),r=new KD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return ie(24041);let o=i[0];if(o.isFoundDocument())return new Ga(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ga(this._firestore,r,t._key,null,t.converter);throw ie(18433,{doc:o})})}set(e,t,r){let i=Rh(e,this._firestore),o=TS(i.converter,t,r),s=wS(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Rh(e,this._firestore),s;return s=typeof(t=Ae(t))=="string"||t instanceof Wa?T2(this._dataReader,"Transaction.update",o._key,t,r,i):C2(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Rh(e,this._firestore);return this._transaction.delete(t._key),this}};var YD=class extends QD{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Rh(e,this._firestore),r=new $l(this._firestore);return super.get(e).then(i=>new As(this._firestore,r,t._key,i._document,new Cs(!1,!1),t.converter))}};function DS(n,e,t){n=Vn(n,Or);let r=Object.assign(Object.assign({},aY),t);return(function(o){if(o.maxAttempts<1)throw new H(V.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new kr;return o.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){let u=yield eY(o);new FD(o.asyncQueue,u,a,s,c).zu()})),c.promise})(Jh(n),i=>e(new YD(n,i)),r)}function Kl(){return new BD("serverTimestamp")}(function(e,t=!0){(function(i){Hl=i})(Mr),Fn(new qt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Or(new dT(r.getProvider("auth-internal")),new pT(s,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jv(u.options.projectId,d)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xe(lL,uL,e),Xe(lL,uL,"esm2017")})();var x_=function(){return x_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},x_.apply(this,arguments)};var uY={includeMetadataChanges:!1};function z2(n,e){return e===void 0&&(e=uY),new de(function(t){var r=Ya(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function W2(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:x_(x_({},r),(t={},t[e.idField]=n.id,t))}function G2(n){return z2(n,{includeMetadataChanges:!0}).pipe(Ie(function(e){return e.docs}))}function K2(n,e){return e===void 0&&(e={}),G2(n).pipe(Ie(function(t){return t.map(function(r){return W2(r,e)})}))}var zt=class{constructor(e){return e}},Q2="firestore",SS=class{constructor(){return _l(Q2)}};var AS=new Z("angularfire2.firestore-instances");function dY(n,e){let t=gh(Q2,n,e);return t&&new zt(t)}function hY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zt(r)}}var fY={provide:SS,deps:[[new or,AS]]},pY={provide:zt,useFactory:dY,deps:[[new or,AS],vo]};function Y2(n,...e){return Xe("angularfire",_s.full,"fst"),Bn([pY,fY,{provide:AS,useFactory:hY(n),multi:!0,deps:[$e,Et,ys,Ma,[new or,Ah],[new or,yl],...e]}])}var Os=rt(K2,!0);var tf=rt(H2,!0,2);var Cn=rt(w2,!0,2);var M_=rt($2,!0,2);var Je=rt(ES,!0,2);var Fi=rt(V2,!0);var R_=rt(U2,!0);var Z2=rt(I2,!0);var X2=rt(k2,!0,2);var P_=rt(Ya,!0);var N_=rt(N2,!0,2),Za=rt(R2,!0,2);var nf=rt(j2,!0,2);var J2=rt(O2,!0,2);var Gn=rt(B2,!0,2);var xS=rt(P2,!0,2);var gY=n=>["/profile",n];function mY(n,e){if(n&1&&ae(0,"img",11),n&2){let t=F().$implicit;M("alt",uo(t.displayName))("src",t.profilePicture,Qt)}}function vY(n,e){if(n&1&&(y(0,"div",12),I(1),_()),n&2){let t=F().$implicit,r=F(2);w(),Re(r.getInitials(t.displayName))}}function _Y(n,e){if(n&1&&(y(0,"div",5)(1,"a",6)(2,"div",7),W(3,mY,1,3,"img",8)(4,vY,2,1,"div",9),_(),y(5,"div",10),I(6),_()()()),n&2){let t=e.$implicit;w(),M("routerLink",_n(4,gY,t.uid)),w(2),M("ngIf",t.profilePicture),w(),M("ngIf",!t.profilePicture),w(2),Re(t.displayName||t.email||"Unknown")}}function yY(n,e){if(n&1&&(co(0),W(1,_Y,7,6,"div",4),lo()),n&2){let t=e.ngIf;w(),M("ngForOf",t)}}var k_=class n{firestore=S(zt);users$;constructor(){let e=Cn(this.firestore,"users");this.users$=Os(e,{idField:"uid"})}getInitials(e){if(!e)return"?";let t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.charAt(0).toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-user-grid"]],decls:6,vars:3,consts:[[1,"user-grid","container","py-4"],[1,"mb-3"],[1,"row","g-3"],[4,"ngIf"],["class","col-6 col-sm-4 col-md-3 col-lg-2 text-center",4,"ngFor","ngForOf"],[1,"col-6","col-sm-4","col-md-3","col-lg-2","text-center"],[1,"d-block","text-decoration-none","text-dark",3,"routerLink"],[1,"avatar","shadow-sm","mx-auto","mb-2"],[3,"src","alt",4,"ngIf"],["class","avatar-fallback",4,"ngIf"],[1,"user-name","small"],[3,"src","alt"],[1,"avatar-fallback"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"h3",1),I(2,"Community Members"),_(),y(3,"div",2),W(4,yY,2,1,"ng-container",3),ho(5,"async"),_()()),t&2&&(w(4),M("ngIf",yI(5,1,r.users$)))},dependencies:[Be,Sr,nt,xt,dt,GI],styles:[".user-grid[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;overflow:hidden;background:var(--palette-surface, #f3f3f3);display:flex;align-items:center;justify-content:center}.user-grid[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-grid[_ngcontent-%COMP%]   .avatar-fallback[_ngcontent-%COMP%]{font-weight:700;color:var(--palette-on-surface, #2b2b2b)}.user-grid[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};function EY(n,e){if(n&1){let t=me();co(0),y(1,"button",16),$("click",function(){Q(t);let i=F();return Y(i.navigateToEvents())}),I(2," View Events "),_(),y(3,"button",17),$("click",function(){Q(t);let i=F();return Y(i.navigateToCreateEvent())}),I(4," Create Event "),_(),lo()}}function wY(n,e){if(n&1){let t=me();co(0),y(1,"button",16),$("click",function(){Q(t);let i=F();return Y(i.openSignupModal())}),I(2," Get Started "),_(),y(3,"button",18),$("click",function(){Q(t);let i=F();return Y(i.openLoginModal())}),I(4," Sign In "),_(),lo()}}var O_=class n{authService=S(Rr);router=S(Ze);modalService=S(it);navigateToEvents(){this.router.navigate(["/events"])}navigateToCreateEvent(){this.router.navigate(["/create-event"])}openLoginModal(){this.modalService.openModal("login")}openSignupModal(){this.modalService.openModal("signup")}isAuthenticated(){return this.authService.currentUserSig()!==null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-home"]],decls:41,vars:2,consts:[[1,"home-viewport"],[1,"container-lg","py-5"],[1,"row","align-items-center","min-vh-100"],[1,"col-lg-6"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"cta-buttons"],[4,"ngIf"],[1,"hero-features","mt-5"],[1,"feature-item"],[1,"feature-icon"],[1,"col-lg-6","mt-4","mt-lg-0"],[1,"card","shadow-sm","p-3"],[1,"mb-3"],[1,"btn","btn-primary","btn-lg","me-3",3,"click"],[1,"btn","btn-secondary","btn-lg",3,"click"],[1,"btn","btn-outline-primary","btn-lg",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),I(6,"CommUnity"),_(),y(7,"p",6),I(8,"For the people, by the people, with the people"),_(),y(9,"p",7),I(10," Join a movement of dedicated volunteers making real change. Create events, connect with others, and build the community you want to see. "),_(),y(11,"div",8),W(12,EY,5,0,"ng-container",9)(13,wY,5,0,"ng-container",9),_(),y(14,"div",10)(15,"div",11)(16,"span",12),I(17,"\u{1F4CB}"),_(),y(18,"h4"),I(19,"Manage Events"),_(),y(20,"p"),I(21,"Create and organize volunteer events easily"),_()(),y(22,"div",11)(23,"span",12),I(24,"\u{1F465}"),_(),y(25,"h4"),I(26,"Connect Volunteers"),_(),y(27,"p"),I(28,"Find like-minded volunteers and build community"),_()(),y(29,"div",11)(30,"span",12),I(31,"\u{1F4CA}"),_(),y(32,"h4"),I(33,"Track Impact"),_(),y(34,"p"),I(35,"Monitor your volunteer hours and contributions"),_()()()()(),y(36,"div",13)(37,"div",14)(38,"h5",15),I(39,"Community"),_(),ae(40,"app-user-grid"),_()()()()()),t&2&&(w(12),M("ngIf",r.isAuthenticated()),w(),M("ngIf",!r.isAuthenticated()))},dependencies:[Be,nt,k_],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.home-viewport[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fefae080,#606c380d);min-height:100vh}.hero-content[_ngcontent-%COMP%]{padding:2rem}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;color:var(--black-forest);margin-bottom:1rem;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--olive-leaf);margin-bottom:1.5rem;font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#283618cc;line-height:1.8;margin-bottom:2rem}.cta-buttons[_ngcontent-%COMP%]{margin-top:2.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.875rem 2rem;border-radius:8px;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-3px);box-shadow:0 8px 20px #606c3833;color:var(--cornsilk)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);border-color:var(--sunlit-clay);color:var(--black-forest);font-weight:600;padding:.875rem 2rem;border-radius:8px;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood);transform:translateY(-3px);box-shadow:0 8px 20px #dda15e33;color:#fff}.btn-outline-primary[_ngcontent-%COMP%]{background-color:transparent;border:2px solid var(--black-forest);color:var(--black-forest);font-weight:600;padding:.75rem 2rem;border-radius:8px;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);transform:translateY(-3px);box-shadow:0 8px 20px #28361833}.hero-features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem}.feature-item[_ngcontent-%COMP%]{text-align:center;padding:1.5rem;border-radius:8px;background-color:#fefae099;border:2px solid rgba(221,161,94,.2);transition:all .3s ease}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:var(--sunlit-clay);box-shadow:0 8px 16px #dda15e26}.feature-icon[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:.5rem}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.5rem}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#283618b3;font-size:.9rem;margin:0}.hero-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.image-placeholder[_ngcontent-%COMP%]{width:100%;max-width:400px;aspect-ratio:1;border-radius:12px;overflow:hidden;box-shadow:0 12px 32px #28361826}.placeholder-svg[_ngcontent-%COMP%]{width:100%;height:100%}@media (max-width: 992px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-image[_ngcontent-%COMP%]{margin-top:2rem}.cta-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;margin-right:0!important}}.min-vh-100[_ngcontent-%COMP%]{min-height:100vh}"]})};var lU=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ne(Ir),ne(gn))};static \u0275dir=tt({type:n})}return n})(),NS=(()=>{class n extends lU{static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275dir=tt({type:n,features:[$n]})}return n})(),df=new Z("");var IY={provide:df,useExisting:rr(()=>Li),multi:!0};function bY(){let n=Tr()?Tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var CY=new Z(""),Li=(()=>{class n extends lU{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!bY())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ne(Ir),ne(gn),ne(CY,8))};static \u0275dir=tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[_i([IY]),$n]})}return n})();function kS(n){return n==null||OS(n)===0}function OS(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var hf=new Z(""),W_=new Z(""),TY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Kn=class{static min(e){return DY(e)}static max(e){return SY(e)}static required(e){return uU(e)}static requiredTrue(e){return AY(e)}static email(e){return xY(e)}static minLength(e){return MY(e)}static maxLength(e){return RY(e)}static pattern(e){return PY(e)}static nullValidator(e){return L_()}static compose(e){return mU(e)}static composeAsync(e){return vU(e)}};function DY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function SY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function uU(n){return kS(n.value)?{required:!0}:null}function AY(n){return n.value===!0?null:{required:!0}}function xY(n){return kS(n.value)||TY.test(n.value)?null:{email:!0}}function MY(n){return e=>{let t=e.value?.length??OS(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function RY(n){return e=>{let t=e.value?.length??OS(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function PY(n){if(!n)return L_;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(kS(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function L_(n){return null}function dU(n){return n!=null}function hU(n){return so(n)?je(n):n}function fU(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function pU(n,e){return e.map(t=>t(n))}function NY(n){return!n.validate}function gU(n){return n.map(e=>NY(e)?e:t=>e.validate(t))}function mU(n){if(!n)return null;let e=n.filter(dU);return e.length==0?null:function(t){return fU(pU(t,e))}}function FS(n){return n!=null?mU(gU(n)):null}function vU(n){if(!n)return null;let e=n.filter(dU);return e.length==0?null:function(t){let r=pU(t,e).map(hU);return zE(r).pipe(Ie(fU))}}function LS(n){return n!=null?vU(gU(n)):null}function eU(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _U(n){return n._rawValidators}function yU(n){return n._rawAsyncValidators}function MS(n){return n?Array.isArray(n)?n:[n]:[]}function V_(n,e){return Array.isArray(n)?n.includes(e):n===e}function tU(n,e){let t=MS(e);return MS(n).forEach(i=>{V_(t,i)||t.push(i)}),t}function nU(n,e){return MS(e).filter(t=>!V_(n,t))}var U_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Mo=class extends U_{name;get formDirective(){return null}get path(){return null}},Xa=class extends U_{_parent=null;name=null;valueAccessor=null},j_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},kY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Dbe=le(U({},kY),{"[class.ng-submitted]":"isSubmitted"}),Ls=(()=>{class n extends j_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(Xa,2))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[$n]})}return n})(),Vi=(()=>{class n extends j_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(Mo,10))};static \u0275dir=tt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[$n]})}return n})();var rf="VALID",F_="INVALID",Ql="PENDING",of="DISABLED",Fs=class{},B_=class extends Fs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},af=class extends Fs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},cf=class extends Fs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Yl=class extends Fs{status;source;constructor(e,t){super(),this.status=e,this.source=t}},$_=class extends Fs{source;constructor(e){super(),this.source=e}},uf=class extends Fs{source;constructor(e){super(),this.source=e}};function VS(n){return(G_(n)?n.validators:n)||null}function OY(n){return Array.isArray(n)?FS(n):n||null}function US(n,e){return(G_(e)?e.asyncValidators:n)||null}function FY(n){return Array.isArray(n)?LS(n):n||null}function G_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function EU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function wU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new K(1002,"")})}var Zl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return At(this.statusReactive)}set status(e){At(()=>this.statusReactive.set(e))}_status=va(()=>this.statusReactive());statusReactive=ee(void 0);get valid(){return this.status===rf}get invalid(){return this.status===F_}get pending(){return this.status==Ql}get disabled(){return this.status===of}get enabled(){return this.status!==of}errors;get pristine(){return At(this.pristineReactive)}set pristine(e){At(()=>this.pristineReactive.set(e))}_pristine=va(()=>this.pristineReactive());pristineReactive=ee(!0);get dirty(){return!this.pristine}get touched(){return At(this.touchedReactive)}set touched(e){At(()=>this.touchedReactive.set(e))}_touched=va(()=>this.touchedReactive());touchedReactive=ee(!1);get untouched(){return!this.touched}_events=new bt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nU(e,this._rawAsyncValidators))}hasValidator(e){return V_(this._rawValidators,e)}hasAsyncValidator(e){return V_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cf(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new cf(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new af(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new af(!0,r))}markAsPending(e={}){this.status=Ql;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=of,this.errors=null,this._forEachChild(i=>{i.disable(le(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new B_(this.value,r)),this._events.next(new Yl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=rf,this._forEachChild(r=>{r.enable(le(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rf||this.status===Ql)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new B_(this.value,t)),this._events.next(new Yl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?of:rf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ql,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=hU(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Yl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?of:this.errors?F_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ql)?Ql:this._anyControlsHaveStatus(F_)?F_:rf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new af(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new cf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){G_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=FY(this._rawAsyncValidators)}},Xl=class extends Zl{constructor(e,t,r){super(VS(t),US(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wU(this,!0,e),Object.keys(e).forEach(r=>{EU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new uf(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var RS=class extends Xl{};var ff=new Z("",{providedIn:"root",factory:()=>K_}),K_="always";function IU(n,e){return[...e.path,n]}function H_(n,e,t=K_){jS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),VY(n,e),jY(n,e),UY(n,e),LY(n,e)}function rU(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),z_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function q_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LY(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jS(n,e){let t=_U(n);e.validator!==null?n.setValidators(eU(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=yU(n);e.asyncValidator!==null?n.setAsyncValidators(eU(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();q_(e._rawValidators,i),q_(e._rawAsyncValidators,i)}function z_(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=_U(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=yU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return q_(e._rawValidators,r),q_(e._rawAsyncValidators,r),t}function VY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&bU(n,e)})}function UY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&bU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function bU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jY(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CU(n,e){n==null,jS(n,e)}function BY(n,e){return z_(n,e)}function TU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $Y(n){return Object.getPrototypeOf(n.constructor)===NS}function DU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Li?t=o:$Y(o)?r=o:i=o}),i||r||t||null}function HY(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var qY={provide:Mo,useExisting:rr(()=>Ja)},sf=Promise.resolve(),Ja=(()=>{class n extends Mo{callSetDisabledState;get submitted(){return At(this.submittedReactive)}_submitted=va(()=>this.submittedReactive());submittedReactive=ee(!1);_directives=new Set;form;ngSubmit=new pt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Xl({},FS(t),LS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sf.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),H_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sf.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sf.then(()=>{let r=this._findContainer(t.path),i=new Xl({});CU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sf.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),DU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new $_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ne(hf,10),ne(W_,10),ne(ff,8))};static \u0275dir=tt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_i([qY]),$n]})}return n})();function iU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var lf=class extends Zl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(VS(t),US(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),G_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(oU(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new uf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){oU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zY=n=>n instanceof lf;var WY={provide:Xa,useExisting:rr(()=>pf)},sU=Promise.resolve(),pf=(()=>{class n extends Xa{_changeDetectorRef;callSetDisabledState;control=new lf;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new pt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),TU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){H_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){sU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&cs(r);sU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?IU(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ne(Mo,9),ne(hf,10),ne(W_,10),ne(df,10),ne(yi,8),ne(ff,8))};static \u0275dir=tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_i([WY]),$n,wr]})}return n})();var Ui=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var AU=new Z("");var GY={provide:Mo,useExisting:rr(()=>gf)},gf=(()=>{class n extends Mo{callSetDisabledState;get submitted(){return At(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=va(()=>this._submittedReactive());_submittedReactive=ee(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new pt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(z_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return H_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){rU(t.control||null,t,!1),HY(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),DU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new $_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(rU(r||null,t),zY(i)&&(H_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);CU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&BY(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jS(this.form,this),this._oldForm&&z_(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(ne(hf,10),ne(W_,10),ne(ff,8))};static \u0275dir=tt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_i([GY]),$n,wr]})}return n})();var KY={provide:Xa,useExisting:rr(()=>mf)},mf=(()=>{class n extends Xa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new pt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),TU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return IU(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(ne(Mo,13),ne(hf,10),ne(W_,10),ne(df,10),ne(AU,8))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[_i([KY]),$n,wr]})}return n})();var QY={provide:df,useExisting:rr(()=>MU),multi:!0};function xU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function YY(n){return n.split(":")[0]}var MU=(()=>{class n extends NS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=S(ao).injector;destroyRef=S(yr);cdr=S(yi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Id({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=xU(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=YY(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_i([QY]),$n]})}return n})(),RU=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(xU(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ne(gn),ne(Ir),ne(MU,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ZY={provide:df,useExisting:rr(()=>PU),multi:!0};function aU(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function XY(n){return n.split(":")[0]}var PU=(()=>{class n extends NS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=XY(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_i([ZY]),$n]})}return n})(),NU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(aU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(aU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ne(gn),ne(Ir),ne(PU,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var JY=(()=>{class n{_validator=L_;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):L_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,features:[wr]})}return n})();var eZ={provide:hf,useExisting:rr(()=>BS),multi:!0};var BS=(()=>{class n extends JY{required;inputName="required";normalizeInput=cs;createValidator=t=>uU;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=io(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&mi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[_i([eZ]),$n]})}return n})();var kU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gr({type:n});static \u0275inj=fr({})}return n})(),PS=class extends Zl{constructor(e,t,r){super(VS(t),US(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){wU(this,!1,e),e.forEach((r,i)=>{EU(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new uf(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function cU(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Q_=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return cU(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Xl(i,o)}record(t,r=null){let i=this._reduceControls(t);return new RS(i,r)}control(t,r,i){let o={};return this.useNonNullable?(cU(r)?o=r:(o.validators=r,o.asyncValidators=i),new lf(t,le(U({},o),{nonNullable:!0}))):new lf(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new PS(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof lf)return t;if(t instanceof Zl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ji=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ff,useValue:t.callSetDisabledState??K_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gr({type:n});static \u0275inj=fr({imports:[kU]})}return n})(),Y_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:AU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ff,useValue:t.callSetDisabledState??K_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gr({type:n});static \u0275inj=fr({imports:[kU]})}return n})();var Qn=class n{firestore=S(zt);auth=S(Ke);createEvent(e){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=le(U({},e),{creatorUid:t.uid,creatorEmail:t.email||"",participants:[t.uid],createdAt:new Date,updatedAt:new Date}),i=Cn(this.firestore,"events");return tf(i,r).then(o=>o.id)}getEventsAttendingForUser(e){let t=Cn(this.firestore,"events");return Os(t,{idField:"id"}).pipe(Ie(r=>r.filter(i=>i.participants&&i.participants.includes(e))))}getEvents(){let e=Cn(this.firestore,"events");return Os(e,{idField:"id"})}getMyEvents(){let e=this.auth.currentUser;if(!e)return new de(i=>{i.next([]),i.complete()});let t=Cn(this.firestore,"events"),r=Za(t,xS("creatorUid","==",e.uid));return Os(r,{idField:"id"})}getEventsByCreator(e){let t=Cn(this.firestore,"events"),r=Za(t,xS("creatorUid","==",e));return Os(r,{idField:"id"})}getEventsAttending(){let e=this.auth.currentUser;if(!e)return new de(r=>{r.next([]),r.complete()});let t=Cn(this.firestore,"events");return Os(t,{idField:"id"}).pipe(Ie(r=>r.filter(i=>i.participants&&i.participants.includes(e.uid)&&i.creatorUid!==e.uid)))}getEvent(e){return E(this,null,function*(){try{let t=yield Fi(Je(this.firestore,"events",e));return t.exists()?le(U({},t.data()),{id:e}):null}catch(t){throw console.error("Error getting event:",t),t}})}updateEvent(e,t){return E(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("User not authenticated");let i=yield this.getEvent(e);if(!i||i.creatorUid!==r.uid)throw new Error("Only the event creator can edit this event");let o=Je(this.firestore,"events",e);return Gn(o,le(U({},t),{updatedAt:new Date}))})}deleteEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r||r.creatorUid!==t.uid)throw new Error("Only the event creator can delete this event");let i=Je(this.firestore,"events",e);return M_(i)})}joinEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r)throw new Error("Event not found");let i=r.participants||[];if(r.memberCap&&i.length>=r.memberCap)throw new Error(`Event is full (${r.memberCap} participants)`);if(!i.includes(t.uid)){i.push(t.uid);let o=Je(this.firestore,"events",e);return Gn(o,{participants:i})}})}leaveEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r)throw new Error("Event not found");let i=(r.participants||[]).filter(s=>s!==t.uid),o=Je(this.firestore,"events",e);return Gn(o,{participants:i})})}getParticipants(e){return E(this,null,function*(){let t=yield this.getEvent(e);if(!t||!t.participants)return[];let r=[];for(let i of t.participants)try{let o=yield Fi(Je(this.firestore,"users",i));o.exists()&&r.push(U({uid:i},o.data()))}catch(o){console.error(`Error fetching participant ${i}:`,o)}return r})}backfillCreatorProfilePictures(){return E(this,null,function*(){try{let e=Cn(this.firestore,"events"),t=yield R_(e);for(let r of t.docs){let i=r.data();if(i&&!i.creatorProfilePicture&&i.creatorUid)try{let o=yield Fi(Je(this.firestore,"users",i.creatorUid));if(o.exists()){let s=o.data();s&&s.profilePicture&&(yield Gn(Je(this.firestore,"events",r.id),{creatorProfilePicture:s.profilePicture}))}}catch(o){console.warn("Backfill: failed for event",r.id,o)}}}catch(e){throw console.error("Backfill failed",e),e}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var OU=n=>["/profile",n],tZ=n=>["/event-details",n],nZ=n=>["/edit-event",n];function rZ(n,e){if(n&1&&(y(0,"div",3)(1,"p",4),I(2),_()()),n&2){let t=F();w(2),Re(t.emptyMessage||"No events found.")}}function iZ(n,e){if(n&1&&ae(0,"img",22),n&2){let t=F().$implicit;M("alt",uo(t.creator))("src",t.creatorProfilePicture,Qt)}}function oZ(n,e){if(n&1&&(y(0,"div",23),I(1),_()),n&2){let t=F().$implicit;w(),Re((t.creator||"?").charAt(0))}}function sZ(n,e){n&1&&(y(0,"span"),I(1,"\u2026"),_())}function aZ(n,e){if(n&1&&(y(0,"div",17)(1,"small",18)(2,"strong"),I(3,"\u{1F527} Work:"),_(),y(4,"span",24),I(5),_()()()),n&2){let t=F().$implicit;w(5),Re(t.workType)}}function cZ(n,e){if(n&1&&(y(0,"span"),I(1),_()),n&2){let t=F().$implicit;w(),ve(" / ",t.memberCap)}}function lZ(n,e){if(n&1){let t=me();y(0,"button",31),$("click",function(){Q(t);let i=F(2).$implicit,o=F();return Y(o.onAttendClick(i))}),I(1),_()}if(n&2){let t=F(2).$implicit,r=F();at("btn-success",!r.isAttending(t))("btn-danger",r.isAttending(t)),w(),ve(" ",r.isAttending(t)?"Leave Event":"Attend"," ")}}function uZ(n,e){if(n&1&&(y(0,"button",32),I(1," Edit "),_()),n&2){let t=F(2).$implicit;M("routerLink",_n(1,nZ,t.id))}}function dZ(n,e){if(n&1){let t=me();y(0,"button",33),$("click",function(){Q(t);let i=F(2).$implicit,o=F();return Y(o.onDeleteClick(i))}),I(1," Delete "),_()}}function hZ(n,e){if(n&1&&(y(0,"div",25)(1,"div",26)(2,"button",27),I(3," View Details "),_(),W(4,lZ,2,5,"button",28)(5,uZ,2,3,"button",29)(6,dZ,2,0,"button",30),_()()),n&2){let t=F().$implicit,r=F();w(2),M("routerLink",_n(4,tZ,t.id)),w(2),M("ngIf",!r.isCreator(t)),w(),M("ngIf",r.isCreator(t)),w(),M("ngIf",r.isCreator(t))}}function fZ(n,e){if(n&1&&(y(0,"div",5)(1,"div",6)(2,"div",7)(3,"a",8),W(4,iZ,1,3,"img",9)(5,oZ,2,1,"div",10),_(),y(6,"div",11)(7,"h5",12),I(8),_(),y(9,"p",13),I(10),ho(11,"slice"),W(12,sZ,2,0,"span",14),_()()(),y(13,"div",15)(14,"div",16)(15,"div",17)(16,"small",18)(17,"strong"),I(18,"\u{1F4C5} Date:"),_(),I(19),_()(),y(20,"div",17)(21,"small",18)(22,"strong"),I(23,"\u{1F4CD} Location:"),_(),I(24),_()(),W(25,aZ,6,1,"div",19),y(26,"div",17)(27,"small",18)(28,"strong"),I(29,"\u{1F465} Participants:"),_(),I(30),W(31,cZ,2,1,"span",14),_()(),y(32,"div",17)(33,"small",18)(34,"strong"),I(35,"\u{1F464} Creator:"),_(),y(36,"a",20),I(37),_()()()()(),W(38,hZ,7,6,"div",21),_()()),n&2){let t=e.$implicit,r=F();w(3),M("routerLink",_n(19,OU,t.creatorUid)),w(),M("ngIf",t.creatorProfilePicture),w(),M("ngIf",!t.creatorProfilePicture),w(3),Re(t.title),w(2),Re(Sd(11,15,t.description||"",0,150)),w(2),M("ngIf",(t.description||"").length>150),w(7),Kc(" ",t.date," at ",t.time," "),w(5),ve(" ",t.location," "),w(),M("ngIf",t.workType),w(5),ve(" ",(t.participants==null?null:t.participants.length)||0),w(),M("ngIf",t.memberCap),w(5),M("routerLink",_n(21,OU,t.creatorUid)),w(),ve(" ",t.creator),w(),M("ngIf",r.currentUserUid)}}var Vs=class n{events=[];emptyMessage="No events found.";currentUserUid;attendingEventIds;onAttend;onLeave;onDelete;isCreator(e){return e.creatorUid===this.currentUserUid}isAttending(e){return this.attendingEventIds?.includes(e.id||"")||!1}onAttendClick(e){this.isAttending(e)?this.onLeave?.(e):this.onAttend?.(e)}onDeleteClick(e){confirm(`Are you sure you want to delete "${e.title}"?`)&&this.onDelete?.(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-event-list"]],inputs:{events:"events",emptyMessage:"emptyMessage",currentUserUid:"currentUserUid",attendingEventIds:"attendingEventIds",onAttend:"onAttend",onLeave:"onLeave",onDelete:"onDelete"},decls:3,vars:2,consts:[[1,"event-list-container"],["class","alert alert-info",4,"ngIf"],["class","card event-card mb-3 shadow-sm",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"mb-0"],[1,"card","event-card","mb-3","shadow-sm"],[1,"card-body"],[1,"event-header","d-flex","align-items-start","gap-3","mb-3"],[1,"d-inline-block","flex-shrink-0",3,"routerLink"],["class","rounded-circle","style","width:44px;height:44px;object-fit:cover;",3,"src","alt",4,"ngIf"],["class","avatar-placeholder-sm rounded-circle d-inline-flex align-items-center justify-content-center",4,"ngIf"],[1,"flex-grow-1"],[1,"card-title","text-primary","mb-2"],[1,"card-text","text-muted","small","mb-0"],[4,"ngIf"],[1,"event-meta","mb-3"],[1,"row","row-cols-1","row-cols-md-2","g-2"],[1,"col"],[1,"d-block","text-muted"],["class","col",4,"ngIf"],[1,"text-decoration-none",3,"routerLink"],["class","event-actions",4,"ngIf"],[1,"rounded-circle",2,"width","44px","height","44px","object-fit","cover",3,"src","alt"],[1,"avatar-placeholder-sm","rounded-circle","d-inline-flex","align-items-center","justify-content-center"],[1,"badge","bg-secondary"],[1,"event-actions"],[1,"d-flex","flex-wrap","gap-2","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],["class","btn btn-sm","type","button",3,"btn-success","btn-danger","click",4,"ngIf"],["class","btn btn-warning btn-sm text-dark","type","button",3,"routerLink",4,"ngIf"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"click"],["type","button",1,"btn","btn-warning","btn-sm","text-dark",3,"routerLink"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0),W(1,rZ,3,1,"div",1)(2,fZ,39,23,"div",2),_()),t&2&&(w(),M("ngIf",r.events.length===0),w(),M("ngForOf",r.events))},dependencies:[Be,Sr,nt,xt,dt,Fd],styles:[".event-card[_ngcontent-%COMP%]{border-left:4px solid var(--sunlit-clay);border-radius:8px;transition:transform .2s,box-shadow .2s}.event-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f!important}.event-header[_ngcontent-%COMP%]{flex-wrap:wrap}.event-meta[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:1.6}.event-meta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--olive-leaf)}.event-actions[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.06)}.avatar-placeholder-sm[_ngcontent-%COMP%]{width:44px;height:44px;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));color:#fff;font-weight:700;font-size:.9rem}.btn-sm[_ngcontent-%COMP%]{font-size:.875rem;white-space:nowrap}@media (max-width: 576px){.event-header[_ngcontent-%COMP%]{flex-direction:column}.event-actions[_ngcontent-%COMP%]{margin-top:1rem}.event-actions[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column}.btn-sm[_ngcontent-%COMP%]{width:100%}}"]})};var Yn=class n{firestore=S(zt);auth=S(Ke);getCurrentUserProfile(){return E(this,null,function*(){let e=this.auth.currentUser;if(!e)return null;try{let t=yield Fi(Je(this.firestore,"users",e.uid));return t.exists()?t.data():null}catch(t){throw console.error("Error getting user profile:",t),t}})}getUserByUid(e){return E(this,null,function*(){try{let t=yield Fi(Je(this.firestore,"users",e));return t.exists()?t.data():null}catch(t){throw console.error("Error getting user:",t),t}})}updateUserProfile(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=Je(this.firestore,"users",t.uid);return Gn(r,e)})}createUserProfile(e,t){return E(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("User not authenticated");let i=Je(this.firestore,"users",r.uid);return Gn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date}).catch(o=>{if(o.code==="not-found")return Fi(i).then(()=>Gn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date})).catch(()=>Gn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date}));throw o})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function pZ(n,e){n&1&&(y(0,"div")(1,"h2"),I(2,"You are currently not logged in!"),_(),y(3,"h3"),I(4,"Please login in order to see event details, mark yourself as attending, or create new events!"),_()())}function gZ(n,e){n&1&&(y(0,"div",12)(1,"div",13)(2,"span",14),I(3,"Loading..."),_()()())}function mZ(n,e){if(n&1&&(y(0,"div"),ae(1,"app-event-list",15),_()),n&2){let t=F();w(),M("events",t.filteredEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","No events found. Try adjusting your search.")("onAttend",t.attendEvent.bind(t))("onLeave",t.leaveEvent.bind(t))("onDelete",t.deleteEvent.bind(t))}}var Z_=class n{auth=S(Ke);eventService=S(Qn);modalService=S(it);userService=S(Yn);events=ee([]);filteredEvents=ee([]);searchTerm=ee("");isLoading=ee(!0);attendingEventIds=ee([]);currentUserUid;ngOnInit(){let e=this.auth.currentUser;this.currentUserUid=e?.uid,this.loadEvents()}loadEvents(){this.eventService.getEvents().subscribe({next:e=>{this.enrichEventsWithCreatorPhotos(e).then(t=>{this.events.set(t),this.filterEvents(),this.loadAttendingEventIds()}).catch(t=>{console.warn("Failed to enrich events",t),this.events.set(e),this.filterEvents(),this.loadAttendingEventIds()})},error:e=>{console.error("Error loading events:",e),this.isLoading.set(!1)}})}enrichEventsWithCreatorPhotos(e){return E(this,null,function*(){let t=Array.from(new Set(e.map(i=>i.creatorUid).filter(Boolean))),r={};return yield Promise.all(t.map(i=>E(this,null,function*(){try{let o=yield this.userService.getUserByUid(i);o&&(r[i]={profilePicture:o.profilePicture,displayName:o.displayName})}catch{}}))),e.map(i=>le(U({},i),{creatorProfilePicture:r[i.creatorUid]?.profilePicture||i.creatorProfilePicture,creator:i.creator||r[i.creatorUid]?.displayName||i.creator}))})}loadAttendingEventIds(){if(!this.currentUserUid){this.isLoading.set(!1);return}this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}updateSearch(e){this.searchTerm.set(e),this.filterEvents()}filterEvents(){let e=this.searchTerm().toLowerCase().trim();if(!e){this.filteredEvents.set(this.events());return}let t=this.events().filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.location.toLowerCase().includes(e)||r.creator.toLowerCase().includes(e));this.filteredEvents.set(t)}attendEvent(e){return E(this,null,function*(){if(!this.currentUserUid){this.modalService.openModal("login");return}try{if(!e.id)return;yield this.eventService.joinEvent(e.id),this.loadAttendingEventIds()}catch(t){console.error("Error attending event:",t),alert("Failed to attend event")}})}leaveEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.leaveEvent(e.id),this.loadAttendingEventIds()}catch(t){console.error("Error leaving event:",t),alert("Failed to leave event")}})}deleteEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.deleteEvent(e.id),this.loadEvents()}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-events-page"]],decls:18,vars:4,consts:[[1,"events-viewport","container","py-4"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"d-flex","gap-2","mb-3"],["routerLink","/my-events",1,"btn","btn-primary"],["routerLink","/attending",1,"btn","btn-info"],["routerLink","/create-event",1,"btn","btn-success"],[4,"ngIf"],["type","search","placeholder","Search events by title, location, or description...",1,"form-control","form-control-lg","search-input",3,"input","value"],["class","text-center py-4",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onAttend","onLeave","onDelete"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),I(5,"\u{1F3AF} Browse Events"),_(),y(6,"div",5)(7,"button",6),I(8," \u{1F4CB} My Events "),_(),y(9,"button",7),I(10," \u{1F389} Attending "),_(),y(11,"button",8),I(12," \u2795 Create Event "),_()(),W(13,pZ,5,0,"div",9),_(),y(14,"div",3)(15,"input",10),$("input",function(o){return r.updateSearch(o.target.value)}),_()(),W(16,gZ,4,0,"div",11)(17,mZ,2,7,"div",9),_()()()),t&2&&(w(13),M("ngIf",!r.currentUserUid),w(2),M("value",r.searchTerm()),w(),M("ngIf",r.isLoading()),w(),M("ngIf",!r.isLoading()))},dependencies:[Be,nt,ji,xt,dt,Vs],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.events-viewport[_ngcontent-%COMP%]{min-height:60vh;background:linear-gradient(135deg,#fefae04d,#606c380d)}.search-input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid rgba(40,54,24,.12);box-shadow:0 2px 8px #2836180a;font-size:1rem;padding:.75rem 1rem;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 4px 12px #606c3826}.search-input[_ngcontent-%COMP%]::placeholder{color:#28361880}h2[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:700;margin-bottom:1rem}h2.text-primary[_ngcontent-%COMP%]{color:var(--olive-leaf)!important}.btn[_ngcontent-%COMP%]{border-radius:6px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#218838}.btn-warning[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);border-color:var(--sunlit-clay)}.btn-warning[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood)}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;border-color:#17a2b8}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496;border-color:#138496}.alert-info[_ngcontent-%COMP%]{background-color:#17a2b81a;border-color:#17a2b84d;color:#155064;border-radius:6px;padding:1.25rem}@media (max-width: 768px){.events-viewport[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.search-input[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem}h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 576px){h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.75rem}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:.95rem}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.d-flex.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};function vZ(n,e){n&1&&(y(0,"div",7)(1,"p",8),I(2,"No participants yet."),_()())}function _Z(n,e){if(n&1&&ae(0,"img",19),n&2){let t=F().$implicit;M("alt",uo(t.displayName))("src",t.profilePicture,Qt)}}function yZ(n,e){if(n&1&&(y(0,"div",20),I(1),_()),n&2){let t=F().$implicit;w(),ve(" ",t.displayName.charAt(0).toUpperCase()," ")}}function EZ(n,e){if(n&1&&(y(0,"li",11)(1,"div",12)(2,"div",13),W(3,_Z,1,3,"img",14)(4,yZ,2,1,"div",15),_(),y(5,"div",16)(6,"p",17)(7,"strong"),I(8),_()(),y(9,"small",18),I(10),_()()()()),n&2){let t=e.$implicit;w(3),M("ngIf",t.profilePicture),w(),M("ngIf",!t.profilePicture),w(4),Re(t.displayName),w(2),Re(t.email)}}function wZ(n,e){if(n&1&&(y(0,"div")(1,"ul",9),W(2,EZ,11,4,"li",10),_()()),n&2){let t=F();w(2),M("ngForOf",t.participants)}}var X_=class n{participants=[];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-participant-list"]],inputs:{participants:"participants"},decls:8,vars:3,consts:[[1,"participant-list-container"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body","p-0"],["class","p-3",4,"ngIf"],[4,"ngIf"],[1,"p-3"],[1,"text-muted","mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item participant-item",4,"ngFor","ngForOf"],[1,"list-group-item","participant-item"],[1,"d-flex","align-items-center"],[1,"participant-avatar","me-3"],["class","rounded-circle",3,"src","alt",4,"ngIf"],["class","avatar-placeholder rounded-circle",4,"ngIf"],[1,"flex-grow-1"],[1,"mb-1"],[1,"text-muted"],[1,"rounded-circle",3,"src","alt"],[1,"avatar-placeholder","rounded-circle"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),I(4),_()(),y(5,"div",4),W(6,vZ,3,0,"div",5)(7,wZ,3,1,"div",6),_()()()),t&2&&(w(4),ve("\u{1F465} Participants (",r.participants.length,")"),w(2),M("ngIf",r.participants.length===0),w(),M("ngIf",r.participants.length>0))},dependencies:[Be,Sr,nt],styles:[".participant-list-container[_ngcontent-%COMP%]{margin-top:20px}.participant-item[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #e9ecef}.participant-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.participant-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.participant-avatar[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.participant-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px}"]})};var FU="@firebase/database",LU="1.0.20";var GA="";function IZ(n){GA=n}var QS=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ht(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ul(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var YS=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ei(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var mj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QS(e)}}catch{}return new YS},tc=mj("localStorage"),ZS=mj("sessionStorage");var tu=new xr("@firebase/database"),bZ=(function(){let n=1;return function(){return n++}})(),vj=function(n){let e=xO(n),t=new Xm;t.update(e);let r=t.digest();return dl.encodeByteArray(r)},Of=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Of.apply(null,r):typeof r=="object"?e+=Ht(r):e+=r,e+=" "}return e},rc=null,VU=!0,CZ=function(n,e){q(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(tu.logLevel=Te.VERBOSE,rc=tu.log.bind(tu),e&&ZS.set("logging_enabled",!0)):typeof n=="function"?rc=n:(rc=null,ZS.remove("logging_enabled"))},on=function(...n){if(VU===!0&&(VU=!1,rc===null&&ZS.get("logging_enabled")===!0&&CZ(!0)),rc){let e=Of.apply(null,n);rc(e)}},Ff=function(n){return function(...e){on(n,...e)}},XS=function(...n){let e="FIREBASE INTERNAL ERROR: "+Of(...n);tu.error(e)},Ro=function(...n){let e=`FIREBASE FATAL ERROR: ${Of(...n)}`;throw tu.error(e),new Error(e)},Xn=function(...n){let e="FIREBASE WARNING: "+Of(...n);tu.warn(e)},TZ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dy=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},DZ=function(n){if(Ti()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},iu="[MIN_NAME]",ic="[MAX_NAME]",sc=function(n,e){if(n===e)return 0;if(n===iu||e===ic)return-1;if(e===iu||n===ic)return 1;{let t=UU(n),r=UU(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},SZ=function(n,e){return n===e?0:n<e?-1:1},_f=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ht(e))},KA=function(n){if(typeof n!="object"||n===null)return Ht(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Ht(e[r]),t+=":",t+=KA(n[e[r]]);return t+="}",t},_j=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Tn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var yj=function(n){q(!Dy(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),h="";for(c=0;c<64;c+=8){let p=parseInt(d.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},AZ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xZ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function MZ(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var RZ=new RegExp("^-?(0*)\\d{1,10}$"),PZ=-2147483648,NZ=2147483647,UU=function(n){if(RZ.test(n)){let e=Number(n);if(e>=PZ&&e<=NZ)return e}return null},hu=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Xn("Exception was thrown by user callback.",t),e},Math.floor(0))}},kZ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cf=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var JS=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Zt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var eA=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(on("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}},Tf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ey="5",Ej="v",wj="s",Ij="r",bj="f",Cj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tj="ls",Dj="p",tA="ac",Sj="websocket",Aj="long_polling";var ty=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1,u=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function OZ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function xj(n,e,t){q(typeof e=="string","typeof type must == string"),q(typeof t=="object","typeof params must == object");let r;if(e===Sj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Aj)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);OZ(n)&&(t.ns=n.namespace);let i=[];return Tn(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var nA=class{constructor(){this.counters_={}}incrementCounter(e,t=1){ei(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return _O(this.counters_)}};var $S={},HS={};function QA(n){let e=n.toString();return $S[e]||($S[e]=new nA),$S[e]}function FZ(n,e){let t=n.toString();return HS[t]||(HS[t]=e()),HS[t]}var rA=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&hu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jU="start",LZ="close",VZ="pLPCommand",UZ="pRTLPCB",Mj="id",Rj="pw",Pj="ser",jZ="cb",BZ="seg",$Z="ts",HZ="d",qZ="dframe",Nj=1870,kj=30,zZ=Nj-kj,WZ=25e3,GZ=3e4,iA=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ff(e),this.stats_=QA(t),this.urlFn=c=>(this.appCheckToken&&(c[tA]=this.appCheckToken),xj(t,Aj,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(GZ)),DZ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oA((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===jU)this.id=a,this.password=c;else if(s===LZ)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[jU]="t",r[Pj]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[jZ]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ej]=ey,this.transportSessionId&&(r[wj]=this.transportSessionId),this.lastSessionId&&(r[Tj]=this.lastSessionId),this.applicationId&&(r[Dj]=this.applicationId),this.appCheckToken&&(r[tA]=this.appCheckToken),typeof location<"u"&&location.hostname&&Cj.test(location.hostname)&&(r[Ij]=bj);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ti()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AZ()&&!xZ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ht(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=jb(t),i=_j(r,zZ);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ti())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qZ]="t",r[Mj]=e,r[Rj]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ht(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},oA=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ti())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=bZ(),window[VZ+this.uniqueCallbackIdentifier]=e,window[UZ+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){on("frame writing exception"),a.stack&&on(a.stack),on(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||on("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Mj]=this.myID,e[Rj]=this.myPW,e[Pj]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kj+r.length<=Nj;){let s=this.pendingSegs.shift();r=r+"&"+BZ+i+"="+s.seg+"&"+$Z+i+"="+s.ts+"&"+HZ+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(WZ)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Ti()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{on("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var KZ=16384,QZ=45e3,ny=null;typeof MozWebSocket<"u"?ny=MozWebSocket:typeof WebSocket<"u"&&(ny=WebSocket);var yf=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ff(this.connId),this.stats_=QA(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[Ej]=ey,!Ti()&&typeof location<"u"&&location.hostname&&Cj.test(location.hostname)&&(a[Ij]=bj),r&&(a[wj]=r),i&&(a[Tj]=i),o&&(a[tA]=o),s&&(a[Dj]=s),xj(t,Sj,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tc.set("previous_websocket_failure",!0);try{let i;if(Ti()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ey}/${GA}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ny(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&ny!==null&&!n.forceDisallow_}static previouslyFailed(){return tc.isInMemoryStorage||tc.get("previous_websocket_failure")===!0}markConnectionHealthy(){tc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ul(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Ht(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=_j(r,KZ);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QZ))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),YZ=(()=>{class n{static get ALL_TRANSPORTS(){return[iA,yf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=yf&&yf.isAvailable(),i=r&&!yf.previouslyFailed();if(t.webSocketOnly&&(r||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yf];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),ZZ=6e4,XZ=5e3,JZ=10*1024,eX=100*1024,qS="t",BU="d",tX="s",$U="r",nX="e",HU="o",qU="a",zU="n",WU="p",rX="h",sA=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ff("c:"+this.id+":"),this.transportManager_=new YZ(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eX?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JZ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qS in e){let t=e[qS];t===qU?this.upgradeIfSecondaryHealthy_():t===$U?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===HU&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=_f("t",e),r=_f("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:WU,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qU,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zU,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=_f("t",e),r=_f("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=_f(qS,e);if(BU in e){let r=e[BU];if(t===rX){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===zU){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===tX?this.onConnectionShutdown_(r):t===$U?this.onReset_(r):t===nX?XS("Server Error: "+r):t===HU?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XS("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ey!==r&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ZZ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(XZ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:WU,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ry=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var iy=class{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){q(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var oy=class n extends iy{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ch()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var GU=32,KU=768,We=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ze(){return new We("")}function Se(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function js(n){return n.pieces_.length-n.pieceNum_}function st(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new We(n.pieces_,e)}function YA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function iX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function xf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Oj(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new We(e,0)}function Mt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof We)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new We(t,0)}function xe(n){return n.pieceNum_>=n.pieces_.length}function Zn(n,e){let t=Se(n),r=Se(e);if(t===null)return e;if(t===r)return Zn(st(n),st(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function oX(n,e){let t=xf(n,0),r=xf(e,0);for(let i=0;i<t.length&&i<r.length;i++){let o=sc(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function ZA(n,e){if(js(n)!==js(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Fr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(js(n)>js(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var aA=class{constructor(e,t){this.errorPrefix_=t,this.parts_=xf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dh(this.parts_[r]);Fj(this)}};function sX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=dh(e),Fj(n)}function aX(n){let e=n.parts_.pop();n.byteLength_-=dh(e),n.parts_.length>0&&(n.byteLength_-=1)}function Fj(n){if(n.byteLength_>KU)throw new Error(n.errorPrefix_+"has a key path longer than "+KU+" bytes ("+n.byteLength_+").");if(n.parts_.length>GU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GU+") or object contains a cycle "+ec(n))}function ec(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var cA=class n extends iy{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ef=1e3,cX=300*1e3,QU=30*1e3,lX=1.3,uX=3e4,dX="server_kill",YU=3,XA=(()=>{class n extends ry{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Ff("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ef,this.maxReconnectDelay_=cX,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Ti())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cA.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&oy.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Ht(s)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new wn,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&ei(t,"w")){let i=Ta(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||SO(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=QU)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=DO(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ht(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):XS("Unrecognized action received from server: "+Ht(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uX&&(this.reconnectDelay_=Ef),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lX)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(p){q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,m]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?on("getToken() completed but was canceled"):(on("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,c=new sA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,b=>{Xn(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(dX)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Xn(p),u())}}})}interrupt(t){on("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){on("Resuming connection for reason: "+t),delete this.interruptReasons_[t],pl(this.interruptReasons_)&&(this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>KA(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new We(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){on("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=YU&&(this.reconnectDelay_=QU,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){on("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=YU&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Ti()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+GA.replace(/\./g,"-")]=1,ch()?t["framework.cordova"]=1:ev()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=oy.getInstance().currentlyOnline();return pl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Me=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var ou=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Me(iu,e),i=new Me(iu,t);return this.compare(r,i)!==0}minPost(){return Me.MIN}};var J_,sy=class extends ou{static get __EMPTY_NODE(){return J_}static set __EMPTY_NODE(e){J_=e}compare(e,t){return sc(e.name,t.name)}isDefinedOn(e){throw Ca("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me(ic,J_)}makePost(e,t){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,J_)}toString(){return".key"}},nu=new sy;var eu=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},oi=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Lr.EMPTY_NODE,this.right=s??Lr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Lr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Lr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),lA=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new oi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Lr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oi.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eu(this.root_,null,this.comparator_,!0,e)}};Lr.EMPTY_NODE=new lA;function hX(n,e){return sc(n.name,e.name)}function JA(n,e){return sc(n,e)}var uA;function fX(n){uA=n}var Lj=function(n){return typeof n=="number"?"number:"+yj(n):"string:"+n},Vj=function(n){if(n.isLeafNode()){let e=n.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ei(e,".sv"),"Priority must be a string or number.")}else q(n===uA||n.isEmpty(),"priority of unexpected type.");q(n===uA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var ZU,su=(()=>{class n{static set __childrenNodeConstructor(t){ZU=t}static get __childrenNodeConstructor(){return ZU}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vj(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xe(t)?this:Se(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Se(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(q(i!==".priority"||js(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Lj(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=yj(this.value_):t+=this.value_,this.lazyHash_=vj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return q(o>=0,"Unknown leaf type: "+r),q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Uj,jj;function pX(n){Uj=n}function gX(n){jj=n}var dA=class extends ou{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?sc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(ic,new su("[PRIORITY-POST]",jj))}makePost(e,t){let r=Uj(e);return new Me(t,new su("[PRIORITY-POST]",r))}toString(){return".priority"}},gt=new dA;var mX=Math.log(2),hA=class{constructor(e){let t=o=>parseInt(Math.log(o)/mX,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ay=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,h,p;if(d===0)return null;if(d===1)return h=n[c],p=t?t(h):h,new oi(p,h.node,oi.BLACK,null,null);{let m=parseInt(d/2,10)+c,b=i(c,m),N=i(m+1,u);return h=n[m],p=t?t(h):h,new oi(p,h.node,oi.BLACK,b,N)}},o=function(c){let u=null,d=null,h=n.length,p=function(b,N){let k=h-b,B=h;h-=b;let te=i(k+1,B),J=n[k],ue=t?t(J):J;m(new oi(ue,J.node,N,null,te))},m=function(b){u?(u.left=b,u=b):(d=b,u=b)};for(let b=0;b<c.count;++b){let N=c.nextBitIsOne(),k=Math.pow(2,c.count-(b+1));N?p(k,oi.BLACK):(p(k,oi.BLACK),p(k,oi.RED))}return d},s=new hA(n.length),a=o(s);return new Lr(r||e,a)};var zS,Jl={},au=class n{static get Default(){return q(Jl&&gt,"ChildrenNode.ts has not been loaded"),zS=zS||new n({".priority":Jl},{".priority":gt}),zS}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Ta(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Lr?t:null}hasIndex(e){return ei(this.indexSet_,e.toString())}addIndex(e,t){q(e!==nu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Me.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=ay(r,e.getCompare()):a=Jl;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=uh(this.indexes_,(i,o)=>{let s=Ta(this.indexSet_,o);if(q(s,"Missing index implementation for "+o),i===Jl)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Me.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),ay(a,s.getCompare())}else return Jl;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Me(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=uh(this.indexes_,i=>{if(i===Jl)return i;{let o=t.get(e.name);return o?i.remove(new Me(e.name,o)):i}});return new n(r,this.indexSet_)}};var wf,be=(()=>{class n{static get EMPTY_NODE(){return wf||(wf=new n(new Lr(JA),null,au.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Vj(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?wf:r}}getChild(t){let r=Se(t);return r===null?this:this.getImmediateChild(r).getChild(st(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Me(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?wf:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Se(t);if(i===null)return r;{q(Se(t)!==".priority"||js(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(st(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(gt,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Lj(this.getPriority().val())+":"),this.forEachChild(gt,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":vj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Me(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Me(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Me(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Me.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Me.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lf?-1:0}withIndex(t){if(t===nu||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===nu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(gt),o=r.getIterator(gt),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===nu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),fA=class extends be{constructor(){super(new Lr(JA),be.EMPTY_NODE,au.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}},Lf=new fA;Object.defineProperties(Me,{MIN:{value:new Me(iu,be.EMPTY_NODE)},MAX:{value:new Me(ic,Lf)}});sy.__EMPTY_NODE=be.EMPTY_NODE;su.__childrenNodeConstructor=be;fX(Lf);gX(Lf);var vX=!0;function Bt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new su(t,Bt(e))}if(!(n instanceof Array)&&vX){let t=[],r=!1;if(Tn(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=Bt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Me(s,c)))}}),t.length===0)return be.EMPTY_NODE;let o=ay(t,hX,s=>s.name,JA);if(r){let s=ay(t,gt.getCompare());return new be(o,Bt(e),new au({".priority":s},{".priority":gt}))}else return new be(o,Bt(e),au.Default)}else{let t=be.EMPTY_NODE;return Tn(n,(r,i)=>{if(ei(n,r)&&r.substring(0,1)!=="."){let o=Bt(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Bt(e))}}pX(Bt);var pA=class extends ou{constructor(e){super(),this.indexPath_=e,q(!xe(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?sc(e.name,t.name):o}makePost(e,t){let r=Bt(e),i=be.EMPTY_NODE.updateChild(this.indexPath_,r);return new Me(t,i)}maxPost(){let e=be.EMPTY_NODE.updateChild(this.indexPath_,Lf);return new Me(ic,e)}toString(){return xf(this.indexPath_,0).join("/")}};var gA=class extends ou{compare(e,t){let r=e.node.compareTo(t.node);return r===0?sc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){let r=Bt(e);return new Me(t,r)}toString(){return".value"}},_X=new gA;function Bj(n){return{type:"value",snapshotNode:n}}function cu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Mf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Rf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function yX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Pf=class{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(Mf(t,a)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(cu(t,r)):s.trackChildChange(Rf(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(gt,(i,o)=>{t.hasChild(i)||r.trackChildChange(Mf(i,o))}),t.isLeafNode()||t.forEachChild(gt,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Rf(i,o,s))}else r.trackChildChange(cu(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var cy=class n{constructor(e){this.indexedFilter_=new Pf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Me(t,r))||(r=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=be.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(be.EMPTY_NODE);let o=this;return t.forEachChild(gt,(s,a)=>{o.matches(new Me(s,a))||(i=i.updateImmediateChild(s,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var mA=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new cy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Me(t,r))||(r=be.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=be.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(be.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){let h=this.index_.getCompare();s=(p,m)=>h(m,p)}else s=this.index_.getCompare();let a=e;q(a.numChildren()===this.limit_,"");let c=new Me(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(t)){let h=a.getImmediateChild(t),p=i.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===t||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);let m=p==null?1:s(p,c);if(d&&!r.isEmpty()&&m>=0)return o?.trackChildChange(Rf(t,r,h)),a.updateImmediateChild(t,r);{o?.trackChildChange(Mf(t,h));let N=a.updateImmediateChild(t,be.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o?.trackChildChange(cu(p.name,p.node)),N.updateImmediateChild(p.name,p.node)):N}}else return r.isEmpty()?e:d&&s(u,c)>=0?(o!=null&&(o.trackChildChange(Mf(u.name,u.node)),o.trackChildChange(cu(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,be.EMPTY_NODE)):e}};var vA=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:iu}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ic}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function EX(n){return n.loadsAllData()?new Pf(n.getIndex()):n.hasLimit()?new mA(n):new cy(n)}function XU(n){let e={};if(n.isDefault())return e;let t;if(n.index_===gt?t="$priority":n.index_===_X?t="$value":n.index_===nu?t="$key":(q(n.index_ instanceof pA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ht(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Ht(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Ht(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Ht(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Ht(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function JU(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==gt&&(e.i=n.index_.toString()),e}var _A=class n extends ry{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ff("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=XU(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(o,h,!1,r),Ta(this.listens_,s)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",i(p,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=XU(e._queryParams),r=e._path.toString(),i=new wn;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Da(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ul(a.responseText)}catch{Xn("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xn("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var yA=class{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function ly(){return{value:null,children:new Map}}function fu(n,e,t){if(xe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Se(e);n.children.has(r)||n.children.set(r,ly());let i=n.children.get(r);e=st(e),fu(i,e,t)}}function EA(n,e){if(xe(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(gt,(r,i)=>{fu(n,new We(r),i)}),EA(n,e)}}else if(n.children.size>0){let t=Se(e);return e=st(e),n.children.has(t)&&EA(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function wA(n,e,t){n.value!==null?t(e,n.value):wX(n,(r,i)=>{let o=new We(e.toString()+"/"+r);wA(i,o,t)})}function wX(n,e){n.children.forEach((t,r)=>{e(r,t)})}var IA=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Tn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var ej=10*1e3,IX=30*1e3,bX=300*1e3,bA=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new IA(e);let r=ej+(IX-ej)*Math.random();Cf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Tn(e,(i,o)=>{o>0&&ei(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Cf(this.reportStats_.bind(this),Math.floor(Math.random()*2*bX))}};var Bi=(function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n})(Bi||{});function $j(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ex(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var CA=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Bi.ACK_USER_WRITE,this.source=$j()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new We(e));return new n(ze(),t,this.revert)}}else return q(Se(this.path)===e,"operationForChild called for unrelated child."),new n(st(this.path),this.affectedTree,this.revert)}};var uy=class n{constructor(e,t){this.source=e,this.path=t,this.type=Bi.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new n(this.source,ze()):new n(this.source,st(this.path))}};var lu=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Bi.OVERWRITE}operationForChild(e){return xe(this.path)?new n(this.source,ze(),this.snap.getImmediateChild(e)):new n(this.source,st(this.path),this.snap)}};var dy=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Bi.MERGE}operationForChild(e){if(xe(this.path)){let t=this.children.subtree(new We(e));return t.isEmpty()?null:t.value?new lu(this.source,ze(),t.value):new n(this.source,ze(),t)}else return q(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Po=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;let t=Se(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var TA=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function CX(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(yX(s.childName,s.snapshotNode))}),If(n,i,"child_removed",e,r,t),If(n,i,"child_added",e,r,t),If(n,i,"child_moved",o,r,t),If(n,i,"child_changed",e,r,t),If(n,i,"value",e,r,t),i}function If(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>DX(n,a,c)),s.forEach(a=>{let c=TX(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function TX(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function DX(n,e,t){if(e.childName==null||t.childName==null)throw Ca("Should only compare child_ events.");let r=new Me(e.childName,e.snapshotNode),i=new Me(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Sy(n,e){return{eventCache:n,serverCache:e}}function Df(n,e,t,r){return Sy(new Po(e,t,r),n.serverCache)}function Hj(n,e,t,r){return Sy(n.eventCache,new Po(e,t,r))}function DA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function oc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var WS,SX=()=>(WS||(WS=new Lr(SZ)),WS),Jn=class n{static fromObject(e){let t=new n(null);return Tn(e,(r,i)=>{t=t.set(new We(r),i)}),t}constructor(e,t=SX()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ze(),value:this.value};if(xe(e))return null;{let r=Se(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(st(e),t);return o!=null?{path:Mt(new We(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{let t=Se(e),r=this.children.get(t);return r!==null?r.subtree(st(e)):new n(null)}}set(e,t){if(xe(e))return new n(t,this.children);{let r=Se(e),o=(this.children.get(r)||new n(null)).set(st(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(xe(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Se(e),r=this.children.get(t);if(r){let i=r.remove(st(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(xe(e))return this.value;{let t=Se(e),r=this.children.get(t);return r?r.get(st(e)):null}}setTree(e,t){if(xe(e))return t;{let r=Se(e),o=(this.children.get(r)||new n(null)).setTree(st(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(ze(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Mt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ze(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(xe(e))return null;{let o=Se(e),s=this.children.get(o);return s?s.findOnPath_(st(e),Mt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ze(),t)}foreachOnPath_(e,t,r){if(xe(e))return this;{this.value&&r(t,this.value);let i=Se(e),o=this.children.get(i);return o?o.foreachOnPath_(st(e),Mt(t,i),r):new n(null)}}foreach(e){this.foreach_(ze(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Mt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var si=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Jn(null))}};function Sf(n,e,t){if(xe(e))return new si(new Jn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Zn(i,e);return o=o.updateChild(s,t),new si(n.writeTree_.set(i,o))}else{let i=new Jn(t),o=n.writeTree_.setTree(e,i);return new si(o)}}}function tj(n,e,t){let r=n;return Tn(t,(i,o)=>{r=Sf(r,Mt(e,i),o)}),r}function nj(n,e){if(xe(e))return si.empty();{let t=n.writeTree_.setTree(e,new Jn(null));return new si(t)}}function SA(n,e){return ac(n,e)!=null}function ac(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Zn(t.path,e)):null}function rj(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(gt,(r,i)=>{e.push(new Me(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Me(r,i.value))}),e}function Us(n,e){if(xe(e))return n;{let t=ac(n,e);return t!=null?new si(new Jn(t)):new si(n.writeTree_.subtree(e))}}function AA(n){return n.writeTree_.isEmpty()}function uu(n,e){return qj(ze(),n.writeTree_,e)}function qj(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=qj(Mt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Mt(n,".priority"),r)),t}}function nx(n,e){return Kj(e,n)}function AX(n,e,t,r,i){q(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sf(n.visibleWrites,e,t)),n.lastWriteId=r}function xX(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function MX(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);q(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&RX(a,r.path)?i=!1:Fr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return PX(n),!0;if(r.snap)n.visibleWrites=nj(n.visibleWrites,r.path);else{let a=r.children;Tn(a,c=>{n.visibleWrites=nj(n.visibleWrites,Mt(r.path,c))})}return!0}else return!1}function RX(n,e){if(n.snap)return Fr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Fr(Mt(n.path,t),e))return!0;return!1}function PX(n){n.visibleWrites=zj(n.allWrites,NX,ze()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function NX(n){return n.visible}function zj(n,e,t){let r=si.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Fr(t,s)?(a=Zn(t,s),r=Sf(r,a,o.snap)):Fr(s,t)&&(a=Zn(s,t),r=Sf(r,ze(),o.snap.getChild(a)));else if(o.children){if(Fr(t,s))a=Zn(t,s),r=tj(r,a,o.children);else if(Fr(s,t))if(a=Zn(s,t),xe(a))r=tj(r,ze(),o.children);else{let c=Ta(o.children,Se(a));if(c){let u=c.getChild(st(a));r=Sf(r,ze(),u)}}}else throw Ca("WriteRecord should have .snap or .children")}}return r}function Wj(n,e,t,r,i){if(!r&&!i){let o=ac(n.visibleWrites,e);if(o!=null)return o;{let s=Us(n.visibleWrites,e);if(AA(s))return t;if(t==null&&!SA(s,ze()))return null;{let a=t||be.EMPTY_NODE;return uu(s,a)}}}else{let o=Us(n.visibleWrites,e);if(!i&&AA(o))return t;if(!i&&t==null&&!SA(o,ze()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Fr(u.path,e)||Fr(e,u.path))},a=zj(n.allWrites,s,e),c=t||be.EMPTY_NODE;return uu(a,c)}}}function kX(n,e,t){let r=be.EMPTY_NODE,i=ac(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(gt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Us(n.visibleWrites,e);return t.forEachChild(gt,(s,a)=>{let c=uu(Us(o,new We(s)),a);r=r.updateImmediateChild(s,c)}),rj(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Us(n.visibleWrites,e);return rj(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function OX(n,e,t,r,i){q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Mt(e,t);if(SA(n.visibleWrites,o))return null;{let s=Us(n.visibleWrites,o);return AA(s)?i.getChild(t):uu(s,i.getChild(t))}}function FX(n,e,t,r){let i=Mt(e,t),o=ac(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Us(n.visibleWrites,i);return uu(s,r.getNode().getImmediateChild(t))}else return null}function LX(n,e){return ac(n.visibleWrites,e)}function VX(n,e,t,r,i,o,s){let a,c=Us(n.visibleWrites,e),u=ac(c,ze());if(u!=null)a=u;else if(t!=null)a=uu(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],h=s.getCompare(),p=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),m=p.getNext();for(;m&&d.length<i;)h(m,r)!==0&&d.push(m),m=p.getNext();return d}else return[]}function UX(){return{visibleWrites:si.empty(),allWrites:[],lastWriteId:-1}}function hy(n,e,t,r){return Wj(n.writeTree,n.treePath,e,t,r)}function rx(n,e){return kX(n.writeTree,n.treePath,e)}function ij(n,e,t,r){return OX(n.writeTree,n.treePath,e,t,r)}function fy(n,e){return LX(n.writeTree,Mt(n.treePath,e))}function jX(n,e,t,r,i,o){return VX(n.writeTree,n.treePath,e,t,r,i,o)}function ix(n,e,t){return FX(n.writeTree,n.treePath,e,t)}function Gj(n,e){return Kj(Mt(n.treePath,e),n.writeTree)}function Kj(n,e){return{treePath:n,writeTree:e}}var xA=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Rf(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Mf(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,cu(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Rf(r,e.snapshotNode,i.oldSnap));else throw Ca("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var MA=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Qj=new MA,Nf=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Po(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ix(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:oc(this.viewCache_),o=jX(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function BX(n){return{filter:n}}function $X(n,e){q(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function HX(n,e,t,r,i){let o=new xA,s,a;if(t.type===Bi.OVERWRITE){let u=t;u.source.fromUser?s=RA(n,e,u.path,u.snap,r,i,o):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!xe(u.path),s=py(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Bi.MERGE){let u=t;u.source.fromUser?s=zX(n,e,u.path,u.children,r,i,o):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=PA(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Bi.ACK_USER_WRITE){let u=t;u.revert?s=KX(n,e,u.path,r,i,o):s=WX(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===Bi.LISTEN_COMPLETE)s=GX(n,e,t.path,r,o);else throw Ca("Unknown operation type: "+t.type);let c=o.getChanges();return qX(e,s,c),{viewCache:s,changes:c}}function qX(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=DA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(Bj(DA(e)))}}function Yj(n,e,t,r,i,o){let s=e.eventCache;if(fy(r,t)!=null)return e;{let a,c;if(xe(t))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=oc(e),d=u instanceof be?u:be.EMPTY_NODE,h=rx(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{let u=hy(r,oc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=Se(t);if(u===".priority"){q(js(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let h=ij(r,t,d,c);h!=null?a=n.filter.updatePriority(d,h):a=s.getNode()}else{let d=st(t),h;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let p=ij(r,t,s.getNode(),c);p!=null?h=s.getNode().getImmediateChild(u).updateChild(d,p):h=s.getNode().getImmediateChild(u)}else h=ix(r,u,e.serverCache);h!=null?a=n.filter.updateChild(s.getNode(),u,h,d,i,o):a=s.getNode()}}return Df(e,a,s.isFullyInitialized()||xe(t),n.filter.filtersNodes())}}function py(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(xe(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),m,null)}else{let m=Se(t);if(!c.isCompleteForPath(t)&&js(t)>1)return e;let b=st(t),k=c.getNode().getImmediateChild(m).updateChild(b,r);m===".priority"?u=d.updatePriority(c.getNode(),k):u=d.updateChild(c.getNode(),m,k,b,Qj,null)}let h=Hj(e,u,c.isFullyInitialized()||xe(t),d.filtersNodes()),p=new Nf(i,h,o);return Yj(n,h,t,i,p,a)}function RA(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new Nf(i,e,o);if(xe(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Df(e,u,!0,n.filter.filtersNodes());else{let h=Se(t);if(h===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Df(e,u,a.isFullyInitialized(),a.isFiltered());else{let p=st(t),m=a.getNode().getImmediateChild(h),b;if(xe(p))b=r;else{let N=d.getCompleteChild(h);N!=null?YA(p)===".priority"&&N.getChild(Oj(p)).isEmpty()?b=N:b=N.updateChild(p,r):b=be.EMPTY_NODE}if(m.equals(b))c=e;else{let N=n.filter.updateChild(a.getNode(),h,b,p,d,s);c=Df(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function oj(n,e){return n.eventCache.isCompleteForChild(e)}function zX(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Mt(t,c);oj(e,Se(d))&&(a=RA(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Mt(t,c);oj(e,Se(d))||(a=RA(n,a,d,u,i,o,s))}),a}function sj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function PA(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;xe(t)?u=r:u=new Jn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((h,p)=>{if(d.hasChild(h)){let m=e.serverCache.getNode().getImmediateChild(h),b=sj(n,m,p);c=py(n,c,new We(h),b,i,o,s,a)}}),u.children.inorderTraversal((h,p)=>{let m=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!d.hasChild(h)&&!m){let b=e.serverCache.getNode().getImmediateChild(h),N=sj(n,b,p);c=py(n,c,new We(h),N,i,o,s,a)}}),c}function WX(n,e,t,r,i,o,s){if(fy(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(xe(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return py(n,e,t,c.getNode().getChild(t),i,o,a,s);if(xe(t)){let u=new Jn(null);return c.getNode().forEachChild(nu,(d,h)=>{u=u.set(new We(d),h)}),PA(n,e,t,u,i,o,a,s)}else return e}else{let u=new Jn(null);return r.foreach((d,h)=>{let p=Mt(t,d);c.isCompleteForPath(p)&&(u=u.set(d,c.getNode().getChild(p)))}),PA(n,e,t,u,i,o,a,s)}}function GX(n,e,t,r,i){let o=e.serverCache,s=Hj(e,o.getNode(),o.isFullyInitialized()||xe(t),o.isFiltered());return Yj(n,s,t,r,Qj,i)}function KX(n,e,t,r,i,o){let s;if(fy(r,t)!=null)return e;{let a=new Nf(r,e,i),c=e.eventCache.getNode(),u;if(xe(t)||Se(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=hy(r,oc(e));else{let h=e.serverCache.getNode();q(h instanceof be,"serverChildren would be complete if leaf node"),d=rx(r,h)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=Se(t),h=ix(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=n.filter.updateChild(c,d,h,st(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,be.EMPTY_NODE,st(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=hy(r,oc(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||fy(r,ze())!=null,Df(e,u,s,n.filter.filtersNodes())}}var NA=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Pf(r.getIndex()),o=EX(r);this.processor_=BX(o);let s=t.serverCache,a=t.eventCache,c=i.updateFullNode(be.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(be.EMPTY_NODE,a.getNode(),null),d=new Po(c,s.isFullyInitialized(),i.filtersNodes()),h=new Po(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Sy(h,d),this.eventGenerator_=new TA(this.query_)}get query(){return this.query_}};function QX(n){return n.viewCache_.serverCache.getNode()}function YX(n,e){let t=oc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!xe(e)&&!t.getImmediateChild(Se(e)).isEmpty())?t.getChild(e):null}function aj(n){return n.eventRegistrations_.length===0}function ZX(n,e){n.eventRegistrations_.push(e)}function cj(n,e,t){let r=[];if(t){q(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function lj(n,e,t,r){e.type===Bi.MERGE&&e.source.queryId!==null&&(q(oc(n.viewCache_),"We should always have a full cache before handling merges"),q(DA(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=HX(n.processor_,i,e,t,r);return $X(n.processor_,o.viewCache),q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Zj(n,o.changes,o.viewCache.eventCache.getNode(),null)}function XX(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(gt,(o,s)=>{r.push(cu(o,s))}),t.isFullyInitialized()&&r.push(Bj(t.getNode())),Zj(n,r,t.getNode(),e)}function Zj(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return CX(n.eventGenerator_,e,t,i)}var gy,kA=class{constructor(){this.views=new Map}};function JX(n){q(!gy,"__referenceConstructor has already been defined"),gy=n}function eJ(){return q(gy,"Reference.ts has not been loaded"),gy}function tJ(n){return n.views.size===0}function ox(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return q(o!=null,"SyncTree gave us an op for an invalid query."),lj(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(lj(s,e,t,r));return o}}function nJ(n,e,t,r,i){let o=e._queryIdentifier,s=n.views.get(o);if(!s){let a=hy(t,i?r:null),c=!1;a?c=!0:r instanceof be?(a=rx(t,r),c=!1):(a=be.EMPTY_NODE,c=!1);let u=Sy(new Po(a,c,!1),new Po(r,i,!1));return new NA(e,u)}return s}function rJ(n,e,t,r,i,o){let s=nJ(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),ZX(s,t),XX(s,t)}function iJ(n,e,t,r){let i=e._queryIdentifier,o=[],s=[],a=Bs(n);if(i==="default")for(let[c,u]of n.views.entries())s=s.concat(cj(u,t,r)),aj(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{let c=n.views.get(i);c&&(s=s.concat(cj(c,t,r)),aj(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Bs(n)&&o.push(new(eJ())(e._repo,e._path)),{removed:o,events:s}}function Xj(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ru(n,e){let t=null;for(let r of n.views.values())t=t||YX(r,e);return t}function Jj(n,e){if(e._queryParams.loadsAllData())return Ay(n);{let r=e._queryIdentifier;return n.views.get(r)}}function eB(n,e){return Jj(n,e)!=null}function Bs(n){return Ay(n)!=null}function Ay(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var my;function oJ(n){q(!my,"__referenceConstructor has already been defined"),my=n}function sJ(){return q(my,"Reference.ts has not been loaded"),my}var aJ=1,vy=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=UX(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function tB(n,e,t,r,i){return AX(n.pendingWriteTree_,e,t,r,i),i?Vf(n,new lu($j(),e,t)):[]}function nc(n,e,t=!1){let r=xX(n.pendingWriteTree_,e);if(MX(n.pendingWriteTree_,e)){let o=new Jn(null);return r.snap!=null?o=o.set(ze(),!0):Tn(r.children,s=>{o=o.set(new We(s),!0)}),Vf(n,new CA(r.path,o,t))}else return[]}function xy(n,e,t){return Vf(n,new lu(ex(),e,t))}function cJ(n,e,t){let r=Jn.fromObject(t);return Vf(n,new dy(ex(),e,r))}function lJ(n,e){return Vf(n,new uy(ex(),e))}function uJ(n,e,t){let r=ax(n,t);if(r){let i=cx(r),o=i.path,s=i.queryId,a=Zn(o,e),c=new uy(tx(s),a);return lx(n,o,c)}else return[]}function OA(n,e,t,r,i=!1){let o=e._path,s=n.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||eB(s,e))){let c=iJ(s,e,t,r);tJ(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let u=c.removed;if(a=c.events,!i){let d=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(o,(p,m)=>Bs(m));if(d&&!h){let p=n.syncPointTree_.subtree(o);if(!p.isEmpty()){let m=fJ(p);for(let b=0;b<m.length;++b){let N=m[b],k=N.query,B=iB(n,N);n.listenProvider_.startListening(Af(k),_y(n,k),B.hashFn,B.onComplete)}}}!h&&u.length>0&&!r&&(d?n.listenProvider_.stopListening(Af(e),null):u.forEach(p=>{let m=n.queryToTagMap.get(My(p));n.listenProvider_.stopListening(Af(p),m)}))}pJ(n,u)}return a}function dJ(n,e,t,r){let i=ax(n,r);if(i!=null){let o=cx(i),s=o.path,a=o.queryId,c=Zn(s,e),u=new lu(tx(a),c,t);return lx(n,s,u)}else return[]}function hJ(n,e,t,r){let i=ax(n,r);if(i){let o=cx(i),s=o.path,a=o.queryId,c=Zn(s,e),u=Jn.fromObject(t),d=new dy(tx(a),c,u);return lx(n,s,d)}else return[]}function uj(n,e,t,r=!1){let i=e._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(p,m)=>{let b=Zn(p,i);o=o||ru(m,b),s=s||Bs(m)});let a=n.syncPointTree_.get(i);a?(s=s||Bs(a),o=o||ru(a,ze())):(a=new kA,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=be.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((m,b)=>{let N=ru(b,ze());N&&(o=o.updateImmediateChild(m,N))}));let u=eB(a,e);if(!u&&!e._queryParams.loadsAllData()){let p=My(e);q(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");let m=gJ();n.queryToTagMap.set(p,m),n.tagToQueryMap.set(m,p)}let d=nx(n.pendingWriteTree_,i),h=rJ(a,e,t,d,o,c);if(!u&&!s&&!r){let p=Jj(a,e);h=h.concat(mJ(n,e,p))}return h}function sx(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=Zn(s,e),u=ru(a,c);if(u)return u});return Wj(i,e,o,t,!0)}function Vf(n,e){return nB(e,n.syncPointTree_,null,nx(n.pendingWriteTree_,ze()))}function nB(n,e,t,r){if(xe(n.path))return rB(n,e,t,r);{let i=e.get(ze());t==null&&i!=null&&(t=ru(i,ze()));let o=[],s=Se(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=Gj(r,s);o=o.concat(nB(a,c,u,d))}return i&&(o=o.concat(ox(i,n,r,t))),o}}function rB(n,e,t,r){let i=e.get(ze());t==null&&i!=null&&(t=ru(i,ze()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=Gj(r,s),d=n.operationForChild(s);d&&(o=o.concat(rB(d,a,c,u)))}),i&&(o=o.concat(ox(i,n,r,t))),o}function iB(n,e){let t=e.query,r=_y(n,t);return{hashFn:()=>(QX(e)||be.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?uJ(n,t._path,r):lJ(n,t._path);{let o=MZ(i,t);return OA(n,t,null,o)}}}}function _y(n,e){let t=My(e);return n.queryToTagMap.get(t)}function My(n){return n._path.toString()+"$"+n._queryIdentifier}function ax(n,e){return n.tagToQueryMap.get(e)}function cx(n){let e=n.indexOf("$");return q(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new We(n.substr(0,e))}}function lx(n,e,t){let r=n.syncPointTree_.get(e);q(r,"Missing sync point for query tag that we're tracking");let i=nx(n.pendingWriteTree_,e);return ox(r,t,i,null)}function fJ(n){return n.fold((e,t,r)=>{if(t&&Bs(t))return[Ay(t)];{let i=[];return t&&(i=Xj(t)),Tn(r,(o,s)=>{i=i.concat(s)}),i}})}function Af(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(sJ())(n._repo,n._path):n}function pJ(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=My(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function gJ(){return aJ++}function mJ(n,e,t){let r=e._path,i=_y(n,e),o=iB(n,t),s=n.listenProvider_.startListening(Af(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)q(!Bs(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((u,d,h)=>{if(!xe(u)&&d&&Bs(d))return[Ay(d).query];{let p=[];return d&&(p=p.concat(Xj(d).map(m=>m.query))),Tn(h,(m,b)=>{p=p.concat(b)}),p}});for(let u=0;u<c.length;++u){let d=c[u];n.listenProvider_.stopListening(Af(d),_y(n,d))}}return s}var FA=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},LA=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Mt(this.path_,e);return new n(this.syncTree_,t)}node(){return sx(this.syncTree_,this.path_)}},vJ=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},dj=function(n,e,t){if(!n||typeof n!="object")return n;if(q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return _J(n[".sv"],e,t);if(typeof n[".sv"]=="object")return yJ(n[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},_J=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:q(!1,"Unexpected server value: "+n)}},yJ=function(n,e,t){n.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&q(!1,"Unexpected increment value: "+r);let i=e.node();if(q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},EJ=function(n,e,t,r){return ux(e,new LA(t,n),r)},oB=function(n,e,t){return ux(n,new FA(e),t)};function ux(n,e,t){let r=n.getPriority().val(),i=dj(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=dj(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new su(a,Bt(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new su(i))),s.forEachChild(gt,(a,c)=>{let u=ux(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var kf=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function dx(n,e){let t=e instanceof We?e:new We(e),r=n,i=Se(t);for(;i!==null;){let o=Ta(r.node.children,i)||{children:{},childCount:0};r=new kf(i,r,o),t=st(t),i=Se(t)}return r}function pu(n){return n.node.value}function sB(n,e){n.node.value=e,VA(n)}function aB(n){return n.node.childCount>0}function wJ(n){return pu(n)===void 0&&!aB(n)}function Ry(n,e){Tn(n.node.children,(t,r)=>{e(new kf(t,n,r))})}function cB(n,e,t,r){t&&!r&&e(n),Ry(n,i=>{cB(i,e,!0,r)}),t&&r&&e(n)}function IJ(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Uf(n){return new We(n.parent===null?n.name:Uf(n.parent)+"/"+n.name)}function VA(n){n.parent!==null&&bJ(n.parent,n.name,n)}function bJ(n,e,t){let r=wJ(t),i=ei(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,VA(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,VA(n))}var CJ=/[\[\].#$\/\u0000-\u001F\u007F]/,TJ=/[\[\].#$\u0000-\u001F\u007F]/,GS=10*1024*1024,hx=function(n){return typeof n=="string"&&n.length!==0&&!CJ.test(n)},lB=function(n){return typeof n=="string"&&n.length!==0&&!TJ.test(n)},DJ=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lB(n)},uB=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Dy(n)||n&&typeof n=="object"&&ei(n,".sv")},UA=function(n,e,t,r){r&&e===void 0||Py(Sa(n,"value"),e,t)},Py=function(n,e,t){let r=t instanceof We?new aA(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ec(r));if(typeof e=="function")throw new Error(n+"contains a function "+ec(r)+" with contents = "+e.toString());if(Dy(e))throw new Error(n+"contains "+e.toString()+" "+ec(r));if(typeof e=="string"&&e.length>GS/3&&dh(e)>GS)throw new Error(n+"contains a string greater than "+GS+" utf8 bytes "+ec(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Tn(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!hx(s)))throw new Error(n+" contains an invalid key ("+s+") "+ec(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sX(r,s),Py(n,a,r),aX(r)}),i&&o)throw new Error(n+' contains ".value" child '+ec(r)+" in addition to actual children.")}},SJ=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let o=xf(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!hx(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(oX);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Fr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},AJ=function(n,e,t,r){if(r&&e===void 0)return;let i=Sa(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Tn(e,(s,a)=>{let c=new We(s);if(Py(i,a,Mt(t,c)),YA(c)===".priority"&&!uB(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),SJ(i,o)},xJ=function(n,e,t){if(!(t&&e===void 0)){if(Dy(e))throw new Error(Sa(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!uB(e))throw new Error(Sa(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}};var dB=function(n,e,t,r){if(!(r&&t===void 0)&&!lB(t))throw new Error(Sa(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},MJ=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dB(n,e,t,r)},bf=function(n,e){if(Se(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},RJ=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!DJ(t))throw new Error(Sa(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var jA=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function fx(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!ZA(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function hB(n,e,t){fx(n,t),fB(n,r=>ZA(r,e))}function No(n,e,t){fx(n,t),fB(n,r=>Fr(r,e)||Fr(e,r))}function fB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(PJ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function PJ(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();rc&&on("event: "+t.toString()),hu(r)}}}var NJ="repo_interrupt",kJ=25,BA=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ly(),this.transactionQueueTree_=new kf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function OJ(n,e,t){if(n.stats_=QA(n.repoInfo_),n.forceRestClient_||kZ())n.server_=new _A(n.repoInfo_,(r,i,o,s)=>{hj(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fj(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ht(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new XA(n.repoInfo_,e,(r,i,o,s)=>{hj(n,r,i,o,s)},r=>{fj(n,r)},r=>{LJ(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=FZ(n.repoInfo_,()=>new bA(n.stats_,n.server_)),n.infoData_=new yA,n.infoSyncTree_=new vy({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=xy(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),gx(n,"connected",!1),n.serverSyncTree_=new vy({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);No(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function FJ(n){let t=n.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function px(n){return vJ({timestamp:FJ(n)})}function hj(n,e,t,r,i){n.dataUpdateCount++;let o=new We(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=uh(t,u=>Bt(u));s=hJ(n.serverSyncTree_,o,c,i)}else{let c=Bt(t);s=dJ(n.serverSyncTree_,o,c,i)}else if(r){let c=uh(t,u=>Bt(u));s=cJ(n.serverSyncTree_,o,c)}else{let c=Bt(t);s=xy(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Ny(n,o)),No(n.eventQueue_,a,s)}function fj(n,e){gx(n,"connected",e),e===!1&&UJ(n)}function LJ(n,e){Tn(e,(t,r)=>{gx(n,t,r)})}function gx(n,e,t){let r=new We("/.info/"+e),i=Bt(t);n.infoData_.updateSnapshot(r,i);let o=xy(n.infoSyncTree_,r,i);No(n.eventQueue_,r,o)}function pB(n){return n.nextWriteId_++}function VJ(n,e,t,r,i){mx(n,"set",{path:e.toString(),value:t,priority:r});let o=px(n),s=Bt(t,r),a=sx(n.serverSyncTree_,e),c=oB(s,a,o),u=pB(n),d=tB(n.serverSyncTree_,e,c,u,!0);fx(n.eventQueue_,d),n.server_.put(e.toString(),s.val(!0),(p,m)=>{let b=p==="ok";b||Xn("set at "+e+" failed: "+p);let N=nc(n.serverSyncTree_,u,!b);No(n.eventQueue_,e,N),du(n,i,p,m)});let h=yB(n,e);Ny(n,h),No(n.eventQueue_,h,[])}function UJ(n){mx(n,"onDisconnectEvents");let e=px(n),t=ly();wA(n.onDisconnect_,ze(),(i,o)=>{let s=EJ(i,o,n.serverSyncTree_,e);fu(t,i,s)});let r=[];wA(t,ze(),(i,o)=>{r=r.concat(xy(n.serverSyncTree_,i,o));let s=yB(n,i);Ny(n,s)}),n.onDisconnect_=ly(),No(n.eventQueue_,ze(),r)}function jJ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&EA(n.onDisconnect_,e),du(n,t,r,i)})}function pj(n,e,t,r){let i=Bt(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&fu(n.onDisconnect_,e,i),du(n,r,o,s)})}function BJ(n,e,t,r,i){let o=Bt(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&fu(n.onDisconnect_,e,o),du(n,i,s,a)})}function $J(n,e,t,r){if(pl(t)){on("onDisconnect().update() called with empty data.  Don't do anything."),du(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{i==="ok"&&Tn(t,(s,a)=>{let c=Bt(a);fu(n.onDisconnect_,Mt(e,s),c)}),du(n,r,i,o)})}function HJ(n,e,t){let r;Se(e._path)===".info"?r=uj(n.infoSyncTree_,e,t):r=uj(n.serverSyncTree_,e,t),hB(n.eventQueue_,e._path,r)}function $A(n,e,t){let r;Se(e._path)===".info"?r=OA(n.infoSyncTree_,e,t):r=OA(n.serverSyncTree_,e,t),hB(n.eventQueue_,e._path,r)}function qJ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(NJ)}function mx(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),on(t,...e)}function du(n,e,t,r){e&&hu(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function gB(n,e,t){return sx(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function vx(n,e=n.transactionQueueTree_){if(e||ky(n,e),pu(e)){let t=vB(n,e);q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&zJ(n,Uf(e),t)}else aB(e)&&Ry(e,t=>{vx(n,t)})}function zJ(n,e,t){let r=t.map(u=>u.currentWriteId),i=gB(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let h=Zn(e,d.path);o=o.updateChild(h,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{mx(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let h=[];for(let p=0;p<t.length;p++)t[p].status=2,d=d.concat(nc(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&h.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();ky(n,dx(n.transactionQueueTree_,e)),vx(n,n.transactionQueueTree_),No(n.eventQueue_,e,d);for(let p=0;p<h.length;p++)hu(h[p])}else{if(u==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Xn("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=u}Ny(n,e)}},s)}function Ny(n,e){let t=mB(n,e),r=Uf(t),i=vB(n,t);return WJ(n,i,r),r}function WJ(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=Zn(t,c.path),d=!1,h;if(q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,i=i.concat(nc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=kJ)d=!0,h="maxretry",i=i.concat(nc(n.serverSyncTree_,c.currentWriteId,!0));else{let p=gB(n,c.path,s);c.currentInputSnapshot=p;let m=e[a].update(p.val());if(m!==void 0){Py("transaction failed: Data returned ",m,c.path);let b=Bt(m);typeof m=="object"&&m!=null&&ei(m,".priority")||(b=b.updatePriority(p.getPriority()));let k=c.currentWriteId,B=px(n),te=oB(b,p,B);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=te,c.currentWriteId=pB(n),s.splice(s.indexOf(k),1),i=i.concat(tB(n.serverSyncTree_,c.path,te,c.currentWriteId,c.applyLocally)),i=i.concat(nc(n.serverSyncTree_,k,!0))}else d=!0,h="nodata",i=i.concat(nc(n.serverSyncTree_,c.currentWriteId,!0))}No(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,(function(p){setTimeout(p,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}ky(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)hu(r[a]);vx(n,n.transactionQueueTree_)}function mB(n,e){let t,r=n.transactionQueueTree_;for(t=Se(e);t!==null&&pu(r)===void 0;)r=dx(r,t),e=st(e),t=Se(e);return r}function vB(n,e){let t=[];return _B(n,e,t),t.sort((r,i)=>r.order-i.order),t}function _B(n,e,t){let r=pu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ry(e,i=>{_B(n,i,t)})}function ky(n,e){let t=pu(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,sB(e,t.length>0?t:void 0)}Ry(e,r=>{ky(n,r)})}function yB(n,e){let t=Uf(mB(n,e)),r=dx(n.transactionQueueTree_,e);return IJ(r,i=>{KS(n,i)}),KS(n,r),cB(r,i=>{KS(n,i)}),t}function KS(n,e){let t=pu(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(q(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(q(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(nc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?sB(e,void 0):t.length=o+1,No(n.eventQueue_,Uf(e),i);for(let s=0;s<r.length;s++)hu(r[s])}}function GJ(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function KJ(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xn(`Invalid query segment '${t}' in query '${n}'`)}return e}var gj=function(n,e){let t=QJ(n),r=t.namespace;t.domain==="firebase.com"&&Ro(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ro("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||TZ();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ty(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new We(t.pathString)}},QJ=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(i=GJ(n.substring(d,h)));let p=KJ(n.substring(Math.min(n.length,h)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let m=e.slice(0,u);if(m.toLowerCase()==="localhost")t="localhost";else if(m.split(".").length<=2)t=m;else{let b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var yy=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ht(this.snapshot.exportVal())}},Ey=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var wy=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var HA=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new wn;return jJ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){bf("OnDisconnect.remove",this._path);let e=new wn;return pj(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){bf("OnDisconnect.set",this._path),UA("OnDisconnect.set",e,this._path,!1);let t=new wn;return pj(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){bf("OnDisconnect.setWithPriority",this._path),UA("OnDisconnect.setWithPriority",e,this._path,!1),xJ("OnDisconnect.setWithPriority",t,!1);let r=new wn;return BJ(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){bf("OnDisconnect.update",this._path),AJ("OnDisconnect.update",e,this._path,!1);let t=new wn;return $J(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var qA=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return xe(this._path)?null:YA(this._path)}get ref(){return new ko(this._repo,this._path)}get _queryIdentifier(){let e=JU(this._queryParams),t=KA(e);return t==="{}"?"default":t}get _queryObject(){return JU(this._queryParams)}isEqual(e){if(e=Ae(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=ZA(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+iX(this._path)}};var ko=class n extends qA{constructor(e,t){super(e,t,new vA,!1)}get parent(){let e=Oj(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Iy=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new We(e),r=by(this.ref,e);return new n(this._node.getChild(t),r,gt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,by(this.ref,r),gt)))}hasChild(e){let t=new We(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Oy(n,e){return n=Ae(n),n._checkNotDeleted("ref"),e!==void 0?by(n._root,e):n._root}function by(n,e){return n=Ae(n),Se(n._path)===null?MJ("child","path",e,!1):dB("child","path",e,!1),new ko(n._repo,Mt(n._path,e))}function EB(n){return n=Ae(n),new HA(n._repo,n._path)}function jf(n,e){n=Ae(n),bf("set",n._path),UA("set",e,n._path,!1);let t=new wn;return VJ(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}var Cy=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new yy("value",this,new Iy(e.snapshotNode,new ko(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ey(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ty=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ey(this,e,t):null}createEvent(e,t){q(e.childName!=null,"Child events should have a childName.");let r=by(new ko(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yy(e.type,this,new Iy(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function YJ(n,e,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=t,u=(d,h)=>{$A(n._repo,n,a),c(d,h)};u.userCallback=t.userCallback,u.context=t.context,t=u}let s=new wy(t,o||void 0),a=e==="value"?new Cy(s):new Ty(e,s);return HJ(n._repo,n,a),()=>$A(n._repo,n,a)}function _x(n,e,t,r){return YJ(n,"value",e,t,r)}function yx(n,e,t){let r=null,i=t?new wy(t):null;e==="value"?r=new Cy(i):e&&(r=new Ty(e,i)),$A(n._repo,n,r)}JX(ko);oJ(ko);var ZJ="FIREBASE_DATABASE_EMULATOR_HOST",zA={},XJ=!1;function JJ(n,e,t,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=zn(o);n.repoInfo_=new ty(e,s,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function eee(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Ro("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),on("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=gj(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[ZJ]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=gj(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Tf(Tf.OWNER):new eA(n.name,n.options,e);RJ("Invalid Firebase Database URL",s),xe(s.path)||Ro("Database URL must point to the root of a Firebase Database (not including a child path).");let h=nee(a,n,d,new JS(n,t));return new WA(h,n)}function tee(n,e){let t=zA[e];(!t||t[n.key]!==n)&&Ro(`Database ${e}(${n.repoInfo_}) has already been deleted.`),qJ(n),delete t[n.key]}function nee(n,e,t,r){let i=zA[e.name];i||(i={},zA[e.name]=i);let o=i[n.toURLString()];return o&&Ro("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new BA(n,XJ,t,r),i[n.toURLString()]=o,o}var WA=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(OJ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ko(this._repo,ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tee(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ro("Cannot call "+e+" on a deleted database.")}};function wB(n=ti(),e){let t=Si(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=hl("database");r&&ree(t,...r)}return t}function ree(n,e,t,r={}){n=Ae(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Ar(r,o.repoInfo_.emulatorOptions))return;Ro("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ro('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Tf(Tf.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:fl(r.mockUserToken,n.app.options.projectId);s=new Tf(a)}zn(e)&&(gs(e),ms("Database",!0)),JJ(o,i,r,s)}function iee(n){IZ(Mr),Fn(new qt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return eee(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),Xe(FU,LU,n),Xe(FU,LU,"esm2017")}XA.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};XA.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};iee();var xB="firebasestorage.googleapis.com",MB="storageBucket",oee=120*1e3,see=600*1e3,aee=1e3;var mt=class n extends On{constructor(e,t,r=0){super(Ex(e),`Firebase Storage: ${t} (${Ex(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ex(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ft=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(ft||{});function Ex(n){return"storage/"+n}function xx(){let n="An unknown error occurred, please check the error payload for server response.";return new mt(ft.UNKNOWN,n)}function cee(n){return new mt(ft.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function lee(n){return new mt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uee(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(ft.UNAUTHENTICATED,n)}function dee(){return new mt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hee(n){return new mt(ft.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function RB(){return new mt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PB(){return new mt(ft.CANCELED,"User canceled the upload/download.")}function fee(n){return new mt(ft.INVALID_URL,"Invalid URL '"+n+"'.")}function pee(n){return new mt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gee(){return new mt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MB+"' property when initializing the app?")}function NB(){return new mt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mee(){return new mt(ft.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vee(){return new mt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _ee(n){return new mt(ft.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ix(n){return new mt(ft.INVALID_ARGUMENT,n)}function kB(){return new mt(ft.APP_DELETED,"The Firebase app was deleted.")}function yee(n){return new mt(ft.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $f(n,e){return new mt(ft.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bf(n){throw new mt(ft.INTERNAL_ERROR,"Internal error: "+n)}var ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw pee(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(ue){ue.path_=decodeURIComponent(ue.path)}let d="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},N=t===xB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",B=new RegExp(`^https?://${N}/${i}/${k}`,"i"),J=[{regex:a,indices:c,postModify:o},{regex:m,indices:b,postModify:u},{regex:B,indices:{bucket:1,path:2},postModify:u}];for(let ue=0;ue<J.length;ue++){let vt=J[ue],Pe=vt.regex.exec(e);if(Pe){let x=Pe[vt.indices.bucket],C=Pe[vt.indices.path];C||(C=""),r=new n(x,C),vt.postModify(r);break}}if(r==null)throw fee(e);return r}},bx=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Eee(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...k){u||(u=!0,e.apply(null,k))}function h(k){i=setTimeout(()=>{i=null,n(m,c())},k)}function p(){o&&clearTimeout(o)}function m(k,...B){if(u){p();return}if(k){p(),d.call(null,k,...B);return}if(c()||s){p(),d.call(null,k,...B);return}r<64&&(r*=2);let J;a===1?(a=2,J=0):J=(r+Math.random())*1e3,h(J)}let b=!1;function N(k){b||(b=!0,p(),!u&&(i!==null?(k||(a=2),clearTimeout(i),h(0)):k||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,N(!0)},t),N}function wee(n){n(!1)}function Iee(n){return n!==void 0}function bee(n){return typeof n=="function"}function Cee(n){return typeof n=="object"&&!Array.isArray(n)}function Uy(n){return typeof n=="string"||n instanceof String}function IB(n){return Mx()&&n instanceof Blob}function Mx(){return typeof Blob<"u"}function bB(n,e,t,r){if(r<e)throw Ix(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ix(`Invalid value for '${n}'. Expected ${t} or less.`)}function zf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function OB(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var _u=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(_u||{});function FB(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var Cx=class{constructor(e,t,r,i,o,s,a,c,u,d,h,p=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,N)=>{this.resolve_=b,this.reject_=N,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new vu(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===_u.NO_ERROR,c=o.getStatus();if(!a||FB(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===_u.ABORT;r(!1,new vu(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new vu(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Iee(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=xx();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?kB():PB();s(c)}else{let c=RB();s(c)}};this.canceled_?t(!1,new vu(!1,null,!0)):this.backoffId_=Eee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},vu=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Tee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Dee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function See(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Aee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function xee(n,e,t,r,i,o,s=!0,a=!1){let c=OB(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return See(d,e),Tee(d,t),Dee(d,o),Aee(d,r),new Cx(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Mee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ree(...n){let e=Mee();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Mx())return new Blob(n);throw new mt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Pee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Nee(n){if(typeof atob>"u")throw _ee("base-64");return atob(n)}var $i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Hf=class{constructor(e,t){this.data=e,this.contentType=t||null}};function kee(n,e){switch(n){case $i.RAW:return new Hf(LB(e));case $i.BASE64:case $i.BASE64URL:return new Hf(VB(n,e));case $i.DATA_URL:return new Hf(Fee(e),Lee(e))}throw xx()}function LB(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Oee(n){let e;try{e=decodeURIComponent(n)}catch{throw $f($i.DATA_URL,"Malformed data URL.")}return LB(e)}function VB(n,e){switch(n){case $i.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw $f(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $i.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw $f(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Nee(e)}catch(i){throw i.message.includes("polyfill")?i:$f(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Ly=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw $f($i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Vee(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Fee(n){let e=new Ly(n);return e.base64?VB($i.BASE64,e.rest):Oee(e.rest)}function Lee(n){return new Ly(n).contentType}function Vee(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Vy=class n{constructor(e,t){let r=0,i="";IB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IB(this.data_)){let r=this.data_,i=Pee(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Mx()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Ree.apply(null,t))}else{let t=e.map(s=>Uy(s)?kee($i.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function UB(n){let e;try{e=JSON.parse(n)}catch{return null}return Cee(e)?e:null}function Uee(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function jee(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function jB(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Bee(n,e){return e}var sn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Bee}},Fy=null;function $ee(n){return!Uy(n)||n.length<2?n:jB(n)}function BB(){if(Fy)return Fy;let n=[];n.push(new sn("bucket")),n.push(new sn("generation")),n.push(new sn("metageneration")),n.push(new sn("name","fullPath",!0));function e(o,s){return $ee(s)}let t=new sn("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new sn("size");return i.xform=r,n.push(i),n.push(new sn("timeCreated")),n.push(new sn("updated")),n.push(new sn("md5Hash",null,!0)),n.push(new sn("cacheControl",null,!0)),n.push(new sn("contentDisposition",null,!0)),n.push(new sn("contentEncoding",null,!0)),n.push(new sn("contentLanguage",null,!0)),n.push(new sn("contentType",null,!0)),n.push(new sn("metadata","customMetadata",!0)),Fy=n,Fy}function Hee(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new ai(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function qee(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return Hee(r,n),r}function $B(n,e,t){let r=UB(e);return r===null?null:qee(n,r,t)}function zee(n,e,t,r){let i=UB(e);if(i===null||!Uy(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let d=n.bucket,h=n.fullPath,p="/b/"+s(d)+"/o/"+s(h),m=zf(p,t,r),b=OB({alt:"media",token:u});return m+b})[0]}function HB(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var $s=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Oo(n){if(!n)throw xx()}function Rx(n,e){function t(r,i){let o=$B(n,i,e);return Oo(o!==null),o}return t}function Wee(n,e){function t(r,i){let o=$B(n,i,e);return Oo(o!==null),zee(o,i,n.host,n._protocol)}return t}function Wf(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=dee():i=uee():t.getStatus()===402?i=lee(n.bucket):t.getStatus()===403?i=hee(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function qB(n){let e=Wf(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=cee(n.path)),o.serverResponse=i.serverResponse,o}return t}function Gee(n,e,t){let r=e.fullServerUrl(),i=zf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new $s(i,o,Rx(n,t),s);return a.errorHandler=qB(e),a}function Kee(n,e,t){let r=e.fullServerUrl(),i=zf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new $s(i,o,Wee(n,t),s);return a.errorHandler=qB(e),a}function Qee(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function zB(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Qee(null,e)),r}function Yee(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let J="";for(let ue=0;ue<2;ue++)J=J+Math.random().toString().slice(2);return J}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=zB(e,r,i),d=HB(u,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",m=Vy.getBlob(h,r,p);if(m===null)throw NB();let b={name:u.fullPath},N=zf(o,n.host,n._protocol),k="POST",B=n.maxUploadRetryTime,te=new $s(N,k,Rx(n,t),B);return te.urlParams=b,te.headers=s,te.body=m.uploadData(),te.errorHandler=Wf(e),te}var yu=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function Px(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Oo(!1)}return Oo(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Zee(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=zB(e,r,i),a={name:s.fullPath},c=zf(o,n.host,n._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=HB(s,t),p=n.maxUploadRetryTime;function m(N){Px(N);let k;try{k=N.getResponseHeader("X-Goog-Upload-URL")}catch{Oo(!1)}return Oo(Uy(k)),k}let b=new $s(c,u,m,p);return b.urlParams=a,b.headers=d,b.body=h,b.errorHandler=Wf(e),b}function Xee(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(u){let d=Px(u,["active","final"]),h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Oo(!1)}h||Oo(!1);let p=Number(h);return Oo(!isNaN(p)),new yu(p,r.size(),d==="final")}let s="POST",a=n.maxUploadRetryTime,c=new $s(t,s,o,a);return c.headers=i,c.errorHandler=Wf(e),c}var CB=256*1024;function Jee(n,e,t,r,i,o,s,a){let c=new yu(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw mee();let u=c.total-c.current,d=u;i>0&&(d=Math.min(d,i));let h=c.current,p=h+d,m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";let b={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(h,p);if(N===null)throw NB();function k(ue,vt){let Pe=Px(ue,["active","final"]),x=c.current+d,C=r.size(),T;return Pe==="final"?T=Rx(e,o)(ue,vt):T=null,new yu(x,C,Pe==="final",T)}let B="POST",te=e.maxUploadRetryTime,J=new $s(t,B,k,te);return J.headers=b,J.body=N.uploadData(),J.progressCallback=a||null,J.errorHandler=Wf(n),J}var er={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wx(n){switch(n){case"running":case"pausing":case"canceling":return er.RUNNING;case"paused":return er.PAUSED;case"success":return er.SUCCESS;case"canceled":return er.CANCELED;case"error":return er.ERROR;default:return er.ERROR}}var Tx=class{constructor(e,t,r){if(bee(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function gu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var TB=null,Dx=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Bf("cannot .send() more than once");if(zn(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Sx=class extends Dx{initXhr(){this.xhr_.responseType="text"}};function mu(){return TB?TB():new Sx}var Ax=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=BB(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ft.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(FB(i.status,[]))if(o)i=RB();else{this.sleepTime=Math.max(this.sleepTime*2,aee),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ft.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=Zee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=Xee(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,mu,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=CB*this._chunkMultiplier,t=new yu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Jee(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,mu,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){CB*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Gee(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=Yee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=PB(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=wx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new Tx(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(wx(this._state)){case er.SUCCESS:gu(this._resolve.bind(null,this.snapshot))();break;case er.CANCELED:case er.ERROR:let t=this._reject;gu(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wx(this._state)){case er.RUNNING:case er.PAUSED:e.next&&gu(e.next.bind(e,this.snapshot))();break;case er.SUCCESS:e.complete&&gu(e.complete.bind(e))();break;case er.CANCELED:case er.ERROR:e.error&&gu(e.error.bind(e,this._error))();break;default:e.error&&gu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Eu=class n{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jB(this._location.path)}get storage(){return this._service}get parent(){let e=Uee(this._location.path);if(e===null)return null;let t=new ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw yee(e)}};function ete(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ax(n,new Vy(e),t)}function tte(n){n._throwIfRoot("getDownloadURL");let e=Kee(n.storage,n._location,BB());return n.storage.makeRequestWithTokens(e,mu).then(t=>{if(t===null)throw vee();return t})}function nte(n,e){let t=jee(n._location.path,e),r=new ai(n._location.bucket,t);return new Eu(n.storage,r)}function rte(n){return/^[A-Za-z]+:\/\//.test(n)}function ite(n,e){return new Eu(n,e)}function WB(n,e){if(n instanceof qf){let t=n;if(t._bucket==null)throw gee();let r=new Eu(t,t._bucket);return e!=null?WB(r,e):r}else return e!==void 0?nte(n,e):n}function ote(n,e){if(e&&rte(e)){if(n instanceof qf)return ite(n,e);throw Ix("To use ref(service, url), the first argument must be a Storage instance.")}else return WB(n,e)}function DB(n,e){let t=e?.[MB];return t==null?null:ai.makeFromBucketSpec(t,n)}function ste(n,e,t,r={}){n.host=`${e}:${t}`;let i=zn(e);i&&(gs(`https://${n.host}/b`),ms("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:fl(o,n.app.options.projectId))}var qf=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=xB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oee,this._maxUploadRetryTime=see,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=DB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=DB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new bx(kB());{let s=xee(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},SB="@firebase/storage",AB="0.13.14";var GB="storage";function jy(n,e,t){return n=Ae(n),ete(n,e,t)}function By(n){return n=Ae(n),tte(n)}function $y(n,e){return n=Ae(n),ote(n,e)}function Hy(n=ti(),e){n=Ae(n);let r=Si(n,GB).getImmediate({identifier:e}),i=hl("storage");return i&&ate(r,...i),r}function ate(n,e,t,r={}){ste(n,e,t,r)}function cte(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new qf(t,r,i,e,Mr)}function lte(){Fn(new qt(GB,cte,"PUBLIC").setMultipleInstances(!0)),Xe(SB,AB,""),Xe(SB,AB,"esm2017")}lte();var qy=class n{firestore=S(zt);userService=S(Yn);cache=new Map;listeners=new Map;capacity=300;ttlMs=1e3*60*10;constructor(){}touch(e,t){this.cache.delete(e),this.cache.set(e,t)}evictIfNeeded(){for(;this.cache.size>this.capacity;){let e=this.cache.keys().next(),t=e?e.value:void 0;if(!t)break;this.cache.delete(t);let r=this.listeners.get(t);if(r){try{r()}catch{}this.listeners.delete(t)}}}get(e){return E(this,null,function*(){if(!e)return null;let t=Date.now(),r=this.cache.get(e);if(r&&r.expiry>t)return this.touch(e,r),r.value;try{let i=yield this.userService.getUserByUid(e);if(!i){let s={uid:e,displayName:"",profilePicture:""};return this.cache.set(e,{value:s,expiry:t+1e3*60}),this.evictIfNeeded(),s}let o={uid:e,displayName:i.displayName||i.email||"",profilePicture:i.profilePicture||"",updatedAt:t};this.cache.set(e,{value:o,expiry:t+this.ttlMs}),this.evictIfNeeded();try{let s=P_(Je(this.firestore,"users",e),a=>{if(a&&a.exists&&typeof a.data=="function"){let c=a.data(),u={uid:e,displayName:c.displayName||c.email||"",profilePicture:c.profilePicture||"",bio:c.bio||"",updatedAt:Date.now()};this.cache.set(e,{value:u,expiry:Date.now()+this.ttlMs}),this.touch(e,this.cache.get(e))}});this.listeners.set(e,s)}catch{}return o}catch(i){return console.error("SenderProfileCache get error",i),null}})}getMany(e){return E(this,null,function*(){let t={},r=e.map(o=>this.get(o)),i=yield Promise.all(r);return e.forEach((o,s)=>t[o]=i[s]),t})}invalidate(e){this.cache.delete(e);let t=this.listeners.get(e);if(t){try{t()}catch{}this.listeners.delete(e)}}clear(){this.cache.clear(),this.listeners.forEach(e=>{try{e()}catch{}}),this.listeners.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var ute=n=>["/profile",n];function dte(n,e){n&1&&(y(0,"div",21),I(1,"No one online"),_())}function hte(n,e){if(n&1&&(y(0,"div",22)(1,"div",23),I(2,"\u25CF"),_(),y(3,"div",24),I(4),_()()),n&2){let t=e.$implicit;w(4),Re(t.displayName||t.uid)}}function fte(n,e){if(n&1&&(y(0,"div",17)(1,"div",18),W(2,dte,2,0,"div",19)(3,hte,5,1,"div",20),_()()),n&2){let t=F();w(2),M("ngIf",t.onlineUsers().length===0),w(),M("ngForOf",t.onlineUsers())}}function pte(n,e){if(n&1){let t=me();y(0,"button",25),$("click",function(){Q(t);let i=F();return Y(i.loadOlderMessages())}),I(1,"\u2191 Load more"),_()}}function gte(n,e){if(n&1&&ae(0,"img",48),n&2){let t=F().$implicit;M("src",t.senderPhoto,Qt)}}function mte(n,e){if(n&1&&(y(0,"div",49),I(1),_()),n&2){let t=F().$implicit;w(),Re((t.senderName||"").charAt(0))}}function vte(n,e){n&1&&ae(0,"span",50)}function _te(n,e){n&1&&(y(0,"span",51),I(1,"edited"),_())}function yte(n,e){if(n&1&&(y(0,"div",52),I(1),_()),n&2){let t=F().$implicit;w(),Re(t.text)}}function Ete(n,e){if(n&1&&(y(0,"div",17)(1,"a",53),I(2),_()()),n&2){let t=F().$implicit;w(),M("href",t.attachmentUrl,Qt),w(),ve("\u{1F4CE} ",t.attachmentName||"Attachment")}}function wte(n,e){if(n&1){let t=me();y(0,"div",54)(1,"input",55),Cr("ngModelChange",function(i){Q(t);let o=F().$implicit;return Kr(o._editText,i)||(o._editText=i),Y(i)}),_(),y(2,"button",56),$("click",function(){Q(t);let i=F().$implicit;return F().editMessage(i.id,i._editText),Y(i._editing=!1)}),I(3,"\u2713"),_(),y(4,"button",57),$("click",function(){Q(t);let i=F().$implicit;return Y(i._editing=!1)}),I(5,"\u2715"),_()()}if(n&2){let t=F().$implicit;w(),M("name",Qc("edit-",t.id)),br("ngModel",t._editText)}}function Ite(n,e){if(n&1){let t=me();y(0,"button",60),$("click",function(){let i=Q(t).$implicit,o=F(2).$implicit,s=F();return Y(s.toggleReaction(o.id,i))}),I(1),y(2,"span",61),I(3),_()()}if(n&2){let t=e.$implicit,r=F(2).$implicit;w(),ve(" ",t," "),w(2),Re((r.reactions[t]==null?null:r.reactions[t].length)||0)}}function bte(n,e){if(n&1&&(y(0,"div",58),W(1,Ite,4,2,"button",59),_()),n&2){let t=F().$implicit,r=F();w(),M("ngForOf",r.Object.keys(t.reactions))}}function Cte(n,e){if(n&1){let t=me();y(0,"button",64),$("click",function(){let i=Q(t).$implicit,o=F(2).$implicit,s=F();return Y(s.toggleReaction(o.id,i))}),I(1),_()}if(n&2){let t=e.$implicit;w(),Re(t)}}function Tte(n,e){if(n&1&&(y(0,"div",62),W(1,Cte,2,1,"button",63),_()),n&2){let t=F(2);w(),M("ngForOf",t.emojiPresets)}}function Dte(n,e){if(n&1){let t=me();y(0,"button",65),$("click",function(){Q(t);let i=F().$implicit;return i._editing=!0,Y(i._editText=i.text)}),I(1,"\u270F\uFE0F"),_()}}function Ste(n,e){if(n&1){let t=me();y(0,"button",66),$("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.deleteMessage(i.id))}),I(1,"\u{1F5D1}\uFE0F"),_()}}function Ate(n,e){if(n&1){let t=me();y(0,"button",67),$("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.banUser(i.senderUid))}),I(1,"Ban"),_()}}function xte(n,e){if(n&1){let t=me();y(0,"button",68),$("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.muteUser(i.senderUid))}),I(1,"Mute"),_()}}function Mte(n,e){if(n&1){let t=me();y(0,"div",69)(1,"button",70),$("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.retryPending(i.clientId))}),I(2,"Retry"),_(),y(3,"button",71),$("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.removePending(i.clientId))}),I(4,"Remove"),_()()}}function Rte(n,e){if(n&1){let t=me();co(0),y(1,"div",26)(2,"div")(3,"div",27),$("mouseenter",function(i){let o=Q(t).$implicit,s=F();return Y(s.showAvatarPopover(o.senderUid,i))})("mouseleave",function(){Q(t);let i=F();return Y(i.hideAvatarPopover())})("click",function(i){let o=Q(t).$implicit,s=F();return Y(s.showAvatarPopover(o.senderUid,i))}),W(4,gte,1,1,"img",28)(5,mte,2,1,"div",29)(6,vte,1,0,"span",30),_(),y(7,"div",31)(8,"div",32)(9,"div",33),I(10),W(11,_te,2,0,"span",34),_(),y(12,"div",33),I(13),ho(14,"date"),_()(),W(15,yte,2,1,"div",35)(16,Ete,3,2,"div",4)(17,wte,6,3,"div",36)(18,bte,2,1,"div",37),y(19,"div",38)(20,"div",39)(21,"button",40),$("click",function(){Q(t);let i=F();return Y(i.toggleEmojiPicker())}),I(22,"\u{1F60A}"),_(),W(23,Tte,2,1,"div",41),_(),y(24,"div",42),W(25,Dte,2,0,"button",43)(26,Ste,2,0,"button",44)(27,Ate,2,0,"button",45)(28,xte,2,0,"button",46)(29,Mte,5,0,"div",47),_()()()()(),lo()}if(n&2){let t=e.$implicit,r=F();w(),at("pending",t.status==="pending")("failed",t.status==="failed"),w(),vI("d-flex align-items-start gap-2 "+(r.isCreatorMessage(t)?"creator-message":"")),w(2),M("ngIf",t.senderPhoto),w(),M("ngIf",!t.senderPhoto),w(),M("ngIf",r.isUserOnline(t.senderUid)),w(4),ve("",t.senderName," "),w(),M("ngIf",t.edited),w(2),Re(t.createdAt?EI(14,22,t.createdAt,"short"):""),w(2),M("ngIf",!t._editing),w(),M("ngIf",t.attachmentUrl),w(),M("ngIf",t._editing),w(),M("ngIf",t.reactions&&r.Object.keys(t.reactions).length),w(5),M("ngIf",r.showEmojiPicker()),w(2),M("ngIf",r.canModifyMessage(t)&&!t._editing),w(),M("ngIf",r.canModifyMessage(t)),w(),M("ngIf",r.creatorUid&&r.creatorUid===(r.auth.currentUser==null?null:r.auth.currentUser.uid)&&t.senderUid!==(r.auth.currentUser==null?null:r.auth.currentUser.uid)),w(),M("ngIf",r.creatorUid&&r.creatorUid===(r.auth.currentUser==null?null:r.auth.currentUser.uid)&&t.senderUid!==(r.auth.currentUser==null?null:r.auth.currentUser.uid)),w(),M("ngIf",t.status==="failed")}}function Pte(n,e){if(n&1&&(y(0,"div",72),I(1),_()),n&2){let t=F();w(),Re(t.errorMessage())}}function Nte(n,e){if(n&1&&(y(0,"div",73),I(1),_()),n&2){let t=F();w(),ve("Uploading: ",t.uploadProgress(),"%")}}function kte(n,e){if(n&1&&ae(0,"img",80),n&2){let t=F(2);M("src",t.popoverData.profilePicture,Qt)}}function Ote(n,e){if(n&1&&(y(0,"div",74)(1,"div",75)(2,"div",76),W(3,kte,1,1,"img",77),y(4,"div")(5,"div",78),I(6),_(),y(7,"div",21),I(8),_(),y(9,"a",79),I(10,"View Profile"),_()()()()()),n&2){let t=F();M("ngStyle",t.popoverStyle),w(3),M("ngIf",t.popoverData==null?null:t.popoverData.profilePicture),w(3),Re((t.popoverData==null?null:t.popoverData.displayName)||(t.popoverData==null?null:t.popoverData.uid)),w(2),Re((t.popoverData==null?null:t.popoverData.bio)||""),w(),M("routerLink",_n(5,ute,t.popoverData==null?null:t.popoverData.uid))}}var Fte=["\u{1F44D}","\u2764\uFE0F","\u{1F602}","\u{1F62E}","\u{1F622}","\u{1F525}","\u{1F680}","\u2728"],zy=class n{firestore=S(zt);auth=S(Ke);userService=S(Yn);profileCache=S(qy);Object=Object;_eventId;set eventId(e){this._eventId=e,this.initMessages()}get eventId(){return this._eventId}creatorUid;messages=ee([]);pendingMessages=ee([]);newMessage=ee("");loading=ee(!1);errorMessage=ee("");uploading=ee(!1);uploadProgress=ee(0);showEmojiPicker=ee(!1);onlineUsers=ee([]);showOnlineList=ee(!1);pageSize=25;pageIncrement=25;oldestVisibleTimestamp=null;messageSubscriptions=new Map;presenceSub=null;messagesSub=null;rtdbListener=null;emojiPresets=Fte;messagesColPath(){return`events/${this.eventId}/messages`}autoScrollEnabled=!0;popoverVisible=!1;popoverData=null;popoverStyle={top:"0px",left:"0px"};ensureSenderProfiles(e){return E(this,null,function*(){if(!e||!e.length)return;let t=Array.from(new Set(e.map(r=>r.senderUid).filter(Boolean)));if(t.length)try{let r=yield this.profileCache.getMany(t);this.messages.update(i=>i.map(o=>{let s=r[o.senderUid];return s&&(o.senderPhoto=o.senderPhoto||s.profilePicture||"",o.senderName=o.senderName||s.displayName||o.senderName),o})),this.pendingMessages.update(i=>i.map(o=>{let s=r[o.senderUid];return s&&(o.senderPhoto=o.senderPhoto||s.profilePicture||"",o.senderName=o.senderName||s.displayName||o.senderName),o})),this.autoScrollEnabled&&setTimeout(()=>this.scrollToBottom(),30)}catch{}})}initMessages(){if(this.messagesSub&&(this.messagesSub.unsubscribe(),this.messagesSub=null),!this.eventId)return;let e=Cn(this.firestore,this.messagesColPath()),t=Za(e,N_("createdAt","desc"),X2(this.pageSize)),r=Ya(t,i=>{if(i.docs.length){let a=i.docs[i.docs.length-1];this.oldestVisibleTimestamp=a.data()?.createdAt||null}let o=i.docs.map(a=>{let c=U({id:a.id},a.data());return c?.createdAt&&typeof c.createdAt.toDate=="function"&&(c.createdAt=c.createdAt.toDate()),c?.editedAt&&typeof c.editedAt.toDate=="function"&&(c.editedAt=c.editedAt.toDate()),c});this.messages.set(o.reverse()),this.ensureSenderProfiles(this.messages());let s=new Set(this.messages().map(a=>a.clientId).filter(Boolean));this.pendingMessages.update(a=>a.filter(c=>!s.has(c.clientId))),setTimeout(()=>this.scrollToBottom(),50)},i=>{console.error("Chat snapshot error",i)});this.messagesSub={unsubscribe:r},this.attachScrollListener(),this.initPresenceRTDB()}attachScrollListener(){try{let t=document.getElementById(`chat-end-${this.eventId}`)?.parentElement;if(!t)return;t.addEventListener("scroll",this._boundOnScroll=this.onChatScroll.bind(this))}catch{}}detachScrollListener(){try{let t=document.getElementById(`chat-end-${this.eventId}`)?.parentElement;if(!t)return;this._boundOnScroll&&t.removeEventListener("scroll",this._boundOnScroll)}catch{}}_boundOnScroll=null;onChatScroll(e){try{let t=e.target,r=t.scrollHeight-t.scrollTop-t.clientHeight<60;this.autoScrollEnabled=r}catch{}}showAvatarPopover(e,t){if(!e)return;let r=t.touches&&t.touches[0],i=r?r.clientX:t.clientX,o=r?r.clientY:t.clientY;this.popoverStyle={left:i+8+"px",top:o+8+"px"},this.popoverVisible=!0,this.profileCache.get(e).then(s=>{this.popoverData=s||{uid:e}}).catch(()=>{this.popoverData={uid:e}})}hideAvatarPopover(){setTimeout(()=>{this.popoverVisible=!1,this.popoverData=null},120)}sendMessage(){return E(this,null,function*(){if(this.errorMessage.set(""),!this.newMessage()||!this.eventId)return;let e=this.auth.currentUser;if(!e){this.errorMessage.set("You must be signed in to send messages.");return}let t=`c_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,r=this.newMessage().trim();if(!r)return;let i={id:t,clientId:t,text:r,senderUid:e.uid,senderName:e.displayName||e.email||"Unknown",senderPhoto:"",createdAt:new Date,status:"pending"};this.pendingMessages.update(o=>[...o,i]),this.newMessage.set("");try{this.loading.set(!0);let o={text:r,senderUid:e.uid,senderName:e.displayName||e.email||"Unknown",senderPhoto:"",clientId:t,createdAt:Kl()};try{if(this.userService){let s=yield this.userService.getCurrentUserProfile();s&&s.profilePicture&&(o.senderPhoto=s.profilePicture)}}catch{}yield tf(Cn(this.firestore,this.messagesColPath()),o)}catch(o){console.error("Failed to send message",o);let s=this.pendingMessages().find(a=>a.clientId===t);s&&(s.status="failed"),this.errorMessage.set("Failed to send message. You can retry or remove it.")}finally{this.loading.set(!1)}})}retryPending(e){let t=this.pendingMessages().findIndex(i=>i.clientId===e&&i.status==="failed");if(t===-1)return;let r=this.pendingMessages()[t];this.newMessage.set(r.text),this.pendingMessages.update(i=>i.filter((o,s)=>s!==t))}removePending(e){this.pendingMessages.update(t=>t.filter(r=>r.clientId!==e))}editMessage(e,t){return E(this,null,function*(){if(!this.eventId||!this.auth.currentUser)return;let i=Je(this.firestore,`${this.messagesColPath()}/${e}`);try{yield Gn(i,{text:t,edited:!0,editedAt:Kl()})}catch(o){console.error("Edit failed",o),this.errorMessage.set("Edit failed.")}})}deleteMessage(e){return E(this,null,function*(){if(!this.eventId||!this.auth.currentUser)return;let r=Je(this.firestore,`${this.messagesColPath()}/${e}`);try{yield M_(r)}catch(i){console.error("Delete failed",i),this.errorMessage.set("Delete failed.")}})}toggleReaction(e,t){return E(this,null,function*(){if(!this.eventId)return;let r=this.auth.currentUser;if(!r)return;this.showEmojiPicker.set(!1);let i=Je(this.firestore,`${this.messagesColPath()}/${e}`);try{yield DS(this.firestore,o=>E(this,null,function*(){let s=yield o.get(i),c=(s.exists()?s.data():{})?.reactions||{},u=c[t]||[];if(u.includes(r.uid)){let h=u.filter(p=>p!==r.uid);if(h.length===0){let p=U({},c);delete p[t],o.update(i,{reactions:p})}else o.update(i,{[`reactions.${t}`]:h})}else{let h=[...u,r.uid];o.update(i,{[`reactions.${t}`]:h})}}))}catch(o){console.error("Reaction toggle failed",o)}})}toggleEmojiPicker(){this.showEmojiPicker.update(e=>!e)}uploadAttachment(e){return E(this,null,function*(){if(!e||!this.eventId)return;let t=this.auth.currentUser;if(t){this.uploading.set(!0),this.uploadProgress.set(0);try{let r=Hy(),i=`att_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,o=$y(r,`events/${this.eventId}/attachments/${i}_${e.name}`),s=jy(o,e);s.on("state_changed",a=>{let c=a.bytesTransferred/(a.totalBytes||1)*100;this.uploadProgress.set(Math.round(c))},a=>{console.error("Upload failed",a)},()=>E(this,null,function*(){let a=yield By(s.snapshot.ref),c=`c_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,u={text:"",senderUid:t.uid,senderName:t.displayName||t.email||"Unknown",senderPhoto:"",clientId:c,createdAt:Kl(),attachmentUrl:a,attachmentName:e.name};yield tf(Cn(this.firestore,this.messagesColPath()),u),this.uploadProgress.set(100)}))}catch(r){console.error("Attachment upload error",r)}finally{this.uploading.set(!1)}}})}banUser(e){return E(this,null,function*(){if(!this.eventId)return;let t=this.auth.currentUser;if(!t)return;let r=Je(this.firestore,`events/${this.eventId}/moderation/banned_${e}`);try{yield nf(r,{uid:e,bannedBy:t.uid,at:Kl()})}catch(i){console.error("Ban failed",i)}})}muteUser(e){return E(this,null,function*(){if(!this.eventId)return;let t=this.auth.currentUser;if(!t)return;let r=Je(this.firestore,`events/${this.eventId}/moderation/muted_${e}`);try{yield nf(r,{uid:e,mutedBy:t.uid,at:Kl()})}catch(i){console.error("Mute failed",i)}})}scrollToBottom(){try{let e=document.getElementById(`chat-end-${this.eventId}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}catch{}}isCreatorMessage(e){return e?.senderUid&&this.creatorUid&&e.senderUid===this.creatorUid}canModifyMessage(e){let t=this.auth.currentUser;return t?e.senderUid===t.uid||this.creatorUid===t.uid:!1}loadMore(){this.pageSize+=this.pageIncrement,this.initMessages()}loadOlderMessages(){return E(this,null,function*(){if(!(!this.eventId||!this.oldestVisibleTimestamp))try{let e=Cn(this.firestore,this.messagesColPath()),t=Za(e,N_("createdAt"),S_(this.oldestVisibleTimestamp),CS(this.pageIncrement)),r=yield R_(t),i=r.docs.map(o=>{let s=U({id:o.id},o.data());return s?.createdAt&&typeof s.createdAt.toDate=="function"&&(s.createdAt=s.createdAt.toDate()),s});if(i.length){this.messages.update(a=>[...i,...a]);let s=r.docs[0]?.data()?.createdAt;this.oldestVisibleTimestamp=s||this.oldestVisibleTimestamp,i.length>0&&this.subscribeToOlderMessageRange(i[0].createdAt,this.oldestVisibleTimestamp)}}catch(e){console.error("Failed to load older messages",e)}})}subscribeToOlderMessageRange(e,t){if(!this.eventId)return;let r=`${e?.toString()}_${t?.toString()}`;if(this.messageSubscriptions.has(r))return;let i=Cn(this.firestore,this.messagesColPath()),o=Za(i,N_("createdAt"),J2(e),S_(t)),s=Ya(o,a=>{let c=a.docs.map(u=>{let d=U({id:u.id},u.data());return d?.createdAt&&typeof d.createdAt.toDate=="function"&&(d.createdAt=d.createdAt.toDate()),d});this.messages.update(u=>{let d=new Map(u.map(h=>[h.id,h]));return c.forEach(h=>d.set(h.id,h)),Array.from(d.values()).sort((h,p)=>(h.createdAt?.getTime()||0)-(p.createdAt?.getTime()||0))})});this.messageSubscriptions.set(r,s)}initPresenceRTDB(){try{let e=this.auth.currentUser;if(!e||!this.eventId)return;let t=wB(),r=Oy(t,`presence/${this.eventId}/${e.uid}`),i=Oy(t,".info/connected");jf(r,{displayName:e.displayName||e.email||""}).catch(()=>{}),EB(r).remove().catch(()=>{});let o=c=>{c.val()===!0&&jf(r,{displayName:e.displayName||e.email||""}).catch(()=>{})};_x(i,o);let s=Oy(t,`presence/${this.eventId}`),a=c=>{let u=c.val()||{},d=Object.keys(u).map(h=>U({uid:h},u[h]));this.onlineUsers.set(d)};_x(s,a),this.rtdbListener=()=>{try{yx(i,"value",o)}catch{}try{yx(s,"value",a)}catch{}try{jf(r,null)}catch{}},window.addEventListener("beforeunload",()=>{try{jf(r,null)}catch{}})}catch(e){console.warn("RTDB presence init failed",e)}}isUserOnline(e){return e?this.onlineUsers().some(t=>t.uid===e):!1}toggleOnlineList(){this.showOnlineList.update(e=>!e)}ngOnDestroy(){this.messagesSub&&this.messagesSub.unsubscribe(),this.presenceSub&&this.presenceSub.unsubscribe(),this.rtdbListener&&this.rtdbListener();try{this.detachScrollListener()}catch{}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-event-chat"]],inputs:{eventId:"eventId",creatorUid:"creatorUid"},decls:20,vars:14,consts:[[1,"event-chat","card","mt-4"],[1,"card-body","d-flex","flex-column","p-2"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0"],["class","mb-2",4,"ngIf"],[1,"chat-messages","mb-2",2,"max-height","320px","overflow","auto"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"id"],["class","alert alert-danger py-2 mb-2",4,"ngIf"],[1,"chat-input","d-flex","gap-2","align-items-center",3,"submit"],["placeholder","Write a message...","name","message",1,"form-control","form-control-sm","flex-grow-1",3,"ngModelChange","ngModel"],["type","file","hidden","",3,"change","id"],["title","Attach file",1,"btn","btn-sm","btn-outline-secondary","attach-btn","mb-0",3,"for"],["type","button",1,"btn","btn-sm","btn-primary",3,"click","disabled"],["class","small mt-2 text-muted",4,"ngIf"],["class","avatar-popover",3,"ngStyle",4,"ngIf"],[1,"mb-2"],[1,"card","card-sm","p-2","shadow-sm"],["class","small text-muted",4,"ngIf"],["class","d-flex align-items-center gap-2 py-1",4,"ngFor","ngForOf"],[1,"small","text-muted"],[1,"d-flex","align-items-center","gap-2","py-1"],[1,"small","online-dot-list"],[1,"small"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"chat-message","mb-3"],[1,"chat-avatar","position-relative",3,"mouseenter","mouseleave","click"],["alt","",3,"src",4,"ngIf"],["class","avatar-fallback",4,"ngIf"],["class","online-dot","title","Online now",4,"ngIf"],[1,"chat-bubble","flex-fill"],[1,"d-flex","justify-content-between","align-items-start","mb-1"],[1,"chat-meta","small","text-muted"],["class","badge bg-secondary ms-1",4,"ngIf"],["class","chat-text mb-2",4,"ngIf"],["class","mt-2 d-flex gap-2 mb-2",4,"ngIf"],["class","mb-2 d-flex gap-1 flex-wrap",4,"ngIf"],[1,"d-flex","gap-2","align-items-center","flex-wrap"],[1,"reactions-picker","position-relative"],["title","Add reaction",1,"btn","btn-sm","btn-light",3,"click"],["class","emoji-picker",4,"ngIf"],[1,"ms-auto","d-flex","gap-1"],["class","btn btn-sm btn-link text-secondary",3,"click",4,"ngIf"],["class","btn btn-sm btn-link text-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger","title","Ban user",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-warning","title","Mute user",3,"click",4,"ngIf"],["class","ms-2 d-inline-flex gap-1",4,"ngIf"],["alt","",3,"src"],[1,"avatar-fallback"],["title","Online now",1,"online-dot"],[1,"badge","bg-secondary","ms-1"],[1,"chat-text","mb-2"],["target","_blank",1,"btn","btn-sm","btn-outline-primary",3,"href"],[1,"mt-2","d-flex","gap-2","mb-2"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel","name"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"mb-2","d-flex","gap-1","flex-wrap"],["class","btn btn-sm btn-outline-secondary reactions-btn",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-secondary","reactions-btn",3,"click"],[1,"ms-1"],[1,"emoji-picker"],["class","emoji-btn",3,"click",4,"ngFor","ngForOf"],[1,"emoji-btn",3,"click"],[1,"btn","btn-sm","btn-link","text-secondary",3,"click"],[1,"btn","btn-sm","btn-link","text-danger",3,"click"],["title","Ban user",1,"btn","btn-sm","btn-outline-danger",3,"click"],["title","Mute user",1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"ms-2","d-inline-flex","gap-1"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"alert","alert-danger","py-2","mb-2"],[1,"small","mt-2","text-muted"],[1,"avatar-popover",3,"ngStyle"],[1,"popover-card","p-2","shadow-sm","bg-white","rounded"],[1,"d-flex","gap-2","align-items-center"],["class","rounded-circle","style","width:48px;height:48px;object-fit:cover;",3,"src",4,"ngIf"],[1,"fw-bold"],[1,"small","mt-1","d-inline-block",3,"routerLink"],[1,"rounded-circle",2,"width","48px","height","48px","object-fit","cover",3,"src"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),I(4,"Event Chat"),_()(),W(5,fte,4,2,"div",4),y(6,"div",5),W(7,pte,2,0,"button",6)(8,Rte,30,25,"ng-container",7),ae(9,"div",8),_(),W(10,Pte,2,1,"div",9),y(11,"form",10),$("submit",function(o){return o.preventDefault(),r.sendMessage()}),y(12,"input",11),Cr("ngModelChange",function(o){return Kr(r.newMessage,o)||(r.newMessage=o),o}),_(),y(13,"input",12),$("change",function(o){return r.uploadAttachment(o.target.files&&o.target.files[0])}),_(),y(14,"label",13),I(15,"\u{1F4CE}"),_(),y(16,"button",14),$("click",function(){return r.sendMessage()}),I(17,"Send"),_()(),W(18,Nte,2,1,"div",15)(19,Ote,11,7,"div",16),_()()),t&2&&(w(5),M("ngIf",r.showOnlineList()),w(2),M("ngIf",r.messages().length>=r.pageSize),w(),M("ngForOf",r.messages().concat(r.pendingMessages())),w(),M("id",Qc("chat-end-",r.eventId)),w(),M("ngIf",r.errorMessage()),w(2),br("ngModel",r.newMessage),w(),M("id",Qc("chat-file-input-",r.eventId)),w(),M("for",Qc("chat-file-input-",r.eventId)),w(2),M("disabled",r.loading()||!r.newMessage()&&!r.uploading()),w(2),M("ngIf",r.uploading()),w(),M("ngIf",r.popoverVisible))},dependencies:[Be,Sr,nt,zI,ji,Ui,Li,Ls,Vi,pf,Ja,xt,dt,KI],styles:[".event-chat[_ngcontent-%COMP%]{--c-primary: var(--palette-primary, #5a8a3d);--c-surface: var(--palette-surface, #fff);--c-on-surface: var(--palette-on-surface, #222);--c-muted: var(--palette-muted, #6c757d);--c-accent: var(--palette-accent, #dda15e)}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background:var(--c-surface);border:1px solid rgba(0,0,0,.04);flex-shrink:0}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.event-chat[_ngcontent-%COMP%]   .avatar-fallback[_ngcontent-%COMP%]{font-weight:700;padding:6px;color:var(--c-on-surface);font-size:.9rem}.event-chat[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{background:var(--c-surface);padding:10px;border-radius:8px;box-shadow:0 1px 3px #0000000a;border:1px solid rgba(0,0,0,.03);word-break:break-word}.event-chat[_ngcontent-%COMP%]   .creator-message[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{border:1px solid rgba(90,138,61,.18);background:#dda15e0f}.event-chat[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]{white-space:pre-wrap;color:var(--c-on-surface);margin-bottom:.5rem}.event-chat[_ngcontent-%COMP%]   .chat-edited[_ngcontent-%COMP%]{font-size:.75rem;color:var(--c-muted);margin-left:.5rem}.event-chat[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{opacity:.7}.event-chat[_ngcontent-%COMP%]   .failed[_ngcontent-%COMP%]{opacity:.9;border-left:3px solid #dc3545;padding-left:.5rem}.event-chat[_ngcontent-%COMP%]   .chat-meta[_ngcontent-%COMP%]{color:var(--c-muted);font-size:.85rem}.event-chat[_ngcontent-%COMP%]   .chat-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{font-size:.85rem;color:var(--c-primary);text-decoration:none;background:transparent;border:none;cursor:pointer;padding:.25rem .5rem;transition:all .2s}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline;background:#5a8a3d14;border-radius:4px}.event-chat[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{color:#dc3545}.event-chat[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background:#dc354514}.event-chat[_ngcontent-%COMP%]   .reactions-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.5rem}.event-chat[_ngcontent-%COMP%]   .reactions-btn[_ngcontent-%COMP%]{background:#5a8a3d14;border:1px solid rgba(90,138,61,.2);color:var(--c-on-surface);padding:.25rem .5rem;font-size:.85rem;border-radius:4px;cursor:pointer;transition:all .2s}.event-chat[_ngcontent-%COMP%]   .reactions-btn[_ngcontent-%COMP%]:hover{background:#5a8a3d26;border-color:#5a8a3d4d}.event-chat[_ngcontent-%COMP%]   .reactions-btn.user-reacted[_ngcontent-%COMP%]{background:#5a8a3d33;border-color:#5a8a3d66;font-weight:600}.event-chat[_ngcontent-%COMP%]   .reactions-picker[_ngcontent-%COMP%]{position:relative;display:inline-block}.event-chat[_ngcontent-%COMP%]   .emoji-picker[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:0;background:var(--c-surface);border:1px solid rgba(0,0,0,.12);border-radius:8px;padding:.5rem;display:flex;gap:.5rem;flex-wrap:wrap;width:max-content;max-width:220px;box-shadow:0 4px 12px #00000026;z-index:1000;margin-bottom:.5rem}.event-chat[_ngcontent-%COMP%]   .emoji-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;padding:.35rem;cursor:pointer;font-size:1.25rem;transition:all .2s;border-radius:4px;line-height:1}.event-chat[_ngcontent-%COMP%]   .emoji-btn[_ngcontent-%COMP%]:hover{background:#5a8a3d1f;border-color:#5a8a3d4d}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{transition:background .2s ease;padding:.5rem;margin-bottom:1rem;border-radius:4px}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]:hover{background:#5a8a3d0a}.event-chat[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;color:var(--c-primary);text-decoration:none;font-size:.9rem;padding:.25rem .5rem;background:#5a8a3d14;border-radius:4px;margin-top:.5rem;word-break:break-all}.event-chat[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]:hover{text-decoration:underline;background:#5a8a3d1f}.event-chat[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{font-size:.75rem;color:var(--c-muted);margin-top:.25rem}.event-chat[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#dc354514;border:1px solid rgba(220,53,69,.2);color:#721c24;padding:.75rem;border-radius:4px;font-size:.9rem;margin-bottom:1rem}.event-chat[_ngcontent-%COMP%]   .online-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--c-muted)}.event-chat[_ngcontent-%COMP%]   .online-indicator[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;background:#28a745;border-radius:50%;margin-right:.25rem}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{position:relative}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   .online-dot[_ngcontent-%COMP%]{position:absolute;right:-2px;bottom:-2px;width:10px;height:10px;background:#28a745;border:2px solid #fff;border-radius:50%;box-shadow:0 1px 3px #0000001f}.event-chat[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{gap:.5rem}.event-chat[_ngcontent-%COMP%]   .attach-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.375rem .5rem;border-radius:6px;border:1px solid rgba(0,0,0,.08);background:transparent}.event-chat[_ngcontent-%COMP%]   .attach-btn[_ngcontent-%COMP%]:hover{background:#00000008}.event-chat[_ngcontent-%COMP%]   .online-dot-list[_ngcontent-%COMP%]{color:#28a745;font-size:.8rem;line-height:1}.event-chat[_ngcontent-%COMP%]   .card-sm[_ngcontent-%COMP%]{border-radius:8px;background:#fff}@media (max-width: 576px){.event-chat[_ngcontent-%COMP%]   .emoji-picker[_ngcontent-%COMP%]{max-width:180px}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{padding:.35rem;margin-bottom:.75rem}.event-chat[_ngcontent-%COMP%]   .chat-controls[_ngcontent-%COMP%]{gap:.35rem}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{font-size:.8rem;padding:.2rem .35rem}}.event-chat[_ngcontent-%COMP%]   .avatar-popover[_ngcontent-%COMP%]{position:fixed;z-index:2000}.event-chat[_ngcontent-%COMP%]   .popover-card[_ngcontent-%COMP%]{min-width:200px}.event-chat[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{transition:transform .12s ease,box-shadow .12s ease}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]:hover   .chat-bubble[_ngcontent-%COMP%]{transform:translateY(-2px);box-shadow:0 6px 18px #0000000f}.event-chat[_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{scroll-behavior:smooth}@media (max-width: 576px){.event-chat[_ngcontent-%COMP%]   .avatar-popover[_ngcontent-%COMP%]{position:fixed;inset:auto 8px 8px!important}.event-chat[_ngcontent-%COMP%]   .popover-card[_ngcontent-%COMP%]{width:auto}}"]})};function Lte(n,e){n&1&&(y(0,"div",7)(1,"div",8)(2,"span",9),I(3,"Loading..."),_()()())}function Vte(n,e){if(n&1&&(y(0,"div",10),I(1),_()),n&2){let t=F();w(),ve(" ",t.error()," ")}}function Ute(n,e){if(n&1&&ae(0,"img",35),n&2){let t=F(2);M("alt",uo(t.creatorProfile==null?null:t.creatorProfile.displayName))("src",t.creatorProfile==null?null:t.creatorProfile.profilePicture,Qt)}}function jte(n,e){if(n&1&&(y(0,"div",36),I(1),_()),n&2){let t=F().ngIf,r=F();w(),Re(((r.creatorProfile==null?null:r.creatorProfile.displayName)||t.creator||"?").charAt(0))}}function Bte(n,e){if(n&1&&(y(0,"span",37),I(1),_()),n&2){let t=F().ngIf;w(),ve("(",t.creatorEmail,")")}}function $te(n,e){if(n&1&&(y(0,"p",26)(1,"strong"),I(2,"\u{1F527} Work Type:"),_(),I(3),_()),n&2){let t=F().ngIf;w(3),ve(" ",t.workType," ")}}function Hte(n,e){n&1&&(y(0,"span",38),I(1,"Full"),_())}function qte(n,e){if(n&1){let t=me();y(0,"div",39)(1,"div",40)(2,"button",41),$("click",function(){Q(t);let i=F(2);return Y(i.editEvent())}),I(3," \u270F\uFE0F Edit Event "),_(),y(4,"button",42),$("click",function(){Q(t);let i=F(2);return Y(i.deleteEvent())}),I(5," \u{1F5D1}\uFE0F Delete Event "),_()()()}if(n&2){let t=F(2);w(4),M("disabled",t.isActionLoading())}}function zte(n,e){n&1&&(y(0,"span"),I(1,"\u2705 Attend Event"),_())}function Wte(n,e){n&1&&(y(0,"span"),I(1,"\u{1F6AB} Event Full"),_())}function Gte(n,e){n&1&&(y(0,"span"),ae(1,"span",47),I(2," Joining... "),_())}function Kte(n,e){if(n&1){let t=me();y(0,"button",46),$("click",function(){Q(t);let i=F(3);return Y(i.joinEvent())}),W(1,zte,2,0,"span",34)(2,Wte,2,0,"span",34)(3,Gte,3,0,"span",34),_()}if(n&2){let t=F(3);M("disabled",t.isActionLoading()||t.isEventFull()),w(),M("ngIf",!t.isActionLoading()&&!t.isEventFull()),w(),M("ngIf",t.isEventFull()&&!t.isActionLoading()),w(),M("ngIf",t.isActionLoading())}}function Qte(n,e){n&1&&(y(0,"span"),I(1,"\u274C Leave Event"),_())}function Yte(n,e){n&1&&(y(0,"span"),ae(1,"span",47),I(2," Leaving... "),_())}function Zte(n,e){if(n&1){let t=me();y(0,"button",48),$("click",function(){Q(t);let i=F(3);return Y(i.leaveEvent())}),W(1,Qte,2,0,"span",34)(2,Yte,3,0,"span",34),_()}if(n&2){let t=F(3);M("disabled",t.isActionLoading()),w(),M("ngIf",!t.isActionLoading()),w(),M("ngIf",t.isActionLoading())}}function Xte(n,e){if(n&1&&(y(0,"div",43),W(1,Kte,4,4,"button",44)(2,Zte,3,3,"button",45),_()),n&2){let t=F(2);w(),M("ngIf",!t.isAttending()),w(),M("ngIf",t.isAttending())}}function Jte(n,e){if(n&1&&(y(0,"div"),ae(1,"app-event-chat",49),_()),n&2){let t=e.ngIf;w(),M("eventId",t.id)("creatorUid",t.creatorUid)}}function ene(n,e){if(n&1&&(y(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div",17),W(7,Ute,1,3,"img",18)(8,jte,2,1,"div",19),_(),y(9,"div",20)(10,"h2",21),I(11),_(),y(12,"p",22),I(13," Created by "),y(14,"strong"),I(15),_(),W(16,Bte,2,1,"span",23),_()()()(),y(17,"div",24)(18,"div",11)(19,"div",25)(20,"p",26)(21,"strong"),I(22,"\u{1F4C5} Date:"),_(),I(23),_(),y(24,"p",26)(25,"strong"),I(26,"\u{1F552} Time:"),_(),I(27),_()(),y(28,"div",25)(29,"p",26)(30,"strong"),I(31,"\u{1F4CD} Location:"),_(),I(32),_(),W(33,$te,4,1,"p",27),y(34,"p",26)(35,"strong"),I(36,"\u{1F465} Participants:"),_(),I(37),W(38,Hte,2,0,"span",28),_()()()(),y(39,"div",29)(40,"h5"),I(41,"Description"),_(),y(42,"p"),I(43),_()(),W(44,qte,6,1,"div",30)(45,Xte,3,2,"div",31),_()()(),y(46,"div",32),ae(47,"app-participant-list",33),W(48,Jte,2,2,"div",34),_()()),n&2){let t=e.ngIf,r=F();w(7),M("ngIf",r.creatorProfile==null?null:r.creatorProfile.profilePicture),w(),M("ngIf",!(r.creatorProfile!=null&&r.creatorProfile.profilePicture)),w(3),Re(t.title),w(4),Re((r.creatorProfile==null?null:r.creatorProfile.displayName)||t.creator),w(),M("ngIf",t.creatorEmail),w(7),ve(" ",t.date," "),w(4),ve(" ",t.time," "),w(5),ve(" ",t.location," "),w(),M("ngIf",t.workType),w(4),ve(" ",r.getParticipantCountText()," "),w(),M("ngIf",r.isEventFull()),w(5),Re(t.description),w(),M("ngIf",r.isCreator()),w(),M("ngIf",!r.isCreator()),w(2),M("participants",r.participants()),w(),M("ngIf",r.event())}}var Wy=class n{auth=S(Ke);eventService=S(Qn);userService=S(Yn);modalService=S(it);route=S(En);router=S(Ze);event=ee(null);creatorProfile=null;participants=ee([]);loading=ee(!0);error=ee("");isCreator=ee(!1);isAttending=ee(!1);isActionLoading=ee(!1);currentUserUid;ngOnInit(){let e=this.auth.currentUser;this.currentUserUid=e?.uid,e?.emailVerified||this.modalService.openModal("unverified-email"),this.route.params.subscribe(t=>{let r=t.id;r&&this.loadEvent(r)})}ngOnDestroy(){}loadEvent(e){return E(this,null,function*(){this.loading.set(!0),this.error.set("");try{let t=yield this.eventService.getEvent(e);if(t){this.event.set(t),this.isCreator.set(t.creatorUid===this.currentUserUid),this.isAttending.set(t.participants?.includes(this.currentUserUid||"")||!1);try{let r=yield this.userService.getUserByUid(t.creatorUid);r&&(this.creatorProfile={displayName:r.displayName,profilePicture:r.profilePicture})}catch(r){console.warn("Failed to load creator profile",r)}yield this.loadParticipants(e)}else this.error.set("Event not found.")}catch(t){this.error.set(t?.message??"Failed to load event.")}finally{this.loading.set(!1)}})}loadParticipants(e){return E(this,null,function*(){try{let t=yield this.eventService.getParticipants(e);this.participants.set(t)}catch(t){console.error("Error loading participants:",t)}})}joinEvent(){return E(this,null,function*(){let e=this.event();if(e?.id){this.isActionLoading.set(!0);try{yield this.eventService.joinEvent(e.id),this.isAttending.set(!0),yield this.loadEvent(e.id)}catch(t){this.error.set(t.message||"Failed to join event")}finally{this.isActionLoading.set(!1)}}})}isEventFull(){let e=this.event();return!e||!e.memberCap||!e.participants?!1:e.participants.length>=e.memberCap}getParticipantCountText(){let e=this.event();if(!e)return"";let t=e.participants?.length||0;return e.memberCap?`${t} / ${e.memberCap}`:`${t}`}leaveEvent(){return E(this,null,function*(){let e=this.event();if(e?.id){this.isActionLoading.set(!0);try{yield this.eventService.leaveEvent(e.id),this.isAttending.set(!1),yield this.loadEvent(e.id)}catch(t){this.error.set(t.message||"Failed to leave event")}finally{this.isActionLoading.set(!1)}}})}deleteEvent(){return E(this,null,function*(){let e=this.event();if(e?.id&&confirm(`Are you sure you want to delete "${e.title}"?`)){this.isActionLoading.set(!0);try{yield this.eventService.deleteEvent(e.id),this.router.navigate(["/events"])}catch(t){this.error.set(t.message||"Failed to delete event")}finally{this.isActionLoading.set(!1)}}})}editEvent(){let e=this.event();e?.id&&this.router.navigate(["/edit-event",e.id])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-event-details"]],decls:8,vars:3,consts:[[1,"event-details-viewport","container","py-4"],[1,"row","mb-3"],[1,"col-12"],["routerLink","/events",1,"btn","btn-sm","btn-outline-secondary"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger"],[1,"row"],[1,"col-12","col-lg-8","mb-4"],[1,"card","shadow-sm","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"d-flex","gap-3","align-items-center","flex-grow-1"],[1,"creator-avatar","me-2"],["class","rounded-circle","style","width:56px;height:56px;object-fit:cover;",3,"src","alt",4,"ngIf"],["class","avatar-fallback rounded-circle","style","width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));color:var(--cornsilk);font-weight:700;",4,"ngIf"],[1,"flex-grow-1"],[1,"card-title","text-primary","mb-2"],[1,"text-muted","mb-0"],["class","text-muted",4,"ngIf"],[1,"event-meta","mb-4"],[1,"col-md-6"],[1,"mb-2"],["class","mb-2",4,"ngIf"],["class","badge bg-danger ms-2",4,"ngIf"],[1,"event-description"],["class","mt-4 mb-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"col-12","col-lg-4"],[3,"participants"],[4,"ngIf"],[1,"rounded-circle",2,"width","56px","height","56px","object-fit","cover",3,"src","alt"],[1,"avatar-fallback","rounded-circle",2,"width","56px","height","56px","display","flex","align-items","center","justify-content","center","background","linear-gradient(135deg,var(--sunlit-clay),var(--copperwood))","color","var(--cornsilk)","font-weight","700"],[1,"text-muted"],[1,"badge","bg-danger","ms-2"],[1,"mt-4","mb-4"],[1,"d-flex","flex-column","flex-sm-row","gap-2"],["type","button",1,"btn","btn-warning","text-dark","btn-sm","flex-grow-1",2,"white-space","nowrap","padding","0.5rem 1rem",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","flex-grow-1",2,"white-space","nowrap","padding","0.5rem 1rem",3,"click","disabled"],[1,"mt-4"],["class","btn btn-success btn-lg w-100",3,"disabled","click",4,"ngIf"],["class","btn btn-danger btn-lg w-100",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success","btn-lg","w-100",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"btn","btn-danger","btn-lg","w-100",3,"click","disabled"],[3,"eventId","creatorUid"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),I(4,"\u2190 Back to Events"),_()()(),W(5,Lte,4,0,"div",4)(6,Vte,2,1,"div",5)(7,ene,49,16,"div",6),_()),t&2&&(w(5),M("ngIf",r.loading()),w(),M("ngIf",!r.loading()&&r.error()),w(),M("ngIf",!r.loading()&&r.event()))},dependencies:[ji,Be,nt,xt,dt,X_,zy],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.event-details-viewport[_ngcontent-%COMP%]{min-height:90vh}.profile-thumb-box[_ngcontent-%COMP%]{margin-bottom:2rem}.profile-thumb[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:12px;object-fit:cover;box-shadow:0 4px 12px #28361826;transition:transform .2s ease}.profile-thumb[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.profile-thumb-initials[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:12px;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;color:var(--cornsilk);box-shadow:0 4px 12px #28361826}.event-detail-card[_ngcontent-%COMP%]{border-radius:12px;border:2px solid rgba(40,54,24,.1);box-shadow:0 4px 12px #28361814}.event-detail-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:1.5rem;font-size:1.75rem}.event-meta[_ngcontent-%COMP%]{background:#2836180a;padding:1rem;border-radius:8px;border-left:4px solid var(--sunlit-clay)}.meta-item[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--black-forest)}.meta-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.event-description[_ngcontent-%COMP%]{margin-top:1.5rem}.event-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#283618cc;line-height:1.6;margin-top:.5rem}.event-image[_ngcontent-%COMP%]{margin-top:1.5rem}.event-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #2836181a;max-height:400px;width:100%;object-fit:cover}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--black-forest);color:var(--black-forest)}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk)}@media (max-width: 768px){.event-detail-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.5rem;left:30px;width:440px;height:120px;z-index:5}.container-2[_ngcontent-%COMP%]{min-height:480px}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}}.badge[_ngcontent-%COMP%]{font-weight:600;padding:.35rem .65rem;letter-spacing:.5px}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.event-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn-success[_ngcontent-%COMP%]:disabled{background-color:#6c757d;border-color:#6c757d}.btn-success[_ngcontent-%COMP%]{background-color:var(--olive-leaf);border-color:var(--olive-leaf);font-weight:600;transition:all .2s ease}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--black-forest);border-color:var(--black-forest);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-danger[_ngcontent-%COMP%]{font-weight:600;transition:all .2s ease}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dc354533}.btn-warning[_ngcontent-%COMP%]{font-weight:600;transition:all .2s ease}.btn-warning[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dda15e33}.btn-sm[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.875rem;border-radius:6px;touch-action:manipulation;-webkit-user-select:none;user-select:none}@media (max-width: 768px){.event-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.btn-sm[_ngcontent-%COMP%]{min-width:100px}}"]})};function tne(n,e){n&1&&(y(0,"span"),I(1,"\u2795 Create New Event"),_())}function nne(n,e){n&1&&(y(0,"span"),I(1,"\u270F\uFE0F Edit Event"),_())}function rne(n,e){if(n&1&&(y(0,"div",39),I(1),_()),n&2){let t=F();w(),ve(" ",t.errorMessage()," ")}}function ine(n,e){if(n&1&&(y(0,"div",40),I(1),_()),n&2){let t=F();w(),ve(" ",t.dateError()," ")}}function one(n,e){n&1&&(y(0,"span"),I(1,"\u2705 Create Event"),_())}function sne(n,e){n&1&&(y(0,"span"),I(1,"\u{1F4BE} Save Changes"),_())}function ane(n,e){n&1&&(y(0,"span"),I(1,"Creating..."),_())}function cne(n,e){n&1&&(y(0,"span"),I(1,"Saving..."),_())}function lne(n,e){if(n&1&&(y(0,"span"),ae(1,"span",41),W(2,ane,2,0,"span",7)(3,cne,2,0,"span",7),_()),n&2){let t=F();w(2),M("ngIf",!t.isEditMode()),w(),M("ngIf",t.isEditMode())}}var Gf=class n{auth=S(Ke);router=S(Ze);route=S(En);modalService=S(it);eventService=S(Qn);userService=S(Yn);dateToday=new Date;isEditMode=ee(!1);editEventId=ee(null);eventTitle=ee("");eventDate=ee("");eventTime=ee("");eventLocation=ee("");eventWorkType=ee("");eventMemberCap=ee("");eventDescription=ee("");isLoading=ee(!1);errorMessage=ee("");dateError=ee("");ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}e.emailVerified||this.modalService.openModal("unverified-email"),this.route.params.subscribe(t=>E(this,null,function*(){t.id&&(this.editEventId.set(t.id),this.isEditMode.set(!0),yield this.loadEventForEdit(t.id))}))}loadEventForEdit(e){return E(this,null,function*(){this.isLoading.set(!0);try{let t=yield this.eventService.getEvent(e);t?(this.eventTitle.set(t.title),this.eventDescription.set(t.description),this.eventLocation.set(t.location),this.eventDate.set(this.formatDateForInput(t.date)),this.eventTime.set(t.time),t.workType&&this.eventWorkType.set(t.workType),t.memberCap&&this.eventMemberCap.set(t.memberCap.toString())):this.errorMessage.set("Event not found")}catch(t){this.errorMessage.set(t.message||"Failed to load event"),console.error("Error loading event for edit:",t)}finally{this.isLoading.set(!1)}})}formatDateForInput(e){let t=new Date(e),r=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${r}-${i}-${o}`}getTodayDate(){let e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${i}`}validateEventDate(){let e=this.eventDate();if(!e)return this.dateError.set(""),!0;let t=new Date;t.setHours(0,0,0,0);let r=new Date(e);return r.setHours(0,0,0,0),r<t?(this.dateError.set("Event date cannot be in the past"),!1):(this.dateError.set(""),!0)}createEvent(){return E(this,null,function*(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(!e.emailVerified){this.modalService.openModal("unverified-email");return}let t=this.eventTitle(),r=new Date(this.eventDate()),i=this.eventTime(),o=this.eventLocation(),s=this.eventWorkType(),a=this.eventMemberCap()?parseInt(this.eventMemberCap()):void 0,c=this.eventDescription(),u=e.displayName||e.email||"Unknown";if(r<this.dateToday){this.errorMessage.set("Date has already passed!");return}if(!t||!r||!i||!o||!c){this.errorMessage.set("Please fill in all required fields");return}if(this.validateEventDate()){this.isLoading.set(!0),this.errorMessage.set("");try{let d;try{let p=yield this.userService.getCurrentUserProfile();p&&p.profilePicture&&(d=p.profilePicture)}catch{}let h={title:t,date:r,time:i,location:o,description:c,creator:u};if(d&&(h.creatorProfilePicture=d),s&&(h.workType=s),a!==void 0&&(h.memberCap=a),this.isEditMode()){let p=this.editEventId();if(!p){this.errorMessage.set("Event ID is missing");return}yield this.eventService.updateEvent(p,h)}else yield this.eventService.createEvent(h);this.eventTitle.set(""),this.eventDate.set(""),this.eventTime.set(""),this.eventLocation.set(""),this.eventDescription.set(""),this.eventMemberCap.set(""),this.eventWorkType.set(""),this.router.navigate(["/events"])}catch(d){this.errorMessage.set(d.message||"Failed to save event"),console.error("Error saving event:",d)}finally{this.isLoading.set(!1)}}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-create-events-page"]],decls:62,vars:18,consts:[["eventForm","ngForm"],[1,"container","py-4"],[1,"row","justify-content-start"],[1,"col-12","col-lg-8"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-4","text-primary"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["novalidate","",3,"ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["id","title","type","text","required","","placeholder","e.g., Community Cleanup, Basketball Tournament",1,"form-control",3,"input","value"],["for","description",1,"form-label"],["id","description","rows","5","required","","placeholder","Describe your event in detail...",1,"form-control",3,"input","value"],[1,"row"],[1,"col-md-6","mb-3"],["for","location",1,"form-label"],["id","location","type","text","required","","placeholder","Event location",1,"form-control",3,"input","value"],["for","workType",1,"form-label"],["id","workType",1,"form-select",3,"change","value"],["value",""],["value","cleanup"],["value","mentoring"],["value","food_drive"],["value","construction"],["value","other"],["for","date",1,"form-label"],[1,"text-muted",2,"font-size","0.875rem"],["id","date","type","date","required","",1,"form-control",3,"input","change","value","min"],["class","invalid-feedback d-block",4,"ngIf"],["for","memberCap",1,"form-label"],["id","memberCap","type","number","min","1","placeholder","Max participants (leave blank for no limit)",1,"form-control",3,"input","value"],[1,"mb-4"],["for","time",1,"form-label"],["id","time","type","time","required","","placeholder","Event time",1,"form-control",3,"input","value"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-primary","btn-lg",3,"click","disabled"],["routerLink","/events",1,"btn","btn-outline-secondary","btn-lg"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback","d-block"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){if(t&1){let i=me();y(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),W(6,tne,2,0,"span",7)(7,nne,2,0,"span",7),_(),W(8,rne,2,1,"div",8),y(9,"form",9,0),$("ngSubmit",function(){return Q(i),Y(r.createEvent())}),y(11,"div",10)(12,"label",11),I(13,"Event Title *"),_(),y(14,"input",12),$("input",function(s){return Q(i),Y(r.eventTitle.set(s.target.value))}),_()(),y(15,"div",10)(16,"label",13),I(17,"Description *"),_(),y(18,"textarea",14),$("input",function(s){return Q(i),Y(r.eventDescription.set(s.target.value))}),_()(),y(19,"div",15)(20,"div",16)(21,"label",17),I(22,"Location *"),_(),y(23,"input",18),$("input",function(s){return Q(i),Y(r.eventLocation.set(s.target.value))}),_()(),y(24,"div",16)(25,"label",19),I(26,"Work Type"),_(),y(27,"select",20),$("change",function(s){return Q(i),Y(r.eventWorkType.set(s.target.value))}),y(28,"option",21),I(29,"Select type (e.g., Cleanup, Tutoring, Food Drive)"),_(),y(30,"option",22),I(31,"Cleanup"),_(),y(32,"option",23),I(33,"Mentoring"),_(),y(34,"option",24),I(35,"Food Drive"),_(),y(36,"option",25),I(37,"Construction / Repair"),_(),y(38,"option",26),I(39,"Other"),_()()(),y(40,"div",16)(41,"label",27),I(42,"Date * "),y(43,"span",28),I(44,"(cannot be in the past)"),_()(),y(45,"input",29),$("input",function(s){return Q(i),r.eventDate.set(s.target.value),Y(r.validateEventDate())})("change",function(){return Q(i),Y(r.validateEventDate())}),_(),W(46,ine,2,1,"div",30),_(),y(47,"div",16)(48,"label",31),I(49,"Member Cap (Optional)"),_(),y(50,"input",32),$("input",function(s){return Q(i),Y(r.eventMemberCap.set(s.target.value))}),_()()(),y(51,"div",33)(52,"label",34),I(53,"Time *"),_(),y(54,"input",35),$("input",function(s){return Q(i),Y(r.eventTime.set(s.target.value))}),_()(),y(55,"div",36)(56,"button",37),$("click",function(){return Q(i),Y(r.createEvent())}),W(57,one,2,0,"span",7)(58,sne,2,0,"span",7)(59,lne,4,2,"span",7),_(),y(60,"a",38),I(61," Cancel "),_()()()()()()()()}t&2&&(w(6),M("ngIf",!r.isEditMode()),w(),M("ngIf",r.isEditMode()),w(),M("ngIf",r.errorMessage()),w(6),M("value",r.eventTitle()),w(4),M("value",r.eventDescription()),w(5),M("value",r.eventLocation()),w(4),M("value",r.eventWorkType()),w(18),at("is-invalid",r.dateError()),M("value",r.eventDate())("min",r.getTodayDate()),w(),M("ngIf",r.dateError()),w(4),M("value",r.eventMemberCap()),w(4),M("value",r.eventTime()),w(2),M("disabled",r.isLoading()||r.dateError()!==""),w(),M("ngIf",!r.isLoading()&&!r.isEditMode()),w(),M("ngIf",!r.isLoading()&&r.isEditMode()),w(),M("ngIf",r.isLoading()))},dependencies:[Be,nt,ji,Ui,RU,NU,Vi,Ja,xt,dt],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 12px 30px #2836180f;border:1px solid rgba(40,54,24,.06)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.card-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.75rem}.card[_ngcontent-%COMP%]   .mb-3[_ngcontent-%COMP%]:first-of-type{max-width:70%}.card[_ngcontent-%COMP%]   .ms-4[_ngcontent-%COMP%]{margin-left:1.5rem!important;max-width:60%}.card[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{min-height:160px;border-radius:6px;resize:vertical}.d-flex.align-items-center[_ngcontent-%COMP%]   input.form-control[type=date][_ngcontent-%COMP%]{max-width:260px;border-radius:6px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e0e0e0;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:hover, .form-select[_ngcontent-%COMP%]:hover{border-color:var(--olive-leaf)}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c3826}input[type=number][_ngcontent-%COMP%]{max-width:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(180deg,var(--sunlit-clay),var(--copperwood));border:none;color:var(--cornsilk);box-shadow:0 6px 18px #bc6c251f;font-weight:600;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #bc6c252e}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--olive-leaf);color:var(--olive-leaf);background:transparent;font-weight:600;transition:all .2s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);color:#fff}label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500;margin-bottom:.5rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24;border-radius:6px}.card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c381f}@media (max-width: 576px){.card[_ngcontent-%COMP%]   .mb-3[_ngcontent-%COMP%]:first-of-type, .card[_ngcontent-%COMP%]   .ms-4[_ngcontent-%COMP%]{max-width:100%;margin-left:0!important}.d-flex.align-items-center[_ngcontent-%COMP%]   input.form-control[type=date][_ngcontent-%COMP%]{max-width:100%}}"]})};var KB=n=>["/event-details",n];function une(n,e){if(n&1&&(y(0,"div",15),I(1),_()),n&2){let t=F();w(),ve(" ",t.getInitials()," ")}}function dne(n,e){if(n&1&&ae(0,"img",16),n&2){let t=F();M("src",t.profilePicture,Qt)}}function hne(n,e){if(n&1){let t=me();y(0,"div",17),I(1),y(2,"button",18),$("click",function(){Q(t);let i=F();return Y(i.error="")}),_()()}if(n&2){let t=F();w(),ve(" ",t.error," ")}}function fne(n,e){if(n&1){let t=me();y(0,"div",19),I(1),y(2,"button",18),$("click",function(){Q(t);let i=F();return Y(i.success="")}),_()()}if(n&2){let t=F();w(),ve(" ",t.success," ")}}function pne(n,e){n&1&&(y(0,"div",20)(1,"div",21)(2,"span",22),I(3,"Loading..."),_()()())}function gne(n,e){if(n&1){let t=me();y(0,"div",34)(1,"button",35),$("click",function(){Q(t);let i=F(2);return Y(i.toggleEdit())}),I(2,"Edit Profile"),_(),y(3,"button",36),$("click",function(){Q(t);let i=F(2);return Y(i.logout())}),I(4,"Logout"),_()()}}function mne(n,e){n&1&&(y(0,"div",37),I(1,"No events created yet."),_())}function vne(n,e){n&1&&(y(0,"span"),I(1,"\u2026"),_())}function _ne(n,e){if(n&1&&(y(0,"a",48),I(1,"Manage"),_()),n&2){let t=F().$implicit;M("routerLink",_n(1,KB,t.id))}}function yne(n,e){if(n&1&&(y(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"h6",42),I(5),_(),y(6,"small",43),I(7),_()(),y(8,"p",44),I(9),ho(10,"slice"),W(11,vne,2,0,"span",13),_(),y(12,"div",45)(13,"a",46),I(14,"View Details"),_(),W(15,_ne,2,3,"a",47),_()()()()),n&2){let t=e.$implicit,r=F(2);w(5),Re(t.title),w(2),Kc("",t.date," \xB7 ",t.time),w(2),Re(Sd(10,7,t.description||"",0,140)),w(2),M("ngIf",(t.description||"").length>140),w(2),M("routerLink",_n(11,KB,t.id)),w(2),M("ngIf",r.isOwner)}}function Ene(n,e){if(n&1&&(y(0,"div")(1,"h4",23),I(2),_(),y(3,"div",24)(4,"span",25),I(5,"Email:"),_(),y(6,"span",26),I(7),_()(),y(8,"div",24)(9,"span",25),I(10,"Phone:"),_(),y(11,"span",26),I(12),_()(),y(13,"div",24)(14,"span",25),I(15,"Location:"),_(),y(16,"span",26),I(17),_()(),y(18,"div",24)(19,"span",25),I(20,"Bio:"),_(),y(21,"p",27),I(22),_()(),W(23,gne,5,0,"div",28),y(24,"div",29)(25,"h5",30),I(26),_(),W(27,mne,2,0,"div",31),y(28,"div",32),W(29,yne,16,13,"div",33),_()()()),n&2){let t=F();w(2),Re(t.displayName||"No Name"),w(5),Re(t.email),w(5),Re(t.phone||"Not provided"),w(5),Re(t.location||"Not provided"),w(5),Re(t.bio||"No bio provided"),w(),M("ngIf",t.isOwner),w(3),ve("Events created by ",t.displayName||"this user"),w(),M("ngIf",t.eventsCreated.length===0),w(2),M("ngForOf",t.eventsCreated)}}function wne(n,e){if(n&1&&(y(0,"div",30)(1,"label",65),I(2,"Upload Progress"),_(),y(3,"div",66)(4,"div",67),I(5),_()()()),n&2){let t=F(2);w(4),vi("width",t.uploadProgress,"%"),mi("aria-valuenow",t.uploadProgress),w(),ve(" ",t.uploadProgress,"% ")}}function Ine(n,e){n&1&&ae(0,"span",68)}function bne(n,e){if(n&1){let t=me();y(0,"form",49,0),$("ngSubmit",function(){Q(t);let i=F();return Y(i.saveProfile())}),y(2,"div",30)(3,"label",50),I(4,"Display Name"),_(),y(5,"input",51),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.displayName,i)||(o.displayName=i),Y(i)}),_()(),y(6,"div",30)(7,"label",52),I(8,"Email"),_(),y(9,"input",53),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.email,i)||(o.email=i),Y(i)}),_(),y(10,"small",43),I(11,"Email cannot be changed."),_()(),y(12,"div",30)(13,"label",54),I(14,"Phone"),_(),y(15,"input",55),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.phone,i)||(o.phone=i),Y(i)}),_()(),y(16,"div",30)(17,"label",56),I(18,"Location"),_(),y(19,"input",57),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.location,i)||(o.location=i),Y(i)}),_()(),y(20,"div",30)(21,"label",58),I(22,"Bio"),_(),y(23,"textarea",59),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.bio,i)||(o.bio=i),Y(i)}),_()(),y(24,"div",30)(25,"label",60),I(26,"Profile Picture URL"),_(),y(27,"input",61),Cr("ngModelChange",function(i){Q(t);let o=F();return Kr(o.profilePicture,i)||(o.profilePicture=i),Y(i)}),_()(),W(28,wne,6,4,"div",62),y(29,"div",34)(30,"button",63),W(31,Ine,1,0,"span",64),I(32," Save Changes "),_(),y(33,"button",36),$("click",function(){Q(t);let i=F();return Y(i.toggleEdit())}),I(34,"Cancel"),_()()()}if(n&2){let t=mI(1),r=F();w(5),br("ngModel",r.displayName),w(4),br("ngModel",r.email),w(6),br("ngModel",r.phone),w(4),br("ngModel",r.location),w(4),br("ngModel",r.bio),w(4),br("ngModel",r.profilePicture),w(),M("ngIf",r.uploadProgress>0&&r.uploadingPicture),w(2),M("disabled",t.invalid||r.loading),w(),M("ngIf",r.loading)}}var Kf=class n{auth=S(Ke);firestore=S(zt);router=S(Ze);route=S(En);modalService=S(it);eventService=S(Qn);displayName="";email="";phone="";bio="";location="";profilePicture="";loading=!1;error="";success="";isEditing=!1;viewedUid=null;isOwner=!1;eventsCreated=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("uid");e&&(this.viewedUid=e),this.loadProfile()}loadProfile(){return E(this,null,function*(){this.loading=!0;try{let e=this.auth.currentUser,t=this.viewedUid??e?.uid??null;if(!t){this.error="No user specified and no user logged in.",e||this.modalService.openModal("login");return}this.isOwner=!!(e&&e.uid===t);let r=yield Fi(Je(this.firestore,"users",t));if(r.exists()){let i=r.data();this.displayName=i.displayName||"",this.email=i.email||"",this.phone=i.phone||"",this.bio=i.bio||"",this.location=i.location||"",this.profilePicture=i.profilePicture||""}else this.isOwner&&e?this.email=e.email||"":this.error="Profile not found.";try{t&&(this.isOwner?this.eventService.getMyEvents():this.eventService.getEventsByCreator(t)).subscribe(o=>{this.eventsCreated=(o||[]).slice().sort((s,a)=>{let c=s.createdAt?new Date(s.createdAt).getTime():0;return(a.createdAt?new Date(a.createdAt).getTime():0)-c})})}catch(i){console.warn("Failed to load created events",i)}}catch(e){this.error=e?.message??"Failed to load profile."}finally{this.loading=!1}})}toggleEdit(){this.isEditing=!this.isEditing,this.error="",this.success=""}saveProfile(){return E(this,null,function*(){if(this.error="",this.success="",!this.displayName){this.error="Display name is required.";return}this.loading=!0;try{let e=this.auth.currentUser;if(!e){this.error="No user logged in.";return}yield nf(Je(this.firestore,"users",e.uid),{displayName:this.displayName,email:this.email,phone:this.phone,bio:this.bio,location:this.location,profilePicture:this.profilePicture,updatedAt:new Date().toISOString()}),this.success="Profile saved successfully.",this.isEditing=!1}catch(e){this.error=e?.message??"Failed to save profile."}finally{this.loading=!1}})}uploadProgress=0;uploadingPicture=!1;uploadProfilePicture(e){return E(this,null,function*(){if(!e)return;this.error="",this.success="";let t=5*1024*1024;if(!e.type||!e.type.startsWith("image/")){this.error="Only image files are allowed (JPG, PNG, WebP, etc.).";return}if(e.size>t){this.error="File is too large. Maximum size is 5 MB.";return}this.uploadingPicture=!0,this.uploadProgress=0;try{let r=this.auth.currentUser;if(!r)throw new Error("Not logged in");let i=Hy(),o=$y(i,`users/${r.uid}/profile.jpg`),s=jy(o,e);s.on("state_changed",a=>{let c=a.bytesTransferred/(a.totalBytes||1)*100;this.uploadProgress=Math.round(c)},a=>{this.uploadingPicture=!1,this.uploadProgress=0,this.error=a?.message??"Upload failed.",console.error("Upload error:",a)},()=>E(this,null,function*(){try{let a=yield By(s.snapshot.ref);this.profilePicture=a,yield Gn(Je(this.firestore,"users",r.uid),{profilePicture:a,updatedAt:new Date().toISOString()}),this.success="Profile picture uploaded successfully!",this.uploadProgress=100,setTimeout(()=>{this.uploadingPicture=!1,this.uploadProgress=0},800)}catch(a){this.uploadingPicture=!1,this.uploadProgress=0,this.error=a?.message??"Failed to save profile picture. Please try again.",console.error("Finalize error:",a)}}))}catch(r){this.uploadingPicture=!1,this.uploadProgress=0,this.error=r?.message??"Upload failed. Please try again.",console.error("Upload init error:",r)}})}logout(){return E(this,null,function*(){try{yield Sh(this.auth),yield this.router.navigate(["/"])}catch(e){this.error=e?.message??"Logout failed."}})}getInitials(){let e=(this.displayName||"").trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():(this.displayName||"").charAt(0).toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-profile-details"]],decls:14,vars:7,consts:[["profileForm","ngForm"],[1,"profile-viewport","container-fluid","py-4"],[1,"row"],[1,"col-12","col-md-3","mb-4","mb-md-0"],[1,"profile-picture-box"],["class","profile-circle-large",4,"ngIf"],["alt","Profile Picture","class","profile-image",3,"src",4,"ngIf"],[1,"col-12","col-md-9"],[1,"card","profile-card"],[1,"card-body"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[1,"profile-circle-large"],["alt","Profile Picture",1,"profile-image",3,"src"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"profile-name"],[1,"profile-info-item"],[1,"profile-label"],[1,"profile-value"],[1,"profile-value","profile-bio"],["class","button-group mt-4",4,"ngIf"],[1,"mt-4"],[1,"mb-3"],["class","alert alert-info",4,"ngIf"],[1,"row","g-3"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],[1,"button-group","mt-4"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"alert","alert-info"],[1,"col-12","col-md-6"],[1,"card"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1","text-truncate"],[1,"text-muted"],[1,"card-text","text-muted","mb-3"],[1,"mt-auto","d-flex","gap-2"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],["class","btn btn-sm btn-outline-secondary",3,"routerLink",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],["novalidate","",3,"ngSubmit"],["for","displayName",1,"form-label"],["type","text","id","displayName","name","displayName","required","","placeholder","Your full name",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","disabled","","placeholder","your@email.com",1,"form-control",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["type","tel","id","phone","name","phone","placeholder","(555) 123-4567",1,"form-control",3,"ngModelChange","ngModel"],["for","location",1,"form-label"],["type","text","id","location","name","location","placeholder","City, State",1,"form-control",3,"ngModelChange","ngModel"],["for","bio",1,"form-label"],["id","bio","name","bio","rows","4","placeholder","Tell us about yourself...",1,"form-control",3,"ngModelChange","ngModel"],["for","profilePicture",1,"form-label"],["type","url","id","profilePicture","name","profilePicture","placeholder","https://example.com/image.jpg",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-save",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"form-label"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){t&1&&(y(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),W(4,une,2,1,"div",5)(5,dne,1,1,"img",6),_()(),y(6,"div",7)(7,"div",8)(8,"div",9),W(9,hne,3,1,"div",10)(10,fne,3,1,"div",11)(11,pne,4,0,"div",12)(12,Ene,30,9,"div",13)(13,bne,35,9,"form",14),_()()()()()),t&2&&(w(4),M("ngIf",!r.profilePicture),w(),M("ngIf",r.profilePicture),w(4),M("ngIf",r.error),w(),M("ngIf",r.success),w(),M("ngIf",r.loading),w(),M("ngIf",!r.loading&&!r.isEditing),w(),M("ngIf",!r.loading&&r.isEditing&&r.isOwner))},dependencies:[Be,Sr,nt,ji,Ui,Li,Ls,Vi,BS,pf,Ja,xt,dt,Fd],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.profile-viewport[_ngcontent-%COMP%]{min-height:80vh;background-color:var(--cornsilk)}.profile-picture-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:280px}.profile-circle-large[_ngcontent-%COMP%]{width:240px;height:240px;border-radius:50%;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));display:flex;align-items:center;justify-content:center;font-size:4rem;font-weight:600;color:var(--cornsilk);box-shadow:0 8px 24px #606c3826}.profile-image[_ngcontent-%COMP%]{width:240px;height:240px;border-radius:50%;object-fit:cover;box-shadow:0 8px 24px #606c3826}.profile-card[_ngcontent-%COMP%]{border-radius:12px;border:1px solid rgba(96,108,56,.08);box-shadow:0 12px 32px #2836180f;background:#fff}.profile-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.profile-name[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:700;margin-bottom:1.5rem;font-size:1.75rem}.profile-info-item[_ngcontent-%COMP%]{display:flex;margin-bottom:1rem;align-items:flex-start}.profile-label[_ngcontent-%COMP%]{color:var(--olive-leaf);font-weight:600;min-width:120px}.profile-value[_ngcontent-%COMP%]{color:var(--black-forest);flex:1}.profile-bio[_ngcontent-%COMP%]{line-height:1.6;margin:0}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(96,108,56,.12);border-radius:6px;color:var(--black-forest)}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c381a}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.5rem}.upload-picture-zone[_ngcontent-%COMP%]{border:2px dashed var(--sunlit-clay);border-radius:8px;padding:1rem;background-color:#dda15e0d;transition:all .2s ease}.upload-picture-zone[_ngcontent-%COMP%]:hover{background-color:#dda15e1a;border-color:var(--copperwood)}.upload-picture-zone[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;background:transparent;padding:.5rem;cursor:pointer}.upload-picture-zone[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;background:transparent}.upload-picture-zone[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#6c757d}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{border-radius:6px;font-weight:600;padding:.625rem 1.25rem;border:2px solid;transition:all .3s ease}.btn-edit[_ngcontent-%COMP%]{border-color:var(--olive-leaf);color:var(--olive-leaf);background:transparent}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--olive-leaf);color:var(--cornsilk)}.btn-save[_ngcontent-%COMP%]{border-color:var(--sunlit-clay);color:var(--cornsilk);background:linear-gradient(180deg,var(--sunlit-clay),var(--copperwood));border-color:transparent}.btn-save[_ngcontent-%COMP%]:hover{opacity:.9}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-cancel[_ngcontent-%COMP%]{border-color:#606c384d;color:var(--black-forest);background:transparent}.btn-cancel[_ngcontent-%COMP%]:hover{background:#606c381a;color:var(--black-forest)}.navbar-profile-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;margin-right:1rem}.profile-circle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center;font-size:1.5rem;border:2px solid rgba(255,255,255,.4);transition:all .3s ease}.navbar-profile-link[_ngcontent-%COMP%]:hover   .profile-circle[_ngcontent-%COMP%]{background:#ffffff4d;border-color:#fff9}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.profile-name[_ngcontent-%COMP%]{font-size:1.5rem}.profile-circle-large[_ngcontent-%COMP%]{width:180px;height:180px;font-size:3rem}.profile-image[_ngcontent-%COMP%]{width:180px;height:180px}.button-group[_ngcontent-%COMP%]{flex-direction:column}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function Cne(n,e){n&1&&(y(0,"div",10)(1,"strong"),I(2,"\u26A0\uFE0F Email Not Verified"),_(),y(3,"p",11),I(4,"Please verify your email to manage your events."),_()())}function Tne(n,e){n&1&&(y(0,"div",12)(1,"div",13)(2,"span",14),I(3,"Loading..."),_()(),y(4,"p",15),I(5,"Loading your events..."),_()())}function Dne(n,e){n&1&&(y(0,"div",12)(1,"div",1)(2,"span",16),I(3,"\u{1F4ED}"),_()(),y(4,"h4",3),I(5,"No Events Yet"),_(),y(6,"p",17),I(7,"You haven't created any events. Start by creating your first volunteer event!"),_(),y(8,"button",18),I(9," \u2795 Create Your First Event "),_()())}function Sne(n,e){if(n&1&&ae(0,"app-event-list",19),n&2){let t=F();M("events",t.myEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","You are not organizing any events yet.")("onDelete",t.deleteEvent.bind(t))}}var Gy=class n{auth=S(Ke);eventService=S(Qn);modalService=S(it);router=S(Ze);myEvents=ee([]);attendingEventIds=ee([]);isLoading=ee(!0);isVerified=!1;currentUserUid;ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(this.isVerified=e.emailVerified,this.currentUserUid=e.uid,!this.isVerified){this.isLoading.set(!1);return}this.loadEvents()}loadEvents(){this.eventService.getMyEvents().subscribe({next:e=>{this.myEvents.set(e),this.loadAttendingEventIds()},error:e=>{console.error("Error loading my events:",e),this.isLoading.set(!1)}})}loadAttendingEventIds(){this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}deleteEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.deleteEvent(e.id),this.loadEvents()}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-my-events"]],decls:15,vars:4,consts:[[1,"container","mt-5"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onDelete",4,"ngIf"],[1,"mt-4"],["routerLink","/create-event",1,"btn","btn-primary"],["routerLink","/events",1,"btn","btn-secondary","ms-2"],["role","alert",1,"alert","alert-warning"],[1,"mb-0"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[2,"font-size","3rem"],[1,"text-muted","mb-4"],["routerLink","/create-event",1,"btn","btn-primary","btn-lg"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onDelete"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h2",2),I(3,"\u{1F4CB} My Events"),_(),y(4,"p",3),I(5,"Events you are organizing"),_()(),W(6,Cne,5,0,"div",4)(7,Tne,6,0,"div",5)(8,Dne,10,0,"div",5)(9,Sne,1,5,"app-event-list",6),y(10,"div",7)(11,"button",8),I(12," \u2795 Create New Event "),_(),y(13,"button",9),I(14," \u2190 Back to All Events "),_()()()),t&2&&(w(6),M("ngIf",!r.isVerified),w(),M("ngIf",r.isLoading()),w(),M("ngIf",!r.isLoading()&&r.myEvents().length===0&&r.isVerified),w(),M("ngIf",!r.isLoading()&&r.myEvents().length>0))},dependencies:[Be,nt,xt,dt,Vs],encapsulation:2})};function Ane(n,e){n&1&&(y(0,"div",9)(1,"strong"),I(2,"\u26A0\uFE0F Email Not Verified"),_(),y(3,"p",10),I(4,"Please verify your email to attend events."),_()())}function xne(n,e){n&1&&(y(0,"div",11)(1,"div",12)(2,"span",13),I(3,"Loading..."),_()(),y(4,"p",14),I(5,"Loading your events..."),_()())}function Mne(n,e){n&1&&(y(0,"div",11)(1,"div",1)(2,"span",15),I(3,"\u{1F50D}"),_()(),y(4,"h4",3),I(5,"No Events Yet"),_(),y(6,"p",16),I(7,"You haven't joined any events yet. Explore and find events that match your interests!"),_(),y(8,"button",17),I(9," \u{1F440} Browse Events "),_()())}function Rne(n,e){if(n&1&&ae(0,"app-event-list",18),n&2){let t=F();M("events",t.attendingEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","You are not attending any events yet.")("onLeave",t.leaveEvent.bind(t))}}var Ky=class n{auth=S(Ke);eventService=S(Qn);modalService=S(it);attendingEvents=ee([]);attendingEventIds=ee([]);isLoading=ee(!0);isVerified=!1;currentUserUid;ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(this.isVerified=e.emailVerified,this.currentUserUid=e.uid,!this.isVerified){this.isLoading.set(!1);return}this.loadEvents()}loadEvents(){this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEvents.set(e),this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}leaveEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.leaveEvent(e.id),this.loadEvents()}catch(t){console.error("Error leaving event:",t),alert("Failed to leave event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-attending-events"]],decls:13,vars:4,consts:[[1,"container","mt-5"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onLeave",4,"ngIf"],[1,"mt-4"],["routerLink","/events",1,"btn","btn-primary"],["role","alert",1,"alert","alert-warning"],[1,"mb-0"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[2,"font-size","3rem"],[1,"text-muted","mb-4"],["routerLink","/events",1,"btn","btn-primary","btn-lg"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onLeave"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h2",2),I(3,"\u{1F389} Events I'm Attending"),_(),y(4,"p",3),I(5,"Events you have signed up for"),_()(),W(6,Ane,5,0,"div",4)(7,xne,6,0,"div",5)(8,Mne,10,0,"div",5)(9,Rne,1,5,"app-event-list",6),y(10,"div",7)(11,"button",8),I(12," \u2190 Browse All Events "),_()()()),t&2&&(w(6),M("ngIf",!r.isVerified),w(),M("ngIf",r.isLoading()),w(),M("ngIf",!r.isLoading()&&r.attendingEvents().length===0&&r.isVerified),w(),M("ngIf",!r.isLoading()&&r.attendingEvents().length>0))},dependencies:[Be,nt,xt,dt,Vs],encapsulation:2})};var QB=class n{auth=S(Ke);router=S(Ze);modalService=S(it);canActivate(){let e=this.auth.currentUser;return e?e.emailVerified?!0:(this.modalService.openModal("unverified-email"),!1):(this.modalService.openModal("login"),!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})},Qf=(n,e)=>{let t=S(Ke),r=S(Ze),i=S(it),o=t.currentUser;return o?o.emailVerified?!0:(i.openModal("unverified-email"),!1):(i.openModal("login"),!1)};var YB=[{path:"",component:O_},{path:"events",component:Z_},{path:"event-details/:id",component:Wy},{path:"create-event",component:Gf,canActivate:[Qf]},{path:"edit-event/:id",component:Gf,canActivate:[Qf]},{path:"my-events",component:Gy,canActivate:[Qf]},{path:"attending",component:Ky,canActivate:[Qf]},{path:"profile",component:Kf},{path:"profile/:uid",component:Kf}];var ZB={providers:[Bw(),CI({eventCoalescing:!0}),kb(YB),GO(()=>KO({projectId:"volunteer-events-management",appId:"1:655730869330:web:eb2e4c15b0dcf1a8c64b8b",storageBucket:"volunteer-events-management.firebasestorage.app",apiKey:"AIzaSyDAgEoKYxzPAlf3iXS1ZtCfL1M80BSrjAs",authDomain:"volunteer-events-management.firebaseapp.com",messagingSenderId:"655730869330"})),Y2(()=>Z2()),nL(()=>Tv())]};var Hs=class n{getErrorMessage(e){if(!e)return"An unexpected error occurred. Please try again.";let t=e.code||e.message||"";return{"auth/invalid-email":"The email address is not valid. Please check and try again.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/user-not-found":"No account found with this email. Please sign up first.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"This email is already registered. Please sign in or use a different email.","auth/weak-password":"Password is too weak. Please use at least 6 characters with a mix of letters and numbers.","auth/password-does-not-meet-requirements":"Password does not meet Firebase security requirements. Please use at least 6 characters.","auth/operation-not-allowed":"Email/password login is not enabled. Please contact support.","auth/too-many-requests":"Too many failed login attempts. Please try again later.","auth/account-exists-with-different-credential":"An account already exists with this email using a different login method.","auth/invalid-credential":"Invalid credentials. Please check your email and password.","auth/cancelled-popup-request":"Login cancelled. Please try again.","auth/popup-blocked":"Login popup was blocked. Please allow popups and try again.","auth/popup-closed-by-user":"You closed the login popup. Please try again.","auth/unauthorized-domain":"This domain is not authorized for authentication.","auth/missing-email":"Email is required for login.","auth/missing-password":"Password is required for login.","auth/network-request-failed":"Network error. Please check your internet connection and try again.","auth/invalid-api-key":"API configuration error. Please contact support.","auth/internal-error":"An internal error occurred. Please try again later.","unverified-email":"Your email address has not been verified yet. Please check your email for a verification link.","auth/user-not-verified":"Please verify your email address before logging in. Check your inbox for a verification link."}[t]||`Authentication error: ${t}. Please try again or contact support.`}extractErrorCode(e){return e?.code||e?.message||"unknown-error"}isUnverifiedEmailError(e){let t=this.extractErrorCode(e);return t==="unverified-email"||t==="auth/user-not-verified"}isNetworkError(e){return this.extractErrorCode(e)==="auth/network-request-failed"}isTooManyAttemptsError(e){return this.extractErrorCode(e)==="auth/too-many-requests"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function Pne(n,e){if(n&1){let t=me();y(0,"div",7),I(1),y(2,"button",20),$("click",function(){Q(t);let i=F();return Y(i.errorMessage=null)}),_()()}if(n&2){let t=F();w(),ve(" ",t.errorMessage," ")}}function Nne(n,e){n&1&&(y(0,"div",12),I(1," Please enter a valid email. "),_())}function kne(n,e){n&1&&(y(0,"div",12),I(1," Password is required. "),_())}function One(n,e){n&1&&ae(0,"span",16)}function Fne(n,e){if(n&1){let t=me();y(0,"div",21),$("click",function(){Q(t);let i=F();return Y(i.closeModal())}),_()}}var Qy=class n{fb=S(Q_);router=S(Ze);authService=S(Rr);modalService=S(it);errorService=S(Hs);errorMessage=null;isLoading=!1;form=this.fb.nonNullable.group({email:["",[Kn.required,Kn.email]],password:["",Kn.required]});onSubmit(){if(!this.form.valid){this.errorMessage="Please fill in all required fields.";return}this.isLoading=!0,this.errorMessage=null;let{email:e,password:t}=this.form.getRawValue();this.authService.login(e,t).subscribe({next:()=>{this.isLoading=!1,this.modalService.closeModal("login"),this.router.navigateByUrl("/")},error:r=>{this.isLoading=!1,this.errorMessage=this.errorService.getErrorMessage(r)}})}openSignupModal(){this.errorMessage=null,this.form.reset(),this.modalService.closeModal("login"),this.modalService.openModal("signup")}closeModal(){this.modalService.closeModal("login"),this.errorMessage=null,this.form.reset()}isModalOpen(){return this.modalService.isOpen("login")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-login-modal"]],decls:29,vars:16,consts:[["id","loginModal","tabindex","-1","aria-labelledby","loginModalLabel","aria-modal","true","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["id","loginModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Enter your password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-login","w-100","mb-3",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"modal-backdrop","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),I(5,"Sign In"),_(),y(6,"button",5),$("click",function(){return r.closeModal()}),_()(),y(7,"div",6),mn(8,Pne,3,1,"div",7),y(9,"form",8),$("ngSubmit",function(){return r.onSubmit()}),y(10,"div",9)(11,"label",10),I(12,"Email"),_(),ae(13,"input",11),mn(14,Nne,2,0,"div",12),_(),y(15,"div",9)(16,"label",13),I(17,"Password"),_(),ae(18,"input",14),mn(19,kne,2,0,"div",12),_(),y(20,"button",15),mn(21,One,1,0,"span",16),I(22),_()(),y(23,"div",17)(24,"small"),I(25,"Don't have an account? "),y(26,"button",18),$("click",function(){return r.openSignupModal()}),I(27,"Sign up"),_()()()()()()(),mn(28,Fne,1,0,"div",19)),t&2){let i,o,s,a;vi("display",r.isModalOpen()?"block":"none"),at("show",r.isModalOpen()),w(8),vn(r.errorMessage?8:-1),w(),M("formGroup",r.form),w(4),at("is-invalid",((i=r.form.get("email"))==null?null:i.invalid)&&((i=r.form.get("email"))==null?null:i.touched)),w(),vn((o=r.form.get("email"))!=null&&o.invalid&&((o=r.form.get("email"))!=null&&o.touched)?14:-1),w(4),at("is-invalid",((s=r.form.get("password"))==null?null:s.invalid)&&((s=r.form.get("password"))==null?null:s.touched)),w(),vn((a=r.form.get("password"))!=null&&a.invalid&&((a=r.form.get("password"))!=null&&a.touched)?19:-1),w(),M("disabled",!r.form.valid||r.isLoading),w(),vn(r.isLoading?21:-1),w(),ve(" ",r.isLoading?"Signing in...":"Sign In"," "),w(6),vn(r.isModalOpen()?28:-1)}},dependencies:[Y_,Ui,Li,Ls,Vi,gf,mf,Be],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.modal-content[_ngcontent-%COMP%]{border:2px solid var(--black-forest);border-radius:12px;box-shadow:0 8px 32px #28361826}.modal-header[_ngcontent-%COMP%]{background-color:#606c380d;border-bottom:1px solid rgba(40,54,24,.1)}.modal-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;font-size:1.5rem}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(40,54,24,.2);border-radius:6px;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--sunlit-clay);box-shadow:0 0 0 .2rem #dda15e26}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354526}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem}.btn-login[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.75rem 1rem;border-radius:6px;transition:all .2s ease}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{color:var(--sunlit-clay);text-decoration:none;font-weight:600}.btn-link[_ngcontent-%COMP%]:hover{color:var(--copperwood)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#28361880}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(.95);opacity:0;transition:all .3s ease}.modal.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.alert[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:.75rem 1rem;font-size:.95rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24;border-left:4px solid #dc3545}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#155724;border-left:4px solid #28a745}.btn-close[_ngcontent-%COMP%]{opacity:.5;transition:opacity .2s ease}.btn-close[_ngcontent-%COMP%]:hover{opacity:.7}"]})};function Lne(n,e){if(n&1){let t=me();y(0,"div",7),I(1),y(2,"button",25),$("click",function(){Q(t);let i=F();return Y(i.errorMessage=null)}),_()()}if(n&2){let t=F();w(),ve(" ",t.errorMessage," ")}}function Vne(n,e){if(n&1&&(y(0,"div",8),I(1),_()),n&2){let t=F();w(),ve(" ",t.successMessage," ")}}function Une(n,e){n&1&&(y(0,"div",13),I(1," Username must be at least 3 characters. "),_())}function jne(n,e){n&1&&(y(0,"div",13),I(1," Please enter a valid email. "),_())}function Bne(n,e){n&1&&(y(0,"div",13),I(1," Password must be at least 6 characters. "),_())}function $ne(n,e){n&1&&(y(0,"div",13),I(1," Please confirm your password. "),_())}function Hne(n,e){n&1&&ae(0,"span",21)}function qne(n,e){if(n&1){let t=me();y(0,"div",26),$("click",function(){Q(t);let i=F();return Y(i.closeModal())}),_()}}var Yy=class n{fb=S(Q_);router=S(Ze);authService=S(Rr);modalService=S(it);errorService=S(Hs);errorMessage=null;successMessage=null;isLoading=!1;form=this.fb.nonNullable.group({username:["",[Kn.required,Kn.minLength(3)]],email:["",[Kn.required,Kn.email]],password:["",[Kn.required,Kn.minLength(6)]],confirmPassword:["",Kn.required]});onSubmit(){if(!this.form.valid){this.errorMessage="Please fill in all fields correctly.",this.successMessage=null;return}let{username:e,email:t,password:r,confirmPassword:i}=this.form.getRawValue();if(console.log("=== SIGNUP MODAL SUBMISSION ==="),console.log("Username:",e),console.log("Email:",t),console.log("Password length:",r?r.length:0),console.log("Password (raw from form):",r),console.log("Confirm Password:",i),console.log("Passwords match:",r===i),r!==i){this.errorMessage="Passwords do not match.",this.successMessage=null;return}console.log("Sending to AuthService.register() with password:",r,"Length:",r.length),this.isLoading=!0,this.errorMessage=null,this.successMessage=null,this.authService.register(t,e,r).subscribe({next:()=>{this.isLoading=!1,this.successMessage="Account created! Please check your email to verify your account.",this.form.reset(),setTimeout(()=>{this.modalService.closeModal("signup"),this.modalService.openModal("login"),this.successMessage=null},2e3)},error:o=>{this.isLoading=!1,console.error("Signup error received in SignupModal:",o),this.errorMessage=this.errorService.getErrorMessage(o),this.successMessage=null}})}openLoginModal(){this.errorMessage=null,this.successMessage=null,this.form.reset(),this.modalService.closeModal("signup"),this.modalService.openModal("login")}closeModal(){this.modalService.closeModal("signup"),this.errorMessage=null,this.successMessage=null,this.form.reset()}isModalOpen(){return this.modalService.isOpen("signup")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-signup-modal"]],decls:40,vars:23,consts:[["id","signupModal","tabindex","-1","aria-labelledby","signupModalLabel","aria-modal","true","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["id","signupModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Choose a username","formControlName","username",1,"form-control"],[1,"invalid-feedback"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Create a password (min 6 characters)","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","placeholder","Confirm your password","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-signup","w-100","mb-3",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"modal-backdrop","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),I(5,"Create Account"),_(),y(6,"button",5),$("click",function(){return r.closeModal()}),_()(),y(7,"div",6),mn(8,Lne,3,1,"div",7),mn(9,Vne,2,1,"div",8),y(10,"form",9),$("ngSubmit",function(){return r.onSubmit()}),y(11,"div",10)(12,"label",11),I(13,"Username"),_(),ae(14,"input",12),mn(15,Une,2,0,"div",13),_(),y(16,"div",10)(17,"label",14),I(18,"Email"),_(),ae(19,"input",15),mn(20,jne,2,0,"div",13),_(),y(21,"div",10)(22,"label",16),I(23,"Password"),_(),ae(24,"input",17),mn(25,Bne,2,0,"div",13),_(),y(26,"div",10)(27,"label",18),I(28,"Confirm Password"),_(),ae(29,"input",19),mn(30,$ne,2,0,"div",13),_(),y(31,"button",20),mn(32,Hne,1,0,"span",21),I(33),_()(),y(34,"div",22)(35,"small"),I(36,"Already have an account? "),y(37,"button",23),$("click",function(){return r.openLoginModal()}),I(38,"Sign in"),_()()()()()()(),mn(39,qne,1,0,"div",24)),t&2){let i,o,s,a,c,u,d,h;vi("display",r.isModalOpen()?"block":"none"),at("show",r.isModalOpen()),w(8),vn(r.errorMessage?8:-1),w(),vn(r.successMessage?9:-1),w(),M("formGroup",r.form),w(4),at("is-invalid",((i=r.form.get("username"))==null?null:i.invalid)&&((i=r.form.get("username"))==null?null:i.touched)),w(),vn((o=r.form.get("username"))!=null&&o.invalid&&((o=r.form.get("username"))!=null&&o.touched)?15:-1),w(4),at("is-invalid",((s=r.form.get("email"))==null?null:s.invalid)&&((s=r.form.get("email"))==null?null:s.touched)),w(),vn((a=r.form.get("email"))!=null&&a.invalid&&((a=r.form.get("email"))!=null&&a.touched)?20:-1),w(4),at("is-invalid",((c=r.form.get("password"))==null?null:c.invalid)&&((c=r.form.get("password"))==null?null:c.touched)),w(),vn((u=r.form.get("password"))!=null&&u.invalid&&((u=r.form.get("password"))!=null&&u.touched)?25:-1),w(4),at("is-invalid",((d=r.form.get("confirmPassword"))==null?null:d.invalid)&&((d=r.form.get("confirmPassword"))==null?null:d.touched)),w(),vn((h=r.form.get("confirmPassword"))!=null&&h.invalid&&((h=r.form.get("confirmPassword"))!=null&&h.touched)?30:-1),w(),M("disabled",!r.form.valid||r.isLoading),w(),vn(r.isLoading?32:-1),w(),ve(" ",r.isLoading?"Creating account...":"Sign Up"," "),w(6),vn(r.isModalOpen()?39:-1)}},dependencies:[Y_,Ui,Li,Ls,Vi,gf,mf,Be],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.modal-content[_ngcontent-%COMP%]{border:2px solid var(--black-forest);border-radius:12px;box-shadow:0 8px 32px #28361826}.modal-header[_ngcontent-%COMP%]{background-color:#606c380d;border-bottom:1px solid rgba(40,54,24,.1)}.modal-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;font-size:1.5rem}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(40,54,24,.2);border-radius:6px;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--sunlit-clay);box-shadow:0 0 0 .2rem #dda15e26}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354526}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem}.btn-signup[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.75rem 1rem;border-radius:6px;transition:all .2s ease}.btn-signup[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-signup[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{color:var(--sunlit-clay);text-decoration:none;font-weight:600}.btn-link[_ngcontent-%COMP%]:hover{color:var(--copperwood)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#28361880}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(.95);opacity:0;transition:all .3s ease}.modal.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.alert[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:.75rem 1rem;font-size:.95rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24;border-left:4px solid #dc3545}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#155724;border-left:4px solid #28a745}.btn-close[_ngcontent-%COMP%]{opacity:.5;transition:opacity .2s ease}.btn-close[_ngcontent-%COMP%]:hover{opacity:.7}"]})};function zne(n,e){if(n&1&&(y(0,"div",16),I(1),_()),n&2){let t=F();w(),ve(" ",t.errorMessage," ")}}function Wne(n,e){if(n&1&&(y(0,"div",17),I(1),_()),n&2){let t=F();w(),ve(" ",t.successMessage," ")}}function Gne(n,e){n&1&&(y(0,"span"),I(1,"Resend Verification Email"),_())}function Kne(n,e){n&1&&(y(0,"span"),ae(1,"span",18),I(2," Sending... "),_())}function Qne(n,e){if(n&1&&ae(0,"div",19),n&2){let t=F();at("show",t.isOpen)}}var Zy=class n{authService=S(Rr);modalService=S(it);errorService=S(Hs);isOpen=!1;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){setInterval(()=>{this.isOpen=this.modalService.isOpen("unverified-email")},100)}closeModal(){this.errorMessage="",this.successMessage="",this.modalService.closeModal("unverified-email")}resendVerification(){this.isLoading=!0,this.errorMessage="",this.successMessage="",this.authService.resendVerificationEmail().subscribe({next:()=>{this.successMessage="\u2705 Verification email sent! Check your inbox.",this.isLoading=!1,setTimeout(()=>this.closeModal(),3e3)},error:e=>{this.errorMessage=this.errorService.getErrorMessage(e),this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-unverified-email-modal"]],decls:21,vars:10,consts:[["tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-warning"],[1,"modal-header","bg-warning","text-dark"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"text-muted","mb-4"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning","text-dark",3,"click","disabled"],[4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-backdrop","fade"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),I(5,"\u26A0\uFE0F Email Not Verified"),_(),y(6,"button",5),$("click",function(){return r.closeModal()}),_()(),y(7,"div",6)(8,"p",7),I(9," Your email address has not been verified yet. Please verify your email to access all features. "),_(),y(10,"p",8),I(11," Check your inbox for a verification email. If you don't see it, you can request a new one below. "),_(),W(12,zne,2,1,"div",9)(13,Wne,2,1,"div",10),_(),y(14,"div",11)(15,"button",12),$("click",function(){return r.closeModal()}),I(16,"Close"),_(),y(17,"button",13),$("click",function(){return r.resendVerification()}),W(18,Gne,2,0,"span",14)(19,Kne,3,0,"span",14),_()()()()(),W(20,Qne,1,2,"div",15)),t&2&&(vi("display",r.isOpen?"block":"none"),at("show",r.isOpen),w(12),M("ngIf",r.errorMessage),w(),M("ngIf",r.successMessage),w(4),M("disabled",r.isLoading),w(),M("ngIf",!r.isLoading),w(),M("ngIf",r.isLoading),w(),M("ngIf",r.isOpen))},dependencies:[Be,nt],styles:[".modal.show[_ngcontent-%COMP%]{display:block}"]})};var XB=n=>["/profile",n];function Yne(n,e){if(n&1){let t=me();y(0,"li",22)(1,"button",23),$("click",function(){Q(t);let i=F();return Y(i.openLoginModal())}),I(2,"Login"),_(),y(3,"button",24),$("click",function(){Q(t);let i=F();return Y(i.openSignupModal())}),I(4,"Sign Up"),_()()}}function Zne(n,e){if(n&1&&ae(0,"img",30),n&2){let t,r=F(2);M("src",(t=r.currentUserProfile())==null?null:t.profilePicture,Qt)}}function Xne(n,e){n&1&&ae(0,"div",31)}function Jne(n,e){if(n&1){let t=me();y(0,"li",25)(1,"a",26),W(2,Zne,1,1,"img",27)(3,Xne,1,0,"div",28),_(),y(4,"button",29),$("click",function(){Q(t);let i=F();return Y(i.logout())}),I(5,"Logout"),_()()}if(n&2){let t,r,i=F();w(),M("routerLink",_n(3,XB,i.getCurrentUserUid())),w(),M("ngIf",i.currentUserProfile()&&((t=i.currentUserProfile())==null?null:t.profilePicture)),w(),M("ngIf",!i.currentUserProfile()||!((r=i.currentUserProfile())!=null&&r.profilePicture))}}function ere(n,e){if(n&1){let t=me();y(0,"div",32),$("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),_()}}function tre(n,e){if(n&1){let t=me();y(0,"li",17)(1,"a",33),$("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),y(2,"span",19),I(3,"\u{1F464}"),_(),I(4," My Profile "),_()()}if(n&2){let t=F();w(),M("routerLink",_n(1,XB,t.getCurrentUserUid()))}}function nre(n,e){if(n&1){let t=me();y(0,"li",17)(1,"a",34),$("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),y(2,"span",19),I(3,"\u{1F4CC}"),_(),I(4," My Events "),_()()}}function rre(n,e){if(n&1){let t=me();y(0,"li",17)(1,"button",35),$("click",function(){Q(t);let i=F();return i.openLoginModal(),Y(i.closeSidebar())}),I(2,"Login"),_()()}}function ire(n,e){if(n&1){let t=me();y(0,"li",17)(1,"button",36),$("click",function(){Q(t);let i=F();return i.openSignupModal(),Y(i.closeSidebar())}),I(2,"Sign Up"),_()()}}function ore(n,e){if(n&1){let t=me();y(0,"li",37)(1,"button",38),$("click",function(){Q(t);let i=F();return i.logout(),Y(i.closeSidebar())}),I(2,"Logout"),_()()}}var Xy=class n{authService=S(Rr);modalService=S(it);auth=S(Ke);userService=S(Yn);firestore=S(zt);currentUserProfile=ee(null);sidebarOpen=ee(!1);unsubscribeProfile=null;ngOnInit(){this.authService.user$.subscribe(e=>{if(e){this.authService.currentUserSig.set({email:e.email,username:e.displayName}),this.unsubscribeProfile&&this.unsubscribeProfile();let t=Je(this.firestore,"users",e.uid);this.unsubscribeProfile=P_(t,r=>{if(r.exists()){let i=r.data();this.currentUserProfile.set({displayName:i.displayName,profilePicture:i.profilePicture})}},r=>{console.error("Error listening to profile changes:",r)})}else this.authService.currentUserSig.set(null),this.currentUserProfile.set(null),this.unsubscribeProfile&&(this.unsubscribeProfile(),this.unsubscribeProfile=null)})}ngOnDestroy(){this.unsubscribeProfile&&this.unsubscribeProfile()}toggleSidebar(){this.sidebarOpen.update(e=>!e)}closeSidebar(){this.sidebarOpen.set(!1)}logout(){this.closeSidebar(),this.authService.logout()}openLoginModal(){this.modalService.openModal("login")}openSignupModal(){this.modalService.openModal("signup")}getCurrentUserUid(){return this.auth.currentUser?.uid}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-root"]],decls:36,vars:11,consts:[[1,"navbar","navbar-expand-lg","navbar-custom","shadow-sm"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand","fw-bold"],["type","button","aria-controls","sidebar",1,"navbar-toggler","border-0",3,"click"],[1,"navbar-toggler-icon"],[1,"navbar-collapse","d-none","d-lg-flex","ms-auto"],[1,"navbar-nav","align-items-center"],[1,"nav-item"],["routerLink","/events","routerLinkActive","active",1,"nav-link"],["class","nav-item d-flex gap-2 ms-3",4,"ngIf"],["class","nav-item d-flex align-items-center gap-3 ms-3",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"sidebar-drawer"],[1,"sidebar-header","d-flex","justify-content-between","align-items-center"],[1,"m-0"],["aria-label","Close menu",1,"btn-close-sidebar",3,"click"],[1,"sidebar-nav"],[1,"sidebar-nav-item"],["routerLink","/events","routerLinkActive","active",1,"sidebar-nav-link",3,"click"],[1,"icon"],["class","sidebar-nav-item",4,"ngIf"],["class","sidebar-nav-item border-top mt-3 pt-3",4,"ngIf"],[1,"nav-item","d-flex","gap-2","ms-3"],[1,"btn","btn-nav-login",3,"click"],[1,"btn","btn-nav-signup",3,"click"],[1,"nav-item","d-flex","align-items-center","gap-3","ms-3"],["title","View Profile",1,"nav-profile-link",3,"routerLink"],["alt","Profile","class","nav-profile-img loaded",3,"src",4,"ngIf"],["class","nav-profile-img-skeleton",4,"ngIf"],[1,"btn","btn-nav-logout",3,"click"],["alt","Profile",1,"nav-profile-img","loaded",3,"src"],[1,"nav-profile-img-skeleton"],[1,"sidebar-overlay",3,"click"],["routerLinkActive","active",1,"sidebar-nav-link",3,"click","routerLink"],["routerLink","/my-events","routerLinkActive","active",1,"sidebar-nav-link",3,"click"],[1,"btn","btn-sidebar-auth","w-100",3,"click"],[1,"btn","btn-sidebar-auth","btn-sidebar-signup","w-100",3,"click"],[1,"sidebar-nav-item","border-top","mt-3","pt-3"],[1,"btn","btn-sidebar-logout","w-100",3,"click"]],template:function(t,r){t&1&&(y(0,"nav",0)(1,"div",1)(2,"a",2),I(3,"CommUnity"),_(),y(4,"button",3),$("click",function(){return r.toggleSidebar()}),ae(5,"span",4),_(),y(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),I(10,"Events"),_()(),W(11,Yne,5,0,"li",9)(12,Jne,6,5,"li",10),_()()()(),W(13,ere,1,0,"div",11),y(14,"nav",12)(15,"div",13)(16,"h5",14),I(17,"Menu"),_(),y(18,"button",15),$("click",function(){return r.closeSidebar()}),y(19,"span"),I(20,"\xD7"),_()()(),y(21,"ul",16)(22,"li",17)(23,"a",18),$("click",function(){return r.closeSidebar()}),y(24,"span",19),I(25,"\u{1F4CB}"),_(),I(26," Events "),_()(),W(27,tre,5,3,"li",20)(28,nre,5,0,"li",20)(29,rre,3,0,"li",20)(30,ire,3,0,"li",20)(31,ore,3,0,"li",21),_()(),ae(32,"router-outlet")(33,"app-unverified-email-modal")(34,"app-login-modal")(35,"app-signup-modal")),t&2&&(w(4),mi("aria-expanded",r.sidebarOpen()),w(7),M("ngIf",!r.authService.currentUserSig()),w(),M("ngIf",r.authService.currentUserSig()),w(),M("ngIf",r.sidebarOpen()),w(),at("open",r.sidebarOpen()),w(13),M("ngIf",r.authService.currentUserSig()),w(),M("ngIf",r.authService.currentUserSig()),w(),M("ngIf",!r.authService.currentUserSig()),w(),M("ngIf",!r.authService.currentUserSig()),w(),M("ngIf",r.authService.currentUserSig()))},dependencies:[xt,th,dt,Nb,Be,nt,Qy,Yy,Zy],styles:[`[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.navbar-custom[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--black-forest) 0%,#1a2110 100%);box-shadow:0 4px 12px #28361833;padding:.5rem 0;position:sticky;top:0;z-index:999}.navbar-custom[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--cornsilk)!important;transition:all .3s cubic-bezier(.23,1,.32,1);letter-spacing:-.5px;flex-shrink:0}.navbar-brand[_ngcontent-%COMP%]:hover{color:var(--sunlit-clay)!important;transform:scale(1.05)}.navbar-collapse[_ngcontent-%COMP%]{flex:1;justify-content:flex-end}.navbar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0}.nav-link[_ngcontent-%COMP%]{color:var(--cornsilk)!important;font-weight:500;transition:all .2s ease;position:relative;margin:0 .75rem;padding:.5rem 0!important;white-space:nowrap}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{color:var(--sunlit-clay)!important}.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:6px;height:6px;background-color:var(--sunlit-clay);border-radius:50%}.nav-profile-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;text-decoration:none;border-radius:50%;transition:all .3s ease;width:40px;height:40px;min-width:40px;min-height:40px;overflow:hidden;border:2px solid transparent;flex-shrink:0}.nav-profile-link[_ngcontent-%COMP%]:hover{border-color:var(--sunlit-clay);transform:scale(1.08)}.nav-profile-link[_ngcontent-%COMP%]:focus{outline:2px solid var(--sunlit-clay);outline-offset:2px;border-radius:50%}.nav-profile-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;opacity:0;transition:opacity .3s ease}.nav-profile-img.loaded[_ngcontent-%COMP%]{opacity:1}.nav-profile-img-skeleton[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,#fefae033,#fefae066,#fefae033);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.btn-nav-login[_ngcontent-%COMP%], .btn-nav-signup[_ngcontent-%COMP%], .btn-nav-logout[_ngcontent-%COMP%]{font-weight:600;border-radius:6px;padding:.5rem 1rem;margin:0 .25rem;transition:all .2s ease;border:none;font-size:.95rem;cursor:pointer;white-space:nowrap;flex-shrink:0}.btn-nav-login[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid var(--cornsilk)}.btn-nav-login[_ngcontent-%COMP%]:hover{background-color:var(--cornsilk);color:var(--black-forest);transform:translateY(-2px);box-shadow:0 4px 12px #fefae033}.btn-nav-signup[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);color:var(--black-forest)}.btn-nav-signup[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);transform:translateY(-2px);box-shadow:0 4px 12px #dda15e4d}.btn-nav-logout[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid #dc3545;padding:.45rem .9rem;font-size:.9rem}.btn-nav-logout[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-2px)}.navbar-toggler[_ngcontent-%COMP%]{border:none!important;padding:0!important}.navbar-toggler[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:2px solid var(--sunlit-clay);outline-offset:2px;border-radius:4px}.navbar-toggler-icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%23fefae0' stroke-width='2.5' d='M6 6h18M6 15h18M6 24h18'/%3e%3c/svg%3e");width:28px;height:28px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1040;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sidebar-drawer[_ngcontent-%COMP%]{position:fixed;top:0;left:-350px;width:350px;height:100vh;background:var(--black-forest);z-index:1050;transition:left .3s cubic-bezier(.23,1,.32,1);display:flex;flex-direction:column;box-shadow:2px 0 12px #0000004d}.sidebar-drawer.open[_ngcontent-%COMP%]{left:0}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid rgba(254,250,224,.1);background:linear-gradient(135deg,var(--black-forest) 0%,#1a2110 100%)}.sidebar-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:var(--cornsilk);font-weight:700}.btn-close-sidebar[_ngcontent-%COMP%]{background:none;border:none;color:var(--cornsilk);font-size:1.75rem;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.btn-close-sidebar[_ngcontent-%COMP%]:hover{background-color:#fefae01a;color:var(--sunlit-clay)}.sidebar-nav[_ngcontent-%COMP%]{list-style:none;padding:1rem 0;margin:0;flex:1;overflow-y:auto}.sidebar-nav-item[_ngcontent-%COMP%]{margin:0;border:none}.sidebar-nav-item.border-top[_ngcontent-%COMP%]{border-top:1px solid rgba(254,250,224,.1)!important}.sidebar-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;color:var(--cornsilk);text-decoration:none;padding:.875rem 1.5rem;transition:all .2s ease;border-left:3px solid transparent;margin:0 .5rem;border-radius:0 6px 6px 0}.sidebar-nav-link[_ngcontent-%COMP%]:hover{background-color:#fefae014;color:var(--sunlit-clay);border-left-color:var(--sunlit-clay)}.sidebar-nav-link.active[_ngcontent-%COMP%]{background-color:#dda15e26;color:var(--sunlit-clay);border-left-color:var(--sunlit-clay);font-weight:600}.sidebar-nav-link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem;min-width:24px}.btn-sidebar-auth[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid var(--cornsilk);font-weight:600;border-radius:6px;padding:.625rem 1rem;margin:0 .5rem;transition:all .2s ease}.btn-sidebar-auth[_ngcontent-%COMP%]:hover{background-color:var(--cornsilk);color:var(--black-forest)}.btn-sidebar-auth.btn-sidebar-signup[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);color:var(--black-forest);border-color:var(--sunlit-clay);margin-top:.5rem}.btn-sidebar-auth.btn-sidebar-signup[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood)}.btn-sidebar-logout[_ngcontent-%COMP%]{background-color:transparent;color:#dc3545;border:2px solid #dc3545;font-weight:600;border-radius:6px;padding:.625rem 1rem;transition:all .2s ease}.btn-sidebar-logout[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}@media (max-width: 991px){.navbar-custom[_ngcontent-%COMP%]{padding:.4rem 0}.navbar-collapse[_ngcontent-%COMP%]{display:none!important}.nav-link[_ngcontent-%COMP%]{margin:.25rem 0}.nav-profile-link[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;min-height:36px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.25rem}.btn-nav-login[_ngcontent-%COMP%], .btn-nav-signup[_ngcontent-%COMP%], .btn-nav-logout[_ngcontent-%COMP%]{padding:.4rem .75rem;font-size:.85rem}}@media (max-width: 576px){.sidebar-drawer[_ngcontent-%COMP%]{width:280px;left:-280px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.05rem}.nav-profile-link[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px;min-height:32px}}.sidebar-nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.95rem}.sidebar-nav-link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem}.btn-sidebar-auth[_ngcontent-%COMP%]{margin:0;padding:.5rem 1rem}.event-card[_ngcontent-%COMP%]{width:100%}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:0}`]})};ob(Xy,ZB).catch(n=>console.error(n));
