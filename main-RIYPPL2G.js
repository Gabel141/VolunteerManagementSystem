var k3=Object.defineProperty,O3=Object.defineProperties;var F3=Object.getOwnPropertyDescriptors;var FM=Object.getOwnPropertySymbols,L3=Object.getPrototypeOf,V3=Object.prototype.hasOwnProperty,U3=Object.prototype.propertyIsEnumerable,j3=Reflect.get;var LM=(n,e,t)=>e in n?k3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})V3.call(e,t)&&LM(n,t,e[t]);if(FM)for(var t of FM(e))U3.call(e,t)&&LM(n,t,e[t]);return n},ue=(n,e)=>O3(n,F3(e));var Bo=(n,e,t)=>j3(L3(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var DE;function pp(){return DE}function li(n){let e=DE;return DE=n,e}var VM=Symbol("NotFound");function fc(n){return n===VM||n?.name==="\u0275NotFound"}var hn=null,gp=!1,SE=1,B3=null,fn=Symbol("SIGNAL");function Ee(n){let e=hn;return hn=n,e}function yp(){return hn}var pc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gc(n){if(gp)throw new Error("");if(hn===null)return;hn.consumerOnSignalRead(n);let e=hn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=hn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:hn.producers,t!==void 0&&t.producer===n)){hn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===hn&&(!r||H3(i,hn)))return;let o=vc(hn),s={producer:n,consumer:hn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};hn.producersTail=s,e!==void 0?e.nextProducer=s:hn.producers=s,o&&$M(n,s)}function UM(){SE++}function Ep(n){if(!(vc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===SE)){if(!n.producerMustRecompute(n)&&!Hu(n)){_p(n);return}n.producerRecomputeValue(n),_p(n)}}function AE(n){if(n.consumers===void 0)return;let e=gp;gp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||$3(r)}}finally{gp=e}}function xE(){return hn?.consumerAllowSignalWrites!==!1}function $3(n){n.dirty=!0,AE(n),n.consumerMarkedDirty?.(n)}function _p(n){n.dirty=!1,n.lastCleanEpoch=SE}function mc(n){return n&&jM(n),Ee(n)}function jM(n){n.producersTail=void 0,n.recomputing=!0}function $u(n,e){Ee(e),n&&BM(n)}function BM(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(vc(n))do t=ME(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Hu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Ep(t),r!==t.version))return!0}return!1}function qu(n){if(vc(n)){let e=n.producers;for(;e!==void 0;)e=ME(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function $M(n,e){let t=n.consumersTail,r=vc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)$M(i.producer,i)}function ME(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!vc(e)){let o=e.producers;for(;o!==void 0;)o=ME(o)}return t}function vc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function wp(n){B3?.(n)}function H3(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function bp(n,e){return Object.is(n,e)}function Ip(n,e){let t=Object.create(q3);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ep(t),gc(t),t.value===Bu)throw t.error;return t.value};return r[fn]=t,wp(t),r}var mp=Symbol("UNSET"),vp=Symbol("COMPUTING"),Bu=Symbol("ERRORED"),q3=ue(j({},pc),{value:mp,dirty:!0,error:null,equal:bp,kind:"computed",producerMustRecompute(n){return n.value===mp||n.value===vp},producerRecomputeValue(n){if(n.value===vp)throw new Error("");let e=n.value;n.value=vp;let t=mc(n),r,i=!1;try{r=n.computation(),Ee(null),i=e!==mp&&e!==Bu&&r!==Bu&&n.equal(e,r)}catch(o){r=Bu,n.error=o}finally{$u(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function z3(){throw new Error}var HM=z3;function qM(n){HM(n)}function RE(n){HM=n}var W3=null;function PE(n,e){let t=Object.create(Cp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>zM(t);return r[fn]=t,wp(t),[r,s=>_c(t,s),s=>NE(t,s)]}function zM(n){return gc(n),n.value}function _c(n,e){xE()||qM(n),n.equal(n.value,e)||(n.value=e,G3(n))}function NE(n,e){xE()||qM(n),_c(n,e(n.value))}var Cp=ue(j({},pc),{equal:bp,value:void 0,kind:"signal"});function G3(n){n.version++,UM(),AE(n),W3?.(n)}function we(n){return typeof n=="function"}function yc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tp=yc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(we(r))try{r()}catch(o){e=o instanceof Tp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WM(o)}catch(s){e=e??[],s instanceof Tp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qs(t,e)}remove(e){let{_finalizers:t}=this;t&&Qs(t,e),e instanceof n&&e._removeParent(this)}};Et.EMPTY=(()=>{let n=new Et;return n.closed=!0,n})();var kE=Et.EMPTY;function Dp(n){return n instanceof Et||n&&"closed"in n&&we(n.remove)&&we(n.add)&&we(n.unsubscribe)}function WM(n){we(n)?n():n.unsubscribe()}var jr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ec={setTimeout(n,e,...t){let{delegate:r}=Ec;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ec;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sp(n){Ec.setTimeout(()=>{let{onUnhandledError:e}=jr;if(e)e(n);else throw n})}function zu(){}var GM=OE("C",void 0,void 0);function KM(n){return OE("E",void 0,n)}function QM(n){return OE("N",n,void 0)}function OE(n,e,t){return{kind:n,value:e,error:t}}var Ys=null;function wc(n){if(jr.useDeprecatedSynchronousErrorHandling){let e=!Ys;if(e&&(Ys={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ys;if(Ys=null,t)throw r}}else n()}function YM(n){jr.useDeprecatedSynchronousErrorHandling&&Ys&&(Ys.errorThrown=!0,Ys.error=n)}var Zs=class extends Et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Dp(e)&&e.add(this)):this.destination=Y3}static create(e,t,r){return new bc(e,t,r)}next(e){this.isStopped?LE(QM(e),this):this._next(e)}error(e){this.isStopped?LE(KM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?LE(GM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},K3=Function.prototype.bind;function FE(n,e){return K3.call(n,e)}var VE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ap(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ap(r)}else Ap(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ap(t)}}},bc=class extends Zs{constructor(e,t,r){super();let i;if(we(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&jr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&FE(e.next,o),error:e.error&&FE(e.error,o),complete:e.complete&&FE(e.complete,o)}):i=e}this.destination=new VE(i)}};function Ap(n){jr.useDeprecatedSynchronousErrorHandling?YM(n):Sp(n)}function Q3(n){throw n}function LE(n,e){let{onStoppedNotification:t}=jr;t&&Ec.setTimeout(()=>t(n,e))}var Y3={closed:!0,next:zu,error:Q3,complete:zu};var Ic=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rr(n){return n}function xp(...n){return UE(n)}function UE(n){return n.length===0?rr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=X3(t)?t:new bc(t,r,i);return wc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ZM(r),new r((i,o)=>{let s=new bc({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ic](){return this}pipe(...t){return UE(t)(this)}toPromise(t){return t=ZM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ZM(n){var e;return(e=n??jr.Promise)!==null&&e!==void 0?e:Promise}function Z3(n){return n&&we(n.next)&&we(n.error)&&we(n.complete)}function X3(n){return n&&n instanceof Zs||Z3(n)&&Dp(n)}function jE(n){return we(n?.lift)}function Fe(n){return e=>{if(jE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new BE(n,e,t,r,i)}var BE=class extends Zs{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Cc(){return Fe((n,e)=>{let t=null;n._refCount++;let r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Tc=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,jE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Et;let t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Et.EMPTY)}return e}refCount(){return Cc()(this)}};var XM=yc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Mp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new XM}next(t){wc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){wc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){wc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kE:(this.currentObservers=null,o.push(t),new Et(()=>{this.currentObservers=null,Qs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Mp(e,t),n})(),Mp=class extends Ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:kE}};var nn=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $E={now(){return($E.delegate||Date).now()},delegate:void 0};var Rp=class extends Et{constructor(e,t){super()}schedule(e,t=0){return this}};var Wu={setInterval(n,e,...t){let{delegate:r}=Wu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Dc=class extends Rp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Wu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Sc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Sc.now=$E.now;var Ac=class extends Sc{constructor(e,t=Sc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var HE=new Ac(Dc);var Pp=class extends Dc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Np=class extends Ac{};var qE=new Np(Pp);var jn=new he(n=>n.complete());function JM(n){return n&&we(n.schedule)}function eR(n){return n[n.length-1]}function kp(n){return we(eR(n))?n.pop():void 0}function $o(n){return JM(eR(n))?n.pop():void 0}function zE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nR(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function tR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xs(n){return this instanceof Xs?(this.v=n,this):new Xs(n)}function rR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(I){return Promise.resolve(I).then(m,f)}}function a(m,I){r[m]&&(i[m]=function(N){return new Promise(function(k,$){o.push([m,N,k,$])>1||c(m,N)})},I&&(i[m]=I(i[m])))}function c(m,I){try{u(r[m](I))}catch(N){p(o[0][3],N)}}function u(m){m.value instanceof Xs?Promise.resolve(m.value.v).then(d,f):p(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function p(m,I){m(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function iR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tR=="function"?tR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Op=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fp(n){return we(n?.then)}function Lp(n){return we(n[Ic])}function Vp(n){return Symbol.asyncIterator&&we(n?.[Symbol.asyncIterator])}function Up(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function J3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jp=J3();function Bp(n){return we(n?.[jp])}function $p(n){return rR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xs(t.read());if(i)return yield Xs(void 0);yield yield Xs(r)}}finally{t.releaseLock()}})}function Hp(n){return we(n?.getReader)}function Pt(n){if(n instanceof he)return n;if(n!=null){if(Lp(n))return e4(n);if(Op(n))return t4(n);if(Fp(n))return n4(n);if(Vp(n))return oR(n);if(Bp(n))return r4(n);if(Hp(n))return i4(n)}throw Up(n)}function e4(n){return new he(e=>{let t=n[Ic]();if(we(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function t4(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function n4(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sp)})}function r4(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oR(n){return new he(e=>{o4(n,e).catch(t=>e.error(t))})}function i4(n){return oR($p(n))}function o4(n,e){var t,r,i,o;return nR(this,void 0,void 0,function*(){try{for(t=iR(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ho(n,e=0){return Fe((t,r)=>{t.subscribe(ke(r,i=>Bn(r,n,()=>r.next(i),e),()=>Bn(r,n,()=>r.complete(),e),i=>Bn(r,n,()=>r.error(i),e)))})}function qo(n,e=0){return Fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sR(n,e){return Pt(n).pipe(qo(e),Ho(e))}function aR(n,e){return Pt(n).pipe(qo(e),Ho(e))}function cR(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lR(n,e){return new he(t=>{let r;return Bn(t,e,()=>{r=n[jp](),Bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>we(r?.return)&&r.return()})}function qp(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Bn(t,e,()=>{let r=n[Symbol.asyncIterator]();Bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function uR(n,e){return qp($p(n),e)}function dR(n,e){if(n!=null){if(Lp(n))return sR(n,e);if(Op(n))return cR(n,e);if(Fp(n))return aR(n,e);if(Vp(n))return qp(n,e);if(Bp(n))return lR(n,e);if(Hp(n))return uR(n,e)}throw Up(n)}function Be(n,e){return e?dR(n,e):Pt(n)}function ce(...n){let e=$o(n);return Be(n,e)}function zo(n,e){let t=we(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function WE(n){return!!n&&(n instanceof he||we(n.lift)&&we(n.subscribe))}var Gi=yc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(n,e){return Fe((t,r)=>{let i=0;t.subscribe(ke(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:s4}=Array;function a4(n,e){return s4(e)?n(...e):n(e)}function zp(n){return Ie(e=>a4(n,e))}var{isArray:c4}=Array,{getPrototypeOf:l4,prototype:u4,keys:d4}=Object;function Wp(n){if(n.length===1){let e=n[0];if(c4(e))return{args:e,keys:null};if(h4(e)){let t=d4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function h4(n){return n&&typeof n=="object"&&l4(n)===u4}function Gp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Gu(...n){let e=$o(n),t=kp(n),{args:r,keys:i}=Wp(n);if(r.length===0)return Be([],e);let o=new he(f4(r,e,i?s=>Gp(i,s):rr));return t?o.pipe(zp(t)):o}function f4(n,e,t=rr){return r=>{hR(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hR(e,()=>{let u=Be(n[c],e),d=!1;u.subscribe(ke(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hR(n,e,t){n?Bn(t,n,e):e()}function fR(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,p=()=>{f&&!c.length&&!u&&e.complete()},m=N=>u<r?I(N):c.push(N),I=N=>{o&&e.next(N),u++;let k=!1;Pt(t(N,d++)).subscribe(ke(e,$=>{i?.($),o?m($):e.next($)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;c.length&&u<r;){let $=c.shift();s?Bn(e,s,()=>I($)):I($)}p()}catch($){e.error($)}}))};return n.subscribe(ke(e,m,()=>{f=!0,p()})),()=>{a?.()}}function Tt(n,e,t=1/0){return we(e)?Tt((r,i)=>Ie((o,s)=>e(r,o,i,s))(Pt(n(r,i))),t):(typeof e=="number"&&(t=e),Fe((r,i)=>fR(r,i,n,t)))}function Wo(n=1/0){return Tt(rr,n)}function pR(){return Wo(1)}function xc(...n){return pR()(Be(n,$o(n)))}function Ku(n){return new he(e=>{Pt(n()).subscribe(e)})}function GE(...n){let e=kp(n),{args:t,keys:r}=Wp(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Pt(t[d]).subscribe(ke(o,p=>{f||(f=!0,u--),a[d]=p},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Gp(r,a):a),o.complete())}))}});return e?i.pipe(zp(e)):i}function xn(n,e){return Fe((t,r)=>{let i=0;t.subscribe(ke(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ki(n){return Fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ke(t,void 0,void 0,s=>{o=Pt(n(s,Ki(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gR(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(ke(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Go(n,e){return we(e)?Tt(n,e,1):Tt(n,1)}function Ko(n){return Fe((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qi(n){return n<=0?()=>jn:Fe((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Kp(n=p4){return Fe((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function p4(){return new Gi}function Qu(n){return Fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Yi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xn((i,o)=>n(i,o,r)):rr,Qi(1),t?Ko(e):Kp(()=>new Gi))}function Mc(n){return n<=0?()=>jn:Fe((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function KE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xn((i,o)=>n(i,o,r)):rr,Mc(1),t?Ko(e):Kp(()=>new Gi))}function Qp(n,e){return Fe(gR(n,e,arguments.length>=2,!0))}function Yp(...n){let e=$o(n);return Fe((t,r)=>{(e?xc(n,t,e):xc(n,t)).subscribe(r)})}function Mn(n,e){return Fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ke(r,c=>{i?.unsubscribe();let u=0,d=o++;Pt(n(c,d)).subscribe(i=ke(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zp(n){return Fe((e,t)=>{Pt(n).subscribe(ke(t,()=>t.complete(),zu)),!t.closed&&e.subscribe(t)})}function Kt(n,e,t){let r=we(n)||e||t?{next:n,error:e,complete:t}:n;return r?Fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ke(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):rr}function mR(n){let e=Ee(null);try{return n()}finally{Ee(e)}}var Qo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},a0=new Qo("20.3.14");var tg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(Xo(e,t)),this.code=e}};function g4(n){return`NG0${Math.abs(n)}`}function Xo(n,e){return`${g4(n)}${e?": "+e:""}`}var eo=globalThis;function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("")}function yR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Xi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ng(n,e){return n?e?`${n} ${e}`:n:e||""}var m4=Ke({__forward_ref__:Ke});function ir(n){return n.__forward_ref__=ir,n.toString=function(){return Xi(this())},n}function rn(n){return c0(n)?n():n}function c0(n){return typeof n=="function"&&n.hasOwnProperty(m4)&&n.__forward_ref__===ir}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ju(n){return v4(n,rg)}function l0(n){return Ju(n)!==null}function v4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function _4(n){let e=n?.[rg]??null;return e||null}function YE(n){return n&&n.hasOwnProperty(Jp)?n[Jp]:null}var rg=Ke({\u0275prov:Ke}),Jp=Ke({\u0275inj:Ke}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function u0(n){return n&&!!n.\u0275providers}var d0=Ke({\u0275cmp:Ke}),h0=Ke({\u0275dir:Ke}),f0=Ke({\u0275pipe:Ke}),p0=Ke({\u0275mod:Ke}),Zu=Ke({\u0275fac:Ke}),ra=Ke({__NG_ELEMENT_ID__:Ke}),vR=Ke({__NG_ENV_ID__:Ke});function Jo(n){return typeof n=="string"?n:n==null?"":String(n)}function ER(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Jo(n)}var wR=Ke({ngErrorCode:Ke}),y4=Ke({ngErrorMessage:Ke}),E4=Ke({ngTokenPath:Ke});function g0(n,e){return bR("",-200,e)}function ig(n,e){throw new Z(-201,!1)}function bR(n,e,t){let r=new Z(e,n);return r[wR]=e,r[y4]=n,t&&(r[E4]=t),r}function w4(n){return n[wR]}var ZE;function IR(){return ZE}function Rn(n){let e=ZE;return ZE=n,e}function m0(n,e,t){let r=Ju(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ig(n,"Injector")}var b4={},Js=b4,XE="__NG_DI_FLAG__",JE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ea(t)||0;try{return this.injector.get(e,r&8?null:Js,r)}catch(i){if(fc(i))return i;throw i}}};function I4(n,e=0){let t=pp();if(t===void 0)throw new Z(-203,!1);if(t===null)return m0(n,void 0,e);{let r=C4(e),i=t.retrieve(n,r);if(fc(i)){if(r.optional)return null;throw i}return i}}function fe(n,e=0){return(IR()||I4)(rn(n),e)}function S(n,e){return fe(n,ea(e))}function ea(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function C4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function e0(n){let e=[];for(let t=0;t<n.length;t++){let r=rn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=T4(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(fe(i,o))}else e.push(fe(r))}return e}function CR(n,e){return n[XE]=e,n.prototype[XE]=e,n}function T4(n){return n[XE]}function Yo(n,e){let t=n.hasOwnProperty(Zu);return t?n[Zu]:null}function TR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function DR(n){return n.flat(Number.POSITIVE_INFINITY)}function og(n,e){n.forEach(t=>Array.isArray(t)?og(t,e):e(t))}function v0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ed(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function SR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sg(n,e,t){let r=Pc(n,e);return r>=0?n[r|1]=t:(r=~r,SR(n,r,e,t)),r}function ag(n,e){let t=Pc(n,e);if(t>=0)return n[t|1]}function Pc(n,e){return D4(n,e,1)}function D4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var es={},Pn=[],to=new X(""),_0=new X("",-1),y0=new X(""),Xu=class{get(e,t=Js){if(t===Js){let i=bR("",-201);throw i.name="\u0275NotFound",i}return t}};function E0(n){return n[p0]||null}function no(n){return n[d0]||null}function w0(n){return n[h0]||null}function AR(n){return n[f0]||null}function $n(n){return{\u0275providers:n}}function xR(n){return $n([{provide:to,multi:!0,useValue:n}])}function MR(...n){return{\u0275providers:b0(!0,n),\u0275fromNgModule:!0}}function b0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return og(e,s=>{let a=s;eg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&RR(i,o),t}function RR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];I0(i,o=>{e(o,r)})}}function eg(n,e,t,r){if(n=rn(n),!n)return!1;let i=null,o=YE(n),s=!o&&no(n);if(!o&&!s){let c=n.ngModule;if(o=YE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)eg(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{og(o.imports,d=>{eg(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&RR(u,e)}if(!a){let u=Yo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Pn},i),e({provide:y0,useValue:i,multi:!0},i),e({provide:to,useValue:()=>fe(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;I0(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function I0(n,e){for(let t of n)u0(t)&&(t=t.\u0275providers),Array.isArray(t)?I0(t,e):e(t)}var S4=Ke({provide:String,useValue:Ke});function PR(n){return n!==null&&typeof n=="object"&&S4 in n}function A4(n){return!!(n&&n.useExisting)}function x4(n){return!!(n&&n.useFactory)}function ta(n){return typeof n=="function"}function NR(n){return!!n.useClass}var td=new X(""),Xp={},_R={},QE;function nd(){return QE===void 0&&(QE=new Xu),QE}var Dt=class{},na=class extends Dt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,n0(e,s=>this.processProvider(s)),this.records.set(_0,Rc(void 0,this)),i.has("environment")&&this.records.set(Dt,Rc(void 0,this));let o=this.records.get(td);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(y0,Pn,{self:!0}))}retrieve(e,t){let r=ea(t)||0;try{return this.get(e,Js,r)}catch(i){if(fc(i))return i;throw i}}destroy(){Yu(this),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return Yu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Yu(this);let t=li(this),r=Rn(void 0),i;try{return e()}finally{li(t),Rn(r)}}get(e,t=Js,r){if(Yu(this),e.hasOwnProperty(vR))return e[vR](this);let i=ea(r),o,s=li(this),a=Rn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=k4(e)&&Ju(e);d&&this.injectableDefInScope(d)?u=Rc(t0(e),Xp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?nd():this.parent;return t=i&8&&t===Js?null:t,c.get(e,t)}catch(c){let u=w4(c);throw u===-200||u===-201?new Z(u,null):c}finally{Rn(a),li(s)}}resolveInjectorInitializers(){let e=Ee(null),t=li(this),r=Rn(void 0),i;try{let o=this.get(to,Pn,{self:!0});for(let s of o)s()}finally{li(t),Rn(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Xi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=rn(e);let t=ta(e)?e:rn(e&&e.provide),r=R4(e);if(!ta(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Rc(void 0,Xp,!0),i.factory=()=>e0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ee(null);try{if(t.value===_R)throw g0(Xi(e));return t.value===Xp&&(t.value=_R,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&N4(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function t0(n){let e=Ju(n),t=e!==null?e.factory:Yo(n);if(t!==null)return t;if(n instanceof X)throw new Z(204,!1);if(n instanceof Function)return M4(n);throw new Z(204,!1)}function M4(n){if(n.length>0)throw new Z(204,!1);let t=_4(n);return t!==null?()=>t.factory(n):()=>new n}function R4(n){if(PR(n))return Rc(void 0,n.useValue);{let e=C0(n);return Rc(e,Xp)}}function C0(n,e,t){let r;if(ta(n)){let i=rn(n);return Yo(i)||t0(i)}else if(PR(n))r=()=>rn(n.useValue);else if(x4(n))r=()=>n.useFactory(...e0(n.deps||[]));else if(A4(n))r=(i,o)=>fe(rn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=rn(n&&(n.useClass||n.provide));if(P4(n))r=()=>new i(...e0(n.deps));else return Yo(i)||t0(i)}return r}function Yu(n){if(n.destroyed)throw new Z(205,!1)}function Rc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function P4(n){return!!n.deps}function N4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function k4(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function n0(n,e){for(let t of n)Array.isArray(t)?n0(t,e):t&&u0(t)?n0(t.\u0275providers,e):e(t)}function Nt(n,e){let t;n instanceof na?(Yu(n),t=n):t=new JE(n);let r,i=li(t),o=Rn(void 0);try{return e()}finally{li(i),Rn(o)}}function kR(){return IR()!==void 0||pp()!=null}var $r=0,le=1,me=2,Qt=3,gr=4,mr=5,rd=6,Nc=7,on=8,ts=9,ui=10,dt=11,kc=12,T0=13,ia=14,vr=15,ns=16,oa=17,di=18,id=19,D0=20,Zi=21,cg=22,od=23,or=24,sa=25,sd=26,bt=27,OR=1;var rs=7,ad=8,aa=9,pn=10;function hi(n){return Array.isArray(n)&&typeof n[OR]=="object"}function Hr(n){return Array.isArray(n)&&n[OR]===!0}function S0(n){return(n.flags&4)!==0}function is(n){return n.componentOffset>-1}function Oc(n){return(n.flags&1)===1}function fi(n){return!!n.template}function Fc(n){return(n[me]&512)!==0}function ca(n){return(n[me]&256)===256}var FR="svg",LR="math";function _r(n){for(;Array.isArray(n);)n=n[$r];return n}function A0(n,e){return _r(e[n])}function qr(n,e){return _r(e[n.index])}function cd(n,e){return n.data[e]}function ld(n,e){return n[e]}function x0(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function yr(n,e){let t=e[n];return hi(t)?t:t[$r]}function VR(n){return(n[me]&4)===4}function lg(n){return(n[me]&128)===128}function UR(n){return Hr(n[Qt])}function os(n,e){return e==null?null:n[e]}function M0(n){n[oa]=0}function R0(n){n[me]&1024||(n[me]|=1024,lg(n)&&Lc(n))}function jR(n,e){for(;n>0;)e=e[ia],n--;return e}function ud(n){return!!(n[me]&9216||n[or]?.dirty)}function ug(n){n[ui].changeDetectionScheduler?.notify(8),n[me]&64&&(n[me]|=1024),ud(n)&&Lc(n)}function Lc(n){n[ui].changeDetectionScheduler?.notify(0);let e=Zo(n);for(;e!==null&&!(e[me]&8192||(e[me]|=8192,!lg(e)));)e=Zo(e)}function P0(n,e){if(ca(n))throw new Z(911,!1);n[Zi]===null&&(n[Zi]=[]),n[Zi].push(e)}function BR(n,e){if(n[Zi]===null)return;let t=n[Zi].indexOf(e);t!==-1&&n[Zi].splice(t,1)}function Zo(n){let e=n[Qt];return Hr(e)?e[Qt]:e}function N0(n){return n[Nc]??=[]}function k0(n){return n.cleanup??=[]}function $R(n,e,t,r){let i=N0(e);i.push(t),n.firstCreatePass&&k0(n).push(r,i.length-1)}var Te={lFrame:o1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var r0=!1;function HR(){return Te.lFrame.elementDepthCount}function qR(){Te.lFrame.elementDepthCount++}function zR(){Te.lFrame.elementDepthCount--}function dg(){return Te.bindingsEnabled}function WR(){return Te.skipHydrationRootTNode!==null}function GR(n){return Te.skipHydrationRootTNode===n}function KR(){Te.skipHydrationRootTNode=null}function be(){return Te.lFrame.lView}function kt(){return Te.lFrame.tView}function Q(n){return Te.lFrame.contextLView=n,n[on]}function Y(n){return Te.lFrame.contextLView=null,n}function Yt(){let n=O0();for(;n!==null&&n.type===64;)n=n.parent;return n}function O0(){return Te.lFrame.currentTNode}function QR(){let n=Te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Vc(n,e){let t=Te.lFrame;t.currentTNode=n,t.isParent=e}function F0(){return Te.lFrame.isParent}function YR(){Te.lFrame.isParent=!1}function ZR(){return Te.lFrame.contextLView}function L0(){return r0}function V0(n){let e=r0;return r0=n,e}function dd(){let n=Te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function XR(){return Te.lFrame.bindingIndex}function JR(n){return Te.lFrame.bindingIndex=n}function la(){return Te.lFrame.bindingIndex++}function hg(n){let e=Te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function e1(){return Te.lFrame.inI18n}function t1(n,e){let t=Te.lFrame;t.bindingIndex=t.bindingRootIndex=n,fg(e)}function n1(){return Te.lFrame.currentDirectiveIndex}function fg(n){Te.lFrame.currentDirectiveIndex=n}function r1(n){let e=Te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function U0(){return Te.lFrame.currentQueryIndex}function pg(n){Te.lFrame.currentQueryIndex=n}function O4(n){let e=n[le];return e.type===2?e.declTNode:e.type===1?n[mr]:null}function j0(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=O4(o),i===null||(o=o[ia],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Te.lFrame=i1();return r.currentTNode=e,r.lView=n,!0}function gg(n){let e=i1(),t=n[le];Te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function i1(){let n=Te.lFrame,e=n===null?null:n.child;return e===null?o1(n):e}function o1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function s1(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var B0=s1;function mg(){let n=s1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function a1(n){return(Te.lFrame.contextLView=jR(n,Te.lFrame.contextLView))[on]}function ro(){return Te.lFrame.selectedIndex}function ss(n){Te.lFrame.selectedIndex=n}function vg(){let n=Te.lFrame;return cd(n.tView,n.selectedIndex)}function c1(){return Te.lFrame.currentNamespace}var l1=!0;function _g(){return l1}function hd(n){l1=n}function i0(n,e=null,t=null,r){let i=$0(n,e,t,r);return i.resolveInjectorInitializers(),i}function $0(n,e=null,t=null,r,i=new Set){let o=[t||Pn,MR(n)];return r=r||(typeof n=="object"?void 0:Xi(n)),new na(o,e||nd(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=Js;static NULL=new Xu;static create(e,t){if(Array.isArray(e))return i0({name:""},t,e,"");{let r=e.name??"";return i0({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>fe(_0)});static __NG_ELEMENT_ID__=-1},St=new X(""),Er=(()=>{class n{static __NG_ELEMENT_ID__=F4;static __NG_ENV_ID__=t=>t}return n})(),o0=class extends Er{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ca(this._lView)}onDestroy(e){let t=this._lView;return P0(t,e),()=>BR(t,e)}};function F4(){return new o0(be())}var Br=class{_console=console;handleError(e){this._console.error("ERROR",e)}},gn=new X("",{providedIn:"root",factory:()=>{let n=S(Dt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Br),e.handleError(t))}}}),u1={provide:to,useValue:()=>void S(Br),multi:!0},L4=new X("",{providedIn:"root",factory:()=>{let n=S(St).defaultView;if(!n)return;let e=S(gn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),S(Er).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function H0(){return $n([xR(()=>void S(L4))])}function q0(n){return typeof n=="function"&&n[fn]!==void 0}function te(n,e){let[t,r,i]=PE(n,e?.equal),o=t,s=o[fn];return o.set=r,o.update=i,o.asReadonly=d1.bind(o),o}function d1(){let n=this[fn];if(n.readonlyFn===void 0){let e=()=>this();e[fn]=n,n.readonlyFn=e}return n.readonlyFn}function z0(n){return q0(n)&&typeof n.set=="function"}var yg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=V4}return n})();function V4(){return new yg(be(),Yt())}var Ji=class{},fd=new X("",{providedIn:"root",factory:()=>!1});var W0=new X(""),G0=new X(""),pi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new he(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),Uc=(()=>{class n{internalPendingTasks=S(pi);scheduler=S(Ji);errorHandler=S(gn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})();function pd(...n){}var K0=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new s0})}return n})(),s0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function zc(n){return{toString:n}.toString()}var Eg="__parameters__";function W4(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function G4(n,e,t){return zc(()=>{let r=W4(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(Eg)?c[Eg]:Object.defineProperty(c,Eg,{value:[]})[Eg];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var sr=CR(G4("Optional"),8);function K4(n){return typeof n=="function"}var Ag=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function H1(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var br=(()=>{let n=()=>q1;return n.ngInherit=!0,n})();function q1(n){return n.type.prototype.ngOnChanges&&(n.setInput=Y4),Q4}function Q4(){let n=W1(this),e=n?.current;if(e){let t=n.previous;if(t===es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Y4(n,e,t,r,i){let o=this.declaredInputs[r],s=W1(n)||Z4(n,{previous:es,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ag(u&&u.currentValue,t,c===es),H1(n,e,i,t)}var z1="__ngSimpleChanges__";function W1(n){return n[z1]||null}function Z4(n,e){return n[z1]=e}var h1=[];var Ye=function(n,e=null,t){for(let r=0;r<h1.length;r++){let i=h1[r];i(n,e,t)}};function X4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=q1(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function G1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Cg(n,e,t){K1(n,e,3,t)}function Tg(n,e,t,r){(n[me]&3)===t&&K1(n,e,t,r)}function Q0(n,e){let t=n[me];(t&3)===e&&(t&=16383,t+=1,n[me]=t)}function K1(n,e,t,r){let i=r!==void 0?n[oa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[oa]+=65536),(a<o||o==-1)&&(J4(n,t,e,c),n[oa]=(n[oa]&4294901760)+c+2),c++}function f1(n,e){Ye(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),Ye(5,n,e)}}function J4(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[me]>>14<n[oa]>>16&&(n[me]&3)===e&&(n[me]+=16384,f1(a,o)):f1(a,o)}var Bc=-1,da=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function e$(n){return(n.flags&8)!==0}function t$(n){return(n.flags&16)!==0}function n$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];r$(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Q1(n){return n===3||n===4||n===6}function r$(n){return n.charCodeAt(0)===64}function vd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?p1(n,t,i,null,e[++r]):p1(n,t,i,null,null))}}return n}function p1(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Y1(n){return n!==Bc}function xg(n){return n&32767}function i$(n){return n>>16}function Mg(n,e){let t=i$(n),r=e;for(;t>0;)r=r[ia],t--;return r}var sw=!0;function Rg(n){let e=sw;return sw=n,e}var o$=256,Z1=o$-1,X1=5,s$=0,gi={};function a$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ra)&&(r=t[ra]),r==null&&(r=t[ra]=s$++);let i=r&Z1,o=1<<i;e.data[n+(i>>X1)]|=o}function Pg(n,e){let t=J1(n,e);if(t!==-1)return t;let r=e[le];r.firstCreatePass&&(n.injectorIndex=e.length,Y0(r.data,n),Y0(e,null),Y0(r.blueprint,null));let i=Pw(n,e),o=n.injectorIndex;if(Y1(i)){let s=xg(i),a=Mg(i,e),c=a[le].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Y0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function J1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Pw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=iP(i),r===null)return Bc;if(t++,i=i[ia],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Bc}function aw(n,e,t){a$(n,e,t)}function c$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Q1(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function eP(n,e,t){if(t&8||n!==void 0)return n;ig(e,"NodeInjector")}function tP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ts],o=Rn(void 0);try{return i?i.get(e,r,t&8):m0(e,r,t&8)}finally{Rn(o)}}return eP(r,e,t)}function nP(n,e,t,r=0,i){if(n!==null){if(e[me]&2048&&!(r&2)){let s=h$(n,e,t,r,gi);if(s!==gi)return s}let o=rP(n,e,t,r,gi);if(o!==gi)return o}return tP(e,t,r,i)}function rP(n,e,t,r,i){let o=u$(t);if(typeof o=="function"){if(!j0(e,n,r))return r&1?eP(i,t,r):tP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ig(t);else return s}finally{B0()}}else if(typeof o=="number"){let s=null,a=J1(n,e),c=Bc,u=r&1?e[vr][mr]:null;for((a===-1||r&4)&&(c=a===-1?Pw(n,e):e[a+8],c===Bc||!m1(r,!1)?a=-1:(s=e[le],a=xg(c),e=Mg(c,e)));a!==-1;){let d=e[le];if(g1(o,a,d.data)){let f=l$(a,e,t,s,r,u);if(f!==gi)return f}c=e[a+8],c!==Bc&&m1(r,e[le].data[a+8]===u)&&g1(o,a,e)?(s=d,a=xg(c),e=Mg(c,e)):a=-1}}return i}function l$(n,e,t,r,i,o){let s=e[le],a=s.data[n+8],c=r==null?is(a)&&sw:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=Dg(a,s,t,c,u);return d!==null?_d(e,s,d,a,i):gi}function Dg(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,p=i?a+d:u;for(let m=f;m<p;m++){let I=s[m];if(m<c&&t===I||m>=c&&I.type===t)return m}if(i){let m=s[c];if(m&&fi(m)&&m.type===t)return c}return null}function _d(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof da){let a=o;if(a.resolving){let m=ER(s[t]);throw g0(m)}let c=Rg(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,f=a.injectImpl?Rn(a.injectImpl):null,p=j0(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&X4(t,s[t],e)}finally{f!==null&&Rn(f),Rg(c),a.resolving=!1,B0()}}return o}function u$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ra)?n[ra]:void 0;return typeof e=="number"?e>=0?e&Z1:d$:e}function g1(n,e,t){let r=1<<n;return!!(t[e+(n>>X1)]&r)}function m1(n,e){return!(n&2)&&!(n&1&&e)}var ua=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return nP(this._tNode,this._lView,e,ea(r),t)}};function d$(){return new ua(Yt(),be())}function oo(n){return zc(()=>{let e=n.prototype.constructor,t=e[Zu]||cw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Zu]||cw(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cw(n){return c0(n)?()=>{let e=cw(rn(n));return e&&e()}:Yo(n)}function h$(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[me]&2048&&!Fc(s);){let a=rP(o,s,t,r|2,gi);if(a!==gi)return a;let c=o.parent;if(!c){let u=s[D0];if(u){let d=u.get(t,gi,r);if(d!==gi)return d}c=iP(s),s=s[ia]}o=c}return i}function iP(n){let e=n[le],t=e.type;return t===2?e.declTNode:t===1?n[mr]:null}function bd(n){return c$(Yt(),n)}function f$(){return Wc(Yt(),be())}function Wc(n,e){return new mn(qr(n,e))}var mn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=f$}return n})();function p$(n){return n instanceof mn?n.nativeElement:n}function g$(){return this._results[Symbol.iterator]()}var Ng=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ct}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DR(e);(this._changesDetected=!TR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=g$};function oP(n){return(n.flags&128)===128}var Nw=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Nw||{}),sP=new Map,m$=0;function v$(){return m$++}function _$(n){sP.set(n[id],n)}function lw(n){sP.delete(n[id])}var v1="__ngContext__";function $c(n,e){hi(e)?(n[v1]=e[id],_$(e)):n[v1]=e}function aP(n){return lP(n[kc])}function cP(n){return lP(n[gr])}function lP(n){for(;n!==null&&!Hr(n);)n=n[gr];return n}var uw;function kw(n){uw=n}function uP(){if(uw!==void 0)return uw;if(typeof document<"u")return document;throw new Z(210,!1)}var Wg=new X("",{providedIn:"root",factory:()=>y$}),y$="ng",Gg=new X(""),ma=new X("",{providedIn:"platform",factory:()=>"unknown"});var Kg=new X("",{providedIn:"root",factory:()=>uP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var E$="h",w$="b";var dP=!1,hP=new X("",{providedIn:"root",factory:()=>dP});var Ow=new X("");var b$=(n,e,t,r)=>{};function I$(n,e,t,r){b$(n,e,t,r)}function Fw(n){return(n.flags&32)===32}var C$=()=>null;function fP(n,e,t=!1){return C$(n,e,t)}function pP(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];pg(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function dw(n,e,t){pg(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function Lw(n,e,t){if(S0(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ee(r)}}}var io=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(io||{});var wg;function T$(){if(wg===void 0&&(wg=null,eo.trustedTypes))try{wg=eo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wg}function _1(n){return T$()?.createScriptURL(n)||n}var kg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tg})`}};function Gc(n){return n instanceof kg?n.changingThisBreaksApplicationSecurity:n}function Vw(n,e){let t=gP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${tg})`)}return t===e}function gP(n){return n instanceof kg&&n.getTypeName()||null}var D$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mP(n){return n=String(n),n.match(D$)?n:"unsafe:"+n}var Qg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Qg||{});function Ot(n){let e=vP();return e?e.sanitize(Qg.URL,n)||"":Vw(n,"URL")?Gc(n):mP(Jo(n))}function Yg(n){let e=vP();if(e)return _1(e.sanitize(Qg.RESOURCE_URL,n)||"");if(Vw(n,"ResourceURL"))return _1(Gc(n));throw new Z(904,!1)}function S$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Yg:Ot}function Uw(n,e,t){return S$(e,t)(n)}function vP(){let n=be();return n&&n[ui].sanitizer}var A$=/^>|^->|<!--|-->|--!>|<!-$/g,x$=/(<|>)/g,M$="\u200B$1\u200B";function R$(n){return n.replace(A$,e=>e.replace(x$,M$))}function _P(n){return n instanceof Function?n():n}function P$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var yP="ng-template";function N$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&P$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jw(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function jw(n){return n.type===4&&n.value!==yP}function k$(n,e,t){let r=n.type===4&&!t?yP:n.value;return e===r}function O$(n,e,t){let r=4,i=n.attrs,o=i!==null?V$(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!zr(r)&&!zr(c))return!1;if(s&&zr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!k$(n,c,t)||c===""&&e.length===1){if(zr(r))return!1;s=!0}}else if(r&8){if(i===null||!N$(n,i,c,t)){if(zr(r))return!1;s=!0}}else{let u=e[++a],d=F$(c,i,jw(n),t);if(d===-1){if(zr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(zr(r))return!1;s=!0}}}}return zr(r)||s}function zr(n){return(n&1)===0}function F$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return U$(e,n)}function L$(n,e,t=!1){for(let r=0;r<e.length;r++)if(O$(n,e[r],t))return!0;return!1}function V$(n){for(let e=0;e<n.length;e++){let t=n[e];if(Q1(t))return e}return n.length}function U$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function y1(n,e){return n?":not("+e.trim()+")":e}function j$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!zr(s)&&(e+=y1(o,i),i=""),r=s,o=o||!zr(r);t++}return i!==""&&(e+=y1(o,i)),e}function B$(n){return n.map(j$).join(",")}function $$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!zr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Nn={};function H$(n,e){return n.createText(e)}function q$(n,e,t){n.setValue(e,t)}function z$(n,e){return n.createComment(R$(e))}function EP(n,e,t){return n.createElement(e,t)}function Og(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wP(n,e,t){n.appendChild(e,t)}function E1(n,e,t,r,i){r!==null?Og(n,e,t,r,i):wP(n,e,t)}function W$(n,e,t,r){n.removeChild(null,e,t,r)}function G$(n,e,t){n.setAttribute(e,"style",t)}function K$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bP(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&n$(n,e,r),i!==null&&K$(n,e,i),o!==null&&G$(n,e,o)}function Bw(n,e,t,r,i,o,s,a,c,u,d){let f=bt+r,p=f+i,m=Q$(f,p),I=typeof u=="function"?u():u;return m[le]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function Q$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Nn);return t}function Y$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $w(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[$r]=i,f[me]=r|4|128|8|64|1024,(u!==null||n&&n[me]&2048)&&(f[me]|=2048),M0(f),f[Qt]=f[ia]=n,f[on]=t,f[ui]=s||n&&n[ui],f[dt]=a||n&&n[dt],f[ts]=c||n&&n[ts]||null,f[mr]=o,f[id]=v$(),f[rd]=d,f[D0]=u,f[vr]=e.type==2?n[vr]:f,f}function Z$(n,e,t){let r=qr(e,n),i=Y$(t),o=n[ui].rendererFactory,s=Hw(n,$w(n,i,null,IP(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function IP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function CP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Hw(n,e){return n[kc]?n[T0][gr]=e:n[kc]=e,n[T0]=e,e}function w(n=1){TP(kt(),be(),ro()+n,!1)}function TP(n,e,t,r){if(!r)if((e[me]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Cg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Tg(e,o,0,t)}ss(t)}var Zg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Zg||{});function hw(n,e,t,r){let i=Ee(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Zg.SignalBased)!==0&&(c=e[o][fn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):H1(e,c,o,r)}finally{Ee(i)}}var Gr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Gr||{}),X$;function qw(n,e){return X$(n,e)}var Hc=new Set,Xg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Xg||{}),va=new X(""),w1=new Set;function mi(n){w1.has(n)||(w1.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var DP=!1,fw=class extends Ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,kR()&&(this.destroyRef=S(Er,{optional:!0})??void 0,this.pendingTasks=S(pi,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Et&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},gt=fw;function SP(n){let e,t;function r(){n=pd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function b1(n){return queueMicrotask(()=>n()),()=>{n=pd}}var zw="isAngularZone",Fg=zw+"_ID",J$=0,He=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new gt(!1);onMicrotaskEmpty=new gt(!1);onStable=new gt(!1);onError=new gt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=DP}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,nH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eH,pd,pd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},eH={};function Ww(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tH(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){SP(()=>{n.callbackScheduled=!1,pw(n),n.isCheckStableRunning=!0,Ww(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pw(n)}function nH(n){let e=()=>{tH(n)},t=J$++;n._inner=n._inner.fork({name:"angular",properties:{[zw]:!0,[Fg]:t,[Fg+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(rH(c))return r.invokeTask(o,s,a,c);try{return I1(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),C1(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return I1(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!iH(c)&&e(),C1(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pw(n),Ww(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function I1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function C1(n){n._nesting--,Ww(n)}var Lg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new gt;onMicrotaskEmpty=new gt;onStable=new gt;onError=new gt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function rH(n){return AP(n,"__ignore_ng_zone__")}function iH(n){return AP(n,"__scheduler_tick__")}function AP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Gw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),xP=[0,1,2,3],MP=(()=>{class n{ngZone=S(He);scheduler=S(Ji);errorHandler=S(Br,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(va,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ye(16),this.executing=!0;for(let r of xP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ye(17)}register(t){let{view:r}=t;r!==void 0?((r[sa]??=[]).push(t),Lc(r),r[me]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Xg.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[sa];e&&(this.view[sa]=e.filter(t=>t!==this))}};function Id(n,e){let t=e?.injector??S(wt);return mi("NgAfterNextRender"),sH(n,t,e,!0)}function oH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function sH(n,e,t,r){let i=e.get(Gw);i.impl??=e.get(MP);let o=e.get(va,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Er):null,a=e.get(yg,null,{optional:!0}),c=new Vg(i.impl,oH(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var aH=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function RP(n,e,t){let r=n.get(aH);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function cH(n,e){for(let[t,r]of e)RP(n,r.animateFns)}function T1(n,e,t,r){let i=n?.[sd]?.enter;e!==null&&i&&i.has(t.index)&&cH(r,i)}function jc(n,e,t,r,i,o,s,a){if(i!=null){let c,u=!1;Hr(i)?c=i:hi(i)&&(u=!0,i=i[$r]);let d=_r(i);n===0&&r!==null?(T1(a,r,o,t),s==null?wP(e,r,d):Og(e,r,d,s||null,!0)):n===1&&r!==null?(T1(a,r,o,t),Og(e,r,d,s||null,!0)):n===2?D1(a,o,t,f=>{W$(e,d,u,f)}):n===3&&D1(a,o,t,()=>{e.destroyNode(d)}),c!=null&&wH(e,n,t,c,o,r,s)}}function lH(n,e){PP(n,e),e[$r]=null,e[mr]=null}function uH(n,e,t,r,i,o){r[$r]=i,r[mr]=e,Jg(n,r,t,1,i,o)}function PP(n,e){e[ui].changeDetectionScheduler?.notify(9),Jg(n,e,e[dt],2,null,null)}function dH(n){let e=n[kc];if(!e)return Z0(n[le],n);for(;e;){let t=null;if(hi(e))t=e[kc];else{let r=e[pn];r&&(t=r)}if(!t){for(;e&&!e[gr]&&e!==n;)hi(e)&&Z0(e[le],e),e=e[Qt];e===null&&(e=n),hi(e)&&Z0(e[le],e),t=e&&e[gr]}e=t}}function Kw(n,e){let t=n[aa],r=t.indexOf(e);t.splice(r,1)}function Qw(n,e){if(ca(e))return;let t=e[dt];t.destroyNode&&Jg(n,e,t,3,null,null),dH(e)}function Z0(n,e){if(ca(e))return;let t=Ee(null);try{e[me]&=-129,e[me]|=256,e[or]&&qu(e[or]),pH(n,e),fH(n,e),e[le].type===1&&e[dt].destroy();let r=e[ns];if(r!==null&&Hr(e[Qt])){r!==e[Qt]&&Kw(r,e);let i=e[di];i!==null&&i.detachView(n)}lw(e)}finally{Ee(t)}}function D1(n,e,t,r){let i=n?.[sd];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Hc.add(n),RP(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),hH(n,r)}else n&&Hc.delete(n),r(!1)},i)}function hH(n,e){let t=n[sd]?.running;if(t){t.then(()=>{n[sd].running=void 0,Hc.delete(n),e(!0)});return}e(!1)}function fH(n,e){let t=n.cleanup,r=e[Nc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Nc]=null);let i=e[Zi];if(i!==null){e[Zi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[od];if(o!==null){e[od]=null;for(let s of o)s.destroy()}}function pH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof da)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ye(4,a,c);try{c.call(a)}finally{Ye(5,a,c)}}else{Ye(4,i,o);try{o.call(i)}finally{Ye(5,i,o)}}}}}function gH(n,e,t){return mH(n,e.parent,t)}function mH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$r];if(is(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===io.None||i===io.Emulated)return null}return qr(r,t)}function vH(n,e,t){return yH(n,e,t)}function _H(n,e,t){return n.type&40?qr(n,t):null}var yH=_H,S1;function Yw(n,e,t,r){let i=gH(n,r,e),o=e[dt],s=r.parent||e[mr],a=vH(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)E1(o,i,t[c],a,!1);else E1(o,i,t,a,!1);S1!==void 0&&S1(o,r,e,t,i)}function gd(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return gw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gd(n,r);{let i=n[e.index];return Hr(i)?gw(-1,i):_r(i)}}else{if(t&128)return gd(n,e.next);if(t&32)return qw(e,n)()||_r(n[e.index]);{let r=NP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zo(n[vr]);return gd(i,r)}else return gd(n,e.next)}}}return null}function NP(n,e){if(e!==null){let r=n[vr][mr],i=e.projection;return r.projection[i]}return null}function gw(n,e){let t=pn+n+1;if(t<e.length){let r=e[t],i=r[le].firstChild;if(i!==null)return gd(r,i)}return e[rs]}function Zw(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ts];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&$c(_r(c),r),t.flags|=2),!Fw(t))if(u&8)Zw(n,e,t.child,r,i,o,!1),jc(e,n,a,i,c,t,o,r);else if(u&32){let d=qw(t,r),f;for(;f=d();)jc(e,n,a,i,f,t,o,r);jc(e,n,a,i,c,t,o,r)}else u&16?EH(n,e,r,t,i,o):jc(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Jg(n,e,t,r,i,o){Zw(t,r,n.firstChild,e,i,o,!1)}function EH(n,e,t,r,i,o){let s=t[vr],c=s[mr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];jc(e,n,t[ts],i,d,r,o,t)}else{let u=c,d=s[Qt];oP(r)&&(u.flags|=128),Zw(n,e,u,d,i,o,!0)}}function wH(n,e,t,r,i,o,s){let a=r[rs],c=_r(r);a!==c&&jc(e,n,t,o,a,i,s);for(let u=pn;u<r.length;u++){let d=r[u];Jg(d[le],d,n,e,o,a)}}function bH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Gr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gr.Important),n.setStyle(t,r,i,o))}}function kP(n,e,t,r,i){let o=ro(),s=r&2;try{ss(-1),s&&e.length>bt&&TP(n,e,bt,!1),Ye(s?2:0,i,t),t(r,i)}finally{ss(o),Ye(s?3:1,i,t)}}function em(n,e,t){xH(n,e,t),(t.flags&64)===64&&MH(n,e,t)}function tm(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function IH(n,e,t,r){let o=r.get(hP,dP)||t===io.ShadowDom,s=n.selectRootElement(e,o);return CH(s),s}function CH(n){TH(n)}var TH=()=>null;function DH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function OP(n,e,t,r,i,o){let s=e[le];if(Jw(n,s,e,t,r)){is(n)&&AH(e,n.index);return}n.type&3&&(t=DH(t)),SH(n,e,t,r,i,o)}function SH(n,e,t,r,i,o){if(n.type&3){let s=qr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function AH(n,e){let t=yr(e,n);t[me]&16||(t[me]|=64)}function xH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;is(t)&&Z$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Pg(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=_d(e,n,s,t);if($c(c,e),o!==null&&kH(e,s-r,c,a,t,o),fi(a)){let u=yr(t.index,e);u[on]=_d(e,n,s,t)}}}function MH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=n1();try{ss(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];fg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&RH(c,u)}}finally{ss(-1),fg(s)}}function RH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Xw(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];L$(e,o.selectors,!1)&&(r??=[],fi(o)?r.unshift(o):r.push(o))}return r}function PH(n,e,t,r,i,o){let s=qr(n,e);NH(e[dt],s,o,n.value,t,r,i)}function NH(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Jo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function kH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];hw(r,t,c,u)}}function FP(n,e,t,r,i){let o=bt+t,s=e[le],a=i(s,e,n,r,t);e[o]=a,Vc(n,!0);let c=n.type===2;return c?(bP(e[dt],a,n),(HR()===0||Oc(n))&&$c(a,e),qR()):$c(a,e),_g()&&(!c||!Fw(n))&&Yw(s,e,a,n),n}function LP(n){let e=n;return F0()?YR():(e=e.parent,Vc(e,!1)),e}function OH(n,e){let t=n[ts];if(!t)return;let r;try{r=t.get(gn,null)}catch{r=null}r?.(e)}function Jw(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=e.data[u];hw(f,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];hw(d,u,r,i),a=!0}return a}function FH(n,e){let t=yr(e,n),r=t[le];LH(r,t);let i=t[$r];i!==null&&t[rd]===null&&(t[rd]=fP(i,t[ts])),Ye(18),eb(r,t,t[on]),Ye(19,t[on])}function LH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function eb(n,e,t){gg(e);try{let r=n.viewQuery;r!==null&&dw(1,r,t);let i=n.template;i!==null&&kP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[di]?.finishViewCreation(n),n.staticContentQueries&&pP(n,e),n.staticViewQueries&&dw(2,n.viewQuery,t);let o=n.components;o!==null&&VH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[me]&=-5,mg()}}function VH(n,e){for(let t=0;t<e.length;t++)FH(n,e[t])}function VP(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[me]&4096?4096:16,c=$w(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ns]=u;let d=n[di];return d!==null&&(c[di]=d.createEmbeddedView(o)),eb(o,c,t),c}finally{Ee(i)}}function mw(n,e){return!e||e.firstChild===null||oP(n)}function yd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(_r(o)),Hr(o)&&UP(o,r);let s=t.type;if(s&8)yd(n,e,t.child,r);else if(s&32){let a=qw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=NP(e,t);if(Array.isArray(a))r.push(...a);else{let c=Zo(e[vr]);yd(c[le],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function UP(n,e){for(let t=pn;t<n.length;t++){let r=n[t],i=r[le].firstChild;i!==null&&yd(r[le],r,i,e)}n[rs]!==n[$r]&&e.push(n[rs])}function jP(n){if(n[sa]!==null){for(let e of n[sa])e.impl.addSequence(e);n[sa].length=0}}var BP=[];function UH(n){return n[or]??jH(n)}function jH(n){let e=BP.pop()??Object.create($H);return e.lView=n,e}function BH(n){n.lView[or]!==n&&(n.lView=null,BP.push(n))}var $H=ue(j({},pc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Lc(n.lView)},consumerOnSignalRead(){this.lView[or]=this}});function HH(n){let e=n[or]??Object.create(qH);return e.lView=n,e}var qH=ue(j({},pc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zo(n.lView);for(;e&&!$P(e[le]);)e=Zo(e);e&&R0(e)},consumerOnSignalRead(){this.lView[or]=this}});function $P(n){return n.type!==2}function HP(n){if(n[od]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[od])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[me]&8192)}}var zH=100;function qP(n,e=0){let r=n[ui].rendererFactory,i=!1;i||r.begin?.();try{WH(n,e)}finally{i||r.end?.()}}function WH(n,e){let t=L0();try{V0(!0),vw(n,e);let r=0;for(;ud(n);){if(r===zH)throw new Z(103,!1);r++,vw(n,1)}}finally{V0(t)}}function GH(n,e,t,r){if(ca(e))return;let i=e[me],o=!1,s=!1;gg(e);let a=!0,c=null,u=null;o||($P(n)?(u=UH(e),c=mc(u)):yp()===null?(a=!1,u=HH(e),c=mc(u)):e[or]&&(qu(e[or]),e[or]=null));try{M0(e),JR(n.bindingStartIndex),t!==null&&kP(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Cg(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Tg(e,m,0,null),Q0(e,0)}if(s||KH(e),HP(e),zP(e,0),n.contentQueries!==null&&pP(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&Cg(e,m)}else{let m=n.contentHooks;m!==null&&Tg(e,m,1),Q0(e,1)}YH(n,e);let f=n.components;f!==null&&GP(e,f,0);let p=n.viewQuery;if(p!==null&&dw(2,p,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Cg(e,m)}else{let m=n.viewHooks;m!==null&&Tg(e,m,2),Q0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cg]){for(let m of e[cg])m();e[cg]=null}o||(jP(e),e[me]&=-73)}catch(d){throw o||Lc(e),d}finally{u!==null&&($u(u,c),a&&BH(u)),mg()}}function zP(n,e){for(let t=aP(n);t!==null;t=cP(t))for(let r=pn;r<t.length;r++){let i=t[r];WP(i,e)}}function KH(n){for(let e=aP(n);e!==null;e=cP(e)){if(!(e[me]&2))continue;let t=e[aa];for(let r=0;r<t.length;r++){let i=t[r];R0(i)}}}function QH(n,e,t){Ye(18);let r=yr(e,n);WP(r,t),Ye(19,r[on])}function WP(n,e){lg(n)&&vw(n,e)}function vw(n,e){let r=n[le],i=n[me],o=n[or],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Hu(o)),s||=!1,o&&(o.dirty=!1),n[me]&=-9217,s)GH(r,n,r.template,n[on]);else if(i&8192){let a=Ee(null);try{HP(n),zP(n,1);let c=r.components;c!==null&&GP(n,c,1),jP(n)}finally{Ee(a)}}}function GP(n,e,t){for(let r=0;r<e.length;r++)QH(n,e[r],t)}function YH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ss(~i);else{let o=i,s=t[++r],a=t[++r];t1(s,o);let c=e[o];Ye(24,c),a(2,c),Ye(25,c)}}}finally{ss(-1)}}function tb(n,e){let t=L0()?64:1088;for(n[ui].changeDetectionScheduler?.notify(e);n;){n[me]|=t;let r=Zo(n);if(Fc(n)&&!r)return n;n=r}return null}function KP(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ZH(n,e){let t=pn+e;if(t<n.length)return n[t]}function QP(n,e,t,r=!0){let i=e[le];if(JH(i,e,n,t),r){let s=gw(t,n),a=e[dt],c=a.parentNode(n[rs]);c!==null&&uH(i,n[mr],a,e,c,s)}let o=e[rd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function XH(n,e){let t=Ug(n,e);return t!==void 0&&Qw(t[le],t),t}function Ug(n,e){if(n.length<=pn)return;let t=pn+e,r=n[t];if(r){let i=r[ns];i!==null&&i!==n&&Kw(i,r),e>0&&(n[t-1][gr]=r[gr]);let o=ed(n,pn+e);lH(r[le],r);let s=o[di];s!==null&&s.detachView(o[le]),r[Qt]=null,r[gr]=null,r[me]&=-129}return r}function JH(n,e,t,r){let i=pn+r,o=t.length;r>0&&(t[i-1][gr]=e),r<o-pn?(e[gr]=t[i],v0(t,pn+r,e)):(t.push(e),e[gr]=null),e[Qt]=t;let s=e[ns];s!==null&&t!==s&&YP(s,e);let a=e[di];a!==null&&a.insertView(n),ug(e),e[me]|=128}function YP(n,e){let t=n[aa],r=e[Qt];if(hi(r))n[me]|=2;else{let i=r[Qt][vr];e[vr]!==i&&(n[me]|=2)}t===null?n[aa]=[e]:t.push(e)}var as=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[le];return yd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return ca(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qt];if(Hr(e)){let t=e[ad],r=t?t.indexOf(this):-1;r>-1&&(Ug(e,r),ed(t,r))}this._attachedToViewContainer=!1}Qw(this._lView[le],this._lView)}onDestroy(e){P0(this._lView,e)}markForCheck(){tb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[me]&=-129}reattach(){ug(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,qP(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fc(this._lView),t=this._lView[ns];t!==null&&!e&&Kw(t,this._lView),PP(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Fc(this._lView),r=this._lView[ns];r!==null&&!t&&YP(r,this._lView),ug(this._lView)}};var cs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=e6;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=VP(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new as(o)}}return n})();function e6(){return nb(Yt(),be())}function nb(n,e){return n.type&4?new cs(e,n,Wc(n,e)):null}function nm(n,e,t,r,i){let o=n.data[e];if(o===null)o=t6(n,e,t,r,i),e1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=QR();o.injectorIndex=s===null?-1:s.injectorIndex}return Vc(o,!0),o}function t6(n,e,t,r,i){let o=O0(),s=F0(),a=s?o:o&&o.parent,c=n.data[e]=r6(n,a,t,e,r,i);return n6(n,c,o,s),c}function n6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function r6(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return WR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ede=new RegExp(`^(\\d+)*(${w$}|${E$})*(.*)`);var i6=()=>null,o6=()=>null;function A1(n,e){return i6(n,e)}function s6(n,e,t){return o6(n,e,t)}var ZP=class{},rm=class{},_w=class{resolveComponentFactory(e){throw new Z(917,!1)}},Cd=class{static NULL=new _w},ha=class{},Ir=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>a6()}return n})();function a6(){let n=be(),e=Yt(),t=yr(e.index,n);return(hi(t)?t:n)[dt]}var XP=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var Sg={},yw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Sg,r);return i!==Sg||t===Sg?i:this.parentInjector.get(e,t,r)}};function x1(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ng(i,a);else if(o==2){let c=a,u=e[++s];r=ng(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=0){let t=be();if(t===null)return fe(n,e);let r=Yt();return nP(r,t,rn(n),e)}function rb(){let n="invalid";throw new Error(n)}function JP(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}u6(n,e,t,a,o,c,u)}o!==null&&r!==null&&c6(t,r,o)}function c6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}function l6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function u6(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let p=0;p<a;p++){let m=r[p];!c&&fi(m)&&(c=!0,l6(n,t,p)),aw(Pg(t,e),n,m.type)}m6(t,n.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let u=!1,d=!1,f=CP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(t.mergedAttrs=vd(t.mergedAttrs,m.hostAttrs),h6(n,t,e,f,m),g6(f,m,i),s!==null&&s.has(m)){let[N,k]=s.get(m);t.directiveToIndex.set(m.type,[f,N+t.directiveStart,k+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let I=m.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}d6(n,t,o)}function d6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))M1(0,e,i,r),M1(1,e,i,r),P1(e,r,!1);else{let o=t.get(i);R1(0,e,o,r),R1(1,e,o,r),P1(e,r,!0)}}}function M1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),eN(e,o)}}function R1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),eN(e,s)}}function eN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function P1(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||jw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function h6(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Yo(i.type,!0)),s=new da(o,fi(i),re,null);n.blueprint[r]=s,t[r]=s,f6(n,e,r,CP(n,t,i.hostVars,Nn),i)}function f6(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;p6(s)!=a&&s.push(a),s.push(t,r,o)}}function p6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function g6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;fi(e)&&(t[""]=n)}}function m6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ib(n,e,t,r,i,o,s,a){let c=e[le],u=c.consts,d=os(u,s),f=nm(c,n,t,r,d);return o&&JP(c,e,f,os(u,a),i),f.mergedAttrs=vd(f.mergedAttrs,f.attrs),f.attrs!==null&&x1(f,f.attrs,!1),f.mergedAttrs!==null&&x1(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function ob(n,e){G1(n,e),S0(e)&&n.queries.elementEnd(e)}function sb(n){return im(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function tN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function im(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ab(n,e,t){return n[e]=t}function wr(n,e,t){if(t===Nn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function cb(n,e,t,r){let i=wr(n,e,t);return wr(n,e+1,r)||i}function v6(n,e,t,r,i){let o=cb(n,e,t,r);return wr(n,e+2,i)||o}function X0(n,e,t){return function r(i){let o=is(n)?yr(n.index,e):e;tb(o,5);let s=e[on],a=N1(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=N1(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function N1(n,e,t,r){let i=Ee(null);try{return Ye(6,e,t),t(r)!==!1}catch(o){return OH(n,o),!1}finally{Ye(7,e,t),Ee(i)}}function _6(n,e,t,r,i,o,s,a){let c=Oc(n),u=!1,d=null;if(!r&&c&&(d=E6(e,t,o,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let f=qr(n,t),p=r?r(f):f;I$(t,p,o,a);let m=i.listen(p,o,a);if(!y6(o)){let I=r?N=>r(_r(N[n.index])):n.index;nN(I,e,t,o,a,m,!1)}}return u}function y6(n){return n.startsWith("animation")||n.startsWith("transition")}function E6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Nc],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function nN(n,e,t,r,i,o,s){let a=e.firstCreatePass?k0(e):null,c=N0(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function k1(n,e,t,r,i,o){let s=e[t],a=e[le],u=a.data[t].outputs[r],f=s[u].subscribe(o);nN(n.index,a,e,i,o,f,!0)}var Ew=Symbol("BINDING");var jg=class extends Cd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new fa(t,this.ngModule)}};function w6(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Zg.SignalBased)!==0};return i&&(o.transform=i),o})}function b6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function I6(n,e,t){let r=e instanceof Dt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new yw(t,r):t}function C6(n){let e=n.get(ha,null);if(e===null)throw new Z(407,!1);let t=n.get(XP,null),r=n.get(Ji,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function T6(n,e){let t=rN(n);return EP(e,t,t==="svg"?FR:t==="math"?LR:null)}function rN(n){return(n.selectors[0][0]||"div").toLowerCase()}var fa=class extends rm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=w6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=b6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=B$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ye(22);let a=Ee(null);try{let c=this.componentDef,u=D6(r,c,s,o),d=I6(c,i||this.ngModule,e),f=C6(d),p=f.rendererFactory.createRenderer(null,c),m=r?IH(p,r,c.encapsulation,d):T6(c,p),I=s?.some(O1)||o?.some($=>typeof $!="function"&&$.bindings.some(O1)),N=$w(null,u,null,512|IP(c),null,null,f,p,d,null,fP(m,d,!0));N[bt]=m,gg(N);let k=null;try{let $=ib(bt,N,2,"#host",()=>u.directiveRegistry,!0,0);bP(p,m,$),$c(m,N),em(u,N,$),Lw(u,$,N),ob(u,$),t!==void 0&&A6($,this.ngContentSelectors,t),k=yr($.index,N),N[on]=k[on],eb(u,N,null)}catch($){throw k!==null&&lw(k),lw(N),$}finally{Ye(23),mg()}return new Bg(this.componentType,N,!!I)}finally{Ee(a)}}};function D6(n,e,t,r){let i=n?["ng-version","20.3.14"]:$$(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[Ew].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let p of f.bindings){a+=p[Ew].requiredVars;let m=d+1;p.create&&(p.targetIdx=m,(o??=[]).push(p)),p.update&&(p.targetIdx=m,(s??=[]).push(p))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,p=w0(f);c.push(p)}return Bw(0,null,S6(o,s),1,a,c,null,null,null,[i],null)}function S6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function O1(n){let e=n[Ew].kind;return e==="input"||e==="twoWay"}var Bg=class extends ZP{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=cd(t[le],bt),this.location=Wc(this._tNode,t),this.instance=yr(this._tNode.index,t)[on],this.hostView=this.changeDetectorRef=new as(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Jw(r,i[le],i,e,t);this.previousInputValues.set(e,t);let s=yr(r.index,i);tb(s,1)}get injector(){return new ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function A6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var so=(()=>{class n{static __NG_ELEMENT_ID__=x6}return n})();function x6(){let n=Yt();return oN(n,be())}var M6=so,iN=class extends M6{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wc(this._hostTNode,this._hostLView)}get injector(){return new ua(this._hostTNode,this._hostLView)}get parentInjector(){let e=Pw(this._hostTNode,this._hostLView);if(Y1(e)){let t=Mg(e,this._hostLView),r=xg(e),i=t[le].data[r+8];return new ua(i,t)}else return new ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=F1(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=A1(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mw(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!K4(e),u;if(c)u=t;else{let k=t||{};u=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef,s=k.directives,a=k.bindings}let d=c?e:new fa(no(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let $=(c?f:this.parentInjector).get(Dt,null);$&&(o=$)}let p=no(d.componentType??{}),m=A1(this._lContainer,p?.id??null),I=m?.firstChild??null,N=d.create(f,i,I,o,s,a);return this.insertImpl(N.hostView,u,mw(this._hostTNode,m)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(UR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Qt],u=new iN(c,c[mr],c[Qt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return QP(s,i,o,r),e.attachToViewContainerRef(),v0(J0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=F1(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);r&&(ed(J0(this._lContainer),t),Qw(r[le],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);return r&&ed(J0(this._lContainer),t)!=null?new as(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function F1(n){return n[ad]}function J0(n){return n[ad]||(n[ad]=[])}function oN(n,e){let t,r=e[n.index];return Hr(r)?t=r:(t=KP(r,e,null,n),e[n.index]=t,Hw(e,t)),P6(t,e,n,r),new iN(t,n,e)}function R6(n,e){let t=n[dt],r=t.createComment(""),i=qr(e,n),o=t.parentNode(i);return Og(t,o,r,t.nextSibling(i),!1),r}var P6=O6,N6=()=>!1;function k6(n,e,t){return N6(n,e,t)}function O6(n,e,t,r){if(n[rs])return;let i;t.type&8?i=_r(r):i=R6(e,t),n[rs]=i}var ww=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},bw=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)lb(e,t).matches!==null&&this.queries[t].setDirty()}},Iw=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=H6(e):this.predicate=e}},Cw=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Tw=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,F6(t,o)),this.matchTNodeWithReadOption(e,t,Dg(t,e,o,!1,!1))}else r===cs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Dg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===mn||i===so||i===cs&&t.type&4)this.addMatch(t.index,-2);else{let o=Dg(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function F6(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function L6(n,e){return n.type&11?Wc(n,e):n.type&4?nb(n,e):null}function V6(n,e,t,r){return t===-1?L6(e,n):t===-2?U6(n,e,r):_d(n,n[le],t,e)}function U6(n,e,t){if(t===mn)return Wc(e,n);if(t===cs)return nb(e,n);if(t===so)return oN(e,n)}function sN(n,e,t,r){let i=e[di].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(V6(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Dw(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=sN(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=pn;f<d.length;f++){let p=d[f];p[ns]===p[Qt]&&Dw(p[le],p,u,r)}if(d[aa]!==null){let f=d[aa];for(let p=0;p<f.length;p++){let m=f[p];Dw(m[le],m,u,r)}}}}}return r}function j6(n,e){return n[di].queries[e].queryList}function B6(n,e,t){let r=new Ng((t&4)===4);return $R(n,e,r,r.destroy),(e[di]??=new bw).queries.push(new ww(r))-1}function $6(n,e,t,r){let i=kt();if(i.firstCreatePass){let o=Yt();q6(i,new Iw(e,t,r),o.index),z6(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return B6(i,be(),t)}function H6(n){return n.split(",").map(e=>e.trim())}function q6(n,e,t){n.queries===null&&(n.queries=new Cw),n.queries.track(new Tw(e,t))}function z6(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function lb(n,e){return n.queries.getByIndex(e)}function W6(n,e){let t=n[le],r=lb(t,e);return r.crossesNgTemplate?Dw(t,n,e,[]):sN(t,n,r,e)}var pa=class{},om=class{};var $g=class extends pa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new jg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=E0(e);this._bootstrapComponents=_P(o.bootstrap),this._r3Injector=$0(e,t,[{provide:pa,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver},...r],Xi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Hg=class extends om{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new $g(this.moduleType,e,[])}};var Ed=class extends pa{injector;componentFactoryResolver=new jg(this);instance=null;constructor(e){super();let t=new na([...e.providers,{provide:pa,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],e.parent||nd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kc(n,e,t=null){return new Ed({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var G6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=b0(!1,t.type),i=r.length>0?Kc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(fe(Dt))})}return n})();function Ue(n){return zc(()=>{let e=aN(n),t=ue(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Nw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(G6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||io.Emulated,styles:n.styles||Pn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&mi("NgStandalone"),cN(t);let r=n.dependencies;return t.directiveDefs=L1(r,K6),t.pipeDefs=L1(r,AR),t.id=Z6(t),t})}function K6(n){return no(n)||w0(n)}function Kr(n){return zc(()=>({type:n.type,bootstrap:n.bootstrap||Pn,declarations:n.declarations||Pn,imports:n.imports||Pn,exports:n.exports||Pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Q6(n,e){if(n==null)return es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Zg.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function Y6(n){if(n==null)return es;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function nt(n){return zc(()=>{let e=aN(n);return cN(e),e})}function Td(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function aN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||es,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Q6(n.inputs,e),outputs:Y6(n.outputs),debugInfo:null}}function cN(n){n.features?.forEach(e=>e(n))}function L1(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Z6(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function X6(n){return Object.getPrototypeOf(n.prototype).constructor}function Hn(n){let e=X6(n.type),t=!0,r=[n];for(;e;){let i;if(fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ew(n.inputs),s.declaredInputs=ew(n.declaredInputs),s.outputs=ew(n.outputs);let a=i.hostBindings;a&&r5(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&t5(n,c),u&&n5(n,u),J6(n,i),yR(n.outputs,i.outputs),fi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Hn&&(t=!1)}}e=Object.getPrototypeOf(e)}e5(r)}function J6(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function e5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vd(i.hostAttrs,t=vd(t,i.hostAttrs))}}function ew(n){return n===es?{}:n===Pn?[]:n}function t5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function n5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function r5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function lN(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=vd(n.mergedAttrs,n.attrs);let d=n.tView=Bw(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Vc(n,!1);let c=o5(t,e,n,r);_g()&&Yw(t,e,c,n),$c(c,e);let u=KP(c,e,c,n);e[r+bt]=u,Hw(e,u),k6(u,n,e)}function i5(n,e,t,r,i,o,s,a,c,u,d){let f=t+bt,p;return e.firstCreatePass?(p=nm(e,f,4,s||null,a||null),dg()&&JP(e,n,p,os(e.consts,u),Xw),G1(e,p)):p=e.data[f],lN(p,n,e,t,r,i,o,c),Oc(p)&&em(e,n,p),u!=null&&tm(n,p,d),p}function uN(n,e,t,r,i,o,s,a,c,u,d){let f=t+bt,p;if(e.firstCreatePass){if(p=nm(e,f,4,s||null,a||null),u!=null){let m=os(e.consts,u);p.localNames=[];for(let I=0;I<m.length;I+=2)p.localNames.push(m[I],-1)}}else p=e.data[f];return lN(p,n,e,t,r,i,o,c),u!=null&&tm(n,p,d),p}function G(n,e,t,r,i,o,s,a){let c=be(),u=kt(),d=os(u.consts,o);return i5(c,u,n,e,t,r,i,d,void 0,s,a),G}var o5=s5;function s5(n,e,t,r){return hd(!0),e[dt].createComment("")}var ub=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var db=new X("");function ao(n){return!!n&&typeof n.then=="function"}function sm(n){return!!n&&typeof n.subscribe=="function"}var hb=new X("");function am(n){return $n([{provide:hb,multi:!0,useValue:n}])}var fb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(hb,{optional:!0})??[];injector=S(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Nt(this.injector,i);if(ao(o))t.push(o);else if(sm(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dd=new X("");function dN(){RE(()=>{let n="";throw new Z(600,n)})}function hN(n){return n.isBoundToModule}var a5=10;var co=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(gn);afterRenderManager=S(Gw);zonelessEnabled=S(fd);rootEffectScheduler=S(K0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ct;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(pi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ie(t=>!t))}constructor(){S(va,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(Dt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){return this._injector.get(He).run(()=>{Ye(10);let s=t instanceof rm;if(!this._injector.get(fb).done){let I="";throw new Z(405,I)}let c;s?c=t:c=this._injector.get(Cd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=hN(c)?void 0:this._injector.get(pa),d=r||c.selector,f=c.create(i,[],d,u),p=f.location.nativeElement,m=f.injector.get(db,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),md(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),Ye(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ye(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Xg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ee(t),this.afterTick.next(),Ye(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ha,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<a5;)Ye(14),this.synchronizeOnce(),Ye(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ud(i))continue;let o=r&&!this.zonelessEnabled?0:1;qP(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ud(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;md(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Dd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>md(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function md(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vi(n,e,t,r){let i=be(),o=la();if(wr(i,o,e)){let s=kt(),a=vg();PH(a,i,n,e,t,r)}return vi}var ade=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function vn(n,e,t,r,i,o,s,a){mi("NgControlFlow");let c=be(),u=kt(),d=os(u.consts,o);return uN(c,u,n,e,t,r,i,d,256,s,a),pb}function pb(n,e,t,r,i,o,s,a){mi("NgControlFlow");let c=be(),u=kt(),d=os(u.consts,o);return uN(c,u,n,e,t,r,i,d,512,s,a),pb}function _n(n,e){mi("NgControlFlow");let t=be(),r=la(),i=t[r]!==Nn?t[r]:-1,o=i!==-1?V1(t,bt+i):void 0,s=0;if(wr(t,r,n)){let a=Ee(null);try{if(o!==void 0&&XH(o,s),n!==-1){let c=bt+n,u=V1(t,c),d=c5(t[le],c),f=s6(u,d,t),p=VP(t,d,e,{dehydratedView:f});QP(u,p,s,mw(d,f))}}finally{Ee(a)}}else if(o!==void 0){let a=ZH(o,s);a!==void 0&&(a[on]=e)}}function V1(n,e){return n[e]}function c5(n,e){return cd(n,e)}function A(n,e,t){let r=be(),i=la();if(wr(r,i,e)){let o=kt(),s=vg();OP(s,r,n,e,r[dt],t)}return A}function Sw(n,e,t,r,i){Jw(e,n,t,i?"class":"style",r)}function _(n,e,t,r){let i=be(),o=i[le],s=n+bt,a=o.firstCreatePass?ib(s,i,2,e,Xw,dg(),t,r):o.data[s];if(FP(a,i,n,e,l5),Oc(a)){let c=i[le];em(c,i,a),Lw(c,a,i)}return r!=null&&tm(i,a),_}function v(){let n=kt(),e=Yt(),t=LP(e);return n.firstCreatePass&&ob(n,t),GR(t)&&KR(),zR(),t.classesWithoutHost!=null&&e$(t)&&Sw(n,t,be(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&t$(t)&&Sw(n,t,be(),t.stylesWithoutHost,!1),v}function oe(n,e,t,r){return _(n,e,t,r),v(),oe}var l5=(n,e,t,r,i)=>(hd(!0),EP(e[dt],r,c1()));function lo(n,e,t){let r=be(),i=r[le],o=n+bt,s=i.firstCreatePass?ib(o,r,8,"ng-container",Xw,dg(),e,t):i.data[o];if(FP(s,r,n,"ng-container",u5),Oc(s)){let a=r[le];em(a,r,s),Lw(a,s,r)}return t!=null&&tm(r,s),lo}function uo(){let n=kt(),e=Yt(),t=LP(e);return n.firstCreatePass&&ob(n,t),uo}var u5=(n,e,t,r,i)=>(hd(!0),z$(e[dt],""));function ve(){return be()}var bg=void 0;function d5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var h5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bg,"{1} 'at' {0}",bg],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",d5],tw={};function ar(n){let e=f5(n),t=U1(e);if(t)return t;let r=e.split("-")[0];if(t=U1(r),t)return t;if(r==="en")return h5;throw new Z(701,!1)}function U1(n){return n in tw||(tw[n]=eo.ng&&eo.ng.common&&eo.ng.common.locales&&eo.ng.common.locales[n]),tw[n]}var At=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(At||{});function f5(n){return n.toLowerCase().replace(/_/g,"-")}var Sd="en-US";var p5=Sd;function fN(n){typeof n=="string"&&(p5=n.toLowerCase().replace(/_/g,"-"))}function H(n,e,t){let r=be(),i=kt(),o=Yt();return pN(i,r,r[dt],o,n,e,t),H}function pN(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=X0(r,e,o),_6(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let p=d[f],m=d[f+1];c??=X0(r,e,o),k1(r,e,p,m,i,c)}if(u&&u.length)for(let f of u)c??=X0(r,e,o),k1(r,e,f,i,i,c)}}function F(n=1){return a1(n)}function gb(n,e,t,r){$6(n,e,t,r)}function mb(n){let e=be(),t=kt(),r=U0();pg(r+1);let i=lb(t,r);if(n.dirty&&VR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=W6(e,r);n.reset(o,p$),n.notifyOnChanges()}return!0}return!1}function vb(){return j6(be(),U0())}function _b(n){let e=ZR();return ld(e,bt+n)}function Ig(n,e){return n<<17|e<<2}function ga(n){return n>>17&32767}function g5(n){return(n&2)==2}function m5(n,e){return n&131071|e<<17}function Aw(n){return n|2}function qc(n){return(n&131068)>>2}function nw(n,e){return n&-131069|e<<2}function v5(n){return(n&1)===1}function xw(n){return n|1}function _5(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ga(s),c=qc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Pc(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let p=ga(n[a+1]);n[r+1]=Ig(p,a),p!==0&&(n[p+1]=nw(n[p+1],r)),n[a+1]=m5(n[a+1],r)}else n[r+1]=Ig(a,0),a!==0&&(n[a+1]=nw(n[a+1],r)),a=r;else n[r+1]=Ig(c,0),a===0?a=r:n[c+1]=nw(n[c+1],r),c=r;u&&(n[r+1]=Aw(n[r+1])),j1(n,d,r,!0),j1(n,d,r,!1),y5(e,d,n,r,o),s=Ig(a,c),o?e.classBindings=s:e.styleBindings=s}function y5(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Pc(o,e)>=0&&(t[r+1]=xw(t[r+1]))}function j1(n,e,t,r){let i=n[t+1],o=e===null,s=r?ga(i):qc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];E5(c,e)&&(a=!0,n[s+1]=r?xw(u):Aw(u)),s=r?ga(u):qc(u)}a&&(n[t+1]=r?Aw(i):xw(i))}function E5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pc(n,e)>=0:!1}var Wr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function w5(n){return n.substring(Wr.key,Wr.keyEnd)}function b5(n){return I5(n),gN(n,mN(n,0,Wr.textEnd))}function gN(n,e){let t=Wr.textEnd;return t===e?-1:(e=Wr.keyEnd=C5(n,Wr.key=e,t),mN(n,e,t))}function I5(n){Wr.key=0,Wr.keyEnd=0,Wr.value=0,Wr.valueEnd=0,Wr.textEnd=n.length}function mN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function C5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function _i(n,e,t){return vN(n,e,t,!1),_i}function ct(n,e){return vN(n,e,null,!0),ct}function yb(n){D5(P5,T5,n,!0)}function T5(n,e){for(let t=b5(e);t>=0;t=gN(e,t))sg(n,w5(e),!0)}function vN(n,e,t,r){let i=be(),o=kt(),s=hg(2);if(o.firstUpdatePass&&yN(o,n,s,r),e!==Nn&&wr(i,s,e)){let a=o.data[ro()];EN(o,a,i,i[dt],n,i[s+1]=k5(e,t),r,s)}}function D5(n,e,t,r){let i=kt(),o=hg(2);i.firstUpdatePass&&yN(i,null,o,r);let s=be();if(t!==Nn&&wr(s,o,t)){let a=i.data[ro()];if(wN(a,r)&&!_N(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ng(c,t||"")),Sw(i,a,s,t,r)}else N5(i,a,s,s[dt],s[o+1],s[o+1]=R5(n,e,t),r,o)}}function _N(n,e){return e>=n.expandoStartIndex}function yN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ro()],s=_N(n,t);wN(o,r)&&e===null&&!s&&(e=!1),e=S5(i,o,e,r),_5(i,o,e,t,s,r)}}function S5(n,e,t,r){let i=r1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=rw(null,n,e,t,r),t=wd(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=rw(i,n,e,t,r),o===null){let c=A5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=rw(null,n,e,c[1],r),c=wd(c,e.attrs,r),x5(n,e,r,c))}else o=M5(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function A5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qc(r)!==0)return n[ga(r)]}function x5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ga(i)]=r}function M5(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wd(r,s,t)}return wd(r,e.attrs,t)}function rw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wd(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sg(n,s,t?!0:e[++o]))}return n===void 0?null:n}function R5(n,e,t){if(t==null||t==="")return Pn;let r=[],i=Gc(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function P5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&sg(n,r,t)}function N5(n,e,t,r,i,o,s,a){i===Nn&&(i=Pn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let p=c<i.length?i[c+1]:void 0,m=u<o.length?o[u+1]:void 0,I=null,N;d===f?(c+=2,u+=2,p!==m&&(I=f,N=m)):f===null||d!==null&&d<f?(c+=2,I=d):(u+=2,I=f,N=m),I!==null&&EN(n,e,t,r,I,N,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function EN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=v5(u)?B1(c,e,t,i,qc(u),s):void 0;if(!qg(d)){qg(o)||g5(u)&&(o=B1(c,null,t,i,a,s));let f=A0(ro(),t);bH(r,s,f,i,o)}}function B1(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,p=t[i+1];p===Nn&&(p=f?Pn:void 0);let m=f?ag(p,r):d===r?p:void 0;if(u&&!qg(m)&&(m=ag(c,r)),qg(m)&&(a=m,s))return a;let I=n[i+1];i=s?ga(I):qc(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=ag(c,r))}return a}function qg(n){return n!==void 0}function k5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Xi(Gc(n)))),n}function wN(n,e){return(n.flags&(e?8:16))!==0}function b(n,e=""){let t=be(),r=kt(),i=n+bt,o=r.firstCreatePass?nm(r,i,1,e,null):r.data[i],s=O5(r,t,o,e,n);t[i]=s,_g()&&Yw(r,t,s,o),Vc(o,!1)}var O5=(n,e,t,r,i)=>(hd(!0),H$(e[dt],r));function bN(n,e,t,r=""){return wr(n,la(),t)?e+Jo(t)+r:Nn}function F5(n,e,t,r,i,o=""){let s=XR(),a=cb(n,s,t,i);return hg(2),a?e+Jo(t)+r+Jo(i)+o:Nn}function xe(n){return _e("",n),xe}function _e(n,e,t){let r=be(),i=bN(r,n,e,t);return i!==Nn&&IN(r,ro(),i),_e}function Qc(n,e,t,r,i){let o=be(),s=F5(o,n,e,t,r,i);return s!==Nn&&IN(o,ro(),s),Qc}function IN(n,e,t){let r=A0(e,n);q$(n[dt],r,t)}function Cr(n,e,t){z0(e)&&(e=e());let r=be(),i=la();if(wr(r,i,e)){let o=kt(),s=vg();OP(s,r,n,e,r[dt],t)}return Cr}function Qr(n,e){let t=z0(n);return t&&n.set(e),t}function Tr(n,e){let t=be(),r=kt(),i=Yt();return pN(r,t,t[dt],i,n,e),Tr}function ho(n){return wr(be(),la(),n)?Jo(n):Nn}function Yc(n,e,t=""){return bN(be(),n,e,t)}function L5(n,e,t){let r=kt();if(r.firstCreatePass){let i=fi(n);Mw(t,r.data,r.blueprint,i,!0),Mw(e,r.data,r.blueprint,i,!1)}}function Mw(n,e,t,r,i){if(n=rn(n),Array.isArray(n))for(let o=0;o<n.length;o++)Mw(n[o],e,t,r,i);else{let o=kt(),s=be(),a=Yt(),c=ta(n)?n:rn(n.provide),u=C0(n),d=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ta(n)||!n.multi){let m=new da(u,i,re,null),I=ow(c,e,i?d:d+p,f);I===-1?(aw(Pg(a,s),o,c),iw(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[I]=m,s[I]=m)}else{let m=ow(c,e,d+p,f),I=ow(c,e,d,d+p),N=m>=0&&t[m],k=I>=0&&t[I];if(i&&!k||!i&&!N){aw(Pg(a,s),o,c);let $=j5(i?U5:V5,t.length,i,r,u,n);!i&&k&&(t[I].providerFactory=$),iw(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push($),s.push($)}else{let $=CN(t[i?I:m],u,!i&&r);iw(o,n,m>-1?m:I,$)}!i&&r&&k&&t[I].componentProviders++}}}function iw(n,e,t,r){let i=ta(e),o=NR(e);if(i||o){let c=(o?rn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function CN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ow(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function V5(n,e,t,r,i){return Rw(this.multi,[])}function U5(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=_d(r,r[le],this.providerFactory.index,i);s=c.slice(0,a),Rw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Rw(o,s);return s}function Rw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function j5(n,e,t,r,i,o){let s=new da(n,t,re,null);return s.multi=[],s.index=e,s.componentProviders=0,CN(s,i,r&&!t),s}function yi(n,e=[]){return t=>{t.providersResolver=(r,i)=>L5(r,i?i(n):n,e)}}function yn(n,e,t,r){return TN(be(),dd(),n,e,t,r)}function Eb(n,e){let t=n[e];return t===Nn?void 0:t}function TN(n,e,t,r,i,o){let s=e+t;return wr(n,s,i)?ab(n,s+1,o?r.call(o,i):r(i)):Eb(n,s+1)}function B5(n,e,t,r,i,o,s){let a=e+t;return cb(n,a,i,o)?ab(n,a+2,s?r.call(s,i,o):r(i,o)):Eb(n,a+2)}function $5(n,e,t,r,i,o,s,a){let c=e+t;return v6(n,c,i,o,s)?ab(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):Eb(n,c+3)}function fo(n,e){let t=kt(),r,i=n+bt;t.firstCreatePass?(r=H5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Yo(r.type,!0)),s,a=Rn(re);try{let c=Rg(!1),u=o();return Rg(c),x0(t,be(),i,u),u}finally{Rn(a)}}function H5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function wb(n,e,t){let r=n+bt,i=be(),o=ld(i,r);return Ib(i,r)?TN(i,dd(),e,o.transform,t,o):o.transform(t)}function bb(n,e,t,r){let i=n+bt,o=be(),s=ld(o,i);return Ib(o,i)?B5(o,dd(),e,s.transform,t,r,s):s.transform(t,r)}function Ad(n,e,t,r,i){let o=n+bt,s=be(),a=ld(s,o);return Ib(s,o)?$5(s,dd(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Ib(n,e){return n[le].data[e].pure}var zg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Cb=(()=>{class n{compileModuleSync(t){return new Hg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=E0(t),o=_P(i.declarations).reduce((s,a)=>{let c=no(a);return c&&s.push(new fa(c)),s},[]);return new zg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q5=(()=>{class n{zone=S(He);changeDetectionScheduler=S(Ji);applicationRef=S(co);applicationErrorHandler=S(gn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DN=new X("",{factory:()=>!1});function Tb({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new He(ue(j({},Sb()),{scheduleInRootZone:t})),[{provide:He,useFactory:n},{provide:to,multi:!0,useFactory:()=>{let r=S(q5,{optional:!0});return()=>r.initialize()}},{provide:to,multi:!0,useFactory:()=>{let r=S(z5);return()=>{r.initialize()}}},e===!0?{provide:W0,useValue:!0}:[],{provide:G0,useValue:t??DP},{provide:gn,useFactory:()=>{let r=S(He),i=S(Dt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Br),o.handleError(s))})}}}]}function Db(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Tb({ngZoneFactory:()=>{let i=Sb(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&mi("NgZone_CoalesceEvent"),new He(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return $n([{provide:DN,useValue:!0},{provide:fd,useValue:!1},r])}function Sb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var z5=(()=>{class n{subscription=new Et;initialized=!1;zone=S(He);pendingTasks=S(pi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{He.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{He.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SN=(()=>{class n{applicationErrorHandler=S(gn);appRef=S(co);taskService=S(pi);ngZone=S(He);zonelessEnabled=S(fd);tracing=S(va,{optional:!0});disableScheduling=S(W0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Et;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(G0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?b1:SP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,b1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W5(){return typeof $localize<"u"&&$localize.locale||Sd}var xd=new X("",{providedIn:"root",factory:()=>S(xd,{optional:!0,skipSelf:!0})||W5()});function xt(n){return mR(n)}function _a(n,e){return Ip(n,e?.equal)}var AN=class{[fn];constructor(e){this[fn]=e}destroy(){this[fn].destroy()}};var kN=Symbol("InputSignalNode#UNSET"),i8=ue(j({},Cp),{transformFn:void 0,applyValueToInputSignal(n,e){_c(n,e)}});function ON(n,e){let t=Object.create(i8);t.value=n,t.transformFn=e?.transform;function r(){if(gc(t),t.value===kN){let i=null;throw new Z(-950,i)}return t.value}return r[fn]=t,r}var lm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>bd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},o8=new X("");o8.__NG_ELEMENT_ID__=n=>{let e=Yt();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Z(204,!1)};function xN(n,e){return ON(n,e)}function s8(n){return ON(kN,n)}var FN=(xN.required=s8,xN);var Ab=new X(""),a8=new X("");function Md(n){return!n.moduleRef}function c8(n){let e=Md(n)?n.r3Injector:n.moduleRef.injector,t=e.get(He);return t.run(()=>{Md(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(gn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Md(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ab);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ab);s.add(o),n.moduleRef.onDestroy(()=>{md(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return u8(r,t,()=>{let o=e.get(pi),s=o.add(),a=e.get(fb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(xd,Sd);if(fN(c||Sd),!e.get(a8,!0))return Md(n)?e.get(co):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Md(n)){let d=e.get(co);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return l8?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var l8;function u8(n,e,t){try{let r=t();return ao(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var cm=null;function d8(n=[],e){return wt.create({name:e,providers:[{provide:td,useValue:"platform"},{provide:Ab,useValue:new Set([()=>cm=null])},...n]})}function h8(n=[]){if(cm)return cm;let e=d8(n);return cm=e,dN(),f8(e),e}function f8(n){let e=n.get(Gg,null);Nt(n,()=>{e?.forEach(t=>t())})}function Fb(){return!1}var Ei=(()=>{class n{static __NG_ELEMENT_ID__=p8}return n})();function p8(n){return g8(Yt(),be(),(n&16)===16)}function g8(n,e,t){if(is(n)&&!t){let r=yr(n.index,e);return new as(r,r)}else if(n.type&175){let r=e[vr];return new as(r,e)}return null}var xb=class{constructor(){}supports(e){return sb(e)}create(e){return new Mb(e)}},m8=(n,e)=>e,Mb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||m8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<MN(r,i,o)?t:r,a=MN(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let p=0;p<u;p++){let m=p<o.length?o[p]:o[p]=0,I=m+p;d<=I&&I<u&&(o[p]=m+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!sb(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,tN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Rb(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new um),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new um),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Pb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},um=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Pb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function MN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Nb=class{constructor(){}supports(e){return e instanceof Map||im(e)}create(){return new kb}},kb=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||im(e)))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Ob(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Ob=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function RN(){return new Lb([new xb])}var Lb=(()=>{class n{factories;static \u0275prov=K({token:n,providedIn:"root",factory:RN});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=S(n,{optional:!0,skipSelf:!0});return n.create(t,r||RN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function PN(){return new Vb([new Nb])}var Vb=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:PN});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=S(n,{optional:!0,skipSelf:!0});return n.create(t,r||PN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Z(901,!1)}}return n})();function LN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ye(8);try{let o=i?.injector??h8(r),s=[Tb({}),{provide:Ji,useExisting:SN},u1,...t||[]],a=new Ed({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return c8({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ye(9)}}function ls(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function VN(n){let e=no(n);if(!e)return null;let t=new fa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var BN=null;function Dr(){return BN}function Ub(n){BN??=n}var Rd=class{},Pd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S($N),providedIn:"platform"})}return n})(),jb=new X(""),$N=(()=>{class n extends Pd{_location;_history;_doc=S(St);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(t){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function dm(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function UN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yr(n){return n&&n[0]!=="?"?`?${n}`:n}var Zr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S(fm),providedIn:"root"})}return n})(),hm=new X(""),fm=(()=>{class n extends Zr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Yr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Yr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(Pd),fe(hm,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),us=(()=>{class n{_subject=new Ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=y8(UN(jN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yr(r))}normalize(t){return n.stripTrailingSlash(_8(this._basePath,jN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yr;static joinWithSlash=dm;static stripTrailingSlash=UN;static \u0275fac=function(r){return new(r||n)(fe(Zr))};static \u0275prov=K({token:n,factory:()=>v8(),providedIn:"root"})}return n})();function v8(){return new us(fe(Zr))}function _8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function jN(n){return n.replace(/\/index.html$/,"")}function y8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Wb=(()=>{class n extends Zr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=dm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Yr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Yr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(Pd),fe(hm,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var En=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(En||{}),Ze=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ze||{}),qn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(qn||{}),go={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function WN(n){return ar(n)[At.LocaleId]}function GN(n,e,t){let r=ar(n),i=[r[At.DayPeriodsFormat],r[At.DayPeriodsStandalone]],o=Sr(i,e);return Sr(o,t)}function KN(n,e,t){let r=ar(n),i=[r[At.DaysFormat],r[At.DaysStandalone]],o=Sr(i,e);return Sr(o,t)}function QN(n,e,t){let r=ar(n),i=[r[At.MonthsFormat],r[At.MonthsStandalone]],o=Sr(i,e);return Sr(o,t)}function YN(n,e){let r=ar(n)[At.Eras];return Sr(r,e)}function Nd(n,e){let t=ar(n);return Sr(t[At.DateFormat],e)}function kd(n,e){let t=ar(n);return Sr(t[At.TimeFormat],e)}function Od(n,e){let r=ar(n)[At.DateTimeFormat];return Sr(r,e)}function Fd(n,e){let t=ar(n),r=t[At.NumberSymbols][e];if(typeof r>"u"){if(e===go.CurrencyDecimal)return t[At.NumberSymbols][go.Decimal];if(e===go.CurrencyGroup)return t[At.NumberSymbols][go.Group]}return r}function ZN(n){if(!n[At.ExtraData])throw new Z(2303,!1)}function XN(n){let e=ar(n);return ZN(e),(e[At.ExtraData][2]||[]).map(r=>typeof r=="string"?Bb(r):[Bb(r[0]),Bb(r[1])])}function JN(n,e,t){let r=ar(n);ZN(r);let i=[r[At.ExtraData][0],r[At.ExtraData][1]],o=Sr(i,e)||[];return Sr(o,t)||[]}function Sr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Z(2304,!1)}function Bb(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var E8=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,pm={},w8=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ek(n,e,t,r){let i=M8(n);e=po(t,e)||e;let s=[],a;for(;e;)if(a=w8.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=nk(r,c),i=x8(i,r));let u="";return s.forEach(d=>{let f=S8(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function ym(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function po(n,e){let t=WN(n);if(pm[t]??={},pm[t][e])return pm[t][e];let r="";switch(e){case"shortDate":r=Nd(n,qn.Short);break;case"mediumDate":r=Nd(n,qn.Medium);break;case"longDate":r=Nd(n,qn.Long);break;case"fullDate":r=Nd(n,qn.Full);break;case"shortTime":r=kd(n,qn.Short);break;case"mediumTime":r=kd(n,qn.Medium);break;case"longTime":r=kd(n,qn.Long);break;case"fullTime":r=kd(n,qn.Full);break;case"short":let i=po(n,"shortTime"),o=po(n,"shortDate");r=gm(Od(n,qn.Short),[i,o]);break;case"medium":let s=po(n,"mediumTime"),a=po(n,"mediumDate");r=gm(Od(n,qn.Medium),[s,a]);break;case"long":let c=po(n,"longTime"),u=po(n,"longDate");r=gm(Od(n,qn.Long),[c,u]);break;case"full":let d=po(n,"fullTime"),f=po(n,"fullDate");r=gm(Od(n,qn.Full),[d,f]);break}return r&&(pm[t][e]=r),r}function gm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Xr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function b8(n,e){return Xr(n,3).substring(0,e)}function Ft(n,e,t=0,r=!1,i=!1){return function(o,s){let a=I8(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return b8(a,e);let c=Fd(s,go.MinusSign);return Xr(a,e,c,r,i)}}function I8(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Z(2301,!1)}}function lt(n,e,t=En.Format,r=!1){return function(i,o){return C8(i,o,n,e,t,r)}}function C8(n,e,t,r,i,o){switch(t){case 2:return QN(e,i,r)[n.getMonth()];case 1:return KN(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=XN(e),d=JN(e,i,r),f=u.findIndex(p=>{if(Array.isArray(p)){let[m,I]=p,N=s>=m.hours&&a>=m.minutes,k=s<I.hours||s===I.hours&&a<I.minutes;if(m.hours<I.hours){if(N&&k)return!0}else if(N||k)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return GN(e,i,r)[s<12?0:1];case 3:return YN(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Z(2302,!1)}}function mm(n){return function(e,t,r){let i=-1*r,o=Fd(t,go.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xr(s,2,o)+Xr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Xr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Xr(s,2,o)+":"+Xr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Xr(s,2,o)+":"+Xr(Math.abs(i%60),2,o);default:throw new Z(2310,!1)}}}var T8=0,_m=4;function D8(n){let e=ym(n,T8,1).getDay();return ym(n,0,1+(e<=_m?_m:_m+7)-e)}function tk(n){let e=n.getDay(),t=e===0?-3:_m-e;return ym(n.getFullYear(),n.getMonth(),n.getDate()+t)}function $b(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=tk(t),s=D8(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Xr(i,n,Fd(r,go.MinusSign))}}function vm(n,e=!1){return function(t,r){let o=tk(t).getFullYear();return Xr(o,n,Fd(r,go.MinusSign),e)}}var Hb={};function S8(n){if(Hb[n])return Hb[n];let e;switch(n){case"G":case"GG":case"GGG":e=lt(3,Ze.Abbreviated);break;case"GGGG":e=lt(3,Ze.Wide);break;case"GGGGG":e=lt(3,Ze.Narrow);break;case"y":e=Ft(0,1,0,!1,!0);break;case"yy":e=Ft(0,2,0,!0,!0);break;case"yyy":e=Ft(0,3,0,!1,!0);break;case"yyyy":e=Ft(0,4,0,!1,!0);break;case"Y":e=vm(1);break;case"YY":e=vm(2,!0);break;case"YYY":e=vm(3);break;case"YYYY":e=vm(4);break;case"M":case"L":e=Ft(1,1,1);break;case"MM":case"LL":e=Ft(1,2,1);break;case"MMM":e=lt(2,Ze.Abbreviated);break;case"MMMM":e=lt(2,Ze.Wide);break;case"MMMMM":e=lt(2,Ze.Narrow);break;case"LLL":e=lt(2,Ze.Abbreviated,En.Standalone);break;case"LLLL":e=lt(2,Ze.Wide,En.Standalone);break;case"LLLLL":e=lt(2,Ze.Narrow,En.Standalone);break;case"w":e=$b(1);break;case"ww":e=$b(2);break;case"W":e=$b(1,!0);break;case"d":e=Ft(2,1);break;case"dd":e=Ft(2,2);break;case"c":case"cc":e=Ft(7,1);break;case"ccc":e=lt(1,Ze.Abbreviated,En.Standalone);break;case"cccc":e=lt(1,Ze.Wide,En.Standalone);break;case"ccccc":e=lt(1,Ze.Narrow,En.Standalone);break;case"cccccc":e=lt(1,Ze.Short,En.Standalone);break;case"E":case"EE":case"EEE":e=lt(1,Ze.Abbreviated);break;case"EEEE":e=lt(1,Ze.Wide);break;case"EEEEE":e=lt(1,Ze.Narrow);break;case"EEEEEE":e=lt(1,Ze.Short);break;case"a":case"aa":case"aaa":e=lt(0,Ze.Abbreviated);break;case"aaaa":e=lt(0,Ze.Wide);break;case"aaaaa":e=lt(0,Ze.Narrow);break;case"b":case"bb":case"bbb":e=lt(0,Ze.Abbreviated,En.Standalone,!0);break;case"bbbb":e=lt(0,Ze.Wide,En.Standalone,!0);break;case"bbbbb":e=lt(0,Ze.Narrow,En.Standalone,!0);break;case"B":case"BB":case"BBB":e=lt(0,Ze.Abbreviated,En.Format,!0);break;case"BBBB":e=lt(0,Ze.Wide,En.Format,!0);break;case"BBBBB":e=lt(0,Ze.Narrow,En.Format,!0);break;case"h":e=Ft(3,1,-12);break;case"hh":e=Ft(3,2,-12);break;case"H":e=Ft(3,1);break;case"HH":e=Ft(3,2);break;case"m":e=Ft(4,1);break;case"mm":e=Ft(4,2);break;case"s":e=Ft(5,1);break;case"ss":e=Ft(5,2);break;case"S":e=Ft(6,1);break;case"SS":e=Ft(6,2);break;case"SSS":e=Ft(6,3);break;case"Z":case"ZZ":case"ZZZ":e=mm(0);break;case"ZZZZZ":e=mm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=mm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=mm(2);break;default:return null}return Hb[n]=e,e}function nk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function A8(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function x8(n,e,t){let i=n.getTimezoneOffset(),o=nk(e,i);return A8(n,-1*(o-i))}function M8(n){if(HN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return ym(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(E8))return R8(r)}let e=new Date(n);if(!HN(e))throw new Z(2311,!1);return e}function R8(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function HN(n){return n instanceof Date&&!isNaN(n.valueOf())}var Em=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ar=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Em(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),qN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);qN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(so),re(cs),re(Lb))};static \u0275dir=nt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function qN(n,e){n.context.$implicit=e.item}var rt=(()=>{class n{_viewContainer;_context=new wm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(so),re(cs))};static \u0275dir=nt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),wm=class{$implicit=null;ngIf=null};function zN(n,e){if(n&&!n.createEmbeddedView)throw new Z(2020,!1)}var Gb=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Gr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(re(mn),re(Vb),re(Ir))};static \u0275dir=nt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function Kb(n,e){return new Z(2100,!1)}var qb=class{createSubscription(e,t,r){return xt(()=>e.subscribe({next:t,error:r}))}dispose(e){xt(()=>e.unsubscribe())}},zb=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},P8=new zb,N8=new qb,Qb=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=S(gn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ao(t))return P8;if(sm(t))return N8;throw Kb(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(re(Ei,16))};static \u0275pipe=Td({name:"async",type:n,pure:!1})}return n})();var k8="mediumDate",rk=new X(""),ik=new X(""),Yb=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??k8,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ek(t,s,o||this.locale,a)}catch(s){throw Kb(n,s.message)}}static \u0275fac=function(r){return new(r||n)(re(xd,16),re(rk,24),re(ik,24))};static \u0275pipe=Td({name:"date",type:n,pure:!0})}return n})();var Ld=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw Kb(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Td({name:"slice",type:n,pure:!1})}return n})();var $e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=pr({})}return n})();function Zb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Vd=class{};var ok="browser";var sk=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new Xb(S(St),window)})}return n})(),Xb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ue(j({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=O8(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Xo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ue(j({},t),{left:i-s[0],top:o-s[1]}))}};function O8(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ud=class{_doc;constructor(e){this._doc=e}manager},bm=(()=>{class n extends Ud{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(fe(St))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Cm=new X(""),rI=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof bm));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof bm);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(fe(Cm),fe(He))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Jb="ng-app-id";function ak(n){for(let e of n)e.remove()}function ck(n,e){let t=e.createElement("style");return t.textContent=n,t}function F8(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jb}="${e}"],link[${Jb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function tI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var iI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,F8(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ck);r?.forEach(i=>this.addUsage(i,this.external,tI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ak(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ak(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ck(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,tI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(fe(St),fe(Wg),fe(Kg,8),fe(ma))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),eI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},oI=/%COMP%/g;var uk="%COMP%",L8=`_nghost-${uk}`,V8=`_ngcontent-${uk}`,U8=!0,j8=new X("",{providedIn:"root",factory:()=>U8});function B8(n){return V8.replace(oI,n)}function $8(n){return L8.replace(oI,n)}function dk(n,e){return e.map(t=>t.replace(oI,n))}var sI=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new jd(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Im?i.applyToHost(t):i instanceof Bd&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case io.Emulated:o=new Im(c,u,r,this.appId,d,s,a,f,p);break;case io.ShadowDom:return new nI(c,u,t,r,s,a,this.nonce,f,p);default:o=new Bd(c,u,r,d,s,a,f,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(fe(rI),fe(iI),fe(Wg),fe(j8),fe(St),fe(He),fe(Kg),fe(va,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),jd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(eI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=eI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=eI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gr.DashCase|Gr.Important)?e.style.setProperty(t,r,i&Gr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Dr().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function lk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nI=class extends jd{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=dk(i.id,d);for(let p of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let f=i.getExternalStyles?.();if(f)for(let p of f){let m=tI(p,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bd=class extends jd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?dk(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Hc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Im=class extends Bd{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=B8(d),this.hostAttr=$8(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Tm=class n extends Rd{supportsDOMEvents=!0;static makeCurrent(){Ub(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=H8();return t==null?null:q8(t)}resetBaseElement(){$d=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zb(document.cookie,e)}},$d=null;function H8(){return $d=$d||document.head.querySelector("base"),$d?$d.getAttribute("href"):null}function q8(n){return new URL(n,document.baseURI).pathname}var z8=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),hk=["alt","control","meta","shift"],W8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fk=(()=>{class n extends Ud{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),hk.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=W8[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hk.forEach(s=>{if(s!==i){let a=G8[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(fe(St))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function aI(n,e,t){let r=j({rootComponent:n,platformRef:t?.platformRef},K8(e));return LN(r)}function K8(n){return{appProviders:[...J8,...n?.providers??[]],platformProviders:X8}}function Q8(){Tm.makeCurrent()}function Y8(){return new Br}function Z8(){return kw(document),document}var X8=[{provide:ma,useValue:ok},{provide:Gg,useValue:Q8,multi:!0},{provide:St,useFactory:Z8}];var J8=[{provide:td,useValue:"root"},{provide:Br,useFactory:Y8},{provide:Cm,useClass:bm,multi:!0,deps:[St]},{provide:Cm,useClass:fk,multi:!0,deps:[St]},sI,iI,rI,{provide:ha,useExisting:sI},{provide:Vd,useClass:z8},[]];var pk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(fe(St))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ye="primary",th=Symbol("RouteTitle"),hI=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function wa(n){return new hI(n)}function bk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}function wi(n,e){let t=n?fI(n):void 0,r=e?fI(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ik(n[i],e[i]))return!1;return!0}function fI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ik(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Ck(n){return n.length>0?n[n.length-1]:null}function mo(n){return WE(n)?n:ao(n)?Be(Promise.resolve(n)):ce(n)}var nq={exact:Dk,subset:Sk},Tk={exact:rq,subset:iq,ignored:()=>!0};function gk(n,e,t){return nq[t.paths](n.root,e.root,t.matrixParams)&&Tk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rq(n,e){return wi(n,e)}function Dk(n,e,t){if(!ya(n.segments,e.segments)||!Am(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Dk(n.children[r],e.children[r],t))return!1;return!0}function iq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ik(n[t],e[t]))}function Sk(n,e,t){return Ak(n,e,e.segments,t)}function Ak(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ya(i,t)||e.hasChildren()||!Am(i,t,r))}else if(n.segments.length===t.length){if(!ya(n.segments,t)||!Am(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Sk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ya(n.segments,i)||!Am(n.segments,i,r)||!n.children[ye]?!1:Ak(n.children[ye],e,o,r)}}function Am(n,e,t){return e.every((r,i)=>Tk[t](n[i].parameters,r.parameters))}var Ii=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wa(this.queryParams),this._queryParamMap}toString(){return aq.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xm(this)}},ds=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=wa(this.parameters),this._parameterMap}toString(){return Mk(this)}};function oq(n,e){return ya(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}function ya(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ye&&(t=t.concat(e(i,r)))}),t}var ba=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new hs,providedIn:"root"})}return n})(),hs=class{parse(e){let t=new gI(e);return new Ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hd(e.root,!0)}`,r=uq(e.queryParams),i=typeof e.fragment=="string"?`#${cq(e.fragment)}`:"";return`${t}${r}${i}`}},aq=new hs;function xm(n){return n.segments.map(e=>Mk(e)).join("/")}function Hd(n,e){if(!n.hasChildren())return xm(n);if(e){let t=n.children[ye]?Hd(n.children[ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ye&&r.push(`${i}:${Hd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sq(n,(r,i)=>i===ye?[Hd(n.children[ye],!1)]:[`${i}:${Hd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ye]!=null?`${xm(n)}/${t[0]}`:`${xm(n)}/(${t.join("//")})`}}function xk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dm(n){return xk(n).replace(/%3B/gi,";")}function cq(n){return encodeURI(n)}function pI(n){return xk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mm(n){return decodeURIComponent(n)}function mk(n){return Mm(n.replace(/\+/g,"%20"))}function Mk(n){return`${pI(n.path)}${lq(n.parameters)}`}function lq(n){return Object.entries(n).map(([e,t])=>`;${pI(e)}=${pI(t)}`).join("")}function uq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Dm(t)}=${Dm(i)}`).join("&"):`${Dm(t)}=${Dm(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dq=/^[^\/()?;#]+/;function cI(n){let e=n.match(dq);return e?e[0]:""}var hq=/^[^\/()?;=#]+/;function fq(n){let e=n.match(hq);return e?e[0]:""}var pq=/^[^=?&#]+/;function gq(n){let e=n.match(pq);return e?e[0]:""}var mq=/^[^&#]+/;function vq(n){let e=n.match(mq);return e?e[0]:""}var gI=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ye]=new ze(e,t)),r}parseSegment(){let e=cI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new ds(Mm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=cI(this.remaining);i&&(r=i,this.capture(r))}e[Mm(t)]=Mm(r)}parseQueryParam(e){let t=gq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=vq(this.remaining);s&&(r=s,this.capture(r))}let i=mk(t),o=mk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ye);let s=this.parseChildren();t[o??ye]=Object.keys(s).length===1&&s[ye]?s[ye]:new ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function Rk(n){return n.segments.length>0?new ze([],{[ye]:n}):n}function Pk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Pk(i);if(r===ye&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ze(n.segments,e);return _q(t)}function _q(n){if(n.numberOfChildren===1&&n.children[ye]){let e=n.children[ye];return new ze(n.segments.concat(e.segments),e.children)}return n}function fs(n){return n instanceof Ii}function Nk(n,e,t=null,r=null){let i=kk(n);return Ok(i,e,t,r)}function kk(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Rk(r);return e??i}function Ok(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return lI(i,i,i,t,r);let o=yq(e);if(o.toRoot())return lI(i,i,new ze([],{}),t,r);let s=Eq(o,i,n),a=s.processChildren?zd(s.segmentGroup,s.index,o.commands):Lk(s.segmentGroup,s.index,o.commands);return lI(i,s.segmentGroup,a,t,r)}function Rm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gd(n){return typeof n=="object"&&n!=null&&n.outlets}function lI(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=Fk(n,e,t);let a=Rk(Pk(s));return new Ii(a,o,i)}function Fk(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Fk(o,e,t)}),new ze(n.segments,r)}var Pm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rm(r[0]))throw new Z(4003,!1);let i=r.find(Gd);if(i&&i!==Ck(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Pm(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Pm(t,e,r)}var Jc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Eq(n,e,t){if(n.isAbsolute)return new Jc(e,!0,0);if(!t)return new Jc(e,!1,NaN);if(t.parent===null)return new Jc(t,!0,0);let r=Rm(n.commands[0])?0:1,i=t.segments.length-1+r;return wq(t,i,n.numberOfDoubleDots)}function wq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Jc(r,!1,i-o)}function bq(n){return Gd(n[0])?n[0].outlets:{[ye]:n}}function Lk(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return zd(n,e,t);let r=Iq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ze(n.segments.slice(0,r.pathIndex),{});return o.children[ye]=new ze(n.segments.slice(r.pathIndex),n.children),zd(o,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?mI(n,e,t):r.match?zd(n,0,i):mI(n,e,t)}function zd(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=bq(t),i={};if(Object.keys(r).some(o=>o!==ye)&&n.children[ye]&&n.numberOfChildren===1&&n.children[ye].segments.length===0){let o=zd(n.children[ye],e,t);return new ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Lk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ze(n.segments,i)}}function Iq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Gd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!_k(c,u,s))return o;r+=2}else{if(!_k(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mI(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Gd(o)){let c=Cq(o.outlets);return new ze(r,c)}if(i===0&&Rm(t[0])){let c=n.segments[e];r.push(new ds(c.path,vk(t[0]))),i++;continue}let s=Gd(o)?o.outlets[ye]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Rm(a)?(r.push(new ds(s,vk(a))),i+=2):(r.push(new ds(s,{})),i++)}return new ze(r,{})}function Cq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=mI(new ze([],{}),0,r))}),e}function vk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _k(n,e,t){return n==t.path&&wi(e,t.parameters)}var el="imperative",qt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(qt||{}),lr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ps=class extends lr{type=qt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends lr{urlAfterRedirects;type=qt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},On=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(On||{}),nl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(nl||{}),bi=class extends lr{reason;code;type=qt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ci=class extends lr{reason;code;type=qt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},rl=class extends lr{error;target;type=qt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kd=class extends lr{urlAfterRedirects;state;type=qt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nm=class extends lr{urlAfterRedirects;state;type=qt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},km=class extends lr{urlAfterRedirects;state;shouldActivate;type=qt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Om=class extends lr{urlAfterRedirects;state;type=qt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class extends lr{urlAfterRedirects;state;type=qt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class{route;type=qt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vm=class{route;type=qt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Um=class{snapshot;type=qt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jm=class{snapshot;type=qt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bm=class{snapshot;type=qt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{snapshot;type=qt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},il=class{routerEvent;position;anchor;type=qt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Qd=class{},ol=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Tq(n){return!(n instanceof Qd)&&!(n instanceof ol)}function Dq(n,e){return n.providers&&!n._injector&&(n._injector=Kc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||ye}function Sq(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function cl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Hm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return cl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ia(this.rootInjector)}},Ia=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(fe(Dt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_I(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _I(e,this._root).map(t=>t.value)}};function vI(n,e){if(n===e.value)return e;for(let t of e.children){let r=vI(n,t);if(r)return r}return null}function _I(n,e){if(n===e.value)return[e];for(let t of e.children){let r=_I(n,t);if(r.length)return r.unshift(e),r}return[]}var cr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yd=class extends qm{snapshot;constructor(e,t){super(e),this.snapshot=t,DI(this,e)}toString(){return this.snapshot.toString()}};function Vk(n){let e=Aq(n),t=new nn([new ds("",{})]),r=new nn({}),i=new nn({}),o=new nn({}),s=new nn(""),a=new wn(t,r,o,s,i,ye,n,e.root);return a.snapshot=e.root,new Yd(new cr(a,[]),e)}function Aq(n){let e={},t={},r={},o=new Ea([],e,r,"",t,ye,n,null,{});return new Zd("",new cr(o,[]))}var wn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[th]))??ce(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>wa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>wa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&jk(i)&&(r.resolve[th]=i.title),r}var Ea=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[th]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zd=class extends qm{url;constructor(e,t){super(t),this.url=e,DI(this,t)}toString(){return Uk(this._root)}};function DI(n,e){e.value._routerState=n,e.children.forEach(t=>DI(n,t))}function Uk(n){let e=n.children.length>0?` { ${n.children.map(Uk).join(", ")} } `:"";return`${n.value}${e}`}function uI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wi(e.params,t.params)||n.paramsSubject.next(t.params),tq(e.url,t.url)||n.urlSubject.next(t.url),wi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yI(n,e){let t=wi(n.params,e.params)&&oq(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||yI(n.parent,e.parent))}function jk(n){return typeof n.title=="string"||n.title===null}var Bk=new X(""),nh=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ye;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=FN();parentContexts=S(Ia);location=S(so);changeDetector=S(Ei);inputBinder=S(rh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new EI(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[br]})}return n})(),EI=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===wn?this.route:e===Ia?this.childContexts:e===Bk?this.outletData:this.parent.get(e,t)}},rh=new X(""),SI=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Gu([r.queryParams,r.params,r.data]).pipe(Mn(([o,s,a],c)=>(a=j(j(j({},o),s),a),c===0?ce(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=VN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),AI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ue({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&oe(0,"router-outlet")},dependencies:[nh],encapsulation:2})}return n})();function xI(n){let e=n.children&&n.children.map(xI),t=e?ue(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ye&&(t.component=AI),t}function xq(n,e,t){let r=Xd(n,e._root,t?t._root:void 0);return new Yd(r,e)}function Xd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Mq(n,e,t);return new cr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xd(n,a)),s}}let r=Rq(e.value),i=e.children.map(o=>Xd(n,o));return new cr(r,i)}}function Mq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xd(n,r,i);return Xd(n,r)})}function Rq(n){return new wn(new nn(n.url),new nn(n.params),new nn(n.queryParams),new nn(n.fragment),new nn(n.data),n.outlet,n.component,n)}var sl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$k="ngNavigationCancelingError";function Wm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=fs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Hk(!1,On.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Hk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$k]=!0,t.cancellationCode=e,t}function Pq(n){return qk(n)&&fs(n.url)}function qk(n){return!!n&&n[$k]}var Nq=(n,e,t,r)=>Ie(i=>(new wI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $m(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(uI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),uI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Gm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},tl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function kq(n,e,t){let r=n._root,i=e?e._root:null;return qd(r,i,t,[r.value])}function Oq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ll(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!l0(n)?n:e.get(n):r}function qd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xc(e);return n.children.forEach(s=>{Fq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Wd(a,t.getContext(s),i)),i}function Fq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Lq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Gm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?qd(n,e,a?a.children:null,r,i):qd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tl(a.outlet.component,s))}else s&&Wd(e,a,i),i.canActivateChecks.push(new Gm(r)),o.component?qd(n,null,a?a.children:null,r,i):qd(n,null,t,r,i);return i}function Lq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ya(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ya(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yI(n,e)||!wi(n.queryParams,e.queryParams);case"paramsChange":default:return!yI(n,e)}}function Wd(n,e,t){let r=Xc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Wd(s,e.children.getContext(o),t):Wd(s,null,t):Wd(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new tl(e.outlet.component,i)):t.canDeactivateChecks.push(new tl(null,i)):t.canDeactivateChecks.push(new tl(null,i))}function ih(n){return typeof n=="function"}function Vq(n){return typeof n=="boolean"}function Uq(n){return n&&ih(n.canLoad)}function jq(n){return n&&ih(n.canActivate)}function Bq(n){return n&&ih(n.canActivateChild)}function $q(n){return n&&ih(n.canDeactivate)}function Hq(n){return n&&ih(n.canMatch)}function zk(n){return n instanceof Gi||n?.name==="EmptyError"}var Sm=Symbol("INITIAL_VALUE");function al(){return Mn(n=>Gu(n.map(e=>e.pipe(Qi(1),Yp(Sm)))).pipe(Ie(e=>{for(let t of e)if(t!==!0){if(t===Sm)return Sm;if(t===!1||qq(t))return t}return!0}),xn(e=>e!==Sm),Qi(1)))}function qq(n){return fs(n)||n instanceof sl}function zq(n,e){return Tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ce(ue(j({},t),{guardsResult:!0})):Wq(s,r,i,n).pipe(Tt(a=>a&&Vq(a)?Gq(r,o,n,e):ce(a)),Ie(a=>ue(j({},t),{guardsResult:a})))})}function Wq(n,e,t,r){return Be(n).pipe(Tt(i=>Xq(i.component,i.route,t,e,r)),Yi(i=>i!==!0,!0))}function Gq(n,e,t,r){return Be(e).pipe(Go(i=>xc(Qq(i.route.parent,r),Kq(i.route,r),Zq(n,i.path,t),Yq(n,i.route,t))),Yi(i=>i!==!0,!0))}function Kq(n,e){return n!==null&&e&&e(new Bm(n)),ce(!0)}function Qq(n,e){return n!==null&&e&&e(new Um(n)),ce(!0)}function Yq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(o=>Ku(()=>{let s=cl(e)??t,a=ll(o,s),c=jq(a)?a.canActivate(e,n):Nt(s,()=>a(e,n));return mo(c).pipe(Yi())}));return ce(i).pipe(al())}function Zq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Oq(s)).filter(s=>s!==null).map(s=>Ku(()=>{let a=s.guards.map(c=>{let u=cl(s.node)??t,d=ll(c,u),f=Bq(d)?d.canActivateChild(r,n):Nt(u,()=>d(r,n));return mo(f).pipe(Yi())});return ce(a).pipe(al())}));return ce(o).pipe(al())}function Xq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let c=cl(e)??i,u=ll(a,c),d=$q(u)?u.canDeactivate(n,e,t,r):Nt(c,()=>u(n,e,t,r));return mo(d).pipe(Yi())});return ce(s).pipe(al())}function Jq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let o=i.map(s=>{let a=ll(s,n),c=Uq(a)?a.canLoad(e,t):Nt(n,()=>a(e,t));return mo(c)});return ce(o).pipe(al(),Wk(r))}function Wk(n){return xp(Kt(e=>{if(typeof e!="boolean")throw Wm(n,e)}),Ie(e=>e===!0))}function ez(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let a=ll(s,n),c=Hq(a)?a.canMatch(e,t):Nt(n,()=>a(e,t));return mo(c)});return ce(o).pipe(al(),Wk(r))}var Jd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},eh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zc(n){return zo(new Jd(n))}function tz(n){return zo(new Z(4e3,!1))}function nz(n){return zo(Hk(!1,On.GuardRejected))}var bI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[ye])return tz(`${e.redirectTo}`);i=i.children[ye]}}applyRedirectCommands(e,t,r,i,o){return rz(t,i,o).pipe(Ie(s=>{if(s instanceof Ii)throw new eh(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new eh(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ii(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function rz(n,e,t){if(typeof n=="string")return ce(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:f}=e;return mo(Nt(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f})))}var II={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iz(n,e,t,r,i){let o=Gk(n,e,t);return o.matched?(r=Dq(e,r),ez(r,e,t,i).pipe(Ie(s=>s===!0?o:j({},II)))):ce(o)}function Gk(n,e,t){if(e.path==="**")return oz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},II):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bk)(t,n,e);if(!i)return j({},II);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oz(n){return{matched:!0,parameters:n.length>0?Ck(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yk(n,e,t,r){return t.length>0&&cz(n,t,r)?{segmentGroup:new ze(e,az(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&lz(n,t,r)?{segmentGroup:new ze(n.segments,sz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function sz(n,e,t,r){let i={};for(let o of t)if(Qm(n,e,o)&&!r[Jr(o)]){let s=new ze([],{});i[Jr(o)]=s}return j(j({},r),i)}function az(n,e){let t={};t[ye]=e;for(let r of n)if(r.path===""&&Jr(r)!==ye){let i=new ze([],{});t[Jr(r)]=i}return t}function cz(n,e,t){return t.some(r=>Qm(n,e,r)&&Jr(r)!==ye)}function lz(n,e,t){return t.some(r=>Qm(n,e,r))}function Qm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uz(n,e,t){return e.length===0&&!n.children[t]}var CI=class{};function dz(n,e,t,r,i,o,s="emptyOnly"){return new TI(n,e,t,r,i,s,o).recognize()}var hz=31,TI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bI(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=yk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:t,rootSnapshot:r})=>{let i=new cr(r,t),o=new Zd("",i),s=Nk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ea([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ye,t).pipe(Ie(r=>({children:r,rootSnapshot:t})),Ki(r=>{if(r instanceof eh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof cr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(Go(s=>{let a=r.children[s],c=Sq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Qp((s,a)=>(s.push(...a),s)),Ko(null),KE(),Tt(s=>{if(s===null)return Zc(r);let a=Kk(s);return fz(a),ce(a)}))}processSegment(e,t,r,i,o,s,a){return Be(t).pipe(Go(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ki(u=>{if(u instanceof Jd)return ce(null);throw u}))),Yi(c=>!!c),Ki(c=>{if(zk(c))return uz(r,i,o)?ce(new CI):Zc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Jr(r)!==s&&(s===ye||!Qm(i,o,r))?Zc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Zc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:p}=Gk(t,i,o);if(!c)return Zc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hz&&(this.allowRedirects=!1));let m=new Ea(o,u,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Ek(i),Jr(i),i.component??i._loadedComponent??null,i,wk(i)),I=zm(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(I.params),m.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e).pipe(Mn(k=>this.applyRedirects.lineralizeSegments(i,k)),Tt(k=>this.processSegment(e,r,t,k.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=iz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Mn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=c,I=new Ea(p,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Ek(r),Jr(r),r.component??r._loadedComponent??null,r,wk(r)),N=zm(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(N.params),I.data=Object.freeze(N.data);let{segmentGroup:k,slicedSegments:$}=yk(t,p,m,u);if($.length===0&&k.hasChildren())return this.processChildren(d,u,k,I).pipe(Ie(ee=>new cr(I,ee)));if(u.length===0&&$.length===0)return ce(new cr(I,[]));let ne=Jr(r)===o;return this.processSegment(d,u,k,$,ne?ye:o,!0,I).pipe(Ie(ee=>new cr(I,ee instanceof cr?[ee]:[])))}))):Zc(t)))}getChildConfig(e,t,r){return t.children?ce({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ce({routes:t._loadedRoutes,injector:t._loadedInjector}):Jq(e,t,r,this.urlSerializer).pipe(Tt(i=>i?this.configLoader.loadChildren(e,t).pipe(Kt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):nz(t))):ce({routes:[],injector:e})}};function fz(n){n.sort((e,t)=>e.value.outlet===ye?-1:t.value.outlet===ye?1:e.value.outlet.localeCompare(t.value.outlet))}function pz(n){let e=n.value.routeConfig;return e&&e.path===""}function Kk(n){let e=[],t=new Set;for(let r of n){if(!pz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Kk(r.children);e.push(new cr(r.value,i))}return e.filter(r=>!t.has(r))}function Ek(n){return n.data||{}}function wk(n){return n.resolve||{}}function gz(n,e,t,r,i,o){return Tt(s=>dz(n,e,t,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>ue(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function mz(n,e){return Tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ce(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Qk(c))s.add(u);let a=0;return Be(s).pipe(Go(c=>o.has(c)?vz(c,r,n,e):(c.data=zm(c,c.parent,n).resolve,ce(void 0))),Kt(()=>a++),Mc(1),Tt(c=>a===s.size?ce(t):jn))})}function Qk(n){let e=n.children.map(t=>Qk(t)).flat();return[n,...e]}function vz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!jk(i)&&(o[th]=i.title),Ku(()=>(n.data=zm(n,n.parent,t).resolve,_z(o,n,e,r).pipe(Ie(s=>(n._resolvedData=s,n.data=j(j({},n.data),s),null)))))}function _z(n,e,t,r){let i=fI(n);if(i.length===0)return ce({});let o={};return Be(i).pipe(Tt(s=>yz(n[s],e,t,r).pipe(Yi(),Kt(a=>{if(a instanceof sl)throw Wm(new hs,a);o[s]=a}))),Mc(1),Ie(()=>o),Ki(s=>zk(s)?jn:zo(s)))}function yz(n,e,t,r){let i=cl(e)??r,o=ll(n,i),s=o.resolve?o.resolve(e,t):Nt(i,()=>o(e,t));return mo(s)}function dI(n){return Mn(e=>{let t=n(e);return t?Be(t).pipe(Ie(()=>e)):ce(e)})}var MI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ye);return r}getResolvedTitleForRoute(t){return t.data[th]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S(Yk),providedIn:"root"})}return n})(),Yk=(()=>{class n extends MI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(fe(pk))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gs=new X("",{providedIn:"root",factory:()=>({})}),Ca=new X(""),Ym=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(Cb);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ce(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mo(Nt(t,()=>r.loadComponent())).pipe(Ie(Xk),Mn(Jk),Kt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Qu(()=>{this.componentLoaders.delete(r)})),o=new Tc(i,()=>new Ct).pipe(Cc());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Zk(r,this.compiler,t,this.onLoadEndListener).pipe(Qu(()=>{this.childrenLoaders.delete(r)})),s=new Tc(o,()=>new Ct).pipe(Cc());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zk(n,e,t,r){return mo(Nt(t,()=>n.loadChildren())).pipe(Ie(Xk),Mn(Jk),Tt(i=>i instanceof om||Array.isArray(i)?ce(i):Be(e.compileModuleAsync(i))),Ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ca,[],{optional:!0,self:!0}).flat()),{routes:s.map(xI),injector:o}}))}function Ez(n){return n&&typeof n=="object"&&"default"in n}function Xk(n){return Ez(n)?n.default:n}function Jk(n){return ce(n)}var Zm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S(wz),providedIn:"root"})}return n})(),wz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RI=new X(""),PI=new X("");function eO(n,e,t){let r=n.get(PI),i=n.get(St);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),bz(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&Nt(n,()=>c({transition:a,from:e,to:t})),s}function bz(n){return new Promise(e=>{Id({read:()=>setTimeout(e)},{injector:n})})}var NI=new X(""),Xm=(()=>{class n{currentNavigation=te(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ct;transitionAbortWithErrorSubject=new Ct;configLoader=S(Ym);environmentInjector=S(Dt);destroyRef=S(Er);urlSerializer=S(ba);rootContexts=S(Ia);location=S(us);inputBindingEnabled=S(rh,{optional:!0})!==null;titleStrategy=S(MI);options=S(gs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Zm);createViewTransition=S(RI,{optional:!0});navigationErrorHandler=S(NI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ce(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Lm(i)),r=i=>this.events.next(new Vm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;xt(()=>{this.transitions?.next(ue(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new nn(null),this.transitions.pipe(xn(r=>r!==null),Mn(r=>{let i=!1;return ce(r).pipe(Mn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",On.SupersededByNewNavigation),jn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ue(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Ci(o.id,this.urlSerializer.serialize(o.rawUrl),"",nl.IgnoredSameUrlNavigation)),o.resolve(!1),jn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ce(o).pipe(Mn(c=>(this.events.next(new ps(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?jn:Promise.resolve(c))),gz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Kt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));let u=new Kd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:f,extras:p}=o,m=new ps(c,this.urlSerializer.serialize(u),d,f);this.events.next(m);let I=Vk(this.rootComponentType).snapshot;return this.currentTransition=r=ue(j({},o),{targetSnapshot:I,urlAfterRedirects:u,extras:ue(j({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=u,N)),ce(r)}else return this.events.next(new Ci(o.id,this.urlSerializer.serialize(o.extractedUrl),"",nl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),jn}),Kt(o=>{let s=new Nm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ie(o=>(this.currentTransition=r=ue(j({},o),{guards:kq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),zq(this.environmentInjector,o=>this.events.next(o)),Kt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Wm(this.urlSerializer,o.guardsResult);let s=new km(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),xn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",On.GuardRejected),!1)),dI(o=>{if(o.guards.canActivateChecks.length!==0)return ce(o).pipe(Kt(s=>{let a=new Om(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Mn(s=>{let a=!1;return ce(s).pipe(mz(this.paramsInheritanceStrategy,this.environmentInjector),Kt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",On.NoDataFromResolver)}}))}),Kt(s=>{let a=new Fm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),dI(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=cl(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Kt(d=>{a.component=d}),Ie(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Gu(s(o.targetSnapshot.root)).pipe(Ko(null),Qi(1))}),dI(()=>this.afterPreactivation()),Mn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Be(a).pipe(Ie(()=>r)):ce(r)}),Ie(o=>{let s=xq(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ue(j({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Kt(()=>{this.events.next(new Qd)}),Nq(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Qi(1),Zp(new he(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(xn(()=>!i&&!r.targetRouterState),Kt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",On.Aborted)}))),Kt({next:o=>{i=!0,this.lastSuccessfulNavigation=xt(this.currentNavigation),this.events.next(new ur(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Zp(this.transitionAbortWithErrorSubject.pipe(Kt(o=>{throw o}))),Qu(()=>{i||this.cancelNavigationTransition(r,"",On.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ki(o=>{if(this.destroyed)return r.resolve(!1),jn;if(i=!0,qk(o))this.events.next(new bi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Pq(o)?this.events.next(new ol(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new rl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Nt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof sl){let{message:c,cancellationCode:u}=Wm(this.urlSerializer,a);this.events.next(new bi(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new ol(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return jn}))}))}cancelNavigationTransition(t,r,i){let o=new bi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=xt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Iz(n){return n!==el}var tO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S(Cz),providedIn:"root"})}return n})(),Km=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Cz=(()=>{class n extends Km{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nO=(()=>{class n{urlSerializer=S(ba);options=S(gs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(us);urlHandlingStrategy=S(Zm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ii;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ii?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Vk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>S(Tz),providedIn:"root"})}return n})(),Tz=(()=>{class n extends nO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ps?this.updateStateMemento():t instanceof Ci?this.commitTransition(r):t instanceof Kd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Qd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof bi&&t.code!==On.SupersededByNewNavigation&&t.code!==On.Redirect?this.restoreHistory(r):t instanceof rl?this.restoreHistory(r,!0):t instanceof ur&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jm(n,e){n.events.pipe(xn(t=>t instanceof ur||t instanceof bi||t instanceof rl||t instanceof Ci),Ie(t=>t instanceof ur||t instanceof Ci?0:(t instanceof bi?t.code===On.Redirect||t.code===On.SupersededByNewNavigation:!1)?2:1),xn(t=>t!==2),Qi(1)).subscribe(()=>{e()})}var Dz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(ub);stateManager=S(nO);options=S(gs,{optional:!0})||{};pendingTasks=S(pi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(Xm);urlSerializer=S(ba);location=S(us);urlHandlingStrategy=S(Zm);injector=S(Dt);_events=new Ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(tO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(Ca,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(rh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Et;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=xt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof bi&&r.code!==On.Redirect&&r.code!==On.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ur)this.navigated=!0;else if(r instanceof ol){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Iz(i.source)},s);this.scheduleNavigation(a,el,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Tq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),el,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(gn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return xt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(xI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=kk(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return Ok(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=fs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,el,null,r)}navigate(t,r={skipLocationChange:!1}){return Az(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Xo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Dz):r===!1?i=j({},Sz):i=r,fs(t))return gk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return gk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,p)=>{a=f,c=p});let d=this.pendingTasks.add();return Jm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Az(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}var ht=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=te(null);get href(){return xt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ct;applicationErrorHandler=S(gn);options=S(gs,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new lm("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ur&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(re(Xe),re(wn),bd("tabindex"),re(Ir),re(mn),re(Zr))};static \u0275dir=nt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&H("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&vi("href",i.reactiveHref(),Uw)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ls],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ls],replaceUrl:[2,"replaceUrl","replaceUrl",ls],routerLink:"routerLink"},features:[br]})}return n})(),OI=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new gt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ur&&this.update()})}ngAfterContentInit(){ce(this.links.changes,ce(null)).pipe(Wo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Be(t).pipe(Wo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=xz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(re(Xe),re(mn),re(Ir),re(Ei),re(ht,8))};static \u0275dir=nt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&gb(o,ht,5),r&2){let s;mb(s=vb())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[br]})}return n})();function xz(n){return!!n.paths}var oh=class{};var rO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(xn(t=>t instanceof ur),Go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Kc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Be(i).pipe(Wo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ce(null);let o=i.pipe(Tt(s=>s===null?ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Be([o,s]).pipe(Wo())}else return o})}static \u0275fac=function(r){return new(r||n)(fe(Xe),fe(Dt),fe(oh),fe(Ym))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iO=new X(""),Mz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=el;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ps?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ur?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ci&&t.code===nl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof il))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new il(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){rb()};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function FI(n,...e){return $n([{provide:Ca,multi:!0,useValue:n},[],{provide:wn,useFactory:oO,deps:[Xe]},{provide:Dd,multi:!0,useFactory:sO},e.map(t=>t.\u0275providers)])}function oO(n){return n.routerState.root}function sh(n,e){return{\u0275kind:n,\u0275providers:e}}function sO(){let n=S(wt);return e=>{let t=n.get(co);if(e!==t.components[0])return;let r=n.get(Xe),i=n.get(aO);n.get(LI)===1&&r.initialNavigation(),n.get(uO,null,{optional:!0})?.setUpPreloading(),n.get(iO,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aO=new X("",{factory:()=>new Ct}),LI=new X("",{providedIn:"root",factory:()=>1});function cO(){let n=[{provide:Ow,useValue:!0},{provide:LI,useValue:0},am(()=>{let e=S(wt);return e.get(jb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Xe),o=e.get(aO);Jm(i,()=>{r(!0)}),e.get(Xm).afterPreactivation=()=>(r(!0),o.closed?ce(void 0):o),i.initialNavigation()}))})];return sh(2,n)}function lO(){let n=[am(()=>{S(Xe).setUpLocationChangeListener()}),{provide:LI,useValue:2}];return sh(3,n)}var uO=new X("");function dO(n){return sh(0,[{provide:uO,useExisting:rO},{provide:oh,useExisting:n}])}function hO(){return sh(8,[SI,{provide:rh,useExisting:SI}])}function fO(n){mi("NgRouterViewTransitions");let e=[{provide:RI,useValue:eO},{provide:PI,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return sh(9,e)}var pO=[us,{provide:ba,useClass:hs},Xe,Ia,{provide:wn,useFactory:oO,deps:[Xe]},Ym,[]],Mt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[pO,[],{provide:Ca,multi:!0,useValue:t},[],r?.errorHandler?{provide:NI,useValue:r.errorHandler}:[],{provide:gs,useValue:r||{}},r?.useHash?Pz():Nz(),Rz(),r?.preloadingStrategy?dO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?kz(r):[],r?.bindToComponentInputs?hO().\u0275providers:[],r?.enableViewTransitions?fO().\u0275providers:[],Oz()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ca,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=pr({})}return n})();function Rz(){return{provide:iO,useFactory:()=>{let n=S(sk),e=S(He),t=S(gs),r=S(Xm),i=S(ba);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mz(i,r,n,e,t)}}}function Pz(){return{provide:Zr,useClass:Wb}}function Nz(){return{provide:Zr,useClass:fm}}function kz(n){return[n.initialNavigation==="disabled"?lO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?cO().\u0275providers:[]]}var kI=new X("");function Oz(){return[{provide:kI,useFactory:sO},{provide:Dd,multi:!0,useExisting:kI}]}var gO=()=>{};var UI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var z=function(n,e){if(!n)throw Ta(e)},Ta=function(n){return new Error("Firebase Database ("+UI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var _O=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Fz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},hl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,p=(a&15)<<2|u>>6,m=u&63;c||(m=64,s||(p=64)),r.push(t[d],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_O(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Fz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new jI;let p=o<<2|a>>4;if(r.push(p),u!==64){let m=a<<4&240|u>>2;if(r.push(m),f!==64){let I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},jI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$I=function(n){let e=_O(n);return hl.encodeByteArray(e,!0)},ch=function(n){return $I(n).replace(/\./g,"")},ul=function(n){try{return hl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yO(n){return EO(void 0,n)}function EO(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!Lz(t)||(n[t]=EO(n[t],e[t]));return n}function Lz(n){return n!=="__proto__"}function HI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Vz=()=>HI().__FIREBASE_DEFAULTS__,Uz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ul(n[1]);return e&&JSON.parse(e)},tv=()=>{try{return gO()||Vz()||Uz()||jz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qI=n=>{var e,t;return(t=(e=tv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fl=n=>{let e=qI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zI=()=>{var n;return(n=tv())===null||n===void 0?void 0:n.config},WI=n=>{var e;return(e=tv())===null||e===void 0?void 0:e[`_${n}`]};var bn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Wn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ms(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function pl(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ch(JSON.stringify(t)),ch(JSON.stringify(s)),""].join(".")}var ah={};function Bz(){let n={prod:[],emulator:[]};for(let e of Object.keys(ah))ah[e]?n.emulator.push(e):n.prod.push(e);return n}function $z(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var mO=!1;function vs(n,e){if(typeof window>"u"||typeof document>"u"||!Wn(window.location.host)||ah[n]===e||ah[n]||mO)return;ah[n]=e;function t(p){return`__firebase__banner__${p}`}let r="__firebase__banner",o=Bz().prod.length>0;function s(){let p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{mO=!0,s()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){let p=$z(r),m=t("text"),I=document.getElementById(m)||document.createElement("span"),N=t("learnmore"),k=document.getElementById(N)||document.createElement("a"),$=t("preprendIcon"),ne=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let ee=p.element;a(ee),d(k,N);let de=u();c(ne,$),ee.append(ne,I,k,de),document.body.appendChild(ee)}o?(I.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Hz(){var n;let e=(n=tv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IO(){let n=Zt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Di(){return UI.NODE_CLIENT===!0||UI.NODE_ADMIN===!0}function CO(){return!Hz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uh(){try{return typeof indexedDB=="object"}catch{return!1}}function TO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var qz="FirebaseError",Fn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}},ei=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?zz(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Fn(i,a,r)}};function zz(n,e){return n.replace(Wz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Wz=/\{\$([^}]+)}/g;function dl(n){return JSON.parse(n)}function zt(n){return JSON.stringify(n)}var DO=function(n){let e={},t={},r={},i="";try{let o=n.split(".");e=dl(ul(o[0])||""),t=dl(ul(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var SO=function(n){let e=DO(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},AO=function(n){let e=DO(n).claims;return typeof e=="object"&&e.admin===!0};function ti(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Da(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function gl(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dh(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function xr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(vO(o)&&vO(s)){if(!xr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function vO(n){return n!==null&&typeof n=="object"}function Sa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ml(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function vl(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var ev=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)r[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){let p=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let f=0;f<80;f++){f<40?f<20?(u=a^o&(s^a),d=1518500249):(u=o^s^a,d=1859775393):f<60?(u=o&s|a&(o|s),d=2400959708):(u=o^s^a,d=3395469782);let p=(i<<5|i>>>27)+u+c+d+r[f]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<t;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function xO(n,e){let t=new BI(n,e);return t.subscribe.bind(t)}var BI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Gz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=VI),i.error===void 0&&(i.error=VI),i.complete===void 0&&(i.complete=VI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Gz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function VI(){}function Aa(n,e){return`${n} failed: ${e} argument `}var MO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,z(r<n.length,"Surrogate pair missing trail surrogate.");let s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hh=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Jye=14400*1e3;function Me(n){return n&&n._delegate?n._delegate:n}var Wt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xa="[DEFAULT]";var rv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new bn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qz(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Kz(n){return n===xa?void 0:n}function Qz(n){return n.instantiationMode==="EAGER"}var fh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Yz=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),Zz={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Xz=De.INFO,Jz={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},eW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Jz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=Xz,this._logHandler=eW,this._userLogHandler=null,Yz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var tW=(n,e)=>e.some(t=>n instanceof t),RO,PO;function nW(){return RO||(RO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rW(){return PO||(PO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var NO=new WeakMap,KI=new WeakMap,kO=new WeakMap,GI=new WeakMap,YI=new WeakMap;function iW(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Si(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&NO.set(t,n)}).catch(()=>{}),YI.set(e,n),e}function oW(n){if(KI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});KI.set(n,e)}var QI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return KI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Si(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OO(n){QI=n(QI)}function sW(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(iv(this),e,...t);return kO.set(r,e.sort?e.sort():[e]),Si(r)}:rW().includes(n)?function(...e){return n.apply(iv(this),e),Si(NO.get(this))}:function(...e){return Si(n.apply(iv(this),e))}}function aW(n){return typeof n=="function"?sW(n):(n instanceof IDBTransaction&&oW(n),tW(n,nW())?new Proxy(n,QI):n)}function Si(n){if(n instanceof IDBRequest)return iW(n);if(GI.has(n))return GI.get(n);let e=aW(n);return e!==n&&(GI.set(n,e),YI.set(e,n)),e}var iv=n=>YI.get(n);function LO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Si(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Si(s.result),c.oldVersion,c.newVersion,Si(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var cW=["get","getKey","getAll","getAllKeys","count"],lW=["put","add","delete","clear"],ZI=new Map;function FO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ZI.get(e))return ZI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=lW.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cW.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return ZI.set(e,o),o}OO(n=>ue(j({},n),{get:(e,t,r)=>FO(e,t)||n.get(e,t,r),has:(e,t)=>!!FO(e,t)||n.has(e,t)}));var JI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function uW(n){let e=n.getComponent();return e?.type==="VERSION"}var eC="@firebase/app",VO="0.13.2";var vo=new Mr("@firebase/app"),dW="@firebase/app-compat",hW="@firebase/analytics-compat",fW="@firebase/analytics",pW="@firebase/app-check-compat",gW="@firebase/app-check",mW="@firebase/auth",vW="@firebase/auth-compat",_W="@firebase/database",yW="@firebase/data-connect",EW="@firebase/database-compat",wW="@firebase/functions",bW="@firebase/functions-compat",IW="@firebase/installations",CW="@firebase/installations-compat",TW="@firebase/messaging",DW="@firebase/messaging-compat",SW="@firebase/performance",AW="@firebase/performance-compat",xW="@firebase/remote-config",MW="@firebase/remote-config-compat",RW="@firebase/storage",PW="@firebase/storage-compat",NW="@firebase/firestore",kW="@firebase/ai",OW="@firebase/firestore-compat",FW="firebase",LW="11.10.0";var tC="[DEFAULT]",VW={[eC]:"fire-core",[dW]:"fire-core-compat",[fW]:"fire-analytics",[hW]:"fire-analytics-compat",[gW]:"fire-app-check",[pW]:"fire-app-check-compat",[mW]:"fire-auth",[vW]:"fire-auth-compat",[_W]:"fire-rtdb",[yW]:"fire-data-connect",[EW]:"fire-rtdb-compat",[wW]:"fire-fn",[bW]:"fire-fn-compat",[IW]:"fire-iid",[CW]:"fire-iid-compat",[TW]:"fire-fcm",[DW]:"fire-fcm-compat",[SW]:"fire-perf",[AW]:"fire-perf-compat",[xW]:"fire-rc",[MW]:"fire-rc-compat",[RW]:"fire-gcs",[PW]:"fire-gcs-compat",[NW]:"fire-fst",[OW]:"fire-fst-compat",[kW]:"fire-vertex","fire-js":"fire-js",[FW]:"fire-js-all"};var ph=new Map,UW=new Map,nC=new Map;function UO(n,e){try{n.container.addComponent(e)}catch(t){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ln(n){let e=n.name;if(nC.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;nC.set(e,n);for(let t of ph.values())UO(t,n);for(let t of UW.values())UO(t,n);return!0}function Ai(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xt(n){return n==null?!1:n.settings!==void 0}var jW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new ei("app","Firebase",jW);var rC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}};var Rr=LW;function sC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:tC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _s.create("bad-app-name",{appName:String(i)});if(t||(t=zI()),!t)throw _s.create("no-options");let o=ph.get(i);if(o){if(xr(t,o.options)&&xr(r,o.config))return o;throw _s.create("duplicate-app",{appName:i})}let s=new fh(i);for(let c of nC.values())s.addComponent(c);let a=new rC(t,r,s);return ph.set(i,a),a}function ni(n=tC){let e=ph.get(n);if(!e&&n===tC&&zI())return sC();if(!e)throw _s.create("no-app",{appName:n});return e}function ov(){return Array.from(ph.values())}function Je(n,e,t){var r;let i=(r=VW[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vo.warn(a.join(" "));return}Ln(new Wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var BW="firebase-heartbeat-database",$W=1,gh="firebase-heartbeat-store",XI=null;function HO(){return XI||(XI=LO(BW,$W,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gh)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),XI}function HW(n){return E(this,null,function*(){try{let t=(yield HO()).transaction(gh),r=yield t.objectStore(gh).get(qO(n));return yield t.done,r}catch(e){if(e instanceof Fn)vo.warn(e.message);else{let t=_s.create("idb-get",{originalErrorMessage:e?.message});vo.warn(t.message)}}})}function jO(n,e){return E(this,null,function*(){try{let r=(yield HO()).transaction(gh,"readwrite");yield r.objectStore(gh).put(e,qO(n)),yield r.done}catch(t){if(t instanceof Fn)vo.warn(t.message);else{let r=_s.create("idb-set",{originalErrorMessage:t?.message});vo.warn(r.message)}}})}function qO(n){return`${n.name}!${n.options.appId}`}var qW=1024,zW=30,iC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=BO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>zW){let s=GW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vo.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=BO(),{heartbeatsToSend:r,unsentEntries:i}=WW(this._heartbeatsCache.heartbeats),o=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vo.warn(t),""}})}};function BO(){return new Date().toISOString().substring(0,10)}function WW(n,e=qW){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),$O(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$O(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var oC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return uh()?TO().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function $O(n){return ch(JSON.stringify({version:2,heartbeats:n})).length}function GW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function KW(n){Ln(new Wt("platform-logger",e=>new JI(e),"PRIVATE")),Ln(new Wt("heartbeat",e=>new iC(e),"PRIVATE")),Je(eC,VO,n),Je(eC,VO,"esm2017"),Je("fire-js","")}KW("");var QW="firebase",YW="11.10.0";Je(QW,YW,"app");function zO(n){n===void 0&&(n=S(wt));let e=n.get(Uc);return t=>new he(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ys=new Qo("ANGULARFIRE2_VERSION");function mh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var yl=(n,e)=>{let t=e?[e]:ov(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},_l=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(_l||{}),WO=Fb()&&typeof Zone<"u"?_l.WARN:_l.SILENT;var sv=class{zone;delegate;constructor(e,t=qE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Es=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(He);this.outsideAngular=t.runOutsideAngular(()=>new sv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new sv(typeof Zone>"u"?void 0:Zone.current,HE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GO=!1;function ZW(n,e){!GO&&(WO>_l.SILENT||Fb())&&(GO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),WO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function XW(n){let e=S(He,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ma(n){let e=S(He,{optional:!0});return e?e.run(()=>n()):n()}var JW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Nt(t,()=>Ma(()=>n.apply(void 0,r)))),it=(n,e,t)=>(t||=e?_l.WARN:_l.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(Es),s=S(Uc),a=S(Dt)}catch{return ZW(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Ma(()=>s.add())),i[u]=JW(i[u],r,a));let c=XW(()=>n.apply(this,i));return e?c instanceof he?c.pipe(qo(o.outsideAngular),Ho(o.insideAngular),zO(a)):c instanceof Promise?Ma(()=>{let u=s.add();return new Promise((d,f)=>{c.then(p=>Nt(a,()=>Ma(()=>d(p))),p=>Nt(a,()=>Ma(()=>f(p)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ma(()=>c):c instanceof he?c.pipe(qo(o.outsideAngular),Ho(o.insideAngular)):Ma(()=>c)});var _o=class{constructor(e){return e}},Ra=class{constructor(){return ov()}};function eG(n){return n&&n.length===1?n[0]:new _o(ni())}var aC=new X("angularfire2._apps"),tG={provide:_o,useFactory:eG,deps:[[new sr,aC]]},nG={provide:Ra,deps:[[new sr,aC]]};function rG(n){return(e,t)=>{let r=t.get(ma);Je("angularfire",ys.full,"core"),Je("angularfire",ys.full,"app"),Je("angular",a0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _o(i)}}function KO(n,...e){return $n([tG,nG,{provide:aC,useFactory:rG(n),multi:!0,deps:[He,wt,Es,...e]}])}var QO=it(sC,!0);var iG=new Map,oG={activated:!1,tokenObservers:[]},sG={initialized:!1,enabled:!1};function ri(n){return iG.get(n)||Object.assign({},oG)}function JO(){return sG}var aG="https://content-firebaseappcheck.googleapis.com/v1";var cG="exchangeDebugToken",YO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},n0e=1440*60*1e3;var uC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new bn,this.pending.promise.catch(t=>{}),yield lG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new bn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function lG(n){return new Promise(e=>{setTimeout(e,n)})}var uG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ws=new ei("appCheck","AppCheck",uG);function eF(n){if(!ri(n).activated)throw ws.create("use-before-activation",{appName:n.name})}function tF(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw ws.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw ws.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw ws.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,p=Date.now();return{token:u.token,expireTimeMillis:p+f,issuedAtTimeMillis:p}})}function nF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${aG}/projects/${t}/apps/${r}:${cG}?key=${i}`,body:{debug_token:e}}}var dG="firebase-app-check-database",hG=1,dC="firebase-app-check-store";var av=null;function fG(){return av||(av=new Promise((n,e)=>{try{let t=indexedDB.open(dG,hG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ws.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dC,{keyPath:"compositeKey"})}}}catch(t){e(ws.create("storage-open",{originalErrorMessage:t?.message}))}}),av)}function pG(n,e){return gG(mG(n),e)}function gG(n,e){return E(this,null,function*(){let r=(yield fG()).transaction(dC,"readwrite"),o=r.objectStore(dC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(ws.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function mG(n){return`${n.options.appId}-${n.name}`}var vh=new Mr("@firebase/app-check");function cC(n,e){return uh()?pG(n,e).catch(t=>{vh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rF(){return JO().enabled}function iF(){return E(this,null,function*(){let n=JO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vG={error:"UNKNOWN_ERROR"};function _G(n){return hl.encodeString(JSON.stringify(n),!1)}function hC(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;eF(r);let i=ri(r),o=i.token,s;if(o&&!_h(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(_h(u)?o=u:yield cC(r,void 0))}if(!e&&o&&_h(o))return{token:o.token};let a=!1;if(rF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=tF(nF(r,yield iF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield cC(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?vh.warn(u.message):t&&vh.error(u),lC(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ri(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?vh.warn(u.message):t&&vh.error(u),s=u}let c;return o?s?_h(o)?c={token:o.token,internalError:s}:c=lC(s):(c={token:o.token},i.token=o,yield cC(r,o)):c=lC(s),a&&bG(r,c),c})}function yG(n){return E(this,null,function*(){let e=n.app;eF(e);let{provider:t}=ri(e);if(rF()){let r=yield iF(),{token:i}=yield tF(nF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EG(n,e,t,r){let{app:i}=n,o=ri(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_h(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ZO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZO(n))}function oF(n,e){let t=ri(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZO(n){let{app:e}=n,t=ri(e),r=t.tokenRefresher;r||(r=wG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wG(n){let{app:e}=n;return new uC(()=>E(null,null,function*(){let t=ri(e),r;if(t.token?r=yield hC(n,!0):r=yield hC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},YO.RETRIAL_MIN_WAIT,YO.RETRIAL_MAX_WAIT)}function bG(n,e){let t=ri(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _h(n){return n.expireTimeMillis-Date.now()>0}function lC(n){return{token:_G(vG),error:n}}var fC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ri(this.app);for(let t of e)oF(this.app,t.next);return Promise.resolve()}};function IG(n,e){return new fC(n,e)}function CG(n){return{getToken:e=>hC(n,e),getLimitedUseToken:()=>yG(n),addTokenListener:e=>EG(n,"INTERNAL",e),removeTokenListener:e=>oF(n.app,e)}}var TG="@firebase/app-check",DG="0.10.1";var SG="app-check",XO="app-check-internal";function AG(){Ln(new Wt(SG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return IG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XO).initialize()})),Ln(new Wt(XO,n=>{let e=n.getProvider("app-check").getImmediate();return CG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Je(TG,DG)}AG();var xG="app-check";var El=class{constructor(){return yl(xG)}};var MG=["localhost","0.0.0.0","127.0.0.1"],g0e=typeof window<"u"&&MG.includes(window.location.hostname);function wF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bF=wF,IF=new ei("auth","Firebase",wF());var fv=new Mr("@firebase/auth");function RG(n,...e){fv.logLevel<=De.WARN&&fv.warn(`Auth (${Rr}): ${n}`,...e)}function lv(n,...e){fv.logLevel<=De.ERROR&&fv.error(`Auth (${Rr}): ${n}`,...e)}function Mi(n,...e){throw VC(n,...e)}function Pa(n,...e){return VC(n,...e)}function CF(n,e,t){let r=Object.assign(Object.assign({},bF()),{[e]:t});return new ei("auth","Firebase",r).create(e,{appName:n.name})}function wo(n){return CF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return IF.create(n,...e)}function ae(n,e,...t){if(!n)throw VC(e,...t)}function yo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw lv(e),new Error(e)}function Cs(n,e){n||yo(e)}function vC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PG(){return sF()==="http:"||sF()==="https:"}function sF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function NG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PG()||bO()||"connection"in navigator)?navigator.onLine:!0}function kG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Na=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=lh()||nv()}get(){return NG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function UC(n,e){Cs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var pv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var FG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LG=new Na(3e4,6e4);function bo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ri(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return TF(n,i,()=>E(null,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=Sa(Object.assign({key:n.config.apiKey},d)).slice(1),p=yield n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:p},u);return wO()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Wn(n.emulatorConfig.host)&&(m.credentials="include"),pv.fetch()(yield DF(n,n.config.apiHost,t,f),m)}))})}function TF(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},OG),e);try{let i=new _C(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw cv(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cv(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw cv(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw cv(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CF(n,d,u);Mi(n,d)}}catch(i){if(i instanceof Fn)throw i;Mi(n,"network-request-failed",{message:String(i)})}})}function Dh(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let u=yield Ri(n,e,t,r,i);return"mfaPendingCredential"in u&&Mi(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function DF(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?UC(n.config,i):`${n.config.apiScheme}://${i}`;return FG.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function VG(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _C=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pa(this.auth,"network-request-failed")),LG.get())})}};function cv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Pa(n,e,r);return i.customData._tokenResponse=t,i}function aF(n){return n!==void 0&&n.enterprise!==void 0}var yC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VG(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function UG(n,e){return E(this,null,function*(){return Ri(n,"GET","/v2/recaptchaConfig",bo(n,e))})}function jG(n,e){return E(this,null,function*(){return Ri(n,"POST","/v1/accounts:delete",e)})}function gv(n,e){return E(this,null,function*(){return Ri(n,"POST","/v1/accounts:lookup",e)})}function Eh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jC(n,e=!1){return E(this,null,function*(){let t=Me(n),r=yield t.getIdToken(e),i=BC(r);ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Eh(pC(i.auth_time)),issuedAtTime:Eh(pC(i.iat)),expirationTime:Eh(pC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function pC(n){return Number(n)*1e3}function BC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lv("JWT malformed, contained fewer than 3 sections"),null;try{let i=ul(t);return i?JSON.parse(i):(lv("Failed to decode base64 JWT payload"),null)}catch(i){return lv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cF(n){let e=BC(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function wl(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Fn&&BG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function BG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var EC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eh(this.lastLoginAt),this.creationTime=Eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function mv(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield wl(n,gv(t,{idToken:r}));ae(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?SF(o.providerUserInfo):[],a=$G(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bh(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function $C(n){return E(this,null,function*(){let e=Me(n);yield mv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function $G(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SF(n){return n.map(e=>{var{providerId:t}=e,r=zE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function HG(n,e){return E(this,null,function*(){let t=yield TF(n,{},()=>E(null,null,function*(){let r=Sa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield DF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Wn(n.emulatorConfig.host)&&(c.credentials="include"),pv.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function qG(n,e){return E(this,null,function*(){return Ri(n,"POST","/v2/accounts:revokeToken",bo(n,e))})}var wh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");let t=cF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield HG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yo("not implemented")}};function bs(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Is=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=zE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield wl(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return jC(this,e)}reload(){return $C(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield mv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Xt(this.auth.app))return Promise.reject(wo(this.auth));let e=yield this.getIdToken();return yield wl(this,jG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,$=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ne=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:ee,emailVerified:de,isAnonymous:_t,providerData:Ne,stsTokenManager:M}=t;ae(ee&&M,e,"internal-error");let C=wh.fromJSON(this.name,M);ae(typeof ee=="string",e,"internal-error"),bs(f,e.name),bs(p,e.name),ae(typeof de=="boolean",e,"internal-error"),ae(typeof _t=="boolean",e,"internal-error"),bs(m,e.name),bs(I,e.name),bs(N,e.name),bs(k,e.name),bs($,e.name),bs(ne,e.name);let T=new n({uid:ee,auth:e,email:p,emailVerified:de,displayName:f,isAnonymous:_t,photoURL:I,phoneNumber:m,tenantId:N,stsTokenManager:C,createdAt:$,lastLoginAt:ne});return Ne&&Array.isArray(Ne)&&(T.providerData=Ne.map(x=>Object.assign({},x))),k&&(T._redirectEventId=k),T}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new wh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield mv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];ae(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?SF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new wh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var lF=new Map;function Eo(n){Cs(n instanceof Function,"Expected a class definition");let e=lF.get(n);return e?(Cs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lF.set(n,e),e)}var zG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),wC=zG;function uv(n,e,t){return`firebase:${n}:${e}:${t}`}var vv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=uv(this.userKey,i.apiKey,o),this.fullPersistenceKey=uv("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield gv(this.auth,{idToken:e}).catch(()=>{});return t?Is._fromGetAccountInfoResponse(this.auth,t,e):null}return Is._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Eo(wC),e,r);let i=(yield Promise.all(t.map(u=>E(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Eo(wC),s=uv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f;if(typeof d=="string"){let p=yield gv(e,{idToken:d}).catch(()=>{});if(!p)break;f=yield Is._fromGetAccountInfoResponse(e,p,d)}else f=Is._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function uF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NF(e))return"Blackberry";if(kF(e))return"Webos";if(xF(e))return"Safari";if((e.includes("chrome/")||MF(e))&&!e.includes("edge/"))return"Chrome";if(PF(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AF(n=Zt()){return/firefox\//i.test(n)}function xF(n=Zt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MF(n=Zt()){return/crios\//i.test(n)}function RF(n=Zt()){return/iemobile/i.test(n)}function PF(n=Zt()){return/android/i.test(n)}function NF(n=Zt()){return/blackberry/i.test(n)}function kF(n=Zt()){return/webos/i.test(n)}function HC(n=Zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WG(n=Zt()){var e;return HC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GG(){return IO()&&document.documentMode===10}function OF(n=Zt()){return HC(n)||PF(n)||kF(n)||NF(n)||/windows phone/i.test(n)||RF(n)}function FF(n,e=[]){let t;switch(n){case"Browser":t=uF(Zt());break;case"Worker":t=`${uF(Zt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rr}/${r}`}var bC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function KG(t){return E(this,arguments,function*(n,e={}){return Ri(n,"GET","/v2/passwordPolicy",bo(n,e))})}var QG=6,IC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:QG,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var CC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Eo(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield vv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield gv(this,{idToken:e}),r=yield Is._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Xt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield mv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=kG()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Xt(this.app))return Promise.reject(wo(this));let t=e?Me(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Xt(this.app)?Promise.reject(wo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xt(this.app)?Promise.reject(wo(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Eo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield KG(this),t=new IC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ei("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield qG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Eo(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=yield vv.create(this,[Eo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Oa(n){return Me(n)}var _v=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xO(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Tv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YG(n){Tv=n}function LF(n){return Tv.loadJS(n)}function ZG(){return Tv.recaptchaEnterpriseScript}function XG(){return Tv.gapiScript}function VF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var TC=class{constructor(){this.enterprise=new DC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},DC=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var JG="recaptcha-enterprise",UF="NO_RECAPTCHA",SC=class{constructor(e){this.type=JG,this.auth=Oa(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(o){return E(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>E(null,null,function*(){UG(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new yC(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;aF(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(UF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TC().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&aF(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ZG();c.length!==0&&(c+=a),LF(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function yh(n,e,t,r=!1,i=!1){return E(this,null,function*(){let o=new SC(n),s;if(i)s=UF;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function AC(n,e,t,r,i){return E(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield yh(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>E(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield yh(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield yh(n,e,t);return r(n,a).catch(c=>E(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield yh(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield yh(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function qC(n,e){let t=Ai(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(xr(o,e??{}))return i;Mi(i,"already-initialized")}return t.initialize({options:e})}function e9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Eo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function zC(n,e,t){let r=Oa(n);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=jF(e),{host:s,port:a}=t9(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(xr(u,r.config.emulator)&&xr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Wn(s)?(ms(`${o}//${s}${c}`),vs("Auth",!0)):i||n9()}function jF(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function t9(n){let e=jF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dF(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:dF(s)}}}function dF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function n9(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ih=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,t){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}};function r9(n,e){return E(this,null,function*(){return Ri(n,"POST","/v1/accounts:signUp",e)})}function i9(n,e){return E(this,null,function*(){return Dh(n,"POST","/v1/accounts:signInWithPassword",bo(n,e))})}function o9(n,e){return E(this,null,function*(){return Ri(n,"POST","/v1/accounts:sendOobCode",bo(n,e))})}function s9(n,e){return E(this,null,function*(){return o9(n,e)})}function a9(n,e){return E(this,null,function*(){return Dh(n,"POST","/v1/accounts:signInWithEmailLink",bo(n,e))})}function c9(n,e){return E(this,null,function*(){return Dh(n,"POST","/v1/accounts:signInWithEmailLink",bo(n,e))})}var Ch=class n extends Ih{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AC(e,t,"signInWithPassword",i9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a9(e,{email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AC(e,r,"signUpPassword",r9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c9(e,{idToken:t,email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function gC(n,e){return E(this,null,function*(){return Dh(n,"POST","/v1/accounts:signInWithIdp",bo(n,e))})}function l9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u9(n){let e=ml(vl(n)).link,t=e?ml(vl(e)).deep_link_id:null,r=ml(vl(n)).deep_link_id;return(r?ml(vl(r)).link:null)||r||t||e||n}var yv=class n{constructor(e){var t,r,i,o,s,a;let c=ml(vl(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=l9((i=c.mode)!==null&&i!==void 0?i:null);ae(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=u9(e);try{return new n(t)}catch{return null}}};var BF=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ch._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=yv.parseLink(r);return ae(i,"argument-error"),Ch._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ev=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var xC=class extends Ev{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function d9(n,e){return E(this,null,function*(){return Dh(n,"POST","/v1/accounts:signUp",bo(n,e))})}var bl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield Is._fromIdTokenResponse(e,r,i),s=hF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var MC=class n extends Fn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $F(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?MC._fromErrorAndOperation(n,o,e,r):o})}function h9(n,e,t=!1){return E(this,null,function*(){let r=yield wl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return bl._forOperation(n,"link",r)})}function f9(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Xt(r.app))return Promise.reject(wo(r));let i="reauthenticate";try{let o=yield wl(n,$F(r,i,e,n),t);ae(o.idToken,r,"internal-error");let s=BC(o.idToken);ae(s,r,"internal-error");let{sub:a}=s;return ae(n.uid===a,r,"user-mismatch"),bl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Mi(r,"user-mismatch"),o}})}function HF(n,e,t=!1){return E(this,null,function*(){if(Xt(n.app))return Promise.reject(wo(n));let r="signIn",i=yield $F(n,r,e),o=yield bl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function WC(n,e){return E(this,null,function*(){return HF(Oa(n),e)})}function p9(n,e,t){var r;ae(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ae(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ae(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ae(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ae(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function qF(n){return E(this,null,function*(){let e=Oa(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function GC(n,e,t){return E(this,null,function*(){if(Xt(n.app))return Promise.reject(wo(n));let r=Oa(n),s=yield AC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d9,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qF(n),c}),a=yield bl._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function KC(n,e,t){return Xt(n.app)?Promise.reject(wo(n)):WC(Me(n),BF.credential(e,t)).catch(r=>E(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&qF(n),r}))}function QC(n,e){return E(this,null,function*(){let t=Me(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&p9(t.auth,i,e);let{email:o}=yield s9(t.auth,i);o!==n.email&&(yield n.reload())})}function g9(n,e){return E(this,null,function*(){return Ri(n,"POST","/v1/accounts:update",e)})}function YC(r,i){return E(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Me(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield wl(o,g9(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let u=o.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=o.displayName,u.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function Sh(n,e,t,r){return Me(n).onIdTokenChanged(e,t,r)}function ZC(n,e,t){return Me(n).beforeAuthStateChanged(e,t)}function Ah(n){return Me(n).signOut()}var wv="__sak";var bv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wv,"1"),this.storage.removeItem(wv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var m9=1e3,v9=10,_9=(()=>{class n extends bv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);GG()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,v9):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},m9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Bo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Bo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Bo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zF=_9;var y9=(()=>{class n extends bv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),XC=y9;function E9(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var w9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>E(this,null,function*(){return d(r.origin,s)})),u=yield E9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function WF(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var RC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=WF("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function xi(){return window}function b9(n){xi().location.href=n}function GF(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}function I9(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function C9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function T9(){return GF()?self:null}var KF="firebaseLocalStorageDb",D9=1,Iv="firebaseLocalStorage",QF="fbase_key",ka=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Dv(n,e){return n.transaction([Iv],e?"readwrite":"readonly").objectStore(Iv)}function S9(){let n=indexedDB.deleteDatabase(KF);return new ka(n).toPromise()}function PC(){let n=indexedDB.open(KF,D9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Iv,{keyPath:QF})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Iv)?e(r):(r.close(),yield S9(),e(yield PC()))}))})}function fF(n,e,t){return E(this,null,function*(){let r=Dv(n,!0).put({[QF]:e,value:t});return new ka(r).toPromise()})}function A9(n,e){return E(this,null,function*(){let t=Dv(n,!1).get(e),r=yield new ka(t).toPromise();return r===void 0?null:r.value})}function pF(n,e){let t=Dv(n,!0).delete(e);return new ka(t).toPromise()}var x9=800,M9=3,R9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield PC(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>M9)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return GF()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=w9._getInstance(T9()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield I9(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||C9()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield PC();return yield fF(t,wv,"1"),yield pF(t,wv),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>fF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>A9(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>pF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=Dv(o,!1).getAll();return new ka(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),x9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),YF=R9;var I0e=VF("rcb"),C0e=new Na(3e4,6e4);function P9(n,e){return e?Eo(e):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Th=class extends Ih{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function N9(n){return HF(n.auth,new Th(n),n.bypassAuthState)}function k9(n){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),f9(t,new Th(n),n.bypassAuthState)}function O9(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),h9(t,new Th(n),n.bypassAuthState)})}var NC=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N9;case"linkViaPopup":case"linkViaRedirect":return O9;case"reauthViaPopup":case"reauthViaRedirect":return k9;default:Mi(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var T0e=new Na(2e3,1e4);var F9="pendingRedirect",dv=new Map,kC=class n extends NC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=dv.get(this.auth._key());if(!e){try{let r=(yield L9(this.resolver,this.auth))?yield Bo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dv.set(this.auth._key(),e)}return this.bypassAuthState||dv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Bo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function L9(n,e){return E(this,null,function*(){let t=j9(e),r=U9(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function V9(n,e){dv.set(n._key(),e)}function U9(n){return Eo(n._redirectPersistence)}function j9(n){return uv(F9,n.config.apiKey,n.name)}function B9(n,e,t=!1){return E(this,null,function*(){if(Xt(n.app))return Promise.reject(wo(n));let r=Oa(n),i=P9(r,e),s=yield new kC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var $9=600*1e3,OC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pa(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$9&&this.cachedEventUids.clear(),this.cachedEventUids.has(gF(e))}saveEventToCache(e){this.cachedEventUids.add(gF(e)),this.lastProcessedEventTime=Date.now()}};function gF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function H9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZF(n);default:return!1}}function q9(t){return E(this,arguments,function*(n,e={}){return Ri(n,"GET","/v1/projects",e)})}var z9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W9=/^https?/;function G9(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield q9(n);for(let t of e)try{if(K9(t))return}catch{}Mi(n,"unauthorized-domain")})}function K9(n){let e=vC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!W9.test(t))return!1;if(z9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Q9=new Na(3e4,6e4);function mF(){let n=xi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Y9(n){return new Promise((e,t)=>{var r,i,o;function s(){mF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mF(),t(Pa(n,"network-request-failed"))},timeout:Q9.get()})}if(!((i=(r=xi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=xi().gapi)===null||o===void 0)&&o.load)s();else{let a=VF("iframefcb");return xi()[a]=()=>{gapi.load?s():t(Pa(n,"network-request-failed"))},LF(`${XG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw hv=null,e})}var hv=null;function Z9(n){return hv=hv||Y9(n),hv}var X9=new Na(5e3,15e3),J9="__/auth/iframe",e7="emulator/auth/iframe",t7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r7(n){let e=n.config;ae(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?UC(e,e7):`https://${n.config.authDomain}/${J9}`,r={apiKey:e.apiKey,appName:n.name,v:Rr},i=n7.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Sa(r).slice(1)}`}function i7(n){return E(this,null,function*(){let e=yield Z9(n),t=xi().gapi;return ae(t,n,"internal-error"),e.open({where:document.body,url:r7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t7,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Pa(n,"network-request-failed"),a=xi().setTimeout(()=>{o(s)},X9.get());function c(){xi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var o7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s7=500,a7=600,c7="_blank",l7="http://localhost",Cv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function u7(n,e,t,r=s7,i=a7){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},o7),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Zt().toLowerCase();t&&(a=MF(u)?c7:t),AF(u)&&(e=e||l7,c.scrollbars="yes");let d=Object.entries(c).reduce((p,[m,I])=>`${p}${m}=${I},`,"");if(WG(u)&&a!=="_self")return d7(e||"",a),new Cv(null);let f=window.open(e||"",a,d);ae(f,n,"popup-blocked");try{f.focus()}catch{}return new Cv(f)}function d7(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var h7="__/auth/handler",f7="emulator/auth/handler",p7=encodeURIComponent("fac");function vF(n,e,t,r,i,o){return E(this,null,function*(){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Rr,eventId:i};if(e instanceof Ev){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",gl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof xC){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${p7}=${encodeURIComponent(c)}`:"";return`${g7(n)}?${Sa(a).slice(1)}${u}`})}function g7({config:n}){return n.emulator?UC(n,f7):`https://${n.authDomain}/${h7}`}var mC="webStorageSupport",FC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XC,this._completeRedirectFn=B9,this._overrideRedirectResult=V9}_openPopup(e,t,r,i){return E(this,null,function*(){var o;Cs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield vF(e,t,r,vC(),i);return u7(e,s,WF())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield vF(e,t,r,vC(),i);return b9(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Cs(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield i7(e),r=new OC(e);return t.register("authEvent",i=>(ae(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mC,{type:mC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[mC];s!==void 0&&t(!!s),Mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OF()||xF()||HC()}},XF=FC;var _F="@firebase/auth",yF="1.10.8";var LC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function m7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v7(n){Ln(new Wt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FF(n)},u=new CC(r,i,o,c);return e9(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ln(new Wt("auth-internal",e=>{let t=Oa(e.getProvider("auth").getImmediate());return(r=>new LC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Je(_F,yF,m7(n)),Je(_F,yF,"esm2017")}var _7=300,y7=WI("authIdTokenMaxAge")||_7,EF=null,E7=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>y7)return;let i=t?.token;EF!==i&&(EF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sv(n=ni()){let e=Ai(n,"auth");if(e.isInitialized())return e.getImmediate();let t=qC(n,{popupRedirectResolver:XF,persistence:[YF,zF,XC]}),r=WI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=E7(o.toString());ZC(t,s,()=>s(t.currentUser)),Sh(t,a=>s(a))}}let i=qI("auth");return i&&zC(t,`http://${i}`),t}function w7(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}YG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Pa("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",w7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v7("Browser");function tL(n){return new he(function(e){var t=Sh(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var nL="auth",Qe=class{constructor(e){return e}},xh=class{constructor(){return yl(nL)}};var JC=new X("angularfire2.auth-instances");function sK(n,e){let t=mh(nL,n,e);return t&&new Qe(t)}function aK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Qe(r)}}var cK={provide:xh,deps:[[new sr,JC]]},lK={provide:Qe,useFactory:sK,deps:[[new sr,JC],_o]};function rL(n,...e){return Je("angularfire",ys.full,"auth"),$n([lK,cK,{provide:JC,useFactory:aK(n),multi:!0,deps:[He,wt,Es,Ra,[new sr,El],...e]}])}var iL=it(tL,!0);var oL=it(GC,!0,2);var eT=it(QC,!0,2);var sL=it(KC,!0,2);var tT=it(Ah,!0,2);var aL=it(YC,!0,2);var Pr=class n{firebaseAuth=S(Qe);user$=iL(this.firebaseAuth);currentUserSig=te(void 0);register(e,t,r){console.log("=== REGISTRATION ATTEMPT ==="),console.log("Email:",e),console.log("Username:",t),console.log("Password length:",r?r.length:0),console.log("Password (first/last chars visible):",r?`${r.charAt(0)}***${r.charAt(r.length-1)}`:"EMPTY"),console.log("Calling Firebase: createUserWithEmailAndPassword(auth, email, password)");let i=oL(this.firebaseAuth,e,r).then(o=>(console.log("\u2705 Firebase registration successful for user:",o.user.uid),aL(o.user,{displayName:t}).then(()=>(console.log("\u2705 Profile updated with displayName:",t),eT(o.user))).then(()=>{console.log("\u2705 Verification email sent to:",e)}).catch(s=>{throw console.error("\u274C Error in updateProfile or sendEmailVerification:",s),this.handleAuthError(s)}))).catch(o=>{throw console.error("\u274C Firebase registration failed:",o),this.handleAuthError(o)});return Be(i)}login(e,t){let r=sL(this.firebaseAuth,e,t).then(i=>i.user.emailVerified?Promise.resolve():tT(this.firebaseAuth).then(()=>{let o=new Error("Email not verified");throw o.code="auth/user-not-verified",o})).catch(i=>{throw this.handleAuthError(i)});return Be(r)}logout(){let e=tT(this.firebaseAuth);return Be(e)}resendVerificationEmail(){let e=this.firebaseAuth.currentUser;if(!e)return zo(()=>new Error("No user logged in"));let t=eT(e).catch(r=>{throw this.handleAuthError(r)});return Be(t)}handleAuthError(e){console.error("=== FIREBASE AUTH ERROR ==="),console.error("Full Error Object:",e),console.error("Error Code:",e?.code),console.error("Error Message:",e?.message),console.error("Error Name:",e?.name),e?.customData&&console.error("Custom Data:",e.customData),e?.response&&console.error("HTTP Response:",e.response);let t=e?.code||"",r={"auth/invalid-email":!0,"auth/user-disabled":!0,"auth/user-not-found":!0,"auth/wrong-password":!0,"auth/email-already-in-use":!0,"auth/weak-password":!0,"auth/password-does-not-meet-requirements":!0,"auth/operation-not-allowed":!0,"auth/too-many-requests":!0,"auth/network-request-failed":!0,"auth/account-exists-with-different-credential":!0,"auth/invalid-credential":!0,"auth/internal-error":!0,"auth/missing-email":!0,"auth/missing-password":!0},i=new Error(e?.message||"Authentication failed");return i.code=r[t]?t:t||"auth/internal-error",console.error("Processed Error Code:",i.code),i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var ot=class n{modals=new Map;openModal(e){this.modals.set(e,!0)}closeModal(e){this.modals.set(e,!1)}toggleModal(e){let t=this.modals.get(e)??!1;this.modals.set(e,!t)}isOpen(e){return this.modals.get(e)??!1}closeAllModals(){this.modals.forEach((e,t)=>{this.modals.set(t,!1)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var cL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lL={};var Io,nT;(function(){var n;function e(M,C){function T(){}T.prototype=C.prototype,M.D=C.prototype,M.prototype=new T,M.prototype.constructor=M,M.C=function(x,R,O){for(var D=Array(arguments.length-2),qi=2;qi<arguments.length;qi++)D[qi-2]=arguments[qi];return C.prototype[R].apply(x,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,T){T||(T=0);var x=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)x[R]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(R=0;16>R;++R)x[R]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=M.g[0],T=M.g[1],R=M.g[2];var O=M.g[3],D=C+(O^T&(R^O))+x[0]+3614090360&4294967295;C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+x[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+x[2]+606105819&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+x[3]+3250441966&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+x[4]+4118548399&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+x[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+x[6]+2821735955&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+x[7]+4249261313&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+x[8]+1770035416&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+x[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+x[10]+4294925233&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+x[11]+2304563134&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(O^T&(R^O))+x[12]+1804603682&4294967295,C=T+(D<<7&4294967295|D>>>25),D=O+(R^C&(T^R))+x[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(T^O&(C^T))+x[14]+2792965006&4294967295,R=O+(D<<17&4294967295|D>>>15),D=T+(C^R&(O^C))+x[15]+1236535329&4294967295,T=R+(D<<22&4294967295|D>>>10),D=C+(R^O&(T^R))+x[1]+4129170786&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+x[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+x[11]+643717713&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+x[0]+3921069994&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+x[5]+3593408605&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+x[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+x[15]+3634488961&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+x[4]+3889429448&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+x[9]+568446438&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+x[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+x[3]+4107603335&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+x[8]+1163531501&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(T^R))+x[13]+2850285829&4294967295,C=T+(D<<5&4294967295|D>>>27),D=O+(T^R&(C^T))+x[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^T&(O^C))+x[7]+1735328473&4294967295,R=O+(D<<14&4294967295|D>>>18),D=T+(O^C&(R^O))+x[12]+2368359562&4294967295,T=R+(D<<20&4294967295|D>>>12),D=C+(T^R^O)+x[5]+4294588738&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+x[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+x[11]+1839030562&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+x[14]+4259657740&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+x[1]+2763975236&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+x[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+x[7]+4139469664&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+x[10]+3200236656&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+x[13]+681279174&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+x[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+x[3]+3572445317&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+x[6]+76029189&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(T^R^O)+x[9]+3654602809&4294967295,C=T+(D<<4&4294967295|D>>>28),D=O+(C^T^R)+x[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^T)+x[15]+530742520&4294967295,R=O+(D<<16&4294967295|D>>>16),D=T+(R^O^C)+x[2]+3299628645&4294967295,T=R+(D<<23&4294967295|D>>>9),D=C+(R^(T|~O))+x[0]+4096336452&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+x[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+x[14]+2878612391&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+x[5]+4237533241&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+x[12]+1700485571&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+x[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+x[10]+4293915773&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+x[1]+2240044497&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+x[8]+1873313359&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+x[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+x[6]+2734768916&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+x[13]+1309151649&4294967295,T=R+(D<<21&4294967295|D>>>11),D=C+(R^(T|~O))+x[4]+4149444226&4294967295,C=T+(D<<6&4294967295|D>>>26),D=O+(T^(C|~R))+x[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~T))+x[2]+718787259&4294967295,R=O+(D<<15&4294967295|D>>>17),D=T+(O^(R|~C))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+R&4294967295,M.g[3]=M.g[3]+O&4294967295}r.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var T=C-this.blockSize,x=this.B,R=this.h,O=0;O<C;){if(R==0)for(;O<=T;)i(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<C;)if(x[R++]=M.charCodeAt(O++),R==this.blockSize){i(this,x),R=0;break}}else for(;O<C;)if(x[R++]=M[O++],R==this.blockSize){i(this,x),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var T=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=T&255,T/=256;for(this.u(M),M=Array(16),C=T=0;4>C;++C)for(var x=0;32>x;x+=8)M[T++]=this.g[C]>>>x&255;return M};function o(M,C){var T=a;return Object.prototype.hasOwnProperty.call(T,M)?T[M]:T[M]=C(M)}function s(M,C){this.h=C;for(var T=[],x=!0,R=M.length-1;0<=R;R--){var O=M[R]|0;x&&O==C||(T[R]=O,x=!1)}this.g=T}var a={};function c(M){return-128<=M&&128>M?o(M,function(C){return new s([C|0],0>C?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return f;if(0>M)return k(u(-M));for(var C=[],T=1,x=0;M>=T;x++)C[x]=M/T|0,T*=4294967296;return new s(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return k(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(C,8)),x=f,R=0;R<M.length;R+=8){var O=Math.min(8,M.length-R),D=parseInt(M.substring(R,R+O),C);8>O?(O=u(Math.pow(C,O)),x=x.j(O).add(u(D))):(x=x.j(T),x=x.add(u(D)))}return x}var f=c(0),p=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-k(this).m();for(var M=0,C=1,T=0;T<this.g.length;T++){var x=this.i(T);M+=(0<=x?x:4294967296+x)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(I(this))return"0";if(N(this))return"-"+k(this).toString(M);for(var C=u(Math.pow(M,6)),T=this,x="";;){var R=de(T,C).g;T=$(T,R.j(C));var O=((0<T.g.length?T.g[0]:T.h)>>>0).toString(M);if(T=R,I(T))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function I(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function N(M){return M.h==-1}n.l=function(M){return M=$(this,M),N(M)?-1:I(M)?0:1};function k(M){for(var C=M.g.length,T=[],x=0;x<C;x++)T[x]=~M.g[x];return new s(T,~M.h).add(p)}n.abs=function(){return N(this)?k(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),T=[],x=0,R=0;R<=C;R++){var O=x+(this.i(R)&65535)+(M.i(R)&65535),D=(O>>>16)+(this.i(R)>>>16)+(M.i(R)>>>16);x=D>>>16,O&=65535,D&=65535,T[R]=D<<16|O}return new s(T,T[T.length-1]&-2147483648?-1:0)};function $(M,C){return M.add(k(C))}n.j=function(M){if(I(this)||I(M))return f;if(N(this))return N(M)?k(this).j(k(M)):k(k(this).j(M));if(N(M))return k(this.j(k(M)));if(0>this.l(m)&&0>M.l(m))return u(this.m()*M.m());for(var C=this.g.length+M.g.length,T=[],x=0;x<2*C;x++)T[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<M.g.length;R++){var O=this.i(x)>>>16,D=this.i(x)&65535,qi=M.i(R)>>>16,bu=M.i(R)&65535;T[2*x+2*R]+=D*bu,ne(T,2*x+2*R),T[2*x+2*R+1]+=O*bu,ne(T,2*x+2*R+1),T[2*x+2*R+1]+=D*qi,ne(T,2*x+2*R+1),T[2*x+2*R+2]+=O*qi,ne(T,2*x+2*R+2)}for(x=0;x<C;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=C;x<2*C;x++)T[x]=0;return new s(T,0)};function ne(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function ee(M,C){this.g=M,this.h=C}function de(M,C){if(I(C))throw Error("division by zero");if(I(M))return new ee(f,f);if(N(M))return C=de(k(M),C),new ee(k(C.g),k(C.h));if(N(C))return C=de(M,k(C)),new ee(k(C.g),C.h);if(30<M.g.length){if(N(M)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var T=p,x=C;0>=x.l(M);)T=_t(T),x=_t(x);var R=Ne(T,1),O=Ne(x,1);for(x=Ne(x,2),T=Ne(T,2);!I(x);){var D=O.add(x);0>=D.l(M)&&(R=R.add(T),O=D),x=Ne(x,1),T=Ne(T,1)}return C=$(M,R.j(C)),new ee(R,C)}for(R=f;0<=M.l(C);){for(T=Math.max(1,Math.floor(M.m()/C.m())),x=Math.ceil(Math.log(T)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=u(T),D=O.j(C);N(D)||0<D.l(M);)T-=x,O=u(T),D=O.j(C);I(O)&&(O=p),R=R.add(O),M=$(M,D)}return new ee(R,M)}n.A=function(M){return de(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),T=[],x=0;x<C;x++)T[x]=this.i(x)&M.i(x);return new s(T,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),T=[],x=0;x<C;x++)T[x]=this.i(x)|M.i(x);return new s(T,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),T=[],x=0;x<C;x++)T[x]=this.i(x)^M.i(x);return new s(T,this.h^M.h)};function _t(M){for(var C=M.g.length+1,T=[],x=0;x<C;x++)T[x]=M.i(x)<<1|M.i(x-1)>>>31;return new s(T,M.h)}function Ne(M,C){var T=C>>5;C%=32;for(var x=M.g.length-T,R=[],O=0;O<x;O++)R[O]=0<C?M.i(O+T)>>>C|M.i(O+T+1)<<32-C:M.i(O+T);return new s(R,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nT=lL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Io=lL.Integer=s}).apply(typeof cL<"u"?cL:typeof self<"u"?self:typeof window<"u"?window:{});var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Co={};var rT,uK,Il,iT,Mh,xv,oT,sT,aT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Av=="object"&&Av];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var g=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in g))break e;g=g[P]}l=l[l.length-1],y=g[l],h=h(y),h!=y&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var g=0,y=!1,P={next:function(){if(!y&&g<l.length){var V=g++;return{value:h(V,l[V]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,g){return g})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,g){return l.call.apply(l.bind,arguments)}function f(l,h,g){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),l.apply(h,P)}}return function(){return l.apply(h,arguments)}}function p(l,h,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function I(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(y,P,V){for(var W=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)W[tt-2]=arguments[tt];return h.prototype[P].apply(y,W)}}function N(l){let h=l.length;if(0<h){let g=Array(h);for(let y=0;y<h;y++)g[y]=l[y];return g}return[]}function k(l,h){for(let g=1;g<arguments.length;g++){let y=arguments[g];if(c(y)){let P=l.length||0,V=y.length||0;l.length=P+V;for(let W=0;W<V;W++)l[P+W]=y[W]}else l.push(y)}}class ${constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ne(l){return/^[\s\xa0]*$/.test(l)}function ee(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var _t=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Ne(l,h,g){for(let y in l)h.call(g,l[y],y,l)}function M(l,h){for(let g in l)h.call(void 0,l[g],g,l)}function C(l){let h={};for(let g in l)h[g]=l[g];return h}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,h){let g,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(g in y)l[g]=y[g];for(let V=0;V<T.length;V++)g=T[V],Object.prototype.hasOwnProperty.call(y,g)&&(l[g]=y[g])}}function R(l){var h=1;l=l.split(":");let g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function O(l){a.setTimeout(()=>{throw l},0)}function D(){var l=tE;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class qi{constructor(){this.h=this.g=null}add(h,g){let y=bu.get();y.set(h,g),this.h?this.h.next=y:this.g=y,this.h=y}}var bu=new $(()=>new e3,l=>l.reset());class e3{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Iu,Cu=!1,tE=new qi,Ox=()=>{let l=a.Promise.resolve(void 0);Iu=()=>{l.then(t3)}};var t3=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){O(g)}var h=bu;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Cu=!1};function Lo(){this.s=this.s,this.C=this.C}Lo.prototype.s=!1,Lo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function cn(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var n3=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l})();function Tu(l,h){if(cn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(_t){e:{try{de(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:r3[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Tu.aa.h.call(this)}}I(Tu,cn);var r3={2:"touch",3:"pen",4:"mouse"};Tu.prototype.h=function(){Tu.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Du="closure_listenable_"+(1e6*Math.random()|0),i3=0;function o3(l,h,g,y,P){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!y,this.ha=P,this.key=++i3,this.da=this.fa=!1}function Zf(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Xf(l){this.src=l,this.g={},this.h=0}Xf.prototype.add=function(l,h,g,y,P){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var W=rE(l,h,y,P);return-1<W?(h=l[W],g||(h.fa=!1)):(h=new o3(h,this.src,V,!!y,P),h.fa=g,l.push(h)),h};function nE(l,h){var g=h.type;if(g in l.g){var y=l.g[g],P=Array.prototype.indexOf.call(y,h,void 0),V;(V=0<=P)&&Array.prototype.splice.call(y,P,1),V&&(Zf(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function rE(l,h,g,y){for(var P=0;P<l.length;++P){var V=l[P];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==y)return P}return-1}var iE="closure_lm_"+(1e6*Math.random()|0),oE={};function Fx(l,h,g,y,P){if(y&&y.once)return Vx(l,h,g,y,P);if(Array.isArray(h)){for(var V=0;V<h.length;V++)Fx(l,h[V],g,y,P);return null}return g=lE(g),l&&l[Du]?l.K(h,g,u(y)?!!y.capture:!!y,P):Lx(l,h,g,!1,y,P)}function Lx(l,h,g,y,P,V){if(!h)throw Error("Invalid event type");var W=u(P)?!!P.capture:!!P,tt=aE(l);if(tt||(l[iE]=tt=new Xf(l)),g=tt.add(h,g,y,W,V),g.proxy)return g;if(y=s3(),g.proxy=y,y.src=l,y.listener=g,l.addEventListener)n3||(P=W),P===void 0&&(P=!1),l.addEventListener(h.toString(),y,P);else if(l.attachEvent)l.attachEvent(jx(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function s3(){function l(g){return h.call(l.src,l.listener,g)}let h=a3;return l}function Vx(l,h,g,y,P){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Vx(l,h[V],g,y,P);return null}return g=lE(g),l&&l[Du]?l.L(h,g,u(y)?!!y.capture:!!y,P):Lx(l,h,g,!0,y,P)}function Ux(l,h,g,y,P){if(Array.isArray(h))for(var V=0;V<h.length;V++)Ux(l,h[V],g,y,P);else y=u(y)?!!y.capture:!!y,g=lE(g),l&&l[Du]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],g=rE(V,g,y,P),-1<g&&(Zf(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=aE(l))&&(h=l.g[h.toString()],l=-1,h&&(l=rE(h,g,y,P)),(g=-1<l?h[l]:null)&&sE(g))}function sE(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Du])nE(h.i,l);else{var g=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(g,y,l.capture):h.detachEvent?h.detachEvent(jx(g),y):h.addListener&&h.removeListener&&h.removeListener(y),(g=aE(h))?(nE(g,l),g.h==0&&(g.src=null,h[iE]=null)):Zf(l)}}}function jx(l){return l in oE?oE[l]:oE[l]="on"+l}function a3(l,h){if(l.da)l=!0;else{h=new Tu(h,this);var g=l.listener,y=l.ha||l.src;l.fa&&sE(l),l=g.call(y,h)}return l}function aE(l){return l=l[iE],l instanceof Xf?l:null}var cE="__closure_events_fn_"+(1e9*Math.random()>>>0);function lE(l){return typeof l=="function"?l:(l[cE]||(l[cE]=function(h){return l.handleEvent(h)}),l[cE])}function ln(){Lo.call(this),this.i=new Xf(this),this.M=this,this.F=null}I(ln,Lo),ln.prototype[Du]=!0,ln.prototype.removeEventListener=function(l,h,g,y){Ux(this,l,h,g,y)};function Sn(l,h){var g,y=l.F;if(y)for(g=[];y;y=y.F)g.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new cn(h,l);else if(h instanceof cn)h.target=h.target||l;else{var P=h;h=new cn(y,l),x(h,P)}if(P=!0,g)for(var V=g.length-1;0<=V;V--){var W=h.g=g[V];P=Jf(W,y,!0,h)&&P}if(W=h.g=l,P=Jf(W,y,!0,h)&&P,P=Jf(W,y,!1,h)&&P,g)for(V=0;V<g.length;V++)W=h.g=g[V],P=Jf(W,y,!1,h)&&P}ln.prototype.N=function(){if(ln.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],y=0;y<g.length;y++)Zf(g[y]);delete l.g[h],l.h--}}this.F=null},ln.prototype.K=function(l,h,g,y){return this.i.add(String(l),h,!1,g,y)},ln.prototype.L=function(l,h,g,y){return this.i.add(String(l),h,!0,g,y)};function Jf(l,h,g,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,V=0;V<h.length;++V){var W=h[V];if(W&&!W.da&&W.capture==g){var tt=W.listener,tn=W.ha||W.src;W.fa&&nE(l.i,W),P=tt.call(tn,y)!==!1&&P}}return P&&!y.defaultPrevented}function Bx(l,h,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function $x(l){l.g=Bx(()=>{l.g=null,l.i&&(l.i=!1,$x(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class c3 extends Lo{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:$x(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(l){Lo.call(this),this.h=l,this.g={}}I(Su,Lo);var Hx=[];function qx(l){Ne(l.g,function(h,g){this.g.hasOwnProperty(g)&&sE(h)},l),l.g={}}Su.prototype.N=function(){Su.aa.N.call(this),qx(this)},Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uE=a.JSON.stringify,l3=a.JSON.parse,u3=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function dE(){}dE.prototype.h=null;function zx(l){return l.h||(l.h=l.i())}function Wx(){}var Au={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hE(){cn.call(this,"d")}I(hE,cn);function fE(){cn.call(this,"c")}I(fE,cn);var zs={},Gx=null;function ep(){return Gx=Gx||new ln}zs.La="serverreachability";function Kx(l){cn.call(this,zs.La,l)}I(Kx,cn);function xu(l){let h=ep();Sn(h,new Kx(h))}zs.STAT_EVENT="statevent";function Qx(l,h){cn.call(this,zs.STAT_EVENT,l),this.stat=h}I(Qx,cn);function An(l){let h=ep();Sn(h,new Qx(h,l))}zs.Ma="timingevent";function Yx(l,h){cn.call(this,zs.Ma,l),this.size=h}I(Yx,cn);function Mu(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Ru(){this.g=!0}Ru.prototype.xa=function(){this.g=!1};function d3(l,h,g,y,P,V){l.info(function(){if(l.g)if(V)for(var W="",tt=V.split("&"),tn=0;tn<tt.length;tn++){var je=tt[tn].split("=");if(1<je.length){var un=je[0];je=je[1];var dn=un.split("_");W=2<=dn.length&&dn[1]=="type"?W+(un+"="+je+"&"):W+(un+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+h+`
`+g+`
`+W})}function h3(l,h,g,y,P,V,W){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+h+`
`+g+`
`+V+" "+W})}function lc(l,h,g,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+p3(l,g)+(y?" "+y:"")})}function f3(l,h){l.info(function(){return"TIMEOUT: "+h})}Ru.prototype.info=function(){};function p3(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var y=g[l];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<P.length;W++)P[W]=""}}}}return uE(g)}catch{return h}}var tp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pE;function np(){}I(np,dE),np.prototype.g=function(){return new XMLHttpRequest},np.prototype.i=function(){return{}},pE=new np;function Vo(l,h,g,y){this.j=l,this.i=h,this.l=g,this.R=y||1,this.U=new Su(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xx}function Xx(){this.i=null,this.g="",this.h=!1}var Jx={},gE={};function mE(l,h,g){l.L=1,l.v=sp(zi(h)),l.m=g,l.P=!0,eM(l,null)}function eM(l,h){l.F=Date.now(),rp(l),l.A=zi(l.v);var g=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),pM(g.i,"t",y),l.C=0,g=l.j.J,l.h=new Xx,l.g=PM(l.j,g?h:null,!l.m),0<l.O&&(l.M=new c3(p(l.Y,l,l.g),l.O)),h=l.U,g=l.g,y=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Hx[0]=P.toString()),P=Hx);for(var V=0;V<P.length;V++){var W=Fx(g,P[V],y||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?C(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),xu(),d3(l.i,l.u,l.A,l.l,l.R,l.m)}Vo.prototype.ca=function(l){l=l.target;let h=this.M;h&&Wi(l)==3?h.j():this.Y(l)},Vo.prototype.Y=function(l){try{if(l==this.g)e:{let dn=Wi(this.g);var h=this.g.Ba();let hc=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||wM(this.g)))){this.J||dn!=4||h==7||(h==8||0>=hc?xu(3):xu(2)),vE(this);var g=this.g.Z();this.X=g;t:if(tM(this)){var y=wM(this.g);l="";var P=y.length,V=Wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),Pu(this);var W="";break t}this.h.i=new a.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,l+=this.h.i.decode(y[h],{stream:!(V&&h==P-1)});y.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,h3(this.i,this.u,this.A,this.l,this.R,dn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,tn=this.g;if((tt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(tt)){var je=tt;break t}}je=null}if(g=je)lc(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_E(this,g);else{this.o=!1,this.s=3,An(12),Ws(this),Pu(this);break e}}if(this.P){g=!0;let Ur;for(;!this.J&&this.C<W.length;)if(Ur=g3(this,W),Ur==gE){dn==4&&(this.s=4,An(14),g=!1),lc(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==Jx){this.s=4,An(15),lc(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else lc(this.i,this.l,Ur,null),_E(this,Ur);if(tM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||W.length!=0||this.h.h||(this.s=1,An(16),g=!1),this.o=this.o&&g,!g)lc(this.i,this.l,W,"[Invalid Chunked Response]"),Ws(this),Pu(this);else if(0<W.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),CE(un),un.M=!0,An(11))}}else lc(this.i,this.l,W,null),_E(this,W);dn==4&&Ws(this),this.o&&!this.J&&(dn==4?AM(this.j,this):(this.o=!1,rp(this)))}else P3(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,An(12)):(this.s=0,An(13)),Ws(this),Pu(this)}}}catch{}finally{}};function tM(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function g3(l,h){var g=l.C,y=h.indexOf(`
`,g);return y==-1?gE:(g=Number(h.substring(g,y)),isNaN(g)?Jx:(y+=1,y+g>h.length?gE:(h=h.slice(y,y+g),l.C=y+g,h)))}Vo.prototype.cancel=function(){this.J=!0,Ws(this)};function rp(l){l.S=Date.now()+l.I,nM(l,l.I)}function nM(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Mu(p(l.ba,l),h)}function vE(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Vo.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(f3(this.i,this.A),this.L!=2&&(xu(),An(17)),Ws(this),this.s=2,Pu(this)):nM(this,this.S-l)};function Pu(l){l.j.G==0||l.J||AM(l.j,l)}function Ws(l){vE(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,qx(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function _E(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||yE(g.h,l))){if(!l.K&&yE(g.h,l)&&g.G==3){try{var y=g.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)dp(g),lp(g);else break e;IE(g),An(18)}}else g.za=P[1],0<g.za-g.T&&37500>P[2]&&g.F&&g.v==0&&!g.C&&(g.C=Mu(p(g.Za,g),6e3));if(1>=oM(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ks(g,11)}else if((l.K||g.g==l)&&dp(g),!ne(h))for(P=g.Da.g.parse(h),h=0;h<P.length;h++){let je=P[h];if(g.T=je[0],je=je[1],g.G==2)if(je[0]=="c"){g.K=je[1],g.ia=je[2];let un=je[3];un!=null&&(g.la=un,g.j.info("VER="+g.la));let dn=je[4];dn!=null&&(g.Aa=dn,g.j.info("SVER="+g.Aa));let hc=je[5];hc!=null&&typeof hc=="number"&&0<hc&&(y=1.5*hc,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;let Ur=l.g;if(Ur){let fp=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fp){var V=y.h;V.g||fp.indexOf("spdy")==-1&&fp.indexOf("quic")==-1&&fp.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(EE(V,V.h),V.h=null))}if(y.D){let TE=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;TE&&(y.ya=TE,ut(y.I,y.D,TE))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var W=l;if(y.qa=RM(y,y.J?y.ia:null,y.W),W.K){sM(y.h,W);var tt=W,tn=y.L;tn&&(tt.I=tn),tt.B&&(vE(tt),rp(tt)),y.g=W}else DM(y);0<g.i.length&&up(g)}else je[0]!="stop"&&je[0]!="close"||Ks(g,7);else g.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ks(g,7):bE(g):je[0]!="noop"&&g.l&&g.l.ta(je),g.v=0)}}xu(4)}catch{}}var m3=class{constructor(l,h){this.g=l,this.map=h}};function rM(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iM(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function oM(l){return l.h?1:l.g?l.g.size:0}function yE(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function EE(l,h){l.g?l.g.add(h):l.h=h}function sM(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}rM.prototype.cancel=function(){if(this.i=aM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function aM(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let g of l.g.values())h=h.concat(g.D);return h}return N(l.i)}function v3(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],g=l.length,y=0;y<g;y++)h.push(l[y]);return h}h=[],g=0;for(y in l)h[g++]=l[y];return h}function _3(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(let y in l)h[g++]=y;return h}}}function cM(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=_3(l),y=v3(l),P=y.length,V=0;V<P;V++)h.call(void 0,y[V],g&&g[V],l)}var lM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y3(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var y=l[g].indexOf("="),P=null;if(0<=y){var V=l[g].substring(0,y);P=l[g].substring(y+1)}else V=l[g];h(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Gs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Gs){this.h=l.h,ip(this,l.j),this.o=l.o,this.g=l.g,op(this,l.s),this.l=l.l;var h=l.i,g=new Ou;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),uM(this,g),this.m=l.m}else l&&(h=String(l).match(lM))?(this.h=!1,ip(this,h[1]||"",!0),this.o=Nu(h[2]||""),this.g=Nu(h[3]||"",!0),op(this,h[4]),this.l=Nu(h[5]||"",!0),uM(this,h[6]||"",!0),this.m=Nu(h[7]||"")):(this.h=!1,this.i=new Ou(null,this.h))}Gs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ku(h,dM,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ku(h,dM,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ku(g,g.charAt(0)=="/"?b3:w3,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ku(g,C3)),l.join("")};function zi(l){return new Gs(l)}function ip(l,h,g){l.j=g?Nu(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function op(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function uM(l,h,g){h instanceof Ou?(l.i=h,T3(l.i,l.h)):(g||(h=ku(h,I3)),l.i=new Ou(h,l.h))}function ut(l,h,g){l.i.set(h,g)}function sp(l){return ut(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Nu(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ku(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,E3),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function E3(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var dM=/[#\/\?@]/g,w3=/[#\?:]/g,b3=/[#\?]/g,I3=/[#\?@]/g,C3=/#/g;function Ou(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Uo(l){l.g||(l.g=new Map,l.h=0,l.i&&y3(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}n=Ou.prototype,n.add=function(l,h){Uo(this),this.i=null,l=uc(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function hM(l,h){Uo(l),h=uc(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function fM(l,h){return Uo(l),h=uc(l,h),l.g.has(h)}n.forEach=function(l,h){Uo(this),this.g.forEach(function(g,y){g.forEach(function(P){l.call(h,P,y,this)},this)},this)},n.na=function(){Uo(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let y=0;y<h.length;y++){let P=l[y];for(let V=0;V<P.length;V++)g.push(h[y])}return g},n.V=function(l){Uo(this);let h=[];if(typeof l=="string")fM(this,l)&&(h=h.concat(this.g.get(uc(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},n.set=function(l,h){return Uo(this),this.i=null,l=uc(this,l),fM(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function pM(l,h,g){hM(l,h),0<g.length&&(l.i=null,l.g.set(uc(l,h),N(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var y=h[g];let V=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var P=V;W[y]!==""&&(P+="="+encodeURIComponent(String(W[y]))),l.push(P)}}return this.i=l.join("&")};function uc(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function T3(l,h){h&&!l.j&&(Uo(l),l.i=null,l.g.forEach(function(g,y){var P=y.toLowerCase();y!=P&&(hM(this,y),pM(this,P,g))},l)),l.j=h}function D3(l,h){let g=new Ru;if(a.Image){let y=new Image;y.onload=m(jo,g,"TestLoadImage: loaded",!0,h,y),y.onerror=m(jo,g,"TestLoadImage: error",!1,h,y),y.onabort=m(jo,g,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(jo,g,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function S3(l,h){let g=new Ru,y=new AbortController,P=setTimeout(()=>{y.abort(),jo(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(V=>{clearTimeout(P),V.ok?jo(g,"TestPingServer: ok",!0,h):jo(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),jo(g,"TestPingServer: error",!1,h)})}function jo(l,h,g,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(g)}catch{}}function A3(){this.g=new u3}function x3(l,h,g){let y=g||"";try{cM(l,function(P,V){let W=P;u(P)&&(W=uE(P)),h.push(y+V+"="+encodeURIComponent(W))})}catch(P){throw h.push(y+"type="+encodeURIComponent("_badmap")),P}}function Fu(l){this.l=l.Ub||null,this.j=l.eb||!1}I(Fu,dE),Fu.prototype.g=function(){return new ap(this.l,this.j)},Fu.prototype.i=(function(l){return function(){return l}})({});function ap(l,h){ln.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ap,ln),n=ap.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Vu(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lu(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vu(this)),this.g&&(this.readyState=3,Vu(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gM(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function gM(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Lu(this):Vu(this),this.readyState==3&&gM(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Lu(this))},n.Qa=function(l){this.g&&(this.response=l,Lu(this))},n.ga=function(){this.g&&Lu(this)};function Lu(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Vu(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Vu(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ap.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function mM(l){let h="";return Ne(l,function(g,y){h+=y,h+=":",h+=g,h+=`\r
`}),h}function wE(l,h,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=mM(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ut(l,h,g))}function yt(l){ln.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(yt,ln);var M3=/^https?$/i,R3=["POST","PUT"];n=yt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pE.g(),this.v=this.o?zx(this.o):zx(pE),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){vM(this,V);return}if(l=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)g.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let V of y.keys())g.set(V,y.get(V));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(R3,h,void 0))||y||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,W]of g)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{EM(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){vM(this,V)}};function vM(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,_M(l),cp(l)}function _M(l){l.A||(l.A=!0,Sn(l,"complete"),Sn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Sn(this,"complete"),Sn(this,"abort"),cp(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cp(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yM(this):this.bb())},n.bb=function(){yM(this)};function yM(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Wi(l)!=4||l.Z()!=2)){if(l.u&&Wi(l)==4)Bx(l.Ea,0,l);else if(Sn(l,"readystatechange"),Wi(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var y;if(y=W===0){var P=String(l.D).match(lM)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!M3.test(P?P.toLowerCase():"")}g=y}if(g)Sn(l,"complete"),Sn(l,"success");else{l.m=6;try{var V=2<Wi(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",_M(l)}}finally{cp(l)}}}}function cp(l,h){if(l.g){EM(l);let g=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Sn(l,"ready");try{g.onreadystatechange=y}catch{}}}function EM(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Wi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Wi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),l3(h)}};function wM(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function P3(l){let h={};l=(l.g&&2<=Wi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(ne(l[y]))continue;var g=R(l[y]);let P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=h[P]||[];h[P]=V,V.push(g)}M(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uu(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function bM(l){this.Aa=0,this.i=[],this.j=new Ru,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uu("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uu("baseRetryDelayMs",5e3,l),this.cb=Uu("retryDelaySeedMs",1e4,l),this.Wa=Uu("forwardChannelMaxRetries",2,l),this.wa=Uu("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new rM(l&&l.concurrentRequestLimit),this.Da=new A3,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bM.prototype,n.la=8,n.G=1,n.connect=function(l,h,g,y){An(0),this.W=l,this.H=h||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=RM(this,null,this.W),up(this)};function bE(l){if(IM(l),l.G==3){var h=l.U++,g=zi(l.I);if(ut(g,"SID",l.K),ut(g,"RID",h),ut(g,"TYPE","terminate"),ju(l,g),h=new Vo(l,l.j,h),h.L=2,h.v=sp(zi(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.v,g=!0),g||(h.g=PM(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rp(h)}MM(l)}function lp(l){l.g&&(CE(l),l.g.cancel(),l.g=null)}function IM(l){lp(l),l.u&&(a.clearTimeout(l.u),l.u=null),dp(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function up(l){if(!iM(l.h)&&!l.s){l.s=!0;var h=l.Ga;Iu||Ox(),Cu||(Iu(),Cu=!0),tE.add(h,l),l.B=0}}function N3(l,h){return oM(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Mu(p(l.Ga,l,h),xM(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new Vo(this,this.j,l),V=this.o;if(this.S&&(V?(V=C(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=TM(this,P,h),g=zi(this.I),ut(g,"RID",l),ut(g,"CVER",22),this.D&&ut(g,"X-HTTP-Session-Id",this.D),ju(this,g),V&&(this.O?h="headers="+encodeURIComponent(String(mM(V)))+"&"+h:this.m&&wE(g,this.m,V)),EE(this.h,P),this.Ua&&ut(g,"TYPE","init"),this.P?(ut(g,"$req",h),ut(g,"SID","null"),P.T=!0,mE(P,g,null)):mE(P,g,h),this.G=2}}else this.G==3&&(l?CM(this,l):this.i.length==0||iM(this.h)||CM(this))};function CM(l,h){var g;h?g=h.l:g=l.U++;let y=zi(l.I);ut(y,"SID",l.K),ut(y,"RID",g),ut(y,"AID",l.T),ju(l,y),l.m&&l.o&&wE(y,l.m,l.o),g=new Vo(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=TM(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),EE(l.h,g),mE(g,y,h)}function ju(l,h){l.H&&Ne(l.H,function(g,y){ut(h,y,g)}),l.l&&cM({},function(g,y){ut(h,y,g)})}function TM(l,h,g){g=Math.min(l.i.length,g);var y=l.l?p(l.l.Na,l.l,l):null;e:{var P=l.i;let V=-1;for(;;){let W=["count="+g];V==-1?0<g?(V=P[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let tt=!0;for(let tn=0;tn<g;tn++){let je=P[tn].g,un=P[tn].map;if(je-=V,0>je)V=Math.max(0,P[tn].g-100),tt=!1;else try{x3(un,W,"req"+je+"_")}catch{y&&y(un)}}if(tt){y=W.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,y}function DM(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Iu||Ox(),Cu||(Iu(),Cu=!0),tE.add(h,l),l.v=0}}function IE(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Mu(p(l.Fa,l),xM(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,SM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Mu(p(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,An(10),lp(this),SM(this))};function CE(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function SM(l){l.g=new Vo(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=zi(l.qa);ut(h,"RID","rpc"),ut(h,"SID",l.K),ut(h,"AID",l.T),ut(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ut(h,"TO",l.ja),ut(h,"TYPE","xmlhttp"),ju(l,h),l.m&&l.o&&wE(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=sp(zi(h)),g.m=null,g.P=!0,eM(g,l)}n.Za=function(){this.C!=null&&(this.C=null,lp(this),IE(this),An(19))};function dp(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function AM(l,h){var g=null;if(l.g==h){dp(l),CE(l),l.g=null;var y=2}else if(yE(l.h,h))g=h.D,sM(l.h,h),y=1;else return;if(l.G!=0){if(h.o)if(y==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var P=l.B;y=ep(),Sn(y,new Yx(y,g)),up(l)}else DM(l);else if(P=h.s,P==3||P==0&&0<h.X||!(y==1&&N3(l,h)||y==2&&IE(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),P){case 1:Ks(l,5);break;case 4:Ks(l,10);break;case 3:Ks(l,6);break;default:Ks(l,2)}}}function xM(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function Ks(l,h){if(l.j.info("Error code "+h),h==2){var g=p(l.fb,l),y=l.Xa;let P=!y;y=new Gs(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ip(y,"https"),sp(y),P?D3(y.toString(),g):S3(y.toString(),g)}else An(2);l.G=0,l.l&&l.l.sa(h),MM(l),IM(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),An(2)):(this.j.info("Failed to ping google.com"),An(1))};function MM(l){if(l.G=0,l.ka=[],l.l){let h=aM(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function RM(l,h,g){var y=g instanceof Gs?zi(g):new Gs(g);if(y.g!="")h&&(y.g=h+"."+y.g),op(y,y.s);else{var P=a.location;y=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var V=new Gs(null);y&&ip(V,y),h&&(V.g=h),P&&op(V,P),g&&(V.l=g),y=V}return g=l.D,h=l.ya,g&&h&&ut(y,g,h),ut(y,"VER",l.la),ju(l,y),y}function PM(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new yt(new Fu({eb:g})):new yt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function NM(){}n=NM.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hp(){}hp.prototype.g=function(l,h){return new nr(l,h)};function nr(l,h){ln.call(this),this.g=new bM(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!ne(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ne(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new dc(this)}I(nr,ln),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){bE(this.g)},nr.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=uE(l),l=g);h.i.push(new m3(h.Ya++,l)),h.G==3&&up(h)},nr.prototype.N=function(){this.g.l=null,delete this.j,bE(this.g),delete this.g,nr.aa.N.call(this)};function kM(l){hE.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(kM,hE);function OM(){fE.call(this),this.status=1}I(OM,fE);function dc(l){this.g=l}I(dc,NM),dc.prototype.ua=function(){Sn(this.g,"a")},dc.prototype.ta=function(l){Sn(this.g,new kM(l))},dc.prototype.sa=function(l){Sn(this.g,new OM)},dc.prototype.ra=function(){Sn(this.g,"b")},hp.prototype.createWebChannel=hp.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,aT=Co.createWebChannelTransport=function(){return new hp},sT=Co.getStatEventTarget=function(){return ep()},oT=Co.Event=zs,xv=Co.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tp.NO_ERROR=0,tp.TIMEOUT=8,tp.HTTP_ERROR=6,Mh=Co.ErrorCode=tp,Zx.COMPLETE="complete",iT=Co.EventType=Zx,Wx.EventType=Au,Au.OPEN="a",Au.CLOSE="b",Au.ERROR="c",Au.MESSAGE="d",ln.prototype.listen=ln.prototype.K,Il=Co.WebChannel=Wx,uK=Co.FetchXmlHttpFactory=Fu,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,rT=Co.XhrIo=yt}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});var uL="@firebase/firestore",dL="4.8.0";var Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var ql="11.10.0";var Ua=new Mr("@firebase/firestore");function Cl(){return Ua.logLevel}function J(n,...e){if(Ua.logLevel<=De.DEBUG){let t=e.map(JD);Ua.debug(`Firestore (${ql}): ${n}`,...t)}}function Do(n,...e){if(Ua.logLevel<=De.ERROR){let t=e.map(JD);Ua.error(`Firestore (${ql}): ${n}`,...t)}}function Ms(n,...e){if(Ua.logLevel<=De.WARN){let t=e.map(JD);Ua.warn(`Firestore (${ql}): ${n}`,...t)}}function JD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nV(n,r,t)}function nV(n,e,t){let r=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Do(r),new Error(r)}function Ve(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||nV(e,i,r)}function ge(n,e){return n}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Or=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}},hT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fT=class{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ve(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Or,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Or)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}},pT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},gT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ve(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function dK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function rV(){return new TextEncoder}var Lh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=dK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Se(n,e){return n<e?-1:n>e?1:0}function vT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Se(r,i);{let o=rV(),s=hK(o.encode(hL(n,t)),o.encode(hL(e,t)));return s!==0?s:Se(r,i)}}t+=r>65535?2:1}return Se(n.length,e.length)}function hL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function hK(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Se(n[t],e[t]);return Se(n.length,e.length)}function Pl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var fL="__name__",Vv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):vT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Io.fromString(e.substring(4,e.length-2))}},st=class n extends Vv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dr=class n extends Vv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fL}static keyField(){return new n([fL])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(st.fromString(e))}static fromName(e){return new n(st.fromString(e).popFirst(5))}static empty(){return new n(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new st(e.slice()))}};function iV(n,e,t){if(!t)throw new q(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pK(n,e,t,r){if(e===!0&&r===!0)throw new q(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pL(n){if(!ie.isDocumentKey(n))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gL(n){if(ie.isDocumentKey(n))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oV(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function y_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":se(12329,{type:typeof n})}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=y_(n);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sV(n,e){if(e<=0)throw new q(U.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Yh(n,e){if(!oV(n))throw new q(U.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new q(U.INVALID_ARGUMENT,t);return!0}var mL=-62135596800,vL=1e6,Bt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*vL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mL)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vL}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yh(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-mL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:jt("string",Bt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};var pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Bt(0,0))}static max(){return new n(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vh=-1,_T=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};_T.UNKNOWN_ID=-1;function gK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Bt(t+1,0):new Bt(t,r));return new ja(i,ie.empty(),e)}function mK(n){return new ja(n.readTime,n.key,Vh)}var ja=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pe.min(),ie.empty(),Vh)}static max(){return new n(pe.max(),ie.empty(),Vh)}};function vK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}var _K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zl(n){return E(this,null,function*(){if(n.code!==U.FAILED_PRECONDITION||n.message!==_K)throw n;J("LocalStore","Unexpectedly lost primary lease")})}var B=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function yK(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wl(n){return n.name==="IndexedDbTransactionError"}var eS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),tS=-1;function Zh(n){return n==null}function Uh(n){return n===0&&1/n==-1/0}function EK(n){return typeof n=="number"&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var aV="";function wK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_L(e)),e=bK(n.get(t),e);return _L(e)}function bK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case aV:t+="";break;default:t+=o}}return t}function _L(n){return n+aV+""}var IK="remoteDocuments",cV="owner";var lV="mutationQueues";var uV="mutations";var dV="documentMutations",CK="remoteDocumentsV14";var hV="remoteDocumentGlobal";var fV="targets";var pV="targetDocuments";var gV="targetGlobal",mV="collectionParents";var vV="clientMetadata";var _V="bundles";var yV="namedQueries";var TK="indexConfiguration";var DK="indexState";var SK="indexEntries";var EV="documentOverlays";var AK="globals";var xK=[lV,uV,dV,IK,fV,cV,gV,pV,vV,hV,mV,_V,yV],Vwe=[...xK,EV],MK=[lV,uV,dV,CK,fV,cV,gV,pV,vV,hV,mV,_V,yV,EV],RK=MK,PK=[...RK,TK,DK,SK];var Uwe=[...PK,AK];function yL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Os(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var It=class n{constructor(e,t){this.comparator=e,this.root=t||Pi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}},Al=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}};Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1;Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var en=class n{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(e){return new Uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Uv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kr=class n{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new n([])}unionWith(e){let t=new en(dr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var jv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Cn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Cn.EMPTY_BYTE_STRING=new Cn("");var NK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(Ve(!!n,39018),typeof n=="string"){let e=0,t=NK.exec(n);if(Ve(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ao(n){return typeof n=="string"?Cn.fromBase64String(n):Cn.fromUint8Array(n)}var bV="server_timestamp",IV="__type__",CV="__previous_value__",TV="__local_write_time__";function E_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[IV])===null||t===void 0?void 0:t.stringValue)===bV}function w_(n){let e=n.mapValue.fields[CV];return E_(e)?w_(e):e}function jh(n){let e=So(n.mapValue.fields[TV].timestampValue);return new Bt(e.seconds,e.nanos)}var ET=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Bv="(default)",$v=class n{constructor(e,t){this.projectId=e,this.database=t||Bv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Bv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var nS="__type__",DV="__max__",Mv={mapValue:{fields:{__type__:{stringValue:DV}}}},rS="__vector__",Nl="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?E_(n)?4:AV(n)?9007199254740991:SV(n)?10:11:se(28295,{value:n})}function ki(n,e){if(n===e)return!0;let t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jh(n).isEqual(jh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=So(i.timestampValue),a=So(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Ao(i.bytesValue).isEqual(Ao(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ft(i.geoPointValue.latitude)===ft(o.geoPointValue.latitude)&&ft(i.geoPointValue.longitude)===ft(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ft(i.integerValue)===ft(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ft(i.doubleValue),a=ft(o.doubleValue);return s===a?Uh(s)===Uh(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Pl(n.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yL(s)!==yL(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ki(s[c],a[c])))return!1;return!0})(n,e);default:return se(52216,{left:n})}}function Bh(n,e){return(n.values||[]).find(t=>ki(t,e))!==void 0}function kl(n,e){if(n===e)return 0;let t=Rs(n),r=Rs(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ft(o.integerValue||o.doubleValue),c=ft(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return EL(n.timestampValue,e.timestampValue);case 4:return EL(jh(n),jh(e));case 5:return vT(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Ao(o),c=Ao(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Se(a[u],c[u]);if(d!==0)return d}return Se(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Se(ft(o.latitude),ft(s.latitude));return a!==0?a:Se(ft(o.longitude),ft(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wL(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,d;let f=o.fields||{},p=s.fields||{},m=(a=f[Nl])===null||a===void 0?void 0:a.arrayValue,I=(c=p[Nl])===null||c===void 0?void 0:c.arrayValue,N=Se(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:wL(m,I)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Mv.mapValue&&s===Mv.mapValue)return 0;if(o===Mv.mapValue)return 1;if(s===Mv.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let p=vT(c[f],d[f]);if(p!==0)return p;let m=kl(a[c[f]],u[d[f]]);if(m!==0)return m}return Se(c.length,d.length)})(n.mapValue,e.mapValue);default:throw se(23264,{le:t})}}function EL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);let t=So(n),r=So(e),i=Se(t.seconds,r.seconds);return i!==0?i:Se(t.nanos,r.nanos)}function wL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=kl(t[i],r[i]);if(o)return o}return Se(t.length,r.length)}function Ol(n){return wT(n)}function wT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=So(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ao(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=wT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wT(t.fields[s])}`;return i+"}"})(n.mapValue):se(61005,{value:n})}function Nv(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=w_(n);return e?16+Nv(e):16;case 5:return 2*n.stringValue.length;case 6:return Ao(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Nv(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Os(r.fields,(o,s)=>{i+=o.length+Nv(s)}),i})(n.mapValue);default:throw se(13486,{value:n})}}function Hv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bT(n){return!!n&&"integerValue"in n}function iS(n){return!!n&&"arrayValue"in n}function bL(n){return!!n&&"nullValue"in n}function IL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kv(n){return!!n&&"mapValue"in n}function SV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[nS])===null||t===void 0?void 0:t.stringValue)===rS}function Nh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Os(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DV}var Bwe={mapValue:{fields:{[nS]:{stringValue:rS},[Nl]:{arrayValue:{}}}}};var Gn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nh(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Nh(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());kv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];kv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Os(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Nh(this.value))}};function xV(n){let e=[];return Os(n.fields,(t,r)=>{let i=new dr([t]);if(kv(r)){let o=xV(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new kr(e)}var fr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),Gn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ps=class{constructor(e,t){this.position=e,this.inclusive=t}};function CL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),t.key):r=kl(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function TL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ki(n.position[t],e.position[t]))return!1;return!0}var Ba=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function kK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var qv=class{},Ut=class n extends qv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CT(e,t,r):t==="array-contains"?new ST(e,r):t==="in"?new AT(e,r):t==="not-in"?new xT(e,r):t==="array-contains-any"?new MT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TT(e,r):new DT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(kl(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ii=class n extends qv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return MV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function MV(n){return n.op==="and"}function RV(n){return OK(n)&&MV(n)}function OK(n){for(let e of n.filters)if(e instanceof ii)return!1;return!0}function IT(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Ol(n.value);if(RV(n))return n.filters.map(e=>IT(e)).join(",");{let e=n.filters.map(t=>IT(t)).join(",");return`${n.op}(${e})`}}function PV(n,e){return n instanceof Ut?(function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&ki(r.value,i.value)})(n,e):n instanceof ii?(function(r,i){return i instanceof ii&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&PV(s,i.filters[a]),!0):!1})(n,e):void se(19439)}function NV(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ol(t.value)}`})(n):n instanceof ii?(function(t){return t.op.toString()+" {"+t.getFilters().map(NV).join(" ,")+"}"})(n):"Filter"}var CT=class extends Ut{constructor(e,t,r){super(e,t,r),this.key=ie.fromName(r.referenceValue)}matches(e){let t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}},TT=class extends Ut{constructor(e,t){super(e,"in",t),this.keys=kV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DT=class extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=kV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ie.fromName(r.referenceValue))}var ST=class extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iS(t)&&Bh(t.arrayValue,this.value)}},AT=class extends Ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bh(this.value.arrayValue,t)}},xT=class extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bh(this.value.arrayValue,t)}},MT=class extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!iS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bh(this.value.arrayValue,r))}};var RT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function DL(n,e=null,t=[],r=[],i=null,o=null,s=null){return new RT(n,e,t,r,i,o,s)}function oS(n){let e=ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ol(r)).join(",")),e.Pe=t}return e.Pe}function sS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TL(n.startAt,e.startAt)&&TL(n.endAt,e.endAt)}function PT(n){return ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Oi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function FK(n,e,t,r,i,o,s,a){return new Oi(n,e,t,r,i,o,s,a)}function b_(n){return new Oi(n)}function SL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aS(n){return n.collectionGroup!==null}function xl(n){let e=ge(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new en(dr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ba(o,r))}),t.has(dr.keyField().canonicalString())||e.Te.push(new Ba(dr.keyField(),r))}return e.Te}function Ni(n){let e=ge(n);return e.Ie||(e.Ie=LK(e,xl(n))),e.Ie}function LK(n,e){if(n.limitType==="F")return DL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ba(i.field,o)});let t=n.endAt?new Ps(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ps(n.startAt.position,n.startAt.inclusive):null;return DL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function NT(n,e){let t=n.filters.concat([e]);return new Oi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zv(n,e,t){return new Oi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function I_(n,e){return sS(Ni(n),Ni(e))&&n.limitType===e.limitType}function OV(n){return`${oS(Ni(n))}|lt:${n.limitType}`}function Tl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NV(i)).join(", ")}]`),Zh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ol(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ol(i)).join(",")),`Target(${r})`})(Ni(n))}; limitType=${n.limitType})`}function C_(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of xl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=CL(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,xl(r),i)||r.endAt&&!(function(s,a,c){let u=CL(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,xl(r),i))})(n,e)}function VK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FV(n){return(e,t)=>{let r=!1;for(let i of xl(n)){let o=UK(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function UK(n,e,t){let r=n.field.isKeyField()?ie.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?kl(c,u):se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:n.dir})}}var xo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wV(this.inner)}size(){return this.innerSize}};var jK=new It(ie.comparator);function Mo(){return jK}var LV=new It(ie.comparator);function Rh(...n){let e=LV;for(let t of n)e=e.insert(t.key,t);return e}function VV(n){let e=LV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fa(){return kh()}function UV(){return kh()}function kh(){return new xo(n=>n.toString(),(n,e)=>n.isEqual(e))}var BK=new It(ie.comparator),$K=new en(ie.comparator);function Oe(...n){let e=$K;for(let t of n)e=e.add(t);return e}var HK=new en(Se);function qK(){return HK}function cS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function jV(n){return{integerValue:""+n}}function zK(n,e){return EK(e)?jV(e):cS(n,e)}var Fl=class{constructor(){this._=void 0}};function WK(n,e,t){return n instanceof $a?(function(i,o){let s={fields:{[IV]:{stringValue:bV},[TV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&E_(o)&&(o=w_(o)),o&&(s.fields[CV]=o),{mapValue:s}})(t,e):n instanceof Ha?$V(n,e):n instanceof qa?HV(n,e):(function(i,o){let s=BV(i,o),a=AL(s)+AL(i.Ee);return bT(s)&&bT(i.Ee)?jV(a):cS(i.serializer,a)})(n,e)}function GK(n,e,t){return n instanceof Ha?$V(n,e):n instanceof qa?HV(n,e):t}function BV(n,e){return n instanceof Ll?(function(r){return bT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var $a=class extends Fl{},Ha=class extends Fl{constructor(e){super(),this.elements=e}};function $V(n,e){let t=qV(e);for(let r of n.elements)t.some(i=>ki(i,r))||t.push(r);return{arrayValue:{values:t}}}var qa=class extends Fl{constructor(e){super(),this.elements=e}};function HV(n,e){let t=qV(e);for(let r of n.elements)t=t.filter(i=>!ki(i,r));return{arrayValue:{values:t}}}var Ll=class extends Fl{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function AL(n){return ft(n.integerValue||n.doubleValue)}function qV(n){return iS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var kT=class{constructor(e,t){this.field=e,this.transform=t}};function KK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ha&&i instanceof Ha||r instanceof qa&&i instanceof qa?Pl(r.elements,i.elements,ki):r instanceof Ll&&i instanceof Ll?ki(r.Ee,i.Ee):r instanceof $a&&i instanceof $a})(n.transform,e.transform)}var OT=class{constructor(e,t){this.version=e,this.transformResults=t}},Vn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ov(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vl=class{};function zV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ul(n.key,Vn.none()):new za(n.key,n.data,Vn.none());{let t=n.data,r=Gn.empty(),i=new en(dr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Fi(n.key,r,new kr(i.toArray()),Vn.none())}}function QK(n,e,t){n instanceof za?(function(i,o,s){let a=i.value.clone(),c=ML(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Fi?(function(i,o,s){if(!Ov(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ML(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(WV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Oh(n,e,t,r){return n instanceof za?(function(o,s,a,c){if(!Ov(o.precondition,s))return a;let u=o.value.clone(),d=RL(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fi?(function(o,s,a,c){if(!Ov(o.precondition,s))return a;let u=RL(o.fieldTransforms,c,s),d=s.data;return d.setAll(WV(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(o,s,a){return Ov(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function YK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=BV(r.transform,i||null);o!=null&&(t===null&&(t=Gn.empty()),t.set(r.field,o))}return t||null}function xL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pl(r,i,(o,s)=>KK(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var za=class extends Vl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fi=class extends Vl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ML(n,e,t){let r=new Map;Ve(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,GK(s,a,t[i]))}return r}function RL(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,WK(o,s,e))}return r}var Ul=class extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wv=class extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&QK(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Oh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Oh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=zV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,(t,r)=>xL(t,r))&&Pl(this.baseMutations,e.baseMutations,(t,r)=>xL(t,r))}},LT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return BK})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var VT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Lt,Le;function GV(n){switch(n){case U.OK:return se(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return se(15467,{code:n})}}function KV(n){if(n===void 0)return Do("GRPC error has no .code"),U.UNKNOWN;switch(n){case Lt.OK:return U.OK;case Lt.CANCELLED:return U.CANCELLED;case Lt.UNKNOWN:return U.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return U.INTERNAL;case Lt.UNAVAILABLE:return U.UNAVAILABLE;case Lt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Lt.NOT_FOUND:return U.NOT_FOUND;case Lt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Lt.ABORTED:return U.ABORTED;case Lt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Lt.DATA_LOSS:return U.DATA_LOSS;default:return se(39323,{code:n})}}(Le=Lt||(Lt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var PL=null;var ZK=new Io([4294967295,4294967295],0);function NL(n){let e=rV().encode(n),t=new nT;return t.update(e),new Uint8Array(t.digest())}function kL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Io([t,r],0),new Io([i,o],0)]}var jT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new La(`Invalid padding: ${t}`);if(r<0)throw new La(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new La(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Io.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Io.fromNumber(r)));return i.compare(ZK)===1&&(i=new Io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=NL(e),[r,i]=kL(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=NL(e),[r,i]=kL(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},La=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$h.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(pe.min(),i,new It(Se),Mo(),Oe())}},$h=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Oe(),Oe(),Oe())}};var Ml=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Kv=class{constructor(e,t){this.targetId=e,this.De=t}},Qv=class{constructor(e,t,r=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yv=class{constructor(){this.ve=0,this.Ce=OL(),this.Fe=Cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),t=Oe(),r=Oe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:se(38017,{changeType:o})}}),new $h(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=OL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},BT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mo(),this.je=Rv(),this.Je=Rv(),this.He=new It(Se)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(PT(o))if(r===0){let s=new ie(o.path);this.Xe(t,s,fr.newNoDocument(s,pe.min()))}else Ve(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}PL?.ct((function(d,f,p,m,I){var N,k,$,ne,ee,de;let _t={localCacheCount:d,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},Ne=f.unchangedNames;return Ne&&(_t.bloomFilter={applied:I===0,hashCount:(N=Ne?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(ne=($=(k=Ne?.bits)===null||k===void 0?void 0:k.bitmap)===null||$===void 0?void 0:$.length)!==null&&ne!==void 0?ne:0,padding:(de=(ee=Ne?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&de!==void 0?de:0,mightContain:M=>{var C;return(C=m?.mightContain(M))!==null&&C!==void 0&&C}}),_t})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ao(r).toUint8Array()}catch(c){if(c instanceof jv)return Ms("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jT(s,i,o)}catch(c){return Ms(c instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&PT(a.target)){let c=new ie(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,fr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Oe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Gv(e,t,this.He,this.ze,r);return this.ze=Mo(),this.je=Rv(),this.Je=Rv(),this.He=new It(Se),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new en(Se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new en(Se),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Rv(){return new It(ie.comparator)}function OL(){return new It(ie.comparator)}var XK={asc:"ASCENDING",desc:"DESCENDING"},JK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eQ={and:"AND",or:"OR"},$T=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HT(n,e){return n.useProto3Json||Zh(e)?e:{value:e}}function Zv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tQ(n,e){return Zv(n,e.toTimestamp())}function hr(n){return Ve(!!n,49232),pe.fromTimestamp((function(t){let r=So(t);return new Bt(r.seconds,r.nanos)})(n))}function lS(n,e){return qT(n,e).canonicalString()}function qT(n,e){let t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function YV(n){let e=st.fromString(n);return Ve(n2(e),10190,{key:e.toString()}),e}function Xv(n,e){return lS(n.databaseId,e.path)}function Fh(n,e){let t=YV(e);if(t.get(1)!==n.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ie(XV(t))}function ZV(n,e){return lS(n.databaseId,e)}function nQ(n){let e=YV(n);return e.length===4?st.emptyPath():XV(e)}function zT(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XV(n){return Ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FL(n,e,t){return{name:Xv(n,e),fields:t.value.mapValue.fields}}function rQ(n,e){return"found"in e?(function(r,i){Ve(!!i.found,43571),i.found.name,i.found.updateTime;let o=Fh(r,i.found.name),s=hr(i.found.updateTime),a=i.found.createTime?hr(i.found.createTime):pe.min(),c=new Gn({mapValue:{fields:i.found.fields}});return fr.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){Ve(!!i.missing,3894),Ve(!!i.readTime,22933);let o=Fh(r,i.missing),s=hr(i.readTime);return fr.newNoDocument(o,s)})(n,e):se(7234,{result:e})}function iQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,d){return u.useProto3Json?(Ve(d===void 0||typeof d=="string",58123),Cn.fromBase64String(d||"")):(Ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Cn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let d=u.code===void 0?U.UNKNOWN:KV(u.code);return new q(d,u.message||"")})(s);t=new Qv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fh(n,r.document.name),o=hr(r.document.updateTime),s=r.document.createTime?hr(r.document.createTime):pe.min(),a=new Gn({mapValue:{fields:r.document.fields}}),c=fr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Ml(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fh(n,r.document),o=r.readTime?hr(r.readTime):pe.min(),s=fr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ml([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fh(n,r.document),o=r.removedTargetIds||[];t=new Ml([],o,i,null)}else{if(!("filter"in e))return se(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new UT(i,o),a=r.targetId;t=new Kv(a,s)}}return t}function JV(n,e){let t;if(e instanceof za)t={update:FL(n,e.key,e.value)};else if(e instanceof Ul)t={delete:Xv(n,e.key)};else if(e instanceof Fi)t={update:FL(n,e.key,e.data),updateMask:fQ(e.fieldMask)};else{if(!(e instanceof Wv))return se(16599,{Rt:e.type});t={verify:Xv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof $a)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ha)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ll)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw se(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:tQ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se(27497)})(n,e.precondition)),t}function oQ(n,e){return n&&n.length>0?(Ve(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?hr(i.updateTime):hr(o);return s.isEqual(pe.min())&&(s=hr(o)),new OT(s,i.transformResults||[])})(t,e))):[]}function sQ(n,e){return{documents:[ZV(n,e.path)]}}function aQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZV(n,i);let o=(function(u){if(u.length!==0)return t2(ii.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(d=>(function(p){return{field:Dl(p.field),direction:uQ(p.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=HT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function cQ(n){let e=nQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ve(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(f){let p=e2(f);return p instanceof ii&&RV(p)?p.getFilters():[p]})(t.where));let s=[];t.orderBy&&(s=(function(f){return f.map(p=>(function(I){return new Ba(Sl(I.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(p))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,Zh(p)?null:p})(t.limit));let c=null;t.startAt&&(c=(function(f){let p=!!f.before,m=f.values||[];return new Ps(m,p)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){let p=!f.before,m=f.values||[];return new Ps(m,p)})(t.endAt)),FK(e,i,s,o,a,"F",c,u)}function lQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function e2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Sl(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Sl(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Sl(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Sl(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Sl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ii.create(t.compositeFilter.filters.map(r=>e2(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}})(t.compositeFilter.op))})(n):se(30097,{filter:n})}function uQ(n){return XK[n]}function dQ(n){return JK[n]}function hQ(n){return eQ[n]}function Dl(n){return{fieldPath:n.canonicalString()}}function Sl(n){return dr.fromServerFormat(n.fieldPath)}function t2(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(IL(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(bL(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IL(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(bL(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:dQ(t.op),value:t.value}}})(n):n instanceof ii?(function(t){let r=t.getFilters().map(i=>t2(i));return r.length===1?r[0]:{compositeFilter:{op:hQ(t.op),filters:r}}})(n):se(54877,{filter:n})}function fQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hh=class n{constructor(e,t,r,i,o=pe.min(),s=pe.min(),a=Cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var WT=class{constructor(e){this.gt=e}};function pQ(n){let e=cQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zv(e,e.limit,"L"):e}var Jv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ft(e.integerValue));else if("doubleValue"in e){let r=ft(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Uh(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=So(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ao(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?AV(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):SV(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):se(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Nl,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ft(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ie.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Jv.Ut=new Jv;var GT=class{constructor(){this.Dn=new KT}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(ja.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(ja.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}},KT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new en(st.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new en(st.comparator)).toArray()}};var $we=new Uint8Array(0);var LL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r2=41943040,Nr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(r2,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);var qh=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var VL="LruGarbageCollector",gQ=1048576;function UL([n,e],[t,r]){let i=Se(n,t);return i===0?Se(e,r):i}var QT=class{constructor(e){this.Tr=e,this.buffer=new en(UL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();UL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},YT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(VL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wl(t)?J(VL,"Ignoring IndexedDB error during garbage collection: ",t):yield zl(t)}yield this.Rr(3e5)}))}},ZT=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return B.resolve(eS.ue);let r=new QT(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(LL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Cl()<=De.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function mQ(n,e){return new ZT(n,e)}var XT=class{constructor(){this.changes=new xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var JT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var eD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Oh(r.mutation,i,kr.empty(),Bt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){let i=Fa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Mo(),s=kh(),a=(function(){return kh()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Fi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Oh(d.mutation,u,d.mutation.getFieldMask(),Bt.now())):s.set(u.key,kr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new JT(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kh(),i=new It((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||kr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=UV();d.forEach(p=>{if(!o.has(p)){let m=zV(t.get(p),r.get(p));m!==null&&f.set(p,m),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):B.resolve(Fa()),a=Vh,c=o;return s.next(u=>B.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Oe())).next(d=>({batchId:a,changes:VV(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(r=>{let i=Rh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Rh();return this.indexManager.getCollectionParents(e,o).next(a=>B.forEach(a,c=>{let u=(function(f,p){return new Oi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,fr.newInvalidDocument(d)))});let a=Rh();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Oh(d.mutation,u,kr.empty(),Bt.now()),C_(t,u)&&(a=a.insert(c,u))}),a})}};var tD=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:pQ(i.bundledQuery),readTime:hr(i.readTime)}})(t)),B.resolve()}};var nD=class{constructor(){this.overlays=new It(ie.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fa();return B.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),B.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){let i=Fa(),o=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return B.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new It((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Fa(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Fa(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return B.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new VT(t,r));let o=this.kr.get(t);o===void 0&&(o=Oe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var rD=class{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}};var zh=class{constructor(){this.qr=new en(Vt.Qr),this.$r=new en(Vt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Vt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Vt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ie(new st([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ie(new st([])),r=new Vt(t,e),i=new Vt(t,e+1),o=Oe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Vt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Vt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ie.comparator(e.key,t.key)||Se(e.Hr,t.Hr)}static Ur(e,t){return Se(e.Hr,t.Hr)||ie.comparator(e.key,t.key)}};var iD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new en(Vt.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new FT(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?tS:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(Se);return t.forEach(i=>{let o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),B.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new Vt(new ie(o),0),a=new en(Se);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),B.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ve(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return B.forEach(t.mutations,i=>{let o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Vt(t,0),i=this.Yr.firstAfterOrEqual(r);return B.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var oD=class{constructor(e){this.ni=e,this.docs=(function(){return new It(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Mo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fr.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Mo(),s=t.path,a=new ie(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||vK(mK(d),r)<=0||(i.has(d.key)||C_(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,t,r,i){se(9500)}ri(e,t){return B.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sD(this)}getSize(e){return B.resolve(this.size)}},sD=class extends XT{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var aD=class{constructor(e){this.persistence=e,this.ii=new xo(t=>oS(t),sS),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.si=0,this.oi=new zh,this.targetCount=0,this._i=qh.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new qh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}};var e_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new eS(0),this.ci=!1,this.ci=!0,this.li=new rD,this.referenceDelegate=e(this),this.hi=new aD(this),this.indexManager=new GT,this.remoteDocumentCache=(function(i){return new oD(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new WT(t),this.Ti=new tD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new iD(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new cD(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return B.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},cD=class extends yT{constructor(e){super(),this.currentSequenceNumber=e}},lD=class n{constructor(e){this.persistence=e,this.Ai=new zh,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw se(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,r=>{let i=ie.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,pe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},t_=class n{constructor(e,t){this.persistence=e,this.gi=new xo(r=>wK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mQ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return B.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?B.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nv(e.data.value)),t}Sr(e,t,r){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var uD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Oe(),i=Oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var dD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hD=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return CO()?8:yK(Zt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dD;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Cl()<=De.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Cl()<=De.DEBUG&&J("QueryEngine","Query:",Tl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Cl()<=De.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):B.resolve())}ps(e,t){if(SL(t))return B.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=zv(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Oe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,zv(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return SL(t)||i.isEqual(pe.min())?B.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?B.resolve(null):(Cl()<=De.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tl(t)),this.vs(e,s,t,gK(i,Vh)).next(a=>a))})}bs(e,t){let r=new en(FV(e));return t.forEach((i,o)=>{C_(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Cl()<=De.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.gs.getDocumentsMatchingQuery(e,t,ja.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var uS="LocalStore",vQ=3e8,fD=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new It(Se),this.Ms=new xo(o=>oS(o),sS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eD(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function _Q(n,e,t,r){return new fD(n,e,t,r)}function i2(n,e){return E(this,null,function*(){let t=ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Oe();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function yQ(n,e){let t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let f=u.batch,p=f.keys(),m=B.resolve();return p.forEach(I=>{m=m.next(()=>d.getEntry(c,I)).next(N=>{let k=u.docVersions.get(I);Ve(k!==null,48541),N.version.compareTo(k)<0&&(f.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),d.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function o2(n){let e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function EQ(n,e){let t=ge(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let p=i.get(f);if(!p)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,f)));let m=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Cn.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),(function(N,k,$){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=vQ?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(p,m,d)&&a.push(t.hi.updateTargetData(o,m))});let c=Mo(),u=Oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(wQ(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(pe.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function wQ(n,e,t){let r=Oe(),i=Oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Mo();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):J(uS,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function bQ(n,e){let t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IQ(n,e){let t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Hh(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function pD(n,e,t){return E(this,null,function*(){let r=ge(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Wl(s))throw s;J(uS,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function jL(n,e,t){let r=ge(n),i=pe.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,d){let f=ge(c),p=f.Ms.get(d);return p!==void 0?B.resolve(f.Fs.get(p)):f.hi.getTargetData(u,d)})(r,s,Ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:pe.min(),t?o:Oe())).next(a=>(CQ(r,VK(e),a),{documents:a,qs:o})))}function CQ(n,e,t){let r=n.xs.get(e)||pe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var n_=class{constructor(){this.activeTargetIds=qK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gD=class{constructor(){this.Fo=new n_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new n_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mD=class{xo(e){}shutdown(){}};var BL="ConnectivityMonitor",r_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(BL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(BL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pv=null;function vD(){return Pv===null?Pv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pv++,"0x"+Pv.toString(16)}var cT="RestConnection",TQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_D=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Bv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=vD(),a=this.Go(e,t.toUriEncodedString());J(cT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),d=Wn(u);return this.jo(e,a,c,r,d).then(f=>(J(cT,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Ms(cT,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=TQ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var yD=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var In="WebChannelConnection",ED=class extends _D{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=vD();return new Promise((a,c)=>{let u=new rT;u.setWithCredentials(!0),u.listenOnce(iT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Mh.NO_ERROR:let f=u.getResponseJson();J(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Mh.TIMEOUT:J(In,`RPC '${e}' ${s} timed out`),c(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:let p=u.getStatus();if(J(In,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let N=(function($){let ne=$.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(ne)>=0?ne:U.UNKNOWN})(I.status);c(new q(N,I.message))}else c(new q(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new q(U.UNAVAILABLE,"Connection failed."));break;default:se(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(In,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);J(In,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=vD(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aT(),a=sT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");J(In,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c);this.T_(f);let p=!1,m=!1,I=new yD({Ho:k=>{m?J(In,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(J(In,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),J(In,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},Yo:()=>f.close()}),N=(k,$,ne)=>{k.listen($,ee=>{try{ne(ee)}catch(de){setTimeout(()=>{throw de},0)}})};return N(f,Il.EventType.OPEN,()=>{m||(J(In,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),N(f,Il.EventType.CLOSE,()=>{m||(m=!0,J(In,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(f))}),N(f,Il.EventType.ERROR,k=>{m||(m=!0,Ms(In,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),I.__(new q(U.UNAVAILABLE,"The operation could not be completed")))}),N(f,Il.EventType.MESSAGE,k=>{var $;if(!m){let ne=k.data[0];Ve(!!ne,16349);let ee=ne,de=ee?.error||(($=ee[0])===null||$===void 0?void 0:$.error);if(de){J(In,`RPC '${e}' stream ${i} received error:`,de);let _t=de.status,Ne=(function(T){let x=Lt[T];if(x!==void 0)return KV(x)})(_t),M=de.message;Ne===void 0&&(Ne=U.INTERNAL,M="Unknown error status: "+_t+" with message "+de.message),m=!0,I.__(new q(Ne,M)),f.close()}else J(In,`RPC '${e}' stream ${i} received:`,ne),I.a_(ne)}}),N(a,oT.STAT_EVENT,k=>{k.stat===xv.PROXY?J(In,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===xv.NOPROXY&&J(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function lT(){return typeof document<"u"?document:null}function T_(n){return new $T(n,!0)}var Wh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var $L="PersistentStream",i_=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Wh(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Do(t.toString()),Do("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return J($L,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(J($L,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wD=class extends i_{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=iQ(this.serializer,e),r=(function(o){if(!("targetChange"in o))return pe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?pe.min():s.readTime?hr(s.readTime):pe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=zT(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=PT(c)?{documents:sQ(o,c)}:{query:aQ(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=QV(o,s.resumeToken);let u=HT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(pe.min())>0){a.readTime=Zv(o,s.snapshotVersion.toTimestamp());let u=HT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=lQ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=zT(this.serializer),t.removeTarget=e,this.k_(t)}},bD=class extends i_{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=oQ(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=zT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>JV(this.serializer,r))};this.k_(t)}};var ID=class{},CD=class extends ID{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(U.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,qT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(U.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},TD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Do(t),this._a=!1):J("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Wa="RemoteStore",DD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Ya(this)&&(J(Wa,"Restarting streams for network reachability change."),yield(function(c){return E(this,null,function*(){let u=ge(c);u.Ia.add(4),yield Xh(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield D_(u)})})(this))}))}),this.Aa=new TD(r,i)}};function D_(n){return E(this,null,function*(){if(Ya(n))for(let e of n.da)yield e(!0)})}function Xh(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function s2(n,e){let t=ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),pS(t)?fS(t):Gl(t).x_()&&hS(t,e))}function dS(n,e){let t=ge(n),r=Gl(t);t.Ta.delete(e),r.x_()&&a2(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ya(t)&&t.Aa.set("Unknown"))}function hS(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gl(n).H_(e)}function a2(n,e){n.Ra.$e(e),Gl(n).Y_(e)}function fS(n){n.Ra=new BT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Gl(n).start(),n.Aa.aa()}function pS(n){return Ya(n)&&!Gl(n).M_()&&n.Ta.size>0}function Ya(n){return ge(n).Ia.size===0}function c2(n){n.Ra=void 0}function DQ(n){return E(this,null,function*(){n.Aa.set("Online")})}function SQ(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{hS(n,e)})})}function AQ(n,e){return E(this,null,function*(){c2(n),pS(n)?(n.Aa.la(e),fS(n)):n.Aa.set("Unknown")})}function xQ(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof Qv&&e.state===2&&e.cause)try{yield(function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){J(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield o_(n,r)}else if(e instanceof Ml?n.Ra.Ye(e):e instanceof Kv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(pe.min()))try{let r=yield o2(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Cn.EMPTY_BYTE_STRING,d.snapshotVersion)),a2(o,c);let f=new Hh(d.target,c,u,d.sequenceNumber);hS(o,f)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){J(Wa,"Failed to raise snapshot:",r),yield o_(n,r)}})}function o_(n,e,t){return E(this,null,function*(){if(!Wl(e))throw e;n.Ia.add(1),yield Xh(n),n.Aa.set("Offline"),t||(t=()=>o2(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){J(Wa,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield D_(n)}))})}function l2(n,e){return e().catch(t=>o_(n,t,e))}function S_(n){return E(this,null,function*(){let e=ge(n),t=Ns(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:tS;for(;MQ(e);)try{let i=yield bQ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,RQ(e,i)}catch(i){yield o_(e,i)}u2(e)&&d2(e)})}function MQ(n){return Ya(n)&&n.Pa.length<10}function RQ(n,e){n.Pa.push(e);let t=Ns(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function u2(n){return Ya(n)&&!Ns(n).M_()&&n.Pa.length>0}function d2(n){Ns(n).start()}function PQ(n){return E(this,null,function*(){Ns(n).na()})}function NQ(n){return E(this,null,function*(){let e=Ns(n);for(let t of n.Pa)e.X_(t.mutations)})}function kQ(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=LT.from(r,e,t);yield l2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield S_(n)})}function OQ(n,e){return E(this,null,function*(){e&&Ns(n).Z_&&(yield(function(r,i){return E(this,null,function*(){if((function(s){return GV(s)&&s!==U.ABORTED})(i.code)){let o=r.Pa.shift();Ns(r).N_(),yield l2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield S_(r)}})})(n,e)),u2(n)&&d2(n)})}function HL(n,e){return E(this,null,function*(){let t=ge(n);t.asyncQueue.verifyOperationInProgress(),J(Wa,"RemoteStore received new credentials");let r=Ya(t);t.Ia.add(3),yield Xh(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield D_(t)})}function FQ(n,e){return E(this,null,function*(){let t=ge(n);e?(t.Ia.delete(2),yield D_(t)):e||(t.Ia.add(2),yield Xh(t),t.Aa.set("Unknown"))})}function Gl(n){return n.Va||(n.Va=(function(t,r,i){let o=ge(t);return o.ia(),new wD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:DQ.bind(null,n),e_:SQ.bind(null,n),n_:AQ.bind(null,n),J_:xQ.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),pS(n)?fS(n):n.Aa.set("Unknown")):(yield n.Va.stop(),c2(n))}))),n.Va}function Ns(n){return n.ma||(n.ma=(function(t,r,i){let o=ge(t);return o.ia(),new bD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:PQ.bind(null,n),n_:OQ.bind(null,n),ea:NQ.bind(null,n),ta:kQ.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield S_(n)):(yield n.ma.stop(),n.Pa.length>0&&(J(Wa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var SD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gS(n,e){if(Do("AsyncQueue",`${e}: ${n}`),Wl(n))return new q(U.UNAVAILABLE,`${e}: ${n}`);throw n}var s_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ie.comparator(t.key,r.key):(t,r)=>ie.comparator(t.key,r.key),this.keyedMap=Rh(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var a_=class{constructor(){this.fa=new It(ie.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):se(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},jl=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,s_.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},xD=class{constructor(){this.queries=qL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ge(t),o=i.queries;i.queries=qL(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new q(U.ABORTED,"Firestore shutting down"))}};function qL(){return new xo(n=>OV(n),I_)}function mS(n,e){return E(this,null,function*(){let t=ge(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new AD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=gS(s,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&_S(t)})}function vS(n,e){return E(this,null,function*(){let t=ge(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function LQ(n,e){let t=ge(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&_S(t)}function VQ(n,e,t){let r=ge(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function _S(n){n.Da.forEach(e=>{e.next()})}var MD,zL;(zL=MD||(MD={})).Fa="default",zL.Cache="cache";var Gh=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==MD.Cache}};var c_=class{constructor(e){this.key=e}},l_=class{constructor(e){this.key=e}},RD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=FV(e),this.eu=new s_(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new a_,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let p=i.get(d),m=C_(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),k=!1;p&&m?p.data.isEqual(m.data)?I!==N&&(r.track({type:3,doc:m}),k=!0):this.iu(p,m)||(r.track({type:2,doc:m}),k=!0,(c&&this.Xa(m,c)>0||u&&this.Xa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),k=!0):p&&!m&&(r.track({type:1,doc:p}),k=!0,(c||u)&&(a=!0)),k&&(m?(s=s.add(m),o=N?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,f)=>(function(m,I){let N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{At:k})}};return N(m)-N(I)})(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new jl(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new a_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new l_(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new c_(r))}),t}uu(e){this.Ha=e.qs,this.Za=Oe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return jl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},yS="SyncEngine",PD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ND=class{constructor(e){this.key=e,this.lu=!1}},kD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new xo(a=>OV(a),I_),this.Tu=new Map,this.Iu=new Set,this.du=new It(ie.comparator),this.Eu=new Map,this.Au=new zh,this.Ru={},this.Vu=new Map,this.mu=qh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function UQ(n,e,t=!0){return E(this,null,function*(){let r=v2(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield h2(r,e,t,!0),i})}function jQ(n,e){return E(this,null,function*(){let t=v2(n);yield h2(t,e,!0,!1)})}function h2(n,e,t,r){return E(this,null,function*(){let i=yield IQ(n.localStore,Ni(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield BQ(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&s2(n.remoteStore,i),a})}function BQ(n,e,t,r,i){return E(this,null,function*(){n.gu=(f,p,m)=>(function(N,k,$,ne){return E(this,null,function*(){let ee=k.view.nu($);ee.Ds&&(ee=yield jL(N.localStore,k.query,!1).then(({documents:M})=>k.view.nu(M,ee)));let de=ne&&ne.targetChanges.get(k.targetId),_t=ne&&ne.targetMismatches.get(k.targetId)!=null,Ne=k.view.applyChanges(ee,N.isPrimaryClient,de,_t);return GL(N,k.targetId,Ne._u),Ne.snapshot})})(n,f,p,m);let o=yield jL(n.localStore,e,!0),s=new RD(e,o.qs),a=s.nu(o.documents),c=$h.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);GL(n,t,u._u);let d=new PD(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function $Q(n,e,t){return E(this,null,function*(){let r=ge(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!I_(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&dS(r.remoteStore,i.targetId),OD(r,i.targetId)}).catch(zl))):(OD(r,i.targetId),yield pD(r.localStore,i.targetId,!0))})}function HQ(n,e){return E(this,null,function*(){let t=ge(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),dS(t.remoteStore,r.targetId))})}function qQ(n,e,t){return E(this,null,function*(){let r=ZQ(n);try{let i=yield(function(s,a){let c=ge(s),u=Bt.now(),d=a.reduce((m,I)=>m.add(I.key),Oe()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=Mo(),N=Oe();return c.Os.getEntries(m,d).next(k=>{I=k,I.forEach(($,ne)=>{ne.isValidDocument()||(N=N.add($))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,I)).next(k=>{f=k;let $=[];for(let ne of a){let ee=YK(ne,f.get(ne.key).overlayedDocument);ee!=null&&$.push(new Fi(ne.key,ee,xV(ee.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,$,a)}).next(k=>{p=k;let $=k.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(m,k.batchId,$)})}).then(()=>({batchId:p.batchId,changes:VV(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new It(Se)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),yield Jh(r,i.changes),yield S_(r.remoteStore)}catch(i){let o=gS(i,"Failed to persist write");t.reject(o)}})}function f2(n,e){return E(this,null,function*(){let t=ge(n);try{let r=yield EQ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ve(s.lu,14607):i.removedDocuments.size>0&&(Ve(s.lu,42227),s.lu=!1))}),yield Jh(t,r,e)}catch(r){yield zl(r)}})}function WL(n,e,t){let r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=ge(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let p of f.wa)p.va(a)&&(u=!0)}),u&&_S(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zQ(n,e,t){return E(this,null,function*(){let r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new It(ie.comparator);s=s.insert(o,fr.newNoDocument(o,pe.min()));let a=Oe().add(o),c=new Gv(pe.min(),new Map,new It(Se),s,a);yield f2(r,c),r.du=r.du.remove(o),r.Eu.delete(e),ES(r)}else yield pD(r.localStore,e,!1).then(()=>OD(r,e,t)).catch(zl)})}function WQ(n,e){return E(this,null,function*(){let t=ge(n),r=e.batch.batchId;try{let i=yield yQ(t.localStore,e);g2(t,r,null),p2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jh(t,i)}catch(i){yield zl(i)}})}function GQ(n,e,t){return E(this,null,function*(){let r=ge(n);try{let i=yield(function(s,a){let c=ge(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ve(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);g2(r,e,t),p2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jh(r,i)}catch(i){yield zl(i)}})}function p2(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function g2(n,e,t){let r=ge(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function OD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||m2(n,r)})}function m2(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(dS(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ES(n))}function GL(n,e,t){for(let r of t)r instanceof c_?(n.Au.addReference(r.key,e),KQ(n,r)):r instanceof l_?(J(yS,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||m2(n,r.key)):se(19791,{yu:r})}function KQ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(J(yS,"New document in limbo: "+t),n.Iu.add(r),ES(n))}function ES(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ie(st.fromString(e)),r=n.mu.next();n.Eu.set(r,new ND(t)),n.du=n.du.insert(t,r),s2(n.remoteStore,new Hh(Ni(b_(t.path)),r,"TargetPurposeLimboResolution",eS.ue))}}function Jh(n,e,t){return E(this,null,function*(){let r=ge(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=uD.Es(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,u){return E(this,null,function*(){let d=ge(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(u,p=>B.forEach(p.Is,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>B.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Wl(f))throw f;J(uS,"Failed to update sequence numbers: "+f)}for(let f of u){let p=f.targetId;if(!f.fromCache){let m=d.Fs.get(p),I=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(I);d.Fs=d.Fs.insert(p,N)}}})})(r.localStore,o))})}function QQ(n,e){return E(this,null,function*(){let t=ge(n);if(!t.currentUser.isEqual(e)){J(yS,"User change. New user:",e.toKey());let r=yield i2(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new q(U.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jh(t,r.Bs)}})}function YQ(n,e){let t=ge(n),r=t.Eu.get(e);if(r&&r.lu)return Oe().add(r.key);{let i=Oe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function v2(n){let e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=f2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zQ.bind(null,e),e.hu.J_=LQ.bind(null,e.eventManager),e.hu.pu=VQ.bind(null,e.eventManager),e}function ZQ(n){let e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GQ.bind(null,e),e}var _2=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=T_(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return _Q(this.persistence,new hD,t.initialUser,this.serializer)}Du(t){return new e_(lD.Vi,this.serializer)}bu(t){return new gD}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),FD=class extends _2{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ve(this.persistence.referenceDelegate instanceof t_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new YT(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new e_(r=>t_.Vi(r,t),this.serializer)}};var XQ=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QQ.bind(null,this.syncEngine),yield FQ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new xD})()}createDatastore(t){let r=T_(t.databaseInfo.databaseId),i=(function(s){return new ED(s)})(t.databaseInfo);return(function(s,a,c,u){return new CD(s,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new DD(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>WL(this.syncEngine,r,0),(function(){return r_.C()?new r_:new mD})())}createSyncEngine(t,r){return(function(o,s,a,c,u,d,f){let p=new kD(o,s,a,c,u,d);return f&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield(function(o){return E(this,null,function*(){let s=ge(o);J(Wa,"RemoteStore shutting down."),s.Ia.add(5),yield Xh(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Kh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Do("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var LD=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return E(this,null,function*(){let s=ge(i),a={documents:o.map(f=>Xv(s.serializer,f))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,st.emptyPath(),a,o.length),u=new Map;c.forEach(f=>{let p=rQ(s.serializer,f);u.set(p.key.toString(),p)});let d=[];return o.forEach(f=>{let p=u.get(f.toString());Ve(!!p,55234,{key:f}),d.push(p)}),d})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ie.fromPath(r);this.mutations.push(new Wv(i,this.precondition(i)))}),yield(function(r,i){return E(this,null,function*(){let o=ge(r),s={writes:i.map(a=>JV(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,st.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw se(50498,{Wu:e.constructor.name});t=pe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new q(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pe.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pe.min()))throw new q(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var VD=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Wh(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>E(this,null,function*(){let e=new LD(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Zh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!GV(t)}return!1}};var ks="FirestoreClient",UD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){J(ks,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(J(ks,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=gS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function uT(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),J(ks,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield i2(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ms("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ms("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function KL(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield JQ(n);J(ks,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>HL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>HL(e.remoteStore,i)),n._onlineComponents=e})}function JQ(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(ks,"Using user provided OfflineComponentProvider");try{yield uT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ms("Error using user provided cache. Falling back to memory cache: "+t),yield uT(n,new _2)}}else J(ks,"Using default OfflineComponentProvider"),yield uT(n,new FD(void 0));return n._offlineComponents})}function wS(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(ks,"Using user provided OnlineComponentProvider"),yield KL(n,n._uninitializedComponentsProvider._online)):(J(ks,"Using default OnlineComponentProvider"),yield KL(n,new XQ))),n._onlineComponents})}function eY(n){return wS(n).then(e=>e.syncEngine)}function tY(n){return wS(n).then(e=>e.datastore)}function u_(n){return E(this,null,function*(){let e=yield wS(n),t=e.eventManager;return t.onListen=UQ.bind(null,e.syncEngine),t.onUnlisten=$Q.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HQ.bind(null,e.syncEngine),t})}function nY(n,e,t={}){let r=new Or;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return(function(o,s,a,c,u){let d=new Kh({next:p=>{d.Ou(),s.enqueueAndForget(()=>vS(o,f));let m=p.docs.has(a);!m&&p.fromCache?u.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?u.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Gh(b_(a.path),d,{includeMetadataChanges:!0,ka:!0});return mS(o,f)})(yield u_(n),n.asyncQueue,e,t,r)})),r.promise}function rY(n,e,t={}){let r=new Or;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return(function(o,s,a,c,u){let d=new Kh({next:p=>{d.Ou(),s.enqueueAndForget(()=>vS(o,f)),p.fromCache&&c.source==="server"?u.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Gh(a,d,{includeMetadataChanges:!0,ka:!0});return mS(o,f)})(yield u_(n),n.asyncQueue,e,t,r)})),r.promise}function y2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QL=new Map;var E2="firestore.googleapis.com",YL=!0,d_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E2,this.ssl=YL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:YL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gQ)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dT;switch(r.type){case"firstParty":return new gT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=QL.get(t);r&&(J("ComponentProvider","Removing Datastore"),QL.delete(t),r.terminate())})(this),Promise.resolve()}};function w2(n,e,t,r={}){var i;n=Un(n,Bl);let o=Wn(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(ms(`https://${c}`),vs("Firestore",!0)),s.host!==E2&&s.host!==c&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!xr(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Jt.MOCK_USER;else{d=pl(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Jt(p)}n._authCredentials=new hT(new Fv(d,f))}}var oi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yh(t,n._jsonSchema))return new n(e,r||null,new ie(st.fromString(t.referencePath)))}};$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:jt("string",$t._jsonSchemaVersion),referencePath:jt("string")};var Ds=class n extends oi{constructor(e,t,r){super(e,t,b_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function b2(n,e,...t){if(n=Me(n),iV("collection","path",e),n instanceof Bl){let r=st.fromString(e,...t);return gL(r),new Ds(n,null,r)}{if(!(n instanceof $t||n instanceof Ds))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(st.fromString(e,...t));return gL(r),new Ds(n.firestore,null,r)}}function bS(n,e,...t){if(n=Me(n),arguments.length===1&&(e=Lh.newId()),iV("doc","path",e),n instanceof Bl){let r=st.fromString(e,...t);return pL(r),new $t(n,null,new ie(r))}{if(!(n instanceof $t||n instanceof Ds))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(st.fromString(e,...t));return pL(r),new $t(n.firestore,n instanceof Ds?n.converter:null,new ie(r))}}var ZL="AsyncQueue",h_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Wh(this,"async_queue_retry"),this.oc=()=>{let r=lT();r&&J(ZL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=lT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=lT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Wl(e))throw e;J(ZL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Do("INTERNAL UNHANDLED ERROR: ",XL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=SD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&se(47125,{hc:XL(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function XL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function JL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Fr=class extends Bl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new h_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,yield e}})}};function I2(n,e){let t=typeof n=="object"?n:ni(),r=typeof n=="string"?n:e||Bv,i=Ai(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fl("firestore");o&&w2(i,...o)}return i}function ef(n){if(n._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iY(n),n._firestoreClient}function iY(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,u,d){return new ET(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,y2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new UD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var To=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Cn.fromBase64String(e))}catch(t){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yh(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};To._jsonSchemaVersion="firestore/bytes/1.0",To._jsonSchema={type:jt("string",To._jsonSchemaVersion),bytes:jt("string")};var Ga=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $l=class{constructor(e){this._methodName=e}};var Ss=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Yh(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:jt("string",Ss._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};var As=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yh(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new q(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:jt("string",As._jsonSchemaVersion),vectorValues:jt("object")};var oY=/^__.*__$/,jD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new za(e,this.data,t,this.fieldTransforms)}},f_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function C2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ec:n})}}var BD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return g_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(C2(this.Ec)&&oY.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$D=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||T_(e)}Dc(e,t,r,i=!1){return new BD({Ec:e,methodName:t,bc:r,path:dr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kl(n){let e=n._freezeSettings(),t=T_(n._databaseId);return new $D(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IS(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);CS("Data must be an object, but it was:",s,r);let a=A2(r,s),c,u;if(o.merge)c=new kr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let p=qD(e,f,t);if(!s.contains(p))throw new q(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);M2(d,p)||d.push(p)}c=new kr(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new jD(new Gn(a),c,u)}var p_=class n extends $l{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var HD=class n extends $l{_toFieldTransform(e){return new kT(e.path,new $a)}isEqual(e){return e instanceof n}};function T2(n,e,t,r){let i=n.Dc(1,e,t);CS("Data must be an object, but it was:",i,r);let o=[],s=Gn.empty();Os(r,(c,u)=>{let d=TS(e,c,t);u=Me(u);let f=i.gc(d);if(u instanceof p_)o.push(d);else{let p=tf(u,f);p!=null&&(o.push(d),s.set(d,p))}});let a=new kr(o);return new f_(s,a,i.fieldTransforms)}function D2(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[qD(e,r,t)],c=[i];if(o.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(qD(e,o[p])),c.push(o[p+1]);let u=[],d=Gn.empty();for(let p=a.length-1;p>=0;--p)if(!M2(u,a[p])){let m=a[p],I=c[p];I=Me(I);let N=s.gc(m);if(I instanceof p_)u.push(m);else{let k=tf(I,N);k!=null&&(u.push(m),d.set(m,k))}}let f=new kr(u);return new f_(d,f,s.fieldTransforms)}function S2(n,e,t,r=!1){return tf(t,n.Dc(r?4:3,e))}function tf(n,e){if(x2(n=Me(n)))return CS("Unsupported field value:",e,n),A2(n,e);if(n instanceof $l)return(function(r,i){if(!C2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=tf(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Bt.fromDate(r);return{timestampValue:Zv(i.serializer,o)}}if(r instanceof Bt){let o=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zv(i.serializer,o)}}if(r instanceof Ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:QV(i.serializer,r._byteString)};if(r instanceof $t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof As)return(function(s,a){return{mapValue:{fields:{[nS]:{stringValue:rS},[Nl]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return cS(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${y_(r)}`)})(n,e)}function A2(n,e){let t={};return wV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(n,(r,i)=>{let o=tf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function x2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof Ss||n instanceof To||n instanceof $t||n instanceof $l||n instanceof As)}function CS(n,e,t){if(!x2(t)||!oV(t)){let r=y_(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function qD(n,e,t){if((e=Me(e))instanceof Ga)return e._internalPath;if(typeof e=="string")return TS(n,e);throw g_("Field path arguments must be of type string or ",n,!1,void 0,t)}var sY=new RegExp("[~\\*/\\[\\]]");function TS(n,e,t){if(e.search(sY)>=0)throw g_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ga(...e.split("."))._internalPath}catch{throw g_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function g_(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new q(U.INVALID_ARGUMENT,a+n+c)}function M2(n,e){return n.some(t=>t.isEqual(e))}var Ka=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(A_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zD=class extends Ka{data(){return super.data()}};function A_(n,e){return typeof e=="string"?TS(n,e):e instanceof Ga?e._internalPath:e._delegate._internalPath}function R2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qh=class{},Qa=class extends Qh{};function P2(n,e,...t){let r=[];e instanceof Qh&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof WD).length,a=o.filter(c=>c instanceof m_).length;if(s>1||s>0&&a>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var m_=class n extends Qa{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return V2(e._query,t),new oi(e.firestore,e.converter,NT(e._query,t))}_parse(e){let t=Kl(e.firestore);return(function(o,s,a,c,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){tV(f,d);let I=[];for(let N of f)I.push(eV(c,o,N));p={arrayValue:{values:I}}}else p=eV(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||tV(f,d),p=S2(a,s,f,d==="in"||d==="not-in");return Ut.create(u,d,p)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function N2(n,e,t){let r=e,i=A_("where",n);return m_._create(i,r,t)}var WD=class n extends Qh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ii.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)V2(s,c),s=NT(s,c)})(e._query,t),new oi(e.firestore,e.converter,NT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var GD=class n extends Qa{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ba(o,s)})(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Oi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function k2(n,e="asc"){let t=e,r=A_("orderBy",n);return GD._create(r,t)}var v_=class n extends Qa{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new oi(e.firestore,e.converter,zv(e._query,this._limit,this._limitType))}};function O2(n){return sV("limit",n),v_._create("limit",n,"F")}function DS(n){return sV("limitToLast",n),v_._create("limitToLast",n,"L")}var KD=class n extends Qa{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=L2(e,this.type,this._docOrFields,this._inclusive);return new oi(e.firestore,e.converter,(function(i,o){return new Oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function F2(...n){return KD._create("startAfter",n,!1)}var QD=class n extends Qa{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=L2(e,this.type,this._docOrFields,this._inclusive);return new oi(e.firestore,e.converter,(function(i,o){return new Oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function x_(...n){return QD._create("endBefore",n,!1)}function L2(n,e,t,r){if(t[0]=Me(t[0]),t[0]instanceof Ka)return(function(o,s,a,c,u){if(!c)throw new q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of xl(o))if(f.field.isKeyField())d.push(Hv(s,c.key));else{let p=c.data.field(f.field);if(E_(p))throw new q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=f.field.canonicalString();throw new q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Ps(d,u)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Kl(n.firestore);return(function(s,a,c,u,d,f){let p=s.explicitOrderBy;if(d.length>p.length)throw new q(U.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let I=0;I<d.length;I++){let N=d[I];if(p[I].field.isKeyField()){if(typeof N!="string")throw new q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof N}`);if(!aS(s)&&N.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${N}' contains a slash.`);let k=s.path.child(st.fromString(N));if(!ie.isDocumentKey(k))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);let $=new ie(k);m.push(Hv(a,$))}else{let k=S2(c,u,N);m.push(k)}}return new Ps(m,f)})(n._query,n.firestore._databaseId,i,e,t,r)}}function eV(n,e,t){if(typeof(t=Me(t))=="string"){if(t==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aS(e)&&t.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(st.fromString(t));if(!ie.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hv(n,new ie(r))}if(t instanceof $t)return Hv(n,t._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y_(t)}.`)}function tV(n,e){if(!Array.isArray(n)||n.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V2(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var __=class{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Os(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Nl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ft(s.doubleValue));return new As(o)}convertGeoPoint(e){return new Ss(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=w_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jh(e));default:return null}}convertTimestamp(e){let t=So(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=st.fromString(e);Ve(n2(r),9688,{name:e});let i=new $v(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(t)||Do(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function SS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var YD=class extends __{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};var Ts=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xs=class n extends Ka{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(A_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:jt("string",xs._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};var Rl=class extends xs{data(e={}){return super.data(e)}},Va=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ts(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rl(this._firestore,this._userDataWriter,r.key,r,new Ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:aY(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function aY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:n})}}function U2(n){n=Un(n,$t);let e=Un(n.firestore,Fr);return nY(ef(e),n._key).then(t=>z2(e,n,t))}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:jt("string",Va._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};var Hl=class extends __{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};function j2(n){n=Un(n,oi);let e=Un(n.firestore,Fr),t=ef(e),r=new Hl(e);return R2(n._query),rY(t,n._query).then(i=>new Va(e,r,n,i))}function B2(n,e,t){n=Un(n,$t);let r=Un(n.firestore,Fr),i=SS(n.converter,e,t);return M_(r,[IS(Kl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Vn.none())])}function $2(n,e,t,...r){n=Un(n,$t);let i=Un(n.firestore,Fr),o=Kl(i),s;return s=typeof(e=Me(e))=="string"||e instanceof Ga?D2(o,"updateDoc",n._key,e,t,r):T2(o,"updateDoc",n._key,e),M_(i,[s.toMutation(n._key,Vn.exists(!0))])}function H2(n){return M_(Un(n.firestore,Fr),[new Ul(n._key,Vn.none())])}function q2(n,e){let t=Un(n.firestore,Fr),r=bS(n),i=SS(n.converter,e);return M_(t,[IS(Kl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}function Za(n,...e){var t,r,i;n=Me(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JL(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(JL(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof $t)u=Un(n.firestore,Fr),d=b_(n._key.path),c={next:f=>{e[s]&&e[s](z2(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Un(n,oi);u=Un(f.firestore,Fr),d=f._query;let p=new Hl(u);c={next:m=>{e[s]&&e[s](new Va(u,p,f,m))},error:e[s+1],complete:e[s+2]},R2(n._query)}return(function(p,m,I,N){let k=new Kh(N),$=new Gh(m,k,I);return p.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return mS(yield u_(p),$)})),()=>{k.Ou(),p.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return vS(yield u_(p),$)}))}})(ef(u),d,a,c)}function M_(n,e){return(function(r,i){let o=new Or;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return qQ(yield eY(r),i,o)})),o.promise})(ef(n),e)}function z2(n,e,t){let r=t.docs.get(e._key),i=new Hl(n);return new xs(n,i,e._key,r,new Ts(t.hasPendingWrites,t.fromCache),e.converter)}var cY={maxAttempts:5};function Ph(n,e){if((n=Me(n)).firestore!==e)throw new q(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var ZD=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kl(e)}get(e){let t=Ph(e,this._firestore),r=new YD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return se(24041);let o=i[0];if(o.isFoundDocument())return new Ka(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ka(this._firestore,r,t._key,null,t.converter);throw se(18433,{doc:o})})}set(e,t,r){let i=Ph(e,this._firestore),o=SS(i.converter,t,r),s=IS(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Ph(e,this._firestore),s;return s=typeof(t=Me(t))=="string"||t instanceof Ga?D2(this._dataReader,"Transaction.update",o._key,t,r,i):T2(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Ph(e,this._firestore);return this._transaction.delete(t._key),this}};var XD=class extends ZD{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ph(e,this._firestore),r=new Hl(this._firestore);return super.get(e).then(i=>new xs(this._firestore,r,t._key,i._document,new Ts(!1,!1),t.converter))}};function AS(n,e,t){n=Un(n,Fr);let r=Object.assign(Object.assign({},cY),t);return(function(o){if(o.maxAttempts<1)throw new q(U.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Or;return o.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){let u=yield tY(o);new VD(o.asyncQueue,u,a,s,c).zu()})),c.promise})(ef(n),i=>e(new XD(n,i)),r)}function Ql(){return new HD("serverTimestamp")}(function(e,t=!0){(function(i){ql=i})(Rr),Ln(new Wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fr(new fT(r.getProvider("auth-internal")),new mT(s,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $v(u.options.projectId,d)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Je(uL,dL,e),Je(uL,dL,"esm2017")})();var R_=function(){return R_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},R_.apply(this,arguments)};var dY={includeMetadataChanges:!1};function W2(n,e){return e===void 0&&(e=dY),new he(function(t){var r=Za(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function G2(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:R_(R_({},r),(t={},t[e.idField]=n.id,t))}function K2(n){return W2(n,{includeMetadataChanges:!0}).pipe(Ie(function(e){return e.docs}))}function Q2(n,e){return e===void 0&&(e={}),K2(n).pipe(Ie(function(t){return t.map(function(r){return G2(r,e)})}))}var Gt=class{constructor(e){return e}},Y2="firestore",xS=class{constructor(){return yl(Y2)}};var MS=new X("angularfire2.firestore-instances");function hY(n,e){let t=mh(Y2,n,e);return t&&new Gt(t)}function fY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Gt(r)}}var pY={provide:xS,deps:[[new sr,MS]]},gY={provide:Gt,useFactory:hY,deps:[[new sr,MS],_o]};function Z2(n,...e){return Je("angularfire",ys.full,"fst"),$n([gY,pY,{provide:MS,useFactory:fY(n),multi:!0,deps:[He,wt,Es,Ra,[new sr,xh],[new sr,El],...e]}])}var Fs=it(Q2,!0);var nf=it(q2,!0,2);var Tn=it(b2,!0,2);var P_=it(H2,!0,2);var et=it(bS,!0,2);var Li=it(U2,!0);var N_=it(j2,!0);var X2=it(I2,!0);var J2=it(O2,!0,2);var k_=it(Za,!0);var O_=it(k2,!0,2),Xa=it(P2,!0,2);var rf=it(B2,!0,2);var eU=it(F2,!0,2);var Kn=it($2,!0,2);var RS=it(N2,!0,2);var mY=n=>["/profile",n];function vY(n,e){if(n&1&&oe(0,"img",11),n&2){let t=F().$implicit;A("alt",ho(t.displayName))("src",t.profilePicture,Ot)}}function _Y(n,e){if(n&1&&(_(0,"div",12),b(1),v()),n&2){let t=F().$implicit,r=F(2);w(),xe(r.getInitials(t.displayName))}}function yY(n,e){if(n&1&&(_(0,"div",5)(1,"a",6)(2,"div",7),G(3,vY,1,3,"img",8)(4,_Y,2,1,"div",9),v(),_(5,"div",10),b(6),v()()()),n&2){let t=e.$implicit;w(),A("routerLink",yn(4,mY,t.uid)),w(2),A("ngIf",t.profilePicture),w(),A("ngIf",!t.profilePicture),w(2),xe(t.displayName||t.email||"Unknown")}}function EY(n,e){if(n&1&&(lo(0),G(1,yY,7,6,"div",4),uo()),n&2){let t=e.ngIf;w(),A("ngForOf",t)}}var F_=class n{firestore=S(Gt);users$;constructor(){let e=Tn(this.firestore,"users");this.users$=Fs(e,{idField:"uid"})}getInitials(e){if(!e)return"?";let t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.charAt(0).toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-user-grid"]],decls:6,vars:3,consts:[[1,"user-grid","container","py-4"],[1,"mb-3"],[1,"row","g-3"],[4,"ngIf"],["class","col-6 col-sm-4 col-md-3 col-lg-2 text-center",4,"ngFor","ngForOf"],[1,"col-6","col-sm-4","col-md-3","col-lg-2","text-center"],[1,"d-block","text-decoration-none","text-dark",3,"routerLink"],[1,"avatar","shadow-sm","mx-auto","mb-2"],[3,"src","alt",4,"ngIf"],["class","avatar-fallback",4,"ngIf"],[1,"user-name","small"],[3,"src","alt"],[1,"avatar-fallback"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"h3",1),b(2,"Community Members"),v(),_(3,"div",2),G(4,EY,2,1,"ng-container",3),fo(5,"async"),v()()),t&2&&(w(4),A("ngIf",wb(5,1,r.users$)))},dependencies:[$e,Ar,rt,Mt,ht,Qb],styles:[".user-grid[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;overflow:hidden;background:var(--palette-surface, #f3f3f3);display:flex;align-items:center;justify-content:center}.user-grid[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-grid[_ngcontent-%COMP%]   .avatar-fallback[_ngcontent-%COMP%]{font-weight:700;color:var(--palette-on-surface, #2b2b2b)}.user-grid[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};function wY(n,e){if(n&1){let t=ve();lo(0),_(1,"button",16),H("click",function(){Q(t);let i=F();return Y(i.navigateToEvents())}),b(2," View Events "),v(),_(3,"button",17),H("click",function(){Q(t);let i=F();return Y(i.navigateToCreateEvent())}),b(4," Create Event "),v(),uo()}}function bY(n,e){if(n&1){let t=ve();lo(0),_(1,"button",16),H("click",function(){Q(t);let i=F();return Y(i.openSignupModal())}),b(2," Get Started "),v(),_(3,"button",18),H("click",function(){Q(t);let i=F();return Y(i.openLoginModal())}),b(4," Sign In "),v(),uo()}}var L_=class n{authService=S(Pr);router=S(Xe);modalService=S(ot);navigateToEvents(){this.router.navigate(["/events"])}navigateToCreateEvent(){this.router.navigate(["/create-event"])}openLoginModal(){this.modalService.openModal("login")}openSignupModal(){this.modalService.openModal("signup")}isAuthenticated(){return this.authService.currentUserSig()!==null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-home"]],decls:41,vars:2,consts:[[1,"home-viewport"],[1,"container-lg","py-5"],[1,"row","align-items-center","min-vh-100"],[1,"col-lg-6"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"cta-buttons"],[4,"ngIf"],[1,"hero-features","mt-5"],[1,"feature-item"],[1,"feature-icon"],[1,"col-lg-6","mt-4","mt-lg-0"],[1,"card","shadow-sm","p-3"],[1,"mb-3"],[1,"btn","btn-primary","btn-lg","me-3",3,"click"],[1,"btn","btn-secondary","btn-lg",3,"click"],[1,"btn","btn-outline-primary","btn-lg",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),b(6,"CommUnity"),v(),_(7,"p",6),b(8,"For the people, by the people, with the people"),v(),_(9,"p",7),b(10," Join a movement of dedicated volunteers making real change. Create events, connect with others, and build the community you want to see. "),v(),_(11,"div",8),G(12,wY,5,0,"ng-container",9)(13,bY,5,0,"ng-container",9),v(),_(14,"div",10)(15,"div",11)(16,"span",12),b(17,"\u{1F4CB}"),v(),_(18,"h4"),b(19,"Manage Events"),v(),_(20,"p"),b(21,"Create and organize volunteer events easily"),v()(),_(22,"div",11)(23,"span",12),b(24,"\u{1F465}"),v(),_(25,"h4"),b(26,"Connect Volunteers"),v(),_(27,"p"),b(28,"Find like-minded volunteers and build community"),v()(),_(29,"div",11)(30,"span",12),b(31,"\u{1F4CA}"),v(),_(32,"h4"),b(33,"Track Impact"),v(),_(34,"p"),b(35,"Monitor your volunteer hours and contributions"),v()()()()(),_(36,"div",13)(37,"div",14)(38,"h5",15),b(39,"Community"),v(),oe(40,"app-user-grid"),v()()()()()),t&2&&(w(12),A("ngIf",r.isAuthenticated()),w(),A("ngIf",!r.isAuthenticated()))},dependencies:[$e,rt,F_],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.home-viewport[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fefae080,#606c380d);min-height:100vh}.hero-content[_ngcontent-%COMP%]{padding:2rem}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;color:var(--black-forest);margin-bottom:1rem;line-height:1.2}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--olive-leaf);margin-bottom:1.5rem;font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#283618cc;line-height:1.8;margin-bottom:2rem}.cta-buttons[_ngcontent-%COMP%]{margin-top:2.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.875rem 2rem;border-radius:8px;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-3px);box-shadow:0 8px 20px #606c3833;color:var(--cornsilk)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);border-color:var(--sunlit-clay);color:var(--black-forest);font-weight:600;padding:.875rem 2rem;border-radius:8px;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood);transform:translateY(-3px);box-shadow:0 8px 20px #dda15e33;color:#fff}.btn-outline-primary[_ngcontent-%COMP%]{background-color:transparent;border:2px solid var(--black-forest);color:var(--black-forest);font-weight:600;padding:.75rem 2rem;border-radius:8px;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);transform:translateY(-3px);box-shadow:0 8px 20px #28361833}.hero-features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem}.feature-item[_ngcontent-%COMP%]{text-align:center;padding:1.5rem;border-radius:8px;background-color:#fefae099;border:2px solid rgba(221,161,94,.2);transition:all .3s ease}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:var(--sunlit-clay);box-shadow:0 8px 16px #dda15e26}.feature-icon[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:.5rem}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.5rem}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#283618b3;font-size:.9rem;margin:0}.hero-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.image-placeholder[_ngcontent-%COMP%]{width:100%;max-width:400px;aspect-ratio:1;border-radius:12px;overflow:hidden;box-shadow:0 12px 32px #28361826}.placeholder-svg[_ngcontent-%COMP%]{width:100%;height:100%}@media (max-width: 992px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-image[_ngcontent-%COMP%]{margin-top:2rem}.cta-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;margin-right:0!important}}.min-vh-100[_ngcontent-%COMP%]{min-height:100vh}"]})};var uU=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(Ir),re(mn))};static \u0275dir=nt({type:n})}return n})(),OS=(()=>{class n extends uU{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275dir=nt({type:n,features:[Hn]})}return n})(),hf=new X("");var IY={provide:hf,useExisting:ir(()=>Vi),multi:!0};function CY(){let n=Dr()?Dr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TY=new X(""),Vi=(()=>{class n extends uU{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!CY())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(Ir),re(mn),re(TY,8))};static \u0275dir=nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&H("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[yi([IY]),Hn]})}return n})();function FS(n){return n==null||LS(n)===0}function LS(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ff=new X(""),K_=new X(""),DY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Qn=class{static min(e){return SY(e)}static max(e){return AY(e)}static required(e){return dU(e)}static requiredTrue(e){return xY(e)}static email(e){return MY(e)}static minLength(e){return RY(e)}static maxLength(e){return PY(e)}static pattern(e){return NY(e)}static nullValidator(e){return U_()}static compose(e){return vU(e)}static composeAsync(e){return _U(e)}};function SY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function AY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function dU(n){return FS(n.value)?{required:!0}:null}function xY(n){return n.value===!0?null:{required:!0}}function MY(n){return FS(n.value)||DY.test(n.value)?null:{email:!0}}function RY(n){return e=>{let t=e.value?.length??LS(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function PY(n){return e=>{let t=e.value?.length??LS(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function NY(n){if(!n)return U_;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(FS(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function U_(n){return null}function hU(n){return n!=null}function fU(n){return ao(n)?Be(n):n}function pU(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function gU(n,e){return e.map(t=>t(n))}function kY(n){return!n.validate}function mU(n){return n.map(e=>kY(e)?e:t=>e.validate(t))}function vU(n){if(!n)return null;let e=n.filter(hU);return e.length==0?null:function(t){return pU(gU(t,e))}}function VS(n){return n!=null?vU(mU(n)):null}function _U(n){if(!n)return null;let e=n.filter(hU);return e.length==0?null:function(t){let r=gU(t,e).map(fU);return GE(r).pipe(Ie(pU))}}function US(n){return n!=null?_U(mU(n)):null}function tU(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yU(n){return n._rawValidators}function EU(n){return n._rawAsyncValidators}function PS(n){return n?Array.isArray(n)?n:[n]:[]}function j_(n,e){return Array.isArray(n)?n.includes(e):n===e}function nU(n,e){let t=PS(e);return PS(n).forEach(i=>{j_(t,i)||t.push(i)}),t}function rU(n,e){return PS(e).filter(t=>!j_(n,t))}var B_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=US(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ro=class extends B_{name;get formDirective(){return null}get path(){return null}},Ja=class extends B_{_parent=null;name=null;valueAccessor=null},$_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},MIe=ue(j({},OY),{"[class.ng-submitted]":"isSubmitted"}),Vs=(()=>{class n extends $_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(Ja,2))};static \u0275dir=nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ct("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Hn]})}return n})(),Ui=(()=>{class n extends $_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(Ro,10))};static \u0275dir=nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ct("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Hn]})}return n})();var of="VALID",V_="INVALID",Yl="PENDING",sf="DISABLED",Ls=class{},H_=class extends Ls{value;source;constructor(e,t){super(),this.value=e,this.source=t}},cf=class extends Ls{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},lf=class extends Ls{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Zl=class extends Ls{status;source;constructor(e,t){super(),this.status=e,this.source=t}},q_=class extends Ls{source;constructor(e){super(),this.source=e}},df=class extends Ls{source;constructor(e){super(),this.source=e}};function jS(n){return(Q_(n)?n.validators:n)||null}function FY(n){return Array.isArray(n)?VS(n):n||null}function BS(n,e){return(Q_(e)?e.asyncValidators:n)||null}function LY(n){return Array.isArray(n)?US(n):n||null}function Q_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function wU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function bU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var Xl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xt(this.statusReactive)}set status(e){xt(()=>this.statusReactive.set(e))}_status=_a(()=>this.statusReactive());statusReactive=te(void 0);get valid(){return this.status===of}get invalid(){return this.status===V_}get pending(){return this.status==Yl}get disabled(){return this.status===sf}get enabled(){return this.status!==sf}errors;get pristine(){return xt(this.pristineReactive)}set pristine(e){xt(()=>this.pristineReactive.set(e))}_pristine=_a(()=>this.pristineReactive());pristineReactive=te(!0);get dirty(){return!this.pristine}get touched(){return xt(this.touchedReactive)}set touched(e){xt(()=>this.touchedReactive.set(e))}_touched=_a(()=>this.touchedReactive());touchedReactive=te(!1);get untouched(){return!this.touched}_events=new Ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rU(e,this._rawAsyncValidators))}hasValidator(e){return j_(this._rawValidators,e)}hasAsyncValidator(e){return j_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lf(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new lf(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cf(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new cf(!0,r))}markAsPending(e={}){this.status=Yl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sf,this.errors=null,this._forEachChild(i=>{i.disable(ue(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new H_(this.value,r)),this._events.next(new Zl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=of,this._forEachChild(r=>{r.enable(ue(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===of||this.status===Yl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new H_(this.value,t)),this._events.next(new Zl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sf:of}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Yl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=fU(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Zl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?sf:this.errors?V_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yl)?Yl:this._anyControlsHaveStatus(V_)?V_:of}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new cf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new lf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Q_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=LY(this._rawAsyncValidators)}},Jl=class extends Xl{constructor(e,t,r){super(jS(t),BS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bU(this,!0,e),Object.keys(e).forEach(r=>{wU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new df(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var NS=class extends Jl{};var pf=new X("",{providedIn:"root",factory:()=>Y_}),Y_="always";function IU(n,e){return[...e.path,n]}function z_(n,e,t=Y_){$S(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),UY(n,e),BY(n,e),jY(n,e),VY(n,e)}function iU(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),G_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function W_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VY(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function $S(n,e){let t=yU(n);e.validator!==null?n.setValidators(tU(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=EU(n);e.asyncValidator!==null?n.setAsyncValidators(tU(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();W_(e._rawValidators,i),W_(e._rawAsyncValidators,i)}function G_(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=yU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=EU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return W_(e._rawValidators,r),W_(e._rawAsyncValidators,r),t}function UY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CU(n,e)})}function jY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function CU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BY(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function TU(n,e){n==null,$S(n,e)}function $Y(n,e){return G_(n,e)}function DU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function HY(n){return Object.getPrototypeOf(n.constructor)===OS}function SU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function AU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Vi?t=o:HY(o)?r=o:i=o}),i||r||t||null}function qY(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var zY={provide:Ro,useExisting:ir(()=>ec)},af=Promise.resolve(),ec=(()=>{class n extends Ro{callSetDisabledState;get submitted(){return xt(this.submittedReactive)}_submitted=_a(()=>this.submittedReactive());submittedReactive=te(!1);_directives=new Set;form;ngSubmit=new gt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Jl({},VS(t),US(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){af.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),z_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){af.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){af.then(()=>{let r=this._findContainer(t.path),i=new Jl({});TU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){af.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){af.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),SU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new q_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(re(ff,10),re(K_,10),re(pf,8))};static \u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&H("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[yi([zY]),Hn]})}return n})();function oU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var uf=class extends Xl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(jS(t),BS(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Q_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(sU(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new df(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var WY=n=>n instanceof uf;var GY={provide:Ja,useExisting:ir(()=>gf)},aU=Promise.resolve(),gf=(()=>{class n extends Ja{_changeDetectorRef;callSetDisabledState;control=new uf;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new gt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),DU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){z_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){aU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ls(r);aU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?IU(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(Ro,9),re(ff,10),re(K_,10),re(hf,10),re(Ei,8),re(pf,8))};static \u0275dir=nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[yi([GY]),Hn,br]})}return n})();var ji=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var xU=new X("");var KY={provide:Ro,useExisting:ir(()=>mf)},mf=(()=>{class n extends Ro{callSetDisabledState;get submitted(){return xt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=_a(()=>this._submittedReactive());_submittedReactive=te(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new gt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(G_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return z_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){iU(t.control||null,t,!1),qY(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),SU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new q_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(iU(r||null,t),WY(i)&&(z_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);TU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&$Y(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$S(this.form,this),this._oldForm&&G_(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(re(ff,10),re(K_,10),re(pf,8))};static \u0275dir=nt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&H("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[yi([KY]),Hn,br]})}return n})();var QY={provide:Ja,useExisting:ir(()=>vf)},vf=(()=>{class n extends Ja{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new gt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),DU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return IU(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(re(Ro,13),re(ff,10),re(K_,10),re(hf,10),re(xU,8))};static \u0275dir=nt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[yi([QY]),Hn,br]})}return n})();var YY={provide:hf,useExisting:ir(()=>RU),multi:!0};function MU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZY(n){return n.split(":")[0]}var RU=(()=>{class n extends OS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=S(co).injector;destroyRef=S(Er);cdr=S(Ei);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Id({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=MU(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=ZY(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275dir=nt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&H("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yi([YY]),Hn]})}return n})(),PU=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(MU(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(re(mn),re(Ir),re(RU,9))};static \u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),XY={provide:hf,useExisting:ir(()=>NU),multi:!0};function cU(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function JY(n){return n.split(":")[0]}var NU=(()=>{class n extends OS{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=JY(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275dir=nt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&H("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yi([XY]),Hn]})}return n})(),kU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(cU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(cU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(mn),re(Ir),re(NU,9))};static \u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var eZ=(()=>{class n{_validator=U_;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):U_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=nt({type:n,features:[br]})}return n})();var tZ={provide:ff,useExisting:ir(()=>HS),multi:!0};var HS=(()=>{class n extends eZ{required;inputName="required";normalizeInput=ls;createValidator=t=>dU;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275dir=nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[yi([tZ]),Hn]})}return n})();var OU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=pr({})}return n})(),kS=class extends Xl{constructor(e,t,r){super(jS(t),BS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){bU(this,!1,e),e.forEach((r,i)=>{wU(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new df(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function lU(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Z_=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return lU(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Jl(i,o)}record(t,r=null){let i=this._reduceControls(t);return new NS(i,r)}control(t,r,i){let o={};return this.useNonNullable?(lU(r)?o=r:(o.validators=r,o.asyncValidators=i),new uf(t,ue(j({},o),{nonNullable:!0}))):new uf(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new kS(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof uf)return t;if(t instanceof Xl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pf,useValue:t.callSetDisabledState??Y_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=pr({imports:[OU]})}return n})(),X_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:pf,useValue:t.callSetDisabledState??Y_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=pr({imports:[OU]})}return n})();var Yn=class n{firestore=S(Gt);auth=S(Qe);createEvent(e){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=ue(j({},e),{creatorUid:t.uid,creatorEmail:t.email||"",participants:[t.uid],createdAt:new Date,updatedAt:new Date}),i=Tn(this.firestore,"events");return nf(i,r).then(o=>o.id)}getEventsAttendingForUser(e){let t=Tn(this.firestore,"events");return Fs(t,{idField:"id"}).pipe(Ie(r=>r.filter(i=>i.participants&&i.participants.includes(e))))}getEvents(){let e=Tn(this.firestore,"events");return Fs(e,{idField:"id"})}getMyEvents(){let e=this.auth.currentUser;if(!e)return new he(i=>{i.next([]),i.complete()});let t=Tn(this.firestore,"events"),r=Xa(t,RS("creatorUid","==",e.uid));return Fs(r,{idField:"id"})}getEventsByCreator(e){let t=Tn(this.firestore,"events"),r=Xa(t,RS("creatorUid","==",e));return Fs(r,{idField:"id"})}getEventsAttending(){let e=this.auth.currentUser;if(!e)return new he(r=>{r.next([]),r.complete()});let t=Tn(this.firestore,"events");return Fs(t,{idField:"id"}).pipe(Ie(r=>r.filter(i=>i.participants&&i.participants.includes(e.uid)&&i.creatorUid!==e.uid)))}getEvent(e){return E(this,null,function*(){try{let t=yield Li(et(this.firestore,"events",e));return t.exists()?ue(j({},t.data()),{id:e}):null}catch(t){throw console.error("Error getting event:",t),t}})}updateEvent(e,t){return E(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("User not authenticated");let i=yield this.getEvent(e);if(!i||i.creatorUid!==r.uid)throw new Error("Only the event creator can edit this event");let o=et(this.firestore,"events",e);return Kn(o,ue(j({},t),{updatedAt:new Date}))})}deleteEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r||r.creatorUid!==t.uid)throw new Error("Only the event creator can delete this event");let i=et(this.firestore,"events",e);return P_(i)})}joinEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r)throw new Error("Event not found");let i=r.participants||[];if(r.memberCap&&i.length>=r.memberCap)throw new Error(`Event is full (${r.memberCap} participants)`);if(!i.includes(t.uid)){i.push(t.uid);let o=et(this.firestore,"events",e);return Kn(o,{participants:i})}})}leaveEvent(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=yield this.getEvent(e);if(!r)throw new Error("Event not found");let i=(r.participants||[]).filter(s=>s!==t.uid),o=et(this.firestore,"events",e);return Kn(o,{participants:i})})}getParticipants(e){return E(this,null,function*(){let t=yield this.getEvent(e);if(!t||!t.participants)return[];let r=[];for(let i of t.participants)try{let o=yield Li(et(this.firestore,"users",i));o.exists()&&r.push(j({uid:i},o.data()))}catch(o){console.error(`Error fetching participant ${i}:`,o)}return r})}backfillCreatorProfilePictures(){return E(this,null,function*(){try{let e=Tn(this.firestore,"events"),t=yield N_(e);for(let r of t.docs){let i=r.data();if(i&&!i.creatorProfilePicture&&i.creatorUid)try{let o=yield Li(et(this.firestore,"users",i.creatorUid));if(o.exists()){let s=o.data();s&&s.profilePicture&&(yield Kn(et(this.firestore,"events",r.id),{creatorProfilePicture:s.profilePicture}))}}catch(o){console.warn("Backfill: failed for event",r.id,o)}}}catch(e){throw console.error("Backfill failed",e),e}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var FU=n=>["/profile",n],nZ=n=>["/event-details",n],rZ=n=>["/edit-event",n];function iZ(n,e){if(n&1&&(_(0,"div",3)(1,"p",4),b(2),v()()),n&2){let t=F();w(2),xe(t.emptyMessage||"No events found.")}}function oZ(n,e){if(n&1&&oe(0,"img",22),n&2){let t=F().$implicit;A("alt",ho(t.creator))("src",t.creatorProfilePicture,Ot)}}function sZ(n,e){if(n&1&&(_(0,"div",23),b(1),v()),n&2){let t=F().$implicit;w(),xe((t.creator||"?").charAt(0))}}function aZ(n,e){n&1&&(_(0,"span"),b(1,"\u2026"),v())}function cZ(n,e){if(n&1&&(_(0,"div",17)(1,"small",18)(2,"strong"),b(3,"\u{1F527} Work:"),v(),_(4,"span",24),b(5),v()()()),n&2){let t=F().$implicit;w(5),xe(t.workType)}}function lZ(n,e){if(n&1&&(_(0,"span"),b(1),v()),n&2){let t=F().$implicit;w(),_e(" / ",t.memberCap)}}function uZ(n,e){if(n&1&&(_(0,"div",17)(1,"small",25)(2,"a",26),b(3,"\u{1F4CD} Open in Maps"),v()()()),n&2){let t=F().$implicit;w(2),A("href","https://www.google.com/maps/search/?api=1&query="+t.latitude+","+t.longitude,Ot)}}function dZ(n,e){if(n&1){let t=ve();_(0,"button",33),H("click",function(){Q(t);let i=F(2).$implicit,o=F();return Y(o.onAttendClick(i))}),b(1),v()}if(n&2){let t=F(2).$implicit,r=F();ct("btn-success",!r.isAttending(t))("btn-danger",r.isAttending(t)),w(),_e(" ",r.isAttending(t)?"Leave Event":"Attend"," ")}}function hZ(n,e){if(n&1&&(_(0,"button",34),b(1," Edit "),v()),n&2){let t=F(2).$implicit;A("routerLink",yn(1,rZ,t.id))}}function fZ(n,e){if(n&1){let t=ve();_(0,"button",35),H("click",function(){Q(t);let i=F(2).$implicit,o=F();return Y(o.onDeleteClick(i))}),b(1," Delete "),v()}}function pZ(n,e){if(n&1&&(_(0,"div",27)(1,"div",28)(2,"button",29),b(3," View Details "),v(),G(4,dZ,2,5,"button",30)(5,hZ,2,3,"button",31)(6,fZ,2,0,"button",32),v()()),n&2){let t=F().$implicit,r=F();w(2),A("routerLink",yn(4,nZ,t.id)),w(2),A("ngIf",!r.isCreator(t)),w(),A("ngIf",r.isCreator(t)),w(),A("ngIf",r.isCreator(t))}}function gZ(n,e){if(n&1&&(_(0,"div",5)(1,"div",6)(2,"div",7)(3,"a",8),G(4,oZ,1,3,"img",9)(5,sZ,2,1,"div",10),v(),_(6,"div",11)(7,"h5",12),b(8),v(),_(9,"p",13),b(10),fo(11,"slice"),G(12,aZ,2,0,"span",14),v()()(),_(13,"div",15)(14,"div",16)(15,"div",17)(16,"small",18)(17,"strong"),b(18,"\u{1F4C5} Date:"),v(),b(19),v()(),_(20,"div",17)(21,"small",18)(22,"strong"),b(23,"\u{1F4CD} Location:"),v(),b(24),v()(),G(25,cZ,6,1,"div",19),_(26,"div",17)(27,"small",18)(28,"strong"),b(29,"\u{1F465} Participants:"),v(),b(30),G(31,lZ,2,1,"span",14),v()(),_(32,"div",17)(33,"small",18)(34,"strong"),b(35,"\u{1F464} Creator:"),v(),_(36,"a",20),b(37),v()()(),G(38,uZ,4,1,"div",19),v()(),G(39,pZ,7,6,"div",21),v()()),n&2){let t=e.$implicit,r=F();w(3),A("routerLink",yn(20,FU,t.creatorUid)),w(),A("ngIf",t.creatorProfilePicture),w(),A("ngIf",!t.creatorProfilePicture),w(3),xe(t.title),w(2),xe(Ad(11,16,t.description||"",0,150)),w(2),A("ngIf",(t.description||"").length>150),w(7),Qc(" ",t.date," at ",t.time," "),w(5),_e(" ",t.location," "),w(),A("ngIf",t.workType),w(5),_e(" ",(t.participants==null?null:t.participants.length)||0),w(),A("ngIf",t.memberCap),w(5),A("routerLink",yn(22,FU,t.creatorUid)),w(),_e(" ",t.creator),w(),A("ngIf",t.latitude&&t.longitude),w(),A("ngIf",r.currentUserUid)}}var Us=class n{events=[];emptyMessage="No events found.";currentUserUid;attendingEventIds;onAttend;onLeave;onDelete;isCreator(e){return e.creatorUid===this.currentUserUid}isAttending(e){return this.attendingEventIds?.includes(e.id||"")||!1}onAttendClick(e){this.isAttending(e)?this.onLeave?.(e):this.onAttend?.(e)}onDeleteClick(e){confirm(`Are you sure you want to delete "${e.title}"?`)&&this.onDelete?.(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-event-list"]],inputs:{events:"events",emptyMessage:"emptyMessage",currentUserUid:"currentUserUid",attendingEventIds:"attendingEventIds",onAttend:"onAttend",onLeave:"onLeave",onDelete:"onDelete"},decls:3,vars:2,consts:[[1,"event-list-container"],["class","alert alert-info",4,"ngIf"],["class","card event-card mb-3 shadow-sm",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"mb-0"],[1,"card","event-card","mb-3","shadow-sm"],[1,"card-body"],[1,"event-header","d-flex","align-items-start","gap-3","mb-3"],[1,"d-inline-block","flex-shrink-0",3,"routerLink"],["class","rounded-circle","style","width:44px;height:44px;object-fit:cover;",3,"src","alt",4,"ngIf"],["class","avatar-placeholder-sm rounded-circle d-inline-flex align-items-center justify-content-center",4,"ngIf"],[1,"flex-grow-1"],[1,"card-title","text-primary","mb-2"],[1,"card-text","text-muted","small","mb-0"],[4,"ngIf"],[1,"event-meta","mb-3"],[1,"row","row-cols-1","row-cols-md-2","g-2"],[1,"col"],[1,"d-block","text-muted"],["class","col",4,"ngIf"],[1,"text-decoration-none",3,"routerLink"],["class","event-actions",4,"ngIf"],[1,"rounded-circle",2,"width","44px","height","44px","object-fit","cover",3,"src","alt"],[1,"avatar-placeholder-sm","rounded-circle","d-inline-flex","align-items-center","justify-content-center"],[1,"badge","bg-secondary"],[1,"d-block"],["target","_blank","rel","noopener",1,"text-decoration-none",3,"href"],[1,"event-actions"],[1,"d-flex","flex-wrap","gap-2","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],["class","btn btn-sm","type","button",3,"btn-success","btn-danger","click",4,"ngIf"],["class","btn btn-warning btn-sm text-dark","type","button",3,"routerLink",4,"ngIf"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"click"],["type","button",1,"btn","btn-warning","btn-sm","text-dark",3,"routerLink"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0),G(1,iZ,3,1,"div",1)(2,gZ,40,24,"div",2),v()),t&2&&(w(),A("ngIf",r.events.length===0),w(),A("ngForOf",r.events))},dependencies:[$e,Ar,rt,Mt,ht,Ld],styles:[".event-card[_ngcontent-%COMP%]{border-left:4px solid var(--sunlit-clay);border-radius:8px;transition:transform .2s,box-shadow .2s}.event-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f!important}.event-header[_ngcontent-%COMP%]{flex-wrap:wrap}.event-meta[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:1.6}.event-meta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--olive-leaf)}.event-actions[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.06)}.avatar-placeholder-sm[_ngcontent-%COMP%]{width:44px;height:44px;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));color:#fff;font-weight:700;font-size:.9rem}.btn-sm[_ngcontent-%COMP%]{font-size:.875rem;white-space:nowrap}@media (max-width: 576px){.event-header[_ngcontent-%COMP%]{flex-direction:column}.event-actions[_ngcontent-%COMP%]{margin-top:1rem}.event-actions[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column}.btn-sm[_ngcontent-%COMP%]{width:100%}}"]})};var Zn=class n{firestore=S(Gt);auth=S(Qe);getCurrentUserProfile(){return E(this,null,function*(){let e=this.auth.currentUser;if(!e)return null;try{let t=yield Li(et(this.firestore,"users",e.uid));return t.exists()?t.data():null}catch(t){throw console.error("Error getting user profile:",t),t}})}getUserByUid(e){return E(this,null,function*(){try{let t=yield Li(et(this.firestore,"users",e));return t.exists()?t.data():null}catch(t){throw console.error("Error getting user:",t),t}})}updateUserProfile(e){return E(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not authenticated");let r=et(this.firestore,"users",t.uid);return Kn(r,e)})}createUserProfile(e,t){return E(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("User not authenticated");let i=et(this.firestore,"users",r.uid);return Kn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date}).catch(o=>{if(o.code==="not-found")return Li(i).then(()=>Kn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date})).catch(()=>Kn(i,{uid:r.uid,email:e,displayName:t,emailVerified:!1,createdAt:new Date}));throw o})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function mZ(n,e){n&1&&(_(0,"div")(1,"h2"),b(2,"You are currently not logged in!"),v(),_(3,"h3"),b(4,"Please login in order to see event details, mark yourself as attending, or create new events!"),v()())}function vZ(n,e){n&1&&(_(0,"div",12)(1,"div",13)(2,"span",14),b(3,"Loading..."),v()()())}function _Z(n,e){if(n&1&&(_(0,"div"),oe(1,"app-event-list",15),v()),n&2){let t=F();w(),A("events",t.filteredEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","No events found. Try adjusting your search.")("onAttend",t.attendEvent.bind(t))("onLeave",t.leaveEvent.bind(t))("onDelete",t.deleteEvent.bind(t))}}var J_=class n{auth=S(Qe);eventService=S(Yn);modalService=S(ot);userService=S(Zn);events=te([]);filteredEvents=te([]);searchTerm=te("");isLoading=te(!0);attendingEventIds=te([]);currentUserUid;ngOnInit(){let e=this.auth.currentUser;this.currentUserUid=e?.uid,this.loadEvents()}loadEvents(){this.eventService.getEvents().subscribe({next:e=>{this.enrichEventsWithCreatorPhotos(e).then(t=>{this.events.set(t),this.filterEvents(),this.loadAttendingEventIds()}).catch(t=>{console.warn("Failed to enrich events",t),this.events.set(e),this.filterEvents(),this.loadAttendingEventIds()})},error:e=>{console.error("Error loading events:",e),this.isLoading.set(!1)}})}enrichEventsWithCreatorPhotos(e){return E(this,null,function*(){let t=Array.from(new Set(e.map(i=>i.creatorUid).filter(Boolean))),r={};return yield Promise.all(t.map(i=>E(this,null,function*(){try{let o=yield this.userService.getUserByUid(i);o&&(r[i]={profilePicture:o.profilePicture,displayName:o.displayName})}catch{}}))),e.map(i=>ue(j({},i),{creatorProfilePicture:r[i.creatorUid]?.profilePicture||i.creatorProfilePicture,creator:i.creator||r[i.creatorUid]?.displayName||i.creator}))})}loadAttendingEventIds(){if(!this.currentUserUid){this.isLoading.set(!1);return}this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}updateSearch(e){this.searchTerm.set(e),this.filterEvents()}filterEvents(){let e=this.searchTerm().toLowerCase().trim();if(!e){this.filteredEvents.set(this.events());return}let t=this.events().filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.location.toLowerCase().includes(e)||r.creator.toLowerCase().includes(e));this.filteredEvents.set(t)}attendEvent(e){return E(this,null,function*(){if(!this.currentUserUid){this.modalService.openModal("login");return}try{if(!e.id)return;yield this.eventService.joinEvent(e.id),this.loadAttendingEventIds()}catch(t){console.error("Error attending event:",t),alert("Failed to attend event")}})}leaveEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.leaveEvent(e.id),this.loadAttendingEventIds()}catch(t){console.error("Error leaving event:",t),alert("Failed to leave event")}})}deleteEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.deleteEvent(e.id),this.loadEvents()}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-events-page"]],decls:18,vars:4,consts:[[1,"events-viewport","container","py-4"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"d-flex","gap-2","mb-3"],["routerLink","/my-events",1,"btn","btn-primary"],["routerLink","/attending",1,"btn","btn-info"],["routerLink","/create-event",1,"btn","btn-success"],[4,"ngIf"],["type","search","placeholder","Search events by title, location, or description...",1,"form-control","form-control-lg","search-input",3,"input","value"],["class","text-center py-4",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onAttend","onLeave","onDelete"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),b(5,"\u{1F3AF} Browse Events"),v(),_(6,"div",5)(7,"button",6),b(8," \u{1F4CB} My Events "),v(),_(9,"button",7),b(10," \u{1F389} Attending "),v(),_(11,"button",8),b(12," \u2795 Create Event "),v()(),G(13,mZ,5,0,"div",9),v(),_(14,"div",3)(15,"input",10),H("input",function(o){return r.updateSearch(o.target.value)}),v()(),G(16,vZ,4,0,"div",11)(17,_Z,2,7,"div",9),v()()()),t&2&&(w(13),A("ngIf",!r.currentUserUid),w(2),A("value",r.searchTerm()),w(),A("ngIf",r.isLoading()),w(),A("ngIf",!r.isLoading()))},dependencies:[$e,rt,Bi,Mt,ht,Us],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.events-viewport[_ngcontent-%COMP%]{min-height:60vh;background:linear-gradient(135deg,#fefae04d,#606c380d)}.search-input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid rgba(40,54,24,.12);box-shadow:0 2px 8px #2836180a;font-size:1rem;padding:.75rem 1rem;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 4px 12px #606c3826}.search-input[_ngcontent-%COMP%]::placeholder{color:#28361880}h2[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:700;margin-bottom:1rem}h2.text-primary[_ngcontent-%COMP%]{color:var(--olive-leaf)!important}.btn[_ngcontent-%COMP%]{border-radius:6px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#218838}.btn-warning[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);border-color:var(--sunlit-clay)}.btn-warning[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood)}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;border-color:#17a2b8}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496;border-color:#138496}.alert-info[_ngcontent-%COMP%]{background-color:#17a2b81a;border-color:#17a2b84d;color:#155064;border-radius:6px;padding:1.25rem}@media (max-width: 768px){.events-viewport[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.search-input[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem}h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 576px){h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.75rem}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:.95rem}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.d-flex.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};function yZ(n,e){n&1&&(_(0,"div",7)(1,"p",8),b(2,"No participants yet."),v()())}function EZ(n,e){if(n&1&&oe(0,"img",19),n&2){let t=F().$implicit;A("alt",ho(t.displayName))("src",t.profilePicture,Ot)}}function wZ(n,e){if(n&1&&(_(0,"div",20),b(1),v()),n&2){let t=F().$implicit;w(),_e(" ",t.displayName.charAt(0).toUpperCase()," ")}}function bZ(n,e){if(n&1&&(_(0,"li",11)(1,"div",12)(2,"div",13),G(3,EZ,1,3,"img",14)(4,wZ,2,1,"div",15),v(),_(5,"div",16)(6,"p",17)(7,"strong"),b(8),v()(),_(9,"small",18),b(10),v()()()()),n&2){let t=e.$implicit;w(3),A("ngIf",t.profilePicture),w(),A("ngIf",!t.profilePicture),w(4),xe(t.displayName),w(2),xe(t.email)}}function IZ(n,e){if(n&1&&(_(0,"div")(1,"ul",9),G(2,bZ,11,4,"li",10),v()()),n&2){let t=F();w(2),A("ngForOf",t.participants)}}var ey=class n{participants=[];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-participant-list"]],inputs:{participants:"participants"},decls:8,vars:3,consts:[[1,"participant-list-container"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body","p-0"],["class","p-3",4,"ngIf"],[4,"ngIf"],[1,"p-3"],[1,"text-muted","mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item participant-item",4,"ngFor","ngForOf"],[1,"list-group-item","participant-item"],[1,"d-flex","align-items-center"],[1,"participant-avatar","me-3"],["class","rounded-circle",3,"src","alt",4,"ngIf"],["class","avatar-placeholder rounded-circle",4,"ngIf"],[1,"flex-grow-1"],[1,"mb-1"],[1,"text-muted"],[1,"rounded-circle",3,"src","alt"],[1,"avatar-placeholder","rounded-circle"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),b(4),v()(),_(5,"div",4),G(6,yZ,3,0,"div",5)(7,IZ,3,1,"div",6),v()()()),t&2&&(w(4),_e("\u{1F465} Participants (",r.participants.length,")"),w(2),A("ngIf",r.participants.length===0),w(),A("ngIf",r.participants.length>0))},dependencies:[$e,Ar,rt],styles:[".participant-list-container[_ngcontent-%COMP%]{margin-top:20px}.participant-item[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #e9ecef}.participant-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.participant-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.participant-avatar[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.participant-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px}"]})};var LU="@firebase/database",VU="1.0.20";var QA="";function CZ(n){QA=n}var ZS=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:dl(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var XS=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ti(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var vj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZS(e)}}catch{}return new XS},nc=vj("localStorage"),JS=vj("sessionStorage");var nu=new Mr("@firebase/database"),TZ=(function(){let n=1;return function(){return n++}})(),_j=function(n){let e=MO(n),t=new ev;t.update(e);let r=t.digest();return hl.encodeByteArray(r)},Ff=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ff.apply(null,r):typeof r=="object"?e+=zt(r):e+=r,e+=" "}return e},ic=null,UU=!0,DZ=function(n,e){z(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(nu.logLevel=De.VERBOSE,ic=nu.log.bind(nu),e&&JS.set("logging_enabled",!0)):typeof n=="function"?ic=n:(ic=null,JS.remove("logging_enabled"))},sn=function(...n){if(UU===!0&&(UU=!1,ic===null&&JS.get("logging_enabled")===!0&&DZ(!0)),ic){let e=Ff.apply(null,n);ic(e)}},Lf=function(n){return function(...e){sn(n,...e)}},eA=function(...n){let e="FIREBASE INTERNAL ERROR: "+Ff(...n);nu.error(e)},Po=function(...n){let e=`FIREBASE FATAL ERROR: ${Ff(...n)}`;throw nu.error(e),new Error(e)},Jn=function(...n){let e="FIREBASE WARNING: "+Ff(...n);nu.warn(e)},SZ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ay=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},AZ=function(n){if(Di()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ou="[MIN_NAME]",oc="[MAX_NAME]",ac=function(n,e){if(n===e)return 0;if(n===ou||e===oc)return-1;if(e===ou||n===oc)return 1;{let t=jU(n),r=jU(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},xZ=function(n,e){return n===e?0:n<e?-1:1},yf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},YA=function(n){if(typeof n!="object"||n===null)return zt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=zt(e[r]),t+=":",t+=YA(n[e[r]]);return t+="}",t},yj=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Dn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Ej=function(n){z(!Ay(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let p=parseInt(d.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),f=f+p}return f.toLowerCase()},MZ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},RZ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function PZ(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var NZ=new RegExp("^-?(0*)\\d{1,10}$"),kZ=-2147483648,OZ=2147483647,jU=function(n){if(NZ.test(n)){let e=Number(n);if(e>=kZ&&e<=OZ)return e}return null},fu=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Jn("Exception was thrown by user callback.",t),e},Math.floor(0))}},FZ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tf=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var tA=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Xt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var nA=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(e)}},Df=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ny="5",wj="v",bj="s",Ij="r",Cj="f",Tj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dj="ls",Sj="p",rA="ac",Aj="websocket",xj="long_polling";var ry=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1,u=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function LZ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Mj(n,e,t){z(typeof e=="string","typeof type must == string"),z(typeof t=="object","typeof params must == object");let r;if(e===Aj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===xj)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LZ(n)&&(t.ns=n.namespace);let i=[];return Dn(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var iA=class{constructor(){this.counters_={}}incrementCounter(e,t=1){ti(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return yO(this.counters_)}};var qS={},zS={};function ZA(n){let e=n.toString();return qS[e]||(qS[e]=new iA),qS[e]}function VZ(n,e){let t=n.toString();return zS[t]||(zS[t]=e()),zS[t]}var oA=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var BU="start",UZ="close",jZ="pLPCommand",BZ="pRTLPCB",Rj="id",Pj="pw",Nj="ser",$Z="cb",HZ="seg",qZ="ts",zZ="d",WZ="dframe",kj=1870,Oj=30,GZ=kj-Oj,KZ=25e3,QZ=3e4,sA=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lf(e),this.stats_=ZA(t),this.urlFn=c=>(this.appCheckToken&&(c[rA]=this.appCheckToken),Mj(t,xj,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(QZ)),AZ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aA((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===BU)this.id=a,this.password=c;else if(s===UZ)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[BU]="t",r[Nj]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$Z]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wj]=ny,this.transportSessionId&&(r[bj]=this.transportSessionId),this.lastSessionId&&(r[Dj]=this.lastSessionId),this.applicationId&&(r[Sj]=this.applicationId),this.appCheckToken&&(r[rA]=this.appCheckToken),typeof location<"u"&&location.hostname&&Tj.test(location.hostname)&&(r[Ij]=Cj);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Di()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MZ()&&!RZ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=$I(t),i=yj(r,GZ);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Di())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[WZ]="t",r[Rj]=e,r[Pj]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},aA=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Di())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=TZ(),window[jZ+this.uniqueCallbackIdentifier]=e,window[BZ+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){sn("frame writing exception"),a.stack&&sn(a.stack),sn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||sn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Rj]=this.myID,e[Pj]=this.myPW,e[Nj]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Oj+r.length<=kj;){let s=this.pendingSegs.shift();r=r+"&"+HZ+i+"="+s.seg+"&"+qZ+i+"="+s.ts+"&"+zZ+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(KZ)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Di()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var YZ=16384,ZZ=45e3,iy=null;typeof MozWebSocket<"u"?iy=MozWebSocket:typeof WebSocket<"u"&&(iy=WebSocket);var Ef=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lf(this.connId),this.stats_=ZA(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[wj]=ny,!Di()&&typeof location<"u"&&location.hostname&&Tj.test(location.hostname)&&(a[Ij]=Cj),r&&(a[bj]=r),i&&(a[Dj]=i),o&&(a[rA]=o),s&&(a[Sj]=s),Mj(t,Aj,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nc.set("previous_websocket_failure",!0);try{let i;if(Di()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ny}/${QA}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new iy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&iy!==null&&!n.forceDisallow_}static previouslyFailed(){return nc.isInMemoryStorage||nc.get("previous_websocket_failure")===!0}markConnectionHealthy(){nc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=dl(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(z(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=zt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=yj(r,YZ);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZZ))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),XZ=(()=>{class n{static get ALL_TRANSPORTS(){return[sA,Ef]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Ef&&Ef.isAvailable(),i=r&&!Ef.previouslyFailed();if(t.webSocketOnly&&(r||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ef];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),JZ=6e4,eX=5e3,tX=10*1024,nX=100*1024,WS="t",$U="d",rX="s",HU="r",iX="e",qU="o",zU="a",WU="n",GU="p",oX="h",cA=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lf("c:"+this.id+":"),this.transportManager_=new XZ(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Tf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nX?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tX?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(WS in e){let t=e[WS];t===zU?this.upgradeIfSecondaryHealthy_():t===HU?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===qU&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=yf("t",e),r=yf("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:GU,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zU,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:WU,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=yf("t",e),r=yf("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=yf(WS,e);if($U in e){let r=e[$U];if(t===oX){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===WU){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===rX?this.onConnectionShutdown_(r):t===HU?this.onReset_(r):t===iX?eA("Server Error: "+r):t===qU?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eA("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ny!==r&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Tf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(JZ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(eX))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:GU,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var oy=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var sy=class{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){z(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var ay=class n extends sy{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var KU=32,QU=768,Ge=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function We(){return new Ge("")}function Ae(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bs(n){return n.pieces_.length-n.pieceNum_}function at(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ge(n.pieces_,e)}function XA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function sX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Mf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Fj(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ge(e,0)}function Rt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ge(t,0)}function Re(n){return n.pieceNum_>=n.pieces_.length}function Xn(n,e){let t=Ae(n),r=Ae(e);if(t===null)return e;if(t===r)return Xn(at(n),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function aX(n,e){let t=Mf(n,0),r=Mf(e,0);for(let i=0;i<t.length&&i<r.length;i++){let o=ac(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function JA(n,e){if(Bs(n)!==Bs(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Lr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Bs(n)>Bs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var lA=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Mf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hh(this.parts_[r]);Lj(this)}};function cX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=hh(e),Lj(n)}function lX(n){let e=n.parts_.pop();n.byteLength_-=hh(e),n.parts_.length>0&&(n.byteLength_-=1)}function Lj(n){if(n.byteLength_>QU)throw new Error(n.errorPrefix_+"has a key path longer than "+QU+" bytes ("+n.byteLength_+").");if(n.parts_.length>KU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+KU+") or object contains a cycle "+tc(n))}function tc(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var uA=class n extends sy{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}};var wf=1e3,uX=300*1e3,YU=30*1e3,dX=1.3,hX=3e4,fX="server_kill",ZU=3,ex=(()=>{class n extends oy{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Lf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wf,this.maxReconnectDelay_=uX,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Di())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uA.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ay.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(zt(s)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new bn,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&ti(t,"w")){let i=Da(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||AO(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YU)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=SO(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):eA("Unrecognized action received from server: "+zt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hX&&(this.reconnectDelay_=wf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dX)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(p){z(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,m]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,c=new cA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,I=>{Jn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(fX)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Jn(p),u())}}})}interrupt(t){sn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){sn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],gl(this.interruptReasons_)&&(this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>YA(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new Ge(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){sn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZU&&(this.reconnectDelay_=YU,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){sn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZU&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Di()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+QA.replace(/\./g,"-")]=1,lh()?t["framework.cordova"]=1:nv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=ay.getInstance().currentlyOnline();return gl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Pe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var su=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Pe(ou,e),i=new Pe(ou,t);return this.compare(r,i)!==0}minPost(){return Pe.MIN}};var ty,cy=class extends su{static get __EMPTY_NODE(){return ty}static set __EMPTY_NODE(e){ty=e}compare(e,t){return ac(e.name,t.name)}isDefinedOn(e){throw Ta("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(oc,ty)}makePost(e,t){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new Pe(e,ty)}toString(){return".key"}},ru=new cy;var tu=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},si=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Vr.EMPTY_NODE,this.right=s??Vr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Vr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),dA=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new si(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Vr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,si.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,si.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tu(this.root_,null,this.comparator_,!0,e)}};Vr.EMPTY_NODE=new dA;function pX(n,e){return ac(n.name,e.name)}function tx(n,e){return ac(n,e)}var hA;function gX(n){hA=n}var Vj=function(n){return typeof n=="number"?"number:"+Ej(n):"string:"+n},Uj=function(n){if(n.isLeafNode()){let e=n.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ti(e,".sv"),"Priority must be a string or number.")}else z(n===hA||n.isEmpty(),"priority of unexpected type.");z(n===hA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var XU,au=(()=>{class n{static set __childrenNodeConstructor(t){XU=t}static get __childrenNodeConstructor(){return XU}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Uj(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Re(t)?this:Ae(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Ae(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(z(i!==".priority"||Bs(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vj(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Ej(this.value_):t+=this.value_,this.lazyHash_=_j(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return z(o>=0,"Unknown leaf type: "+r),z(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),jj,Bj;function mX(n){jj=n}function vX(n){Bj=n}var fA=class extends su{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?ac(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(oc,new au("[PRIORITY-POST]",Bj))}makePost(e,t){let r=jj(e);return new Pe(t,new au("[PRIORITY-POST]",r))}toString(){return".priority"}},mt=new fA;var _X=Math.log(2),pA=class{constructor(e){let t=o=>parseInt(Math.log(o)/_X,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ly=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,p;if(d===0)return null;if(d===1)return f=n[c],p=t?t(f):f,new si(p,f.node,si.BLACK,null,null);{let m=parseInt(d/2,10)+c,I=i(c,m),N=i(m+1,u);return f=n[m],p=t?t(f):f,new si(p,f.node,si.BLACK,I,N)}},o=function(c){let u=null,d=null,f=n.length,p=function(I,N){let k=f-I,$=f;f-=I;let ne=i(k+1,$),ee=n[k],de=t?t(ee):ee;m(new si(de,ee.node,N,null,ne))},m=function(I){u?(u.left=I,u=I):(d=I,u=I)};for(let I=0;I<c.count;++I){let N=c.nextBitIsOne(),k=Math.pow(2,c.count-(I+1));N?p(k,si.BLACK):(p(k,si.BLACK),p(k,si.RED))}return d},s=new pA(n.length),a=o(s);return new Vr(r||e,a)};var GS,eu={},cu=class n{static get Default(){return z(eu&&mt,"ChildrenNode.ts has not been loaded"),GS=GS||new n({".priority":eu},{".priority":mt}),GS}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Da(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vr?t:null}hasIndex(e){return ti(this.indexSet_,e.toString())}addIndex(e,t){z(e!==ru,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Pe.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=ly(r,e.getCompare()):a=eu;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=dh(this.indexes_,(i,o)=>{let s=Da(this.indexSet_,o);if(z(s,"Missing index implementation for "+o),i===eu)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Pe.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),ly(a,s.getCompare())}else return eu;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Pe(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=dh(this.indexes_,i=>{if(i===eu)return i;{let o=t.get(e.name);return o?i.remove(new Pe(e.name,o)):i}});return new n(r,this.indexSet_)}};var bf,Ce=(()=>{class n{static get EMPTY_NODE(){return bf||(bf=new n(new Vr(tx),null,cu.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Uj(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?bf:r}}getChild(t){let r=Ae(t);return r===null?this:this.getImmediateChild(r).getChild(at(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(z(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Pe(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?bf:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Ae(t);if(i===null)return r;{z(Ae(t)!==".priority"||Bs(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(at(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(mt,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Vj(this.getPriority().val())+":"),this.forEachChild(mt,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":_j(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Pe(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Pe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Pe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Pe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Pe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vf?-1:0}withIndex(t){if(t===ru||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ru||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(mt),o=r.getIterator(mt),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ru?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),gA=class extends Ce{constructor(){super(new Vr(tx),Ce.EMPTY_NODE,cu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ce.EMPTY_NODE}isEmpty(){return!1}},Vf=new gA;Object.defineProperties(Pe,{MIN:{value:new Pe(ou,Ce.EMPTY_NODE)},MAX:{value:new Pe(oc,Vf)}});cy.__EMPTY_NODE=Ce.EMPTY_NODE;au.__childrenNodeConstructor=Ce;gX(Vf);vX(Vf);var yX=!0;function Ht(n,e=null){if(n===null)return Ce.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new au(t,Ht(e))}if(!(n instanceof Array)&&yX){let t=[],r=!1;if(Dn(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ht(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Pe(s,c)))}}),t.length===0)return Ce.EMPTY_NODE;let o=ly(t,pX,s=>s.name,tx);if(r){let s=ly(t,mt.getCompare());return new Ce(o,Ht(e),new cu({".priority":s},{".priority":mt}))}else return new Ce(o,Ht(e),cu.Default)}else{let t=Ce.EMPTY_NODE;return Dn(n,(r,i)=>{if(ti(n,r)&&r.substring(0,1)!=="."){let o=Ht(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Ht(e))}}mX(Ht);var mA=class extends su{constructor(e){super(),this.indexPath_=e,z(!Re(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?ac(e.name,t.name):o}makePost(e,t){let r=Ht(e),i=Ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new Pe(t,i)}maxPost(){let e=Ce.EMPTY_NODE.updateChild(this.indexPath_,Vf);return new Pe(oc,e)}toString(){return Mf(this.indexPath_,0).join("/")}};var vA=class extends su{compare(e,t){let r=e.node.compareTo(t.node);return r===0?ac(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(e,t){let r=Ht(e);return new Pe(t,r)}toString(){return".value"}},EX=new vA;function $j(n){return{type:"value",snapshotNode:n}}function lu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Rf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Pf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function wX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Nf=class{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(Rf(t,a)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(lu(t,r)):s.trackChildChange(Pf(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(mt,(i,o)=>{t.hasChild(i)||r.trackChildChange(Rf(i,o))}),t.isLeafNode()||t.forEachChild(mt,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Pf(i,o,s))}else r.trackChildChange(lu(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ce.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var uy=class n{constructor(e){this.indexedFilter_=new Nf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Pe(t,r))||(r=Ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ce.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ce.EMPTY_NODE);let o=this;return t.forEachChild(mt,(s,a)=>{o.matches(new Pe(s,a))||(i=i.updateImmediateChild(s,Ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var _A=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new uy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Pe(t,r))||(r=Ce.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Ce.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Ce.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,Ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){let f=this.index_.getCompare();s=(p,m)=>f(m,p)}else s=this.index_.getCompare();let a=e;z(a.numChildren()===this.limit_,"");let c=new Pe(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(t)){let f=a.getImmediateChild(t),p=i.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===t||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);let m=p==null?1:s(p,c);if(d&&!r.isEmpty()&&m>=0)return o?.trackChildChange(Pf(t,r,f)),a.updateImmediateChild(t,r);{o?.trackChildChange(Rf(t,f));let N=a.updateImmediateChild(t,Ce.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o?.trackChildChange(lu(p.name,p.node)),N.updateImmediateChild(p.name,p.node)):N}}else return r.isEmpty()?e:d&&s(u,c)>=0?(o!=null&&(o.trackChildChange(Rf(u.name,u.node)),o.trackChildChange(lu(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,Ce.EMPTY_NODE)):e}};var yA=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ou}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function bX(n){return n.loadsAllData()?new Nf(n.getIndex()):n.hasLimit()?new _A(n):new uy(n)}function JU(n){let e={};if(n.isDefault())return e;let t;if(n.index_===mt?t="$priority":n.index_===EX?t="$value":n.index_===ru?t="$key":(z(n.index_ instanceof mA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=zt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+zt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=zt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ej(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==mt&&(e.i=n.index_.toString()),e}var EA=class n extends oy{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lf("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=JU(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),Da(this.listens_,s)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",i(p,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=JU(e._queryParams),r=e._path.toString(),i=new bn;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Sa(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=dl(a.responseText)}catch{Jn("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Jn("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var wA=class{constructor(){this.rootNode_=Ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function dy(){return{value:null,children:new Map}}function pu(n,e,t){if(Re(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Ae(e);n.children.has(r)||n.children.set(r,dy());let i=n.children.get(r);e=at(e),pu(i,e,t)}}function bA(n,e){if(Re(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(mt,(r,i)=>{pu(n,new Ge(r),i)}),bA(n,e)}}else if(n.children.size>0){let t=Ae(e);return e=at(e),n.children.has(t)&&bA(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function IA(n,e,t){n.value!==null?t(e,n.value):IX(n,(r,i)=>{let o=new Ge(e.toString()+"/"+r);IA(i,o,t)})}function IX(n,e){n.children.forEach((t,r)=>{e(r,t)})}var CA=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Dn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var tj=10*1e3,CX=30*1e3,TX=300*1e3,TA=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new CA(e);let r=tj+(CX-tj)*Math.random();Tf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Dn(e,(i,o)=>{o>0&&ti(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Tf(this.reportStats_.bind(this),Math.floor(Math.random()*2*TX))}};var $i=(function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n})($i||{});function Hj(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var DA=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$i.ACK_USER_WRITE,this.source=Hj()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ge(e));return new n(We(),t,this.revert)}}else return z(Ae(this.path)===e,"operationForChild called for unrelated child."),new n(at(this.path),this.affectedTree,this.revert)}};var hy=class n{constructor(e,t){this.source=e,this.path=t,this.type=$i.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new n(this.source,We()):new n(this.source,at(this.path))}};var uu=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$i.OVERWRITE}operationForChild(e){return Re(this.path)?new n(this.source,We(),this.snap.getImmediateChild(e)):new n(this.source,at(this.path),this.snap)}};var fy=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$i.MERGE}operationForChild(e){if(Re(this.path)){let t=this.children.subtree(new Ge(e));return t.isEmpty()?null:t.value?new uu(this.source,We(),t.value):new n(this.source,We(),t)}else return z(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var No=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;let t=Ae(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var SA=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function DX(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(wX(s.childName,s.snapshotNode))}),If(n,i,"child_removed",e,r,t),If(n,i,"child_added",e,r,t),If(n,i,"child_moved",o,r,t),If(n,i,"child_changed",e,r,t),If(n,i,"value",e,r,t),i}function If(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>AX(n,a,c)),s.forEach(a=>{let c=SX(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function SX(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function AX(n,e,t){if(e.childName==null||t.childName==null)throw Ta("Should only compare child_ events.");let r=new Pe(e.childName,e.snapshotNode),i=new Pe(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function xy(n,e){return{eventCache:n,serverCache:e}}function Sf(n,e,t,r){return xy(new No(e,t,r),n.serverCache)}function qj(n,e,t,r){return xy(n.eventCache,new No(e,t,r))}function AA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var KS,xX=()=>(KS||(KS=new Vr(xZ)),KS),er=class n{static fromObject(e){let t=new n(null);return Dn(e,(r,i)=>{t=t.set(new Ge(r),i)}),t}constructor(e,t=xX()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:We(),value:this.value};if(Re(e))return null;{let r=Ae(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(at(e),t);return o!=null?{path:Rt(new Ge(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{let t=Ae(e),r=this.children.get(t);return r!==null?r.subtree(at(e)):new n(null)}}set(e,t){if(Re(e))return new n(t,this.children);{let r=Ae(e),o=(this.children.get(r)||new n(null)).set(at(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Re(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Ae(e),r=this.children.get(t);if(r){let i=r.remove(at(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Re(e))return this.value;{let t=Ae(e),r=this.children.get(t);return r?r.get(at(e)):null}}setTree(e,t){if(Re(e))return t;{let r=Ae(e),o=(this.children.get(r)||new n(null)).setTree(at(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(We(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Rt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,We(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Re(e))return null;{let o=Ae(e),s=this.children.get(o);return s?s.findOnPath_(at(e),Rt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,We(),t)}foreachOnPath_(e,t,r){if(Re(e))return this;{this.value&&r(t,this.value);let i=Ae(e),o=this.children.get(i);return o?o.foreachOnPath_(at(e),Rt(t,i),r):new n(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var ai=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new er(null))}};function Af(n,e,t){if(Re(e))return new ai(new er(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Xn(i,e);return o=o.updateChild(s,t),new ai(n.writeTree_.set(i,o))}else{let i=new er(t),o=n.writeTree_.setTree(e,i);return new ai(o)}}}function nj(n,e,t){let r=n;return Dn(t,(i,o)=>{r=Af(r,Rt(e,i),o)}),r}function rj(n,e){if(Re(e))return ai.empty();{let t=n.writeTree_.setTree(e,new er(null));return new ai(t)}}function xA(n,e){return cc(n,e)!=null}function cc(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Xn(t.path,e)):null}function ij(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(mt,(r,i)=>{e.push(new Pe(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Pe(r,i.value))}),e}function js(n,e){if(Re(e))return n;{let t=cc(n,e);return t!=null?new ai(new er(t)):new ai(n.writeTree_.subtree(e))}}function MA(n){return n.writeTree_.isEmpty()}function du(n,e){return zj(We(),n.writeTree_,e)}function zj(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(z(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=zj(Rt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Rt(n,".priority"),r)),t}}function ix(n,e){return Qj(e,n)}function MX(n,e,t,r,i){z(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Af(n.visibleWrites,e,t)),n.lastWriteId=r}function RX(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function PX(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);z(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&NX(a,r.path)?i=!1:Lr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return kX(n),!0;if(r.snap)n.visibleWrites=rj(n.visibleWrites,r.path);else{let a=r.children;Dn(a,c=>{n.visibleWrites=rj(n.visibleWrites,Rt(r.path,c))})}return!0}else return!1}function NX(n,e){if(n.snap)return Lr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Lr(Rt(n.path,t),e))return!0;return!1}function kX(n){n.visibleWrites=Wj(n.allWrites,OX,We()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function OX(n){return n.visible}function Wj(n,e,t){let r=ai.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Lr(t,s)?(a=Xn(t,s),r=Af(r,a,o.snap)):Lr(s,t)&&(a=Xn(s,t),r=Af(r,We(),o.snap.getChild(a)));else if(o.children){if(Lr(t,s))a=Xn(t,s),r=nj(r,a,o.children);else if(Lr(s,t))if(a=Xn(s,t),Re(a))r=nj(r,We(),o.children);else{let c=Da(o.children,Ae(a));if(c){let u=c.getChild(at(a));r=Af(r,We(),u)}}}else throw Ta("WriteRecord should have .snap or .children")}}return r}function Gj(n,e,t,r,i){if(!r&&!i){let o=cc(n.visibleWrites,e);if(o!=null)return o;{let s=js(n.visibleWrites,e);if(MA(s))return t;if(t==null&&!xA(s,We()))return null;{let a=t||Ce.EMPTY_NODE;return du(s,a)}}}else{let o=js(n.visibleWrites,e);if(!i&&MA(o))return t;if(!i&&t==null&&!xA(o,We()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Lr(u.path,e)||Lr(e,u.path))},a=Wj(n.allWrites,s,e),c=t||Ce.EMPTY_NODE;return du(a,c)}}}function FX(n,e,t){let r=Ce.EMPTY_NODE,i=cc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=js(n.visibleWrites,e);return t.forEachChild(mt,(s,a)=>{let c=du(js(o,new Ge(s)),a);r=r.updateImmediateChild(s,c)}),ij(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=js(n.visibleWrites,e);return ij(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function LX(n,e,t,r,i){z(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Rt(e,t);if(xA(n.visibleWrites,o))return null;{let s=js(n.visibleWrites,o);return MA(s)?i.getChild(t):du(s,i.getChild(t))}}function VX(n,e,t,r){let i=Rt(e,t),o=cc(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=js(n.visibleWrites,i);return du(s,r.getNode().getImmediateChild(t))}else return null}function UX(n,e){return cc(n.visibleWrites,e)}function jX(n,e,t,r,i,o,s){let a,c=js(n.visibleWrites,e),u=cc(c,We());if(u!=null)a=u;else if(t!=null)a=du(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),p=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),m=p.getNext();for(;m&&d.length<i;)f(m,r)!==0&&d.push(m),m=p.getNext();return d}else return[]}function BX(){return{visibleWrites:ai.empty(),allWrites:[],lastWriteId:-1}}function py(n,e,t,r){return Gj(n.writeTree,n.treePath,e,t,r)}function ox(n,e){return FX(n.writeTree,n.treePath,e)}function oj(n,e,t,r){return LX(n.writeTree,n.treePath,e,t,r)}function gy(n,e){return UX(n.writeTree,Rt(n.treePath,e))}function $X(n,e,t,r,i,o){return jX(n.writeTree,n.treePath,e,t,r,i,o)}function sx(n,e,t){return VX(n.writeTree,n.treePath,e,t)}function Kj(n,e){return Qj(Rt(n.treePath,e),n.writeTree)}function Qj(n,e){return{treePath:n,writeTree:e}}var RA=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;z(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),z(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Pf(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Rf(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,lu(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Pf(r,e.snapshotNode,i.oldSnap));else throw Ta("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var PA=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Yj=new PA,kf=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new No(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sx(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sc(this.viewCache_),o=$X(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function HX(n){return{filter:n}}function qX(n,e){z(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function zX(n,e,t,r,i){let o=new RA,s,a;if(t.type===$i.OVERWRITE){let u=t;u.source.fromUser?s=NA(n,e,u.path,u.snap,r,i,o):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Re(u.path),s=my(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===$i.MERGE){let u=t;u.source.fromUser?s=GX(n,e,u.path,u.children,r,i,o):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=kA(n,e,u.path,u.children,r,i,a,o))}else if(t.type===$i.ACK_USER_WRITE){let u=t;u.revert?s=YX(n,e,u.path,r,i,o):s=KX(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===$i.LISTEN_COMPLETE)s=QX(n,e,t.path,r,o);else throw Ta("Unknown operation type: "+t.type);let c=o.getChanges();return WX(e,s,c),{viewCache:s,changes:c}}function WX(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=AA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push($j(AA(e)))}}function Zj(n,e,t,r,i,o){let s=e.eventCache;if(gy(r,t)!=null)return e;{let a,c;if(Re(t))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=sc(e),d=u instanceof Ce?u:Ce.EMPTY_NODE,f=ox(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=py(r,sc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=Ae(t);if(u===".priority"){z(Bs(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=oj(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=at(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let p=oj(r,t,s.getNode(),c);p!=null?f=s.getNode().getImmediateChild(u).updateChild(d,p):f=s.getNode().getImmediateChild(u)}else f=sx(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return Sf(e,a,s.isFullyInitialized()||Re(t),n.filter.filtersNodes())}}function my(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(Re(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),m,null)}else{let m=Ae(t);if(!c.isCompleteForPath(t)&&Bs(t)>1)return e;let I=at(t),k=c.getNode().getImmediateChild(m).updateChild(I,r);m===".priority"?u=d.updatePriority(c.getNode(),k):u=d.updateChild(c.getNode(),m,k,I,Yj,null)}let f=qj(e,u,c.isFullyInitialized()||Re(t),d.filtersNodes()),p=new kf(i,f,o);return Zj(n,f,t,i,p,a)}function NA(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new kf(i,e,o);if(Re(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Sf(e,u,!0,n.filter.filtersNodes());else{let f=Ae(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Sf(e,u,a.isFullyInitialized(),a.isFiltered());else{let p=at(t),m=a.getNode().getImmediateChild(f),I;if(Re(p))I=r;else{let N=d.getCompleteChild(f);N!=null?XA(p)===".priority"&&N.getChild(Fj(p)).isEmpty()?I=N:I=N.updateChild(p,r):I=Ce.EMPTY_NODE}if(m.equals(I))c=e;else{let N=n.filter.updateChild(a.getNode(),f,I,p,d,s);c=Sf(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function sj(n,e){return n.eventCache.isCompleteForChild(e)}function GX(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Rt(t,c);sj(e,Ae(d))&&(a=NA(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Rt(t,c);sj(e,Ae(d))||(a=NA(n,a,d,u,i,o,s))}),a}function aj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kA(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Re(t)?u=r:u=new er(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,p)=>{if(d.hasChild(f)){let m=e.serverCache.getNode().getImmediateChild(f),I=aj(n,m,p);c=my(n,c,new Ge(f),I,i,o,s,a)}}),u.children.inorderTraversal((f,p)=>{let m=!e.serverCache.isCompleteForChild(f)&&p.value===null;if(!d.hasChild(f)&&!m){let I=e.serverCache.getNode().getImmediateChild(f),N=aj(n,I,p);c=my(n,c,new Ge(f),N,i,o,s,a)}}),c}function KX(n,e,t,r,i,o,s){if(gy(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Re(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return my(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Re(t)){let u=new er(null);return c.getNode().forEachChild(ru,(d,f)=>{u=u.set(new Ge(d),f)}),kA(n,e,t,u,i,o,a,s)}else return e}else{let u=new er(null);return r.foreach((d,f)=>{let p=Rt(t,d);c.isCompleteForPath(p)&&(u=u.set(d,c.getNode().getChild(p)))}),kA(n,e,t,u,i,o,a,s)}}function QX(n,e,t,r,i){let o=e.serverCache,s=qj(e,o.getNode(),o.isFullyInitialized()||Re(t),o.isFiltered());return Zj(n,s,t,r,Yj,i)}function YX(n,e,t,r,i,o){let s;if(gy(r,t)!=null)return e;{let a=new kf(r,e,i),c=e.eventCache.getNode(),u;if(Re(t)||Ae(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=py(r,sc(e));else{let f=e.serverCache.getNode();z(f instanceof Ce,"serverChildren would be complete if leaf node"),d=ox(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=Ae(t),f=sx(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,at(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,Ce.EMPTY_NODE,at(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=py(r,sc(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||gy(r,We())!=null,Sf(e,u,s,n.filter.filtersNodes())}}var OA=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Nf(r.getIndex()),o=bX(r);this.processor_=HX(o);let s=t.serverCache,a=t.eventCache,c=i.updateFullNode(Ce.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(Ce.EMPTY_NODE,a.getNode(),null),d=new No(c,s.isFullyInitialized(),i.filtersNodes()),f=new No(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=xy(f,d),this.eventGenerator_=new SA(this.query_)}get query(){return this.query_}};function ZX(n){return n.viewCache_.serverCache.getNode()}function XX(n,e){let t=sc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Re(e)&&!t.getImmediateChild(Ae(e)).isEmpty())?t.getChild(e):null}function cj(n){return n.eventRegistrations_.length===0}function JX(n,e){n.eventRegistrations_.push(e)}function lj(n,e,t){let r=[];if(t){z(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function uj(n,e,t,r){e.type===$i.MERGE&&e.source.queryId!==null&&(z(sc(n.viewCache_),"We should always have a full cache before handling merges"),z(AA(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=zX(n.processor_,i,e,t,r);return qX(n.processor_,o.viewCache),z(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Xj(n,o.changes,o.viewCache.eventCache.getNode(),null)}function eJ(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mt,(o,s)=>{r.push(lu(o,s))}),t.isFullyInitialized()&&r.push($j(t.getNode())),Xj(n,r,t.getNode(),e)}function Xj(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return DX(n.eventGenerator_,e,t,i)}var vy,FA=class{constructor(){this.views=new Map}};function tJ(n){z(!vy,"__referenceConstructor has already been defined"),vy=n}function nJ(){return z(vy,"Reference.ts has not been loaded"),vy}function rJ(n){return n.views.size===0}function ax(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return z(o!=null,"SyncTree gave us an op for an invalid query."),uj(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(uj(s,e,t,r));return o}}function iJ(n,e,t,r,i){let o=e._queryIdentifier,s=n.views.get(o);if(!s){let a=py(t,i?r:null),c=!1;a?c=!0:r instanceof Ce?(a=ox(t,r),c=!1):(a=Ce.EMPTY_NODE,c=!1);let u=xy(new No(a,c,!1),new No(r,i,!1));return new OA(e,u)}return s}function oJ(n,e,t,r,i,o){let s=iJ(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),JX(s,t),eJ(s,t)}function sJ(n,e,t,r){let i=e._queryIdentifier,o=[],s=[],a=$s(n);if(i==="default")for(let[c,u]of n.views.entries())s=s.concat(lj(u,t,r)),cj(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{let c=n.views.get(i);c&&(s=s.concat(lj(c,t,r)),cj(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!$s(n)&&o.push(new(nJ())(e._repo,e._path)),{removed:o,events:s}}function Jj(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function iu(n,e){let t=null;for(let r of n.views.values())t=t||XX(r,e);return t}function eB(n,e){if(e._queryParams.loadsAllData())return My(n);{let r=e._queryIdentifier;return n.views.get(r)}}function tB(n,e){return eB(n,e)!=null}function $s(n){return My(n)!=null}function My(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var _y;function aJ(n){z(!_y,"__referenceConstructor has already been defined"),_y=n}function cJ(){return z(_y,"Reference.ts has not been loaded"),_y}var lJ=1,yy=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new er(null),this.pendingWriteTree_=BX(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function nB(n,e,t,r,i){return MX(n.pendingWriteTree_,e,t,r,i),i?Uf(n,new uu(Hj(),e,t)):[]}function rc(n,e,t=!1){let r=RX(n.pendingWriteTree_,e);if(PX(n.pendingWriteTree_,e)){let o=new er(null);return r.snap!=null?o=o.set(We(),!0):Dn(r.children,s=>{o=o.set(new Ge(s),!0)}),Uf(n,new DA(r.path,o,t))}else return[]}function Ry(n,e,t){return Uf(n,new uu(nx(),e,t))}function uJ(n,e,t){let r=er.fromObject(t);return Uf(n,new fy(nx(),e,r))}function dJ(n,e){return Uf(n,new hy(nx(),e))}function hJ(n,e,t){let r=lx(n,t);if(r){let i=ux(r),o=i.path,s=i.queryId,a=Xn(o,e),c=new hy(rx(s),a);return dx(n,o,c)}else return[]}function LA(n,e,t,r,i=!1){let o=e._path,s=n.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||tB(s,e))){let c=sJ(s,e,t,r);rJ(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let u=c.removed;if(a=c.events,!i){let d=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,f=n.syncPointTree_.findOnPath(o,(p,m)=>$s(m));if(d&&!f){let p=n.syncPointTree_.subtree(o);if(!p.isEmpty()){let m=gJ(p);for(let I=0;I<m.length;++I){let N=m[I],k=N.query,$=oB(n,N);n.listenProvider_.startListening(xf(k),Ey(n,k),$.hashFn,$.onComplete)}}}!f&&u.length>0&&!r&&(d?n.listenProvider_.stopListening(xf(e),null):u.forEach(p=>{let m=n.queryToTagMap.get(Py(p));n.listenProvider_.stopListening(xf(p),m)}))}mJ(n,u)}return a}function fJ(n,e,t,r){let i=lx(n,r);if(i!=null){let o=ux(i),s=o.path,a=o.queryId,c=Xn(s,e),u=new uu(rx(a),c,t);return dx(n,s,u)}else return[]}function pJ(n,e,t,r){let i=lx(n,r);if(i){let o=ux(i),s=o.path,a=o.queryId,c=Xn(s,e),u=er.fromObject(t),d=new fy(rx(a),c,u);return dx(n,s,d)}else return[]}function dj(n,e,t,r=!1){let i=e._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(p,m)=>{let I=Xn(p,i);o=o||iu(m,I),s=s||$s(m)});let a=n.syncPointTree_.get(i);a?(s=s||$s(a),o=o||iu(a,We())):(a=new FA,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=Ce.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((m,I)=>{let N=iu(I,We());N&&(o=o.updateImmediateChild(m,N))}));let u=tB(a,e);if(!u&&!e._queryParams.loadsAllData()){let p=Py(e);z(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");let m=vJ();n.queryToTagMap.set(p,m),n.tagToQueryMap.set(m,p)}let d=ix(n.pendingWriteTree_,i),f=oJ(a,e,t,d,o,c);if(!u&&!s&&!r){let p=eB(a,e);f=f.concat(_J(n,e,p))}return f}function cx(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=Xn(s,e),u=iu(a,c);if(u)return u});return Gj(i,e,o,t,!0)}function Uf(n,e){return rB(e,n.syncPointTree_,null,ix(n.pendingWriteTree_,We()))}function rB(n,e,t,r){if(Re(n.path))return iB(n,e,t,r);{let i=e.get(We());t==null&&i!=null&&(t=iu(i,We()));let o=[],s=Ae(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=Kj(r,s);o=o.concat(rB(a,c,u,d))}return i&&(o=o.concat(ax(i,n,r,t))),o}}function iB(n,e,t,r){let i=e.get(We());t==null&&i!=null&&(t=iu(i,We()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=Kj(r,s),d=n.operationForChild(s);d&&(o=o.concat(iB(d,a,c,u)))}),i&&(o=o.concat(ax(i,n,r,t))),o}function oB(n,e){let t=e.query,r=Ey(n,t);return{hashFn:()=>(ZX(e)||Ce.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hJ(n,t._path,r):dJ(n,t._path);{let o=PZ(i,t);return LA(n,t,null,o)}}}}function Ey(n,e){let t=Py(e);return n.queryToTagMap.get(t)}function Py(n){return n._path.toString()+"$"+n._queryIdentifier}function lx(n,e){return n.tagToQueryMap.get(e)}function ux(n){let e=n.indexOf("$");return z(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ge(n.substr(0,e))}}function dx(n,e,t){let r=n.syncPointTree_.get(e);z(r,"Missing sync point for query tag that we're tracking");let i=ix(n.pendingWriteTree_,e);return ax(r,t,i,null)}function gJ(n){return n.fold((e,t,r)=>{if(t&&$s(t))return[My(t)];{let i=[];return t&&(i=Jj(t)),Dn(r,(o,s)=>{i=i.concat(s)}),i}})}function xf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(cJ())(n._repo,n._path):n}function mJ(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Py(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function vJ(){return lJ++}function _J(n,e,t){let r=e._path,i=Ey(n,e),o=oB(n,t),s=n.listenProvider_.startListening(xf(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)z(!$s(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((u,d,f)=>{if(!Re(u)&&d&&$s(d))return[My(d).query];{let p=[];return d&&(p=p.concat(Jj(d).map(m=>m.query))),Dn(f,(m,I)=>{p=p.concat(I)}),p}});for(let u=0;u<c.length;++u){let d=c[u];n.listenProvider_.stopListening(xf(d),Ey(n,d))}}return s}var VA=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},UA=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Rt(this.path_,e);return new n(this.syncTree_,t)}node(){return cx(this.syncTree_,this.path_)}},yJ=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},hj=function(n,e,t){if(!n||typeof n!="object")return n;if(z(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return EJ(n[".sv"],e,t);if(typeof n[".sv"]=="object")return wJ(n[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},EJ=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:z(!1,"Unexpected server value: "+n)}},wJ=function(n,e,t){n.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&z(!1,"Unexpected increment value: "+r);let i=e.node();if(z(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},bJ=function(n,e,t,r){return hx(e,new UA(t,n),r)},sB=function(n,e,t){return hx(n,new VA(e),t)};function hx(n,e,t){let r=n.getPriority().val(),i=hj(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=hj(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new au(a,Ht(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new au(i))),s.forEachChild(mt,(a,c)=>{let u=hx(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var Of=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function fx(n,e){let t=e instanceof Ge?e:new Ge(e),r=n,i=Ae(t);for(;i!==null;){let o=Da(r.node.children,i)||{children:{},childCount:0};r=new Of(i,r,o),t=at(t),i=Ae(t)}return r}function gu(n){return n.node.value}function aB(n,e){n.node.value=e,jA(n)}function cB(n){return n.node.childCount>0}function IJ(n){return gu(n)===void 0&&!cB(n)}function Ny(n,e){Dn(n.node.children,(t,r)=>{e(new Of(t,n,r))})}function lB(n,e,t,r){t&&!r&&e(n),Ny(n,i=>{lB(i,e,!0,r)}),t&&r&&e(n)}function CJ(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jf(n){return new Ge(n.parent===null?n.name:jf(n.parent)+"/"+n.name)}function jA(n){n.parent!==null&&TJ(n.parent,n.name,n)}function TJ(n,e,t){let r=IJ(t),i=ti(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,jA(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,jA(n))}var DJ=/[\[\].#$\/\u0000-\u001F\u007F]/,SJ=/[\[\].#$\u0000-\u001F\u007F]/,QS=10*1024*1024,px=function(n){return typeof n=="string"&&n.length!==0&&!DJ.test(n)},uB=function(n){return typeof n=="string"&&n.length!==0&&!SJ.test(n)},AJ=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uB(n)},dB=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Ay(n)||n&&typeof n=="object"&&ti(n,".sv")},BA=function(n,e,t,r){r&&e===void 0||ky(Aa(n,"value"),e,t)},ky=function(n,e,t){let r=t instanceof Ge?new lA(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+tc(r));if(typeof e=="function")throw new Error(n+"contains a function "+tc(r)+" with contents = "+e.toString());if(Ay(e))throw new Error(n+"contains "+e.toString()+" "+tc(r));if(typeof e=="string"&&e.length>QS/3&&hh(e)>QS)throw new Error(n+"contains a string greater than "+QS+" utf8 bytes "+tc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Dn(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!px(s)))throw new Error(n+" contains an invalid key ("+s+") "+tc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cX(r,s),ky(n,a,r),lX(r)}),i&&o)throw new Error(n+' contains ".value" child '+tc(r)+" in addition to actual children.")}},xJ=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let o=Mf(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!px(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(aX);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Lr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},MJ=function(n,e,t,r){if(r&&e===void 0)return;let i=Aa(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Dn(e,(s,a)=>{let c=new Ge(s);if(ky(i,a,Rt(t,c)),XA(c)===".priority"&&!dB(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),xJ(i,o)},RJ=function(n,e,t){if(!(t&&e===void 0)){if(Ay(e))throw new Error(Aa(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!dB(e))throw new Error(Aa(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}};var hB=function(n,e,t,r){if(!(r&&t===void 0)&&!uB(t))throw new Error(Aa(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PJ=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hB(n,e,t,r)},Cf=function(n,e){if(Ae(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},NJ=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!px(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!AJ(t))throw new Error(Aa(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var $A=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function gx(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!JA(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function fB(n,e,t){gx(n,t),pB(n,r=>JA(r,e))}function ko(n,e,t){gx(n,t),pB(n,r=>Lr(r,e)||Lr(e,r))}function pB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(kJ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function kJ(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();ic&&sn("event: "+t.toString()),fu(r)}}}var OJ="repo_interrupt",FJ=25,HA=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $A,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dy(),this.transactionQueueTree_=new Of,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function LJ(n,e,t){if(n.stats_=ZA(n.repoInfo_),n.forceRestClient_||FZ())n.server_=new EA(n.repoInfo_,(r,i,o,s)=>{fj(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pj(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ex(n.repoInfo_,e,(r,i,o,s)=>{fj(n,r,i,o,s)},r=>{pj(n,r)},r=>{UJ(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=VZ(n.repoInfo_,()=>new TA(n.stats_,n.server_)),n.infoData_=new wA,n.infoSyncTree_=new yy({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Ry(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),vx(n,"connected",!1),n.serverSyncTree_=new yy({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);ko(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function VJ(n){let t=n.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function mx(n){return yJ({timestamp:VJ(n)})}function fj(n,e,t,r,i){n.dataUpdateCount++;let o=new Ge(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=dh(t,u=>Ht(u));s=pJ(n.serverSyncTree_,o,c,i)}else{let c=Ht(t);s=fJ(n.serverSyncTree_,o,c,i)}else if(r){let c=dh(t,u=>Ht(u));s=uJ(n.serverSyncTree_,o,c)}else{let c=Ht(t);s=Ry(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Oy(n,o)),ko(n.eventQueue_,a,s)}function pj(n,e){vx(n,"connected",e),e===!1&&BJ(n)}function UJ(n,e){Dn(e,(t,r)=>{vx(n,t,r)})}function vx(n,e,t){let r=new Ge("/.info/"+e),i=Ht(t);n.infoData_.updateSnapshot(r,i);let o=Ry(n.infoSyncTree_,r,i);ko(n.eventQueue_,r,o)}function gB(n){return n.nextWriteId_++}function jJ(n,e,t,r,i){_x(n,"set",{path:e.toString(),value:t,priority:r});let o=mx(n),s=Ht(t,r),a=cx(n.serverSyncTree_,e),c=sB(s,a,o),u=gB(n),d=nB(n.serverSyncTree_,e,c,u,!0);gx(n.eventQueue_,d),n.server_.put(e.toString(),s.val(!0),(p,m)=>{let I=p==="ok";I||Jn("set at "+e+" failed: "+p);let N=rc(n.serverSyncTree_,u,!I);ko(n.eventQueue_,e,N),hu(n,i,p,m)});let f=EB(n,e);Oy(n,f),ko(n.eventQueue_,f,[])}function BJ(n){_x(n,"onDisconnectEvents");let e=mx(n),t=dy();IA(n.onDisconnect_,We(),(i,o)=>{let s=bJ(i,o,n.serverSyncTree_,e);pu(t,i,s)});let r=[];IA(t,We(),(i,o)=>{r=r.concat(Ry(n.serverSyncTree_,i,o));let s=EB(n,i);Oy(n,s)}),n.onDisconnect_=dy(),ko(n.eventQueue_,We(),r)}function $J(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&bA(n.onDisconnect_,e),hu(n,t,r,i)})}function gj(n,e,t,r){let i=Ht(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&pu(n.onDisconnect_,e,i),hu(n,r,o,s)})}function HJ(n,e,t,r,i){let o=Ht(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&pu(n.onDisconnect_,e,o),hu(n,i,s,a)})}function qJ(n,e,t,r){if(gl(t)){sn("onDisconnect().update() called with empty data.  Don't do anything."),hu(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{i==="ok"&&Dn(t,(s,a)=>{let c=Ht(a);pu(n.onDisconnect_,Rt(e,s),c)}),hu(n,r,i,o)})}function zJ(n,e,t){let r;Ae(e._path)===".info"?r=dj(n.infoSyncTree_,e,t):r=dj(n.serverSyncTree_,e,t),fB(n.eventQueue_,e._path,r)}function qA(n,e,t){let r;Ae(e._path)===".info"?r=LA(n.infoSyncTree_,e,t):r=LA(n.serverSyncTree_,e,t),fB(n.eventQueue_,e._path,r)}function WJ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OJ)}function _x(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),sn(t,...e)}function hu(n,e,t,r){e&&fu(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function mB(n,e,t){return cx(n.serverSyncTree_,e,t)||Ce.EMPTY_NODE}function yx(n,e=n.transactionQueueTree_){if(e||Fy(n,e),gu(e)){let t=_B(n,e);z(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&GJ(n,jf(e),t)}else cB(e)&&Ny(e,t=>{yx(n,t)})}function GJ(n,e,t){let r=t.map(u=>u.currentWriteId),i=mB(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];z(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Xn(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{_x(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let p=0;p<t.length;p++)t[p].status=2,d=d.concat(rc(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&f.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();Fy(n,fx(n.transactionQueueTree_,e)),yx(n,n.transactionQueueTree_),ko(n.eventQueue_,e,d);for(let p=0;p<f.length;p++)fu(f[p])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Jn("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}Oy(n,e)}},s)}function Oy(n,e){let t=vB(n,e),r=jf(t),i=_B(n,t);return KJ(n,i,r),r}function KJ(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=Xn(t,c.path),d=!1,f;if(z(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(rc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=FJ)d=!0,f="maxretry",i=i.concat(rc(n.serverSyncTree_,c.currentWriteId,!0));else{let p=mB(n,c.path,s);c.currentInputSnapshot=p;let m=e[a].update(p.val());if(m!==void 0){ky("transaction failed: Data returned ",m,c.path);let I=Ht(m);typeof m=="object"&&m!=null&&ti(m,".priority")||(I=I.updatePriority(p.getPriority()));let k=c.currentWriteId,$=mx(n),ne=sB(I,p,$);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=ne,c.currentWriteId=gB(n),s.splice(s.indexOf(k),1),i=i.concat(nB(n.serverSyncTree_,c.path,ne,c.currentWriteId,c.applyLocally)),i=i.concat(rc(n.serverSyncTree_,k,!0))}else d=!0,f="nodata",i=i.concat(rc(n.serverSyncTree_,c.currentWriteId,!0))}ko(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,(function(p){setTimeout(p,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Fy(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)fu(r[a]);yx(n,n.transactionQueueTree_)}function vB(n,e){let t,r=n.transactionQueueTree_;for(t=Ae(e);t!==null&&gu(r)===void 0;)r=fx(r,t),e=at(e),t=Ae(e);return r}function _B(n,e){let t=[];return yB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yB(n,e,t){let r=gu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ny(e,i=>{yB(n,i,t)})}function Fy(n,e){let t=gu(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,aB(e,t.length>0?t:void 0)}Ny(e,r=>{Fy(n,r)})}function EB(n,e){let t=jf(vB(n,e)),r=fx(n.transactionQueueTree_,e);return CJ(r,i=>{YS(n,i)}),YS(n,r),lB(r,i=>{YS(n,i)}),t}function YS(n,e){let t=gu(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(z(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(z(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(rc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?aB(e,void 0):t.length=o+1,ko(n.eventQueue_,jf(e),i);for(let s=0;s<r.length;s++)fu(r[s])}}function QJ(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function YJ(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jn(`Invalid query segment '${t}' in query '${n}'`)}return e}var mj=function(n,e){let t=ZJ(n),r=t.namespace;t.domain==="firebase.com"&&Po(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Po("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||SZ();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ry(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ge(t.pathString)}},ZJ=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=QJ(n.substring(d,f)));let p=YJ(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let m=e.slice(0,u);if(m.toLowerCase()==="localhost")t="localhost";else if(m.split(".").length<=2)t=m;else{let I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),t=e.substring(I+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var wy=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())}},by=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Iy=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var zA=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new bn;return $J(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Cf("OnDisconnect.remove",this._path);let e=new bn;return gj(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Cf("OnDisconnect.set",this._path),BA("OnDisconnect.set",e,this._path,!1);let t=new bn;return gj(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Cf("OnDisconnect.setWithPriority",this._path),BA("OnDisconnect.setWithPriority",e,this._path,!1),RJ("OnDisconnect.setWithPriority",t,!1);let r=new bn;return HJ(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Cf("OnDisconnect.update",this._path),MJ("OnDisconnect.update",e,this._path,!1);let t=new bn;return qJ(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var WA=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Re(this._path)?null:XA(this._path)}get ref(){return new Oo(this._repo,this._path)}get _queryIdentifier(){let e=ej(this._queryParams),t=YA(e);return t==="{}"?"default":t}get _queryObject(){return ej(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=JA(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+sX(this._path)}};var Oo=class n extends WA{constructor(e,t){super(e,t,new yA,!1)}get parent(){let e=Fj(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Cy=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Ge(e),r=Ty(this.ref,e);return new n(this._node.getChild(t),r,mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,Ty(this.ref,r),mt)))}hasChild(e){let t=new Ge(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ly(n,e){return n=Me(n),n._checkNotDeleted("ref"),e!==void 0?Ty(n._root,e):n._root}function Ty(n,e){return n=Me(n),Ae(n._path)===null?PJ("child","path",e,!1):hB("child","path",e,!1),new Oo(n._repo,Rt(n._path,e))}function wB(n){return n=Me(n),new zA(n._repo,n._path)}function Bf(n,e){n=Me(n),Cf("set",n._path),BA("set",e,n._path,!1);let t=new bn;return jJ(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}var Dy=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new wy("value",this,new Cy(e.snapshotNode,new Oo(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new by(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Sy=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new by(this,e,t):null}createEvent(e,t){z(e.childName!=null,"Child events should have a childName.");let r=Ty(new Oo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new wy(e.type,this,new Cy(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function XJ(n,e,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=t,u=(d,f)=>{qA(n._repo,n,a),c(d,f)};u.userCallback=t.userCallback,u.context=t.context,t=u}let s=new Iy(t,o||void 0),a=e==="value"?new Dy(s):new Sy(e,s);return zJ(n._repo,n,a),()=>qA(n._repo,n,a)}function Ex(n,e,t,r){return XJ(n,"value",e,t,r)}function wx(n,e,t){let r=null,i=t?new Iy(t):null;e==="value"?r=new Dy(i):e&&(r=new Sy(e,i)),qA(n._repo,n,r)}tJ(Oo);aJ(Oo);var JJ="FIREBASE_DATABASE_EMULATOR_HOST",GA={},eee=!1;function tee(n,e,t,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=Wn(o);n.repoInfo_=new ry(e,s,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function nee(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Po("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=mj(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[JJ]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=mj(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Df(Df.OWNER):new nA(n.name,n.options,e);NJ("Invalid Firebase Database URL",s),Re(s.path)||Po("Database URL must point to the root of a Firebase Database (not including a child path).");let f=iee(a,n,d,new tA(n,t));return new KA(f,n)}function ree(n,e){let t=GA[e];(!t||t[n.key]!==n)&&Po(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WJ(n),delete t[n.key]}function iee(n,e,t,r){let i=GA[e.name];i||(i={},GA[e.name]=i);let o=i[n.toURLString()];return o&&Po("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new HA(n,eee,t,r),i[n.toURLString()]=o,o}var KA=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LJ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oo(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ree(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Po("Cannot call "+e+" on a deleted database.")}};function bB(n=ni(),e){let t=Ai(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=fl("database");r&&oee(t,...r)}return t}function oee(n,e,t,r={}){n=Me(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&xr(r,o.repoInfo_.emulatorOptions))return;Po("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Po('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Df(Df.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:pl(r.mockUserToken,n.app.options.projectId);s=new Df(a)}Wn(e)&&(ms(e),vs("Database",!0)),tee(o,i,r,s)}function see(n){CZ(Rr),Ln(new Wt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return nee(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),Je(LU,VU,n),Je(LU,VU,"esm2017")}ex.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ex.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};see();var MB="firebasestorage.googleapis.com",RB="storageBucket",aee=120*1e3,cee=600*1e3,lee=1e3;var vt=class n extends Fn{constructor(e,t,r=0){super(bx(e),`Firebase Storage: ${t} (${bx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},pt=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(pt||{});function bx(n){return"storage/"+n}function Rx(){let n="An unknown error occurred, please check the error payload for server response.";return new vt(pt.UNKNOWN,n)}function uee(n){return new vt(pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function dee(n){return new vt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hee(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(pt.UNAUTHENTICATED,n)}function fee(){return new vt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pee(n){return new vt(pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function PB(){return new vt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NB(){return new vt(pt.CANCELED,"User canceled the upload/download.")}function gee(n){return new vt(pt.INVALID_URL,"Invalid URL '"+n+"'.")}function mee(n){return new vt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vee(){return new vt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RB+"' property when initializing the app?")}function kB(){return new vt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _ee(){return new vt(pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function yee(){return new vt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Eee(n){return new vt(pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cx(n){return new vt(pt.INVALID_ARGUMENT,n)}function OB(){return new vt(pt.APP_DELETED,"The Firebase app was deleted.")}function wee(n){return new vt(pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hf(n,e){return new vt(pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $f(n){throw new vt(pt.INTERNAL_ERROR,"Internal error: "+n)}var ci=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw mee(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(de){de.path_=decodeURIComponent(de.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${i}/o${p}`,"i"),I={bucket:1,path:3},N=t===MB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",$=new RegExp(`^https?://${N}/${i}/${k}`,"i"),ee=[{regex:a,indices:c,postModify:o},{regex:m,indices:I,postModify:u},{regex:$,indices:{bucket:1,path:2},postModify:u}];for(let de=0;de<ee.length;de++){let _t=ee[de],Ne=_t.regex.exec(e);if(Ne){let M=Ne[_t.indices.bucket],C=Ne[_t.indices.path];C||(C=""),r=new n(M,C),_t.postModify(r);break}}if(r==null)throw gee(e);return r}},Tx=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function bee(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...k){u||(u=!0,e.apply(null,k))}function f(k){i=setTimeout(()=>{i=null,n(m,c())},k)}function p(){o&&clearTimeout(o)}function m(k,...$){if(u){p();return}if(k){p(),d.call(null,k,...$);return}if(c()||s){p(),d.call(null,k,...$);return}r<64&&(r*=2);let ee;a===1?(a=2,ee=0):ee=(r+Math.random())*1e3,f(ee)}let I=!1;function N(k){I||(I=!0,p(),!u&&(i!==null?(k||(a=2),clearTimeout(i),f(0)):k||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,N(!0)},t),N}function Iee(n){n(!1)}function Cee(n){return n!==void 0}function Tee(n){return typeof n=="function"}function Dee(n){return typeof n=="object"&&!Array.isArray(n)}function By(n){return typeof n=="string"||n instanceof String}function IB(n){return Px()&&n instanceof Blob}function Px(){return typeof Blob<"u"}function CB(n,e,t,r){if(r<e)throw Cx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cx(`Invalid value for '${n}'. Expected ${t} or less.`)}function Wf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FB(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var yu=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(yu||{});function LB(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var Dx=class{constructor(e,t,r,i,o,s,a,c,u,d,f,p=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,N)=>{this.resolve_=I,this.reject_=N,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new _u(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===yu.NO_ERROR,c=o.getStatus();if(!a||LB(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===yu.ABORT;r(!1,new _u(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new _u(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Cee(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=Rx();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?OB():NB();s(c)}else{let c=PB();s(c)}};this.canceled_?t(!1,new _u(!1,null,!0)):this.backoffId_=bee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Iee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},_u=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function See(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Aee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Mee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Ree(n,e,t,r,i,o,s=!0,a=!1){let c=FB(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return xee(d,e),See(d,t),Aee(d,o),Mee(d,r),new Dx(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function Pee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Nee(...n){let e=Pee();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Px())return new Blob(n);throw new vt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Oee(n){if(typeof atob>"u")throw Eee("base-64");return atob(n)}var Hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},qf=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Fee(n,e){switch(n){case Hi.RAW:return new qf(VB(e));case Hi.BASE64:case Hi.BASE64URL:return new qf(UB(n,e));case Hi.DATA_URL:return new qf(Vee(e),Uee(e))}throw Rx()}function VB(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Lee(n){let e;try{e=decodeURIComponent(n)}catch{throw Hf(Hi.DATA_URL,"Malformed data URL.")}return VB(e)}function UB(n,e){switch(n){case Hi.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Hf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hi.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Hf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Oee(e)}catch(i){throw i.message.includes("polyfill")?i:Hf(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Uy=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Hf(Hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=jee(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Vee(n){let e=new Uy(n);return e.base64?UB(Hi.BASE64,e.rest):Lee(e.rest)}function Uee(n){return new Uy(n).contentType}function jee(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var jy=class n{constructor(e,t){let r=0,i="";IB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IB(this.data_)){let r=this.data_,i=kee(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Px()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Nee.apply(null,t))}else{let t=e.map(s=>By(s)?Fee(Hi.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function jB(n){let e;try{e=JSON.parse(n)}catch{return null}return Dee(e)?e:null}function Bee(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $ee(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function BB(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Hee(n,e){return e}var an=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Hee}},Vy=null;function qee(n){return!By(n)||n.length<2?n:BB(n)}function $B(){if(Vy)return Vy;let n=[];n.push(new an("bucket")),n.push(new an("generation")),n.push(new an("metageneration")),n.push(new an("name","fullPath",!0));function e(o,s){return qee(s)}let t=new an("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new an("size");return i.xform=r,n.push(i),n.push(new an("timeCreated")),n.push(new an("updated")),n.push(new an("md5Hash",null,!0)),n.push(new an("cacheControl",null,!0)),n.push(new an("contentDisposition",null,!0)),n.push(new an("contentEncoding",null,!0)),n.push(new an("contentLanguage",null,!0)),n.push(new an("contentType",null,!0)),n.push(new an("metadata","customMetadata",!0)),Vy=n,Vy}function zee(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new ci(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Wee(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return zee(r,n),r}function HB(n,e,t){let r=jB(e);return r===null?null:Wee(n,r,t)}function Gee(n,e,t,r){let i=jB(e);if(i===null||!By(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let d=n.bucket,f=n.fullPath,p="/b/"+s(d)+"/o/"+s(f),m=Wf(p,t,r),I=FB({alt:"media",token:u});return m+I})[0]}function qB(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Hs=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Fo(n){if(!n)throw Rx()}function Nx(n,e){function t(r,i){let o=HB(n,i,e);return Fo(o!==null),o}return t}function Kee(n,e){function t(r,i){let o=HB(n,i,e);return Fo(o!==null),Gee(o,i,n.host,n._protocol)}return t}function Gf(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=fee():i=hee():t.getStatus()===402?i=dee(n.bucket):t.getStatus()===403?i=pee(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zB(n){let e=Gf(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=uee(n.path)),o.serverResponse=i.serverResponse,o}return t}function Qee(n,e,t){let r=e.fullServerUrl(),i=Wf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Hs(i,o,Nx(n,t),s);return a.errorHandler=zB(e),a}function Yee(n,e,t){let r=e.fullServerUrl(),i=Wf(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Hs(i,o,Kee(n,t),s);return a.errorHandler=zB(e),a}function Zee(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function WB(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Zee(null,e)),r}function Xee(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let ee="";for(let de=0;de<2;de++)ee=ee+Math.random().toString().slice(2);return ee}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=WB(e,r,i),d=qB(u,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",m=jy.getBlob(f,r,p);if(m===null)throw kB();let I={name:u.fullPath},N=Wf(o,n.host,n._protocol),k="POST",$=n.maxUploadRetryTime,ne=new Hs(N,k,Nx(n,t),$);return ne.urlParams=I,ne.headers=s,ne.body=m.uploadData(),ne.errorHandler=Gf(e),ne}var Eu=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function kx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Fo(!1)}return Fo(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Jee(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=WB(e,r,i),a={name:s.fullPath},c=Wf(o,n.host,n._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=qB(s,t),p=n.maxUploadRetryTime;function m(N){kx(N);let k;try{k=N.getResponseHeader("X-Goog-Upload-URL")}catch{Fo(!1)}return Fo(By(k)),k}let I=new Hs(c,u,m,p);return I.urlParams=a,I.headers=d,I.body=f,I.errorHandler=Gf(e),I}function ete(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(u){let d=kx(u,["active","final"]),f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fo(!1)}f||Fo(!1);let p=Number(f);return Fo(!isNaN(p)),new Eu(p,r.size(),d==="final")}let s="POST",a=n.maxUploadRetryTime,c=new Hs(t,s,o,a);return c.headers=i,c.errorHandler=Gf(e),c}var TB=256*1024;function tte(n,e,t,r,i,o,s,a){let c=new Eu(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw _ee();let u=c.total-c.current,d=u;i>0&&(d=Math.min(d,i));let f=c.current,p=f+d,m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";let I={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(f,p);if(N===null)throw kB();function k(de,_t){let Ne=kx(de,["active","final"]),M=c.current+d,C=r.size(),T;return Ne==="final"?T=Nx(e,o)(de,_t):T=null,new Eu(M,C,Ne==="final",T)}let $="POST",ne=e.maxUploadRetryTime,ee=new Hs(t,$,k,ne);return ee.headers=I,ee.body=N.uploadData(),ee.progressCallback=a||null,ee.errorHandler=Gf(n),ee}var tr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ix(n){switch(n){case"running":case"pausing":case"canceling":return tr.RUNNING;case"paused":return tr.PAUSED;case"success":return tr.SUCCESS;case"canceled":return tr.CANCELED;case"error":return tr.ERROR;default:return tr.ERROR}}var Sx=class{constructor(e,t,r){if(Tee(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function mu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var DB=null,Ax=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw $f("cannot .send() more than once");if(Wn(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $f("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $f("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $f("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $f("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},xx=class extends Ax{initXhr(){this.xhr_.responseType="text"}};function vu(){return DB?DB():new xx}var Mx=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=$B(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(LB(i.status,[]))if(o)i=PB();else{this.sleepTime=Math.max(this.sleepTime*2,lee),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(pt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=Jee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=ete(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,vu,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=TB*this._chunkMultiplier,t=new Eu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=tte(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,vu,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){TB*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Qee(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=Xee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=NB(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=Ix(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new Sx(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ix(this._state)){case tr.SUCCESS:mu(this._resolve.bind(null,this.snapshot))();break;case tr.CANCELED:case tr.ERROR:let t=this._reject;mu(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ix(this._state)){case tr.RUNNING:case tr.PAUSED:e.next&&mu(e.next.bind(e,this.snapshot))();break;case tr.SUCCESS:e.complete&&mu(e.complete.bind(e))();break;case tr.CANCELED:case tr.ERROR:e.error&&mu(e.error.bind(e,this._error))();break;default:e.error&&mu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var wu=class n{constructor(e,t){this._service=e,t instanceof ci?this._location=t:this._location=ci.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ci(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BB(this._location.path)}get storage(){return this._service}get parent(){let e=Bee(this._location.path);if(e===null)return null;let t=new ci(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wee(e)}};function nte(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Mx(n,new jy(e),t)}function rte(n){n._throwIfRoot("getDownloadURL");let e=Yee(n.storage,n._location,$B());return n.storage.makeRequestWithTokens(e,vu).then(t=>{if(t===null)throw yee();return t})}function ite(n,e){let t=$ee(n._location.path,e),r=new ci(n._location.bucket,t);return new wu(n.storage,r)}function ote(n){return/^[A-Za-z]+:\/\//.test(n)}function ste(n,e){return new wu(n,e)}function GB(n,e){if(n instanceof zf){let t=n;if(t._bucket==null)throw vee();let r=new wu(t,t._bucket);return e!=null?GB(r,e):r}else return e!==void 0?ite(n,e):n}function ate(n,e){if(e&&ote(e)){if(n instanceof zf)return ste(n,e);throw Cx("To use ref(service, url), the first argument must be a Storage instance.")}else return GB(n,e)}function SB(n,e){let t=e?.[RB];return t==null?null:ci.makeFromBucketSpec(t,n)}function cte(n,e,t,r={}){n.host=`${e}:${t}`;let i=Wn(e);i&&(ms(`https://${n.host}/b`),vs("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:pl(o,n.app.options.projectId))}var zf=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=MB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aee,this._maxUploadRetryTime=cee,this._requests=new Set,i!=null?this._bucket=ci.makeFromBucketSpec(i,this._host):this._bucket=SB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ci.makeFromBucketSpec(this._url,e):this._bucket=SB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Tx(OB());{let s=Ree(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},AB="@firebase/storage",xB="0.13.14";var KB="storage";function $y(n,e,t){return n=Me(n),nte(n,e,t)}function Hy(n){return n=Me(n),rte(n)}function qy(n,e){return n=Me(n),ate(n,e)}function zy(n=ni(),e){n=Me(n);let r=Ai(n,KB).getImmediate({identifier:e}),i=fl("storage");return i&&lte(r,...i),r}function lte(n,e,t,r={}){cte(n,e,t,r)}function ute(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new zf(t,r,i,e,Rr)}function dte(){Ln(new Wt(KB,ute,"PUBLIC").setMultipleInstances(!0)),Je(AB,xB,""),Je(AB,xB,"esm2017")}dte();var Wy=class n{firestore=S(Gt);userService=S(Zn);cache=new Map;listeners=new Map;capacity=300;ttlMs=1e3*60*10;constructor(){}touch(e,t){this.cache.delete(e),this.cache.set(e,t)}evictIfNeeded(){for(;this.cache.size>this.capacity;){let e=this.cache.keys().next(),t=e?e.value:void 0;if(!t)break;this.cache.delete(t);let r=this.listeners.get(t);if(r){try{r()}catch{}this.listeners.delete(t)}}}get(e){return E(this,null,function*(){if(!e)return null;let t=Date.now(),r=this.cache.get(e);if(r&&r.expiry>t)return this.touch(e,r),r.value;try{let i=yield this.userService.getUserByUid(e);if(!i){let s={uid:e,displayName:"",profilePicture:""};return this.cache.set(e,{value:s,expiry:t+1e3*60}),this.evictIfNeeded(),s}let o={uid:e,displayName:i.displayName||i.email||"",profilePicture:i.profilePicture||"",updatedAt:t};this.cache.set(e,{value:o,expiry:t+this.ttlMs}),this.evictIfNeeded();try{let s=k_(et(this.firestore,"users",e),a=>{if(a&&a.exists&&typeof a.data=="function"){let c=a.data(),u={uid:e,displayName:c.displayName||c.email||"",profilePicture:c.profilePicture||"",bio:c.bio||"",updatedAt:Date.now()};this.cache.set(e,{value:u,expiry:Date.now()+this.ttlMs}),this.touch(e,this.cache.get(e))}});this.listeners.set(e,s)}catch{}return o}catch(i){return console.error("SenderProfileCache get error",i),null}})}getMany(e){return E(this,null,function*(){let t={},r=e.map(o=>this.get(o)),i=yield Promise.all(r);return e.forEach((o,s)=>t[o]=i[s]),t})}invalidate(e){this.cache.delete(e);let t=this.listeners.get(e);if(t){try{t()}catch{}this.listeners.delete(e)}}clear(){this.cache.clear(),this.listeners.forEach(e=>{try{e()}catch{}}),this.listeners.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var hte=n=>["/profile",n];function fte(n,e){n&1&&(_(0,"div",25),b(1,"No one online"),v())}function pte(n,e){if(n&1&&(_(0,"div",26)(1,"div",27),b(2,"\u25CF"),v(),_(3,"div",28),b(4),v()()),n&2){let t=e.$implicit;w(4),xe(t.displayName||t.uid)}}function gte(n,e){if(n&1&&(_(0,"div",21)(1,"div",22),G(2,fte,2,0,"div",23)(3,pte,5,1,"div",24),v()()),n&2){let t=F();w(2),A("ngIf",t.onlineUsers().length===0),w(),A("ngForOf",t.onlineUsers())}}function mte(n,e){if(n&1){let t=ve();_(0,"button",29),H("click",function(){Q(t);let i=F();return Y(i.loadOlderMessages())}),b(1,"\u2191 Load more"),v()}}function vte(n,e){if(n&1&&oe(0,"img",52),n&2){let t=F().$implicit;A("src",t.senderPhoto,Ot)}}function _te(n,e){if(n&1&&(_(0,"div",53),b(1),v()),n&2){let t=F().$implicit;w(),xe((t.senderName||"").charAt(0))}}function yte(n,e){n&1&&oe(0,"span",54)}function Ete(n,e){n&1&&(_(0,"span",55),b(1,"edited"),v())}function wte(n,e){if(n&1&&(_(0,"div",56),b(1),v()),n&2){let t=F().$implicit;w(),xe(t.text)}}function bte(n,e){if(n&1&&(_(0,"div",21)(1,"a",57),b(2),v()()),n&2){let t=F().$implicit;w(),A("href",t.attachmentUrl,Ot),w(),_e("\u{1F4CE} ",t.attachmentName||"Attachment")}}function Ite(n,e){if(n&1){let t=ve();_(0,"div",58)(1,"input",59),Tr("ngModelChange",function(i){Q(t);let o=F().$implicit;return Qr(o._editText,i)||(o._editText=i),Y(i)}),v(),_(2,"button",60),H("click",function(){Q(t);let i=F().$implicit;return F().editMessage(i.id,i._editText),Y(i._editing=!1)}),b(3,"\u2713"),v(),_(4,"button",61),H("click",function(){Q(t);let i=F().$implicit;return Y(i._editing=!1)}),b(5,"\u2715"),v()()}if(n&2){let t=F().$implicit;w(),A("name",Yc("edit-",t.id)),Cr("ngModel",t._editText)}}function Cte(n,e){if(n&1){let t=ve();_(0,"button",64),H("click",function(){let i=Q(t).$implicit,o=F(2).$implicit,s=F();return Y(s.toggleReaction(o.id,i))}),b(1),_(2,"span",65),b(3),v()()}if(n&2){let t=e.$implicit,r=F(2).$implicit;w(),_e(" ",t," "),w(2),xe((r.reactions[t]==null?null:r.reactions[t].length)||0)}}function Tte(n,e){if(n&1&&(_(0,"div",62),G(1,Cte,4,2,"button",63),v()),n&2){let t=F().$implicit,r=F();w(),A("ngForOf",r.Object.keys(t.reactions))}}function Dte(n,e){if(n&1){let t=ve();_(0,"button",68),H("click",function(){let i=Q(t).$implicit,o=F(2).$implicit,s=F();return Y(s.toggleReaction(o.id,i))}),b(1),v()}if(n&2){let t=e.$implicit;w(),xe(t)}}function Ste(n,e){if(n&1&&(_(0,"div",66),G(1,Dte,2,1,"button",67),v()),n&2){let t=F(2);w(),A("ngForOf",t.emojiPresets)}}function Ate(n,e){if(n&1){let t=ve();_(0,"button",69),H("click",function(){Q(t);let i=F().$implicit;return i._editing=!0,Y(i._editText=i.text)}),b(1,"\u270F\uFE0F"),v()}}function xte(n,e){if(n&1){let t=ve();_(0,"button",70),H("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.deleteMessage(i.id))}),b(1,"\u{1F5D1}\uFE0F"),v()}}function Mte(n,e){if(n&1){let t=ve();_(0,"button",71),H("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.banUser(i.senderUid))}),b(1,"Ban"),v()}}function Rte(n,e){if(n&1){let t=ve();_(0,"button",72),H("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.muteUser(i.senderUid))}),b(1,"Mute"),v()}}function Pte(n,e){if(n&1){let t=ve();_(0,"div",73)(1,"button",74),H("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.retryPending(i.clientId))}),b(2,"Retry"),v(),_(3,"button",75),H("click",function(){Q(t);let i=F().$implicit,o=F();return Y(o.removePending(i.clientId))}),b(4,"Remove"),v()()}}function Nte(n,e){if(n&1){let t=ve();lo(0),_(1,"div",30)(2,"div")(3,"div",31),H("mouseenter",function(i){let o=Q(t).$implicit,s=F();return Y(s.showAvatarPopover(o.senderUid,i))})("mouseleave",function(){Q(t);let i=F();return Y(i.hideAvatarPopover())})("click",function(i){let o=Q(t).$implicit,s=F();return Y(s.showAvatarPopover(o.senderUid,i))}),G(4,vte,1,1,"img",32)(5,_te,2,1,"div",33)(6,yte,1,0,"span",34),v(),_(7,"div",35)(8,"div",36)(9,"div",37),b(10),G(11,Ete,2,0,"span",38),v(),_(12,"div",37),b(13),fo(14,"date"),v()(),G(15,wte,2,1,"div",39)(16,bte,3,2,"div",8)(17,Ite,6,3,"div",40)(18,Tte,2,1,"div",41),_(19,"div",42)(20,"div",43)(21,"button",44),H("click",function(){Q(t);let i=F();return Y(i.toggleEmojiPicker())}),b(22,"\u{1F60A}"),v(),G(23,Ste,2,1,"div",45),v(),_(24,"div",46),G(25,Ate,2,0,"button",47)(26,xte,2,0,"button",48)(27,Mte,2,0,"button",49)(28,Rte,2,0,"button",50)(29,Pte,5,0,"div",51),v()()()()(),uo()}if(n&2){let t=e.$implicit,r=F();w(),ct("pending",t.status==="pending")("failed",t.status==="failed"),w(),yb("d-flex align-items-start gap-2 "+(r.isCreatorMessage(t)?"creator-message":"")),w(2),A("ngIf",t.senderPhoto),w(),A("ngIf",!t.senderPhoto),w(),A("ngIf",r.isUserOnline(t.senderUid)),w(4),_e("",t.senderName," "),w(),A("ngIf",t.edited),w(2),xe(t.createdAt?bb(14,22,t.createdAt,"short"):""),w(2),A("ngIf",!t._editing),w(),A("ngIf",t.attachmentUrl),w(),A("ngIf",t._editing),w(),A("ngIf",t.reactions&&r.Object.keys(t.reactions).length),w(5),A("ngIf",r.showEmojiPicker()),w(2),A("ngIf",r.canModifyMessage(t)&&!t._editing),w(),A("ngIf",r.canModifyMessage(t)),w(),A("ngIf",r.creatorUid&&r.creatorUid===(r.auth.currentUser==null?null:r.auth.currentUser.uid)&&t.senderUid!==(r.auth.currentUser==null?null:r.auth.currentUser.uid)),w(),A("ngIf",r.creatorUid&&r.creatorUid===(r.auth.currentUser==null?null:r.auth.currentUser.uid)&&t.senderUid!==(r.auth.currentUser==null?null:r.auth.currentUser.uid)),w(),A("ngIf",t.status==="failed")}}function kte(n,e){if(n&1&&(_(0,"div",76),b(1),v()),n&2){let t=F();w(),xe(t.errorMessage())}}function Ote(n,e){if(n&1&&(_(0,"div",77),b(1),v()),n&2){let t=F();w(),_e("Uploading: ",t.uploadProgress(),"%")}}function Fte(n,e){if(n&1&&oe(0,"img",84),n&2){let t=F(2);A("src",t.popoverData.profilePicture,Ot)}}function Lte(n,e){if(n&1&&(_(0,"div",78)(1,"div",79)(2,"div",80),G(3,Fte,1,1,"img",81),_(4,"div")(5,"div",82),b(6),v(),_(7,"div",25),b(8),v(),_(9,"a",83),b(10,"View Profile"),v()()()()()),n&2){let t=F();A("ngStyle",t.popoverStyle),w(3),A("ngIf",t.popoverData==null?null:t.popoverData.profilePicture),w(3),xe((t.popoverData==null?null:t.popoverData.displayName)||(t.popoverData==null?null:t.popoverData.uid)),w(2),xe((t.popoverData==null?null:t.popoverData.bio)||""),w(),A("routerLink",yn(5,hte,t.popoverData==null?null:t.popoverData.uid))}}var Vte=["\u{1F44D}","\u2764\uFE0F","\u{1F602}","\u{1F62E}","\u{1F622}","\u{1F525}","\u{1F680}","\u2728"],Gy=class n{firestore=S(Gt);auth=S(Qe);userService=S(Zn);profileCache=S(Wy);Object=Object;_eventId;set eventId(e){this._eventId=e,this.initMessages()}get eventId(){return this._eventId}creatorUid;messages=te([]);pendingMessages=te([]);newMessage=te("");loading=te(!1);errorMessage=te("");uploading=te(!1);uploadProgress=te(0);showEmojiPicker=te(!1);onlineUsers=te([]);showOnlineList=te(!1);pageSize=25;pageIncrement=25;oldestVisibleTimestamp=null;messageSubscriptions=new Map;presenceSub=null;messagesSub=null;rtdbListener=null;emojiPresets=Vte;messagesColPath(){return`events/${this.eventId}/messages`}autoScrollEnabled=!0;popoverVisible=!1;popoverData=null;popoverStyle={top:"0px",left:"0px"};ensureSenderProfiles(e){return E(this,null,function*(){if(!e||!e.length)return;let t=Array.from(new Set(e.map(r=>r.senderUid).filter(Boolean)));if(t.length)try{let r=yield this.profileCache.getMany(t);this.messages.update(i=>i.map(o=>{let s=r[o.senderUid];return s&&(o.senderPhoto=o.senderPhoto||s.profilePicture||"",o.senderName=o.senderName||s.displayName||o.senderName),o})),this.pendingMessages.update(i=>i.map(o=>{let s=r[o.senderUid];return s&&(o.senderPhoto=o.senderPhoto||s.profilePicture||"",o.senderName=o.senderName||s.displayName||o.senderName),o})),this.autoScrollEnabled&&setTimeout(()=>this.scrollToBottom(),30)}catch{}})}initMessages(){if(this.messagesSub&&(this.messagesSub.unsubscribe(),this.messagesSub=null),!this.eventId)return;let e=Tn(this.firestore,this.messagesColPath()),t=Xa(e,O_("createdAt","desc"),J2(this.pageSize)),r=Za(t,i=>{if(i.docs.length){let a=i.docs[i.docs.length-1];this.oldestVisibleTimestamp=a.data()?.createdAt||null}let o=i.docs.map(a=>{let c=j({id:a.id},a.data());return c?.createdAt&&typeof c.createdAt.toDate=="function"&&(c.createdAt=c.createdAt.toDate()),c?.editedAt&&typeof c.editedAt.toDate=="function"&&(c.editedAt=c.editedAt.toDate()),c});this.messages.set(o.reverse()),this.ensureSenderProfiles(this.messages());let s=new Set(this.messages().map(a=>a.clientId).filter(Boolean));this.pendingMessages.update(a=>a.filter(c=>!s.has(c.clientId))),setTimeout(()=>this.scrollToBottom(),50)},i=>{console.error("Chat snapshot error",i)});this.messagesSub={unsubscribe:r},this.attachScrollListener(),this.initPresenceRTDB()}attachScrollListener(){try{let t=document.getElementById(`chat-end-${this.eventId}`)?.parentElement;if(!t)return;t.addEventListener("scroll",this._boundOnScroll=this.onChatScroll.bind(this))}catch{}}detachScrollListener(){try{let t=document.getElementById(`chat-end-${this.eventId}`)?.parentElement;if(!t)return;this._boundOnScroll&&t.removeEventListener("scroll",this._boundOnScroll)}catch{}}_boundOnScroll=null;onChatScroll(e){try{let t=e.target,r=t.scrollHeight-t.scrollTop-t.clientHeight<60;this.autoScrollEnabled=r}catch{}}showAvatarPopover(e,t){if(!e)return;let r=t.touches&&t.touches[0],i=r?r.clientX:t.clientX,o=r?r.clientY:t.clientY;this.popoverStyle={left:i+8+"px",top:o+8+"px"},this.popoverVisible=!0,this.profileCache.get(e).then(s=>{this.popoverData=s||{uid:e}}).catch(()=>{this.popoverData={uid:e}})}hideAvatarPopover(){setTimeout(()=>{this.popoverVisible=!1,this.popoverData=null},120)}sendMessage(){return E(this,null,function*(){if(this.errorMessage.set(""),!this.newMessage()||!this.eventId)return;let e=this.auth.currentUser;if(!e){this.errorMessage.set("You must be signed in to send messages.");return}let t=`c_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,r=this.newMessage().trim();if(!r)return;let i={id:t,clientId:t,text:r,senderUid:e.uid,senderName:e.displayName||e.email||"Unknown",senderPhoto:"",createdAt:new Date,status:"pending"};this.pendingMessages.update(o=>[...o,i]),this.newMessage.set("");try{this.loading.set(!0);let o={text:r,senderUid:e.uid,senderName:e.displayName||e.email||"Unknown",senderPhoto:"",clientId:t,createdAt:Ql()};try{if(this.userService){let s=yield this.userService.getCurrentUserProfile();s&&s.profilePicture&&(o.senderPhoto=s.profilePicture)}}catch{}yield nf(Tn(this.firestore,this.messagesColPath()),o)}catch(o){console.error("Failed to send message",o);let s=this.pendingMessages().find(a=>a.clientId===t);s&&(s.status="failed"),this.errorMessage.set("Failed to send message. You can retry or remove it.")}finally{this.loading.set(!1)}})}retryPending(e){let t=this.pendingMessages().findIndex(i=>i.clientId===e&&i.status==="failed");if(t===-1)return;let r=this.pendingMessages()[t];this.newMessage.set(r.text),this.pendingMessages.update(i=>i.filter((o,s)=>s!==t))}removePending(e){this.pendingMessages.update(t=>t.filter(r=>r.clientId!==e))}editMessage(e,t){return E(this,null,function*(){if(!this.eventId||!this.auth.currentUser)return;let i=et(this.firestore,`${this.messagesColPath()}/${e}`);try{yield Kn(i,{text:t,edited:!0,editedAt:Ql()})}catch(o){console.error("Edit failed",o),this.errorMessage.set("Edit failed.")}})}deleteMessage(e){return E(this,null,function*(){if(!this.eventId||!this.auth.currentUser)return;let r=et(this.firestore,`${this.messagesColPath()}/${e}`);try{yield P_(r)}catch(i){console.error("Delete failed",i),this.errorMessage.set("Delete failed.")}})}toggleReaction(e,t){return E(this,null,function*(){if(!this.eventId)return;let r=this.auth.currentUser;if(!r)return;this.showEmojiPicker.set(!1);let i=et(this.firestore,`${this.messagesColPath()}/${e}`);try{yield AS(this.firestore,o=>E(this,null,function*(){let s=yield o.get(i),c=(s.exists()?s.data():{})?.reactions||{},u=c[t]||[];if(u.includes(r.uid)){let f=u.filter(p=>p!==r.uid);if(f.length===0){let p=j({},c);delete p[t],o.update(i,{reactions:p})}else o.update(i,{[`reactions.${t}`]:f})}else{let f=[...u,r.uid];o.update(i,{[`reactions.${t}`]:f})}}))}catch(o){console.error("Reaction toggle failed",o)}})}toggleEmojiPicker(){this.showEmojiPicker.update(e=>!e)}uploadAttachment(e){return E(this,null,function*(){if(!e||!this.eventId)return;let t=this.auth.currentUser;if(t){this.uploading.set(!0),this.uploadProgress.set(0);try{let r=zy(),i=`att_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,o=qy(r,`events/${this.eventId}/attachments/${i}_${e.name}`),s=$y(o,e);s.on("state_changed",a=>{let c=a.bytesTransferred/(a.totalBytes||1)*100;this.uploadProgress.set(Math.round(c))},a=>{console.error("Upload failed",a)},()=>E(this,null,function*(){let a=yield Hy(s.snapshot.ref),c=`c_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,u={text:"",senderUid:t.uid,senderName:t.displayName||t.email||"Unknown",senderPhoto:"",clientId:c,createdAt:Ql(),attachmentUrl:a,attachmentName:e.name};yield nf(Tn(this.firestore,this.messagesColPath()),u),this.uploadProgress.set(100)}))}catch(r){console.error("Attachment upload error",r)}finally{this.uploading.set(!1)}}})}banUser(e){return E(this,null,function*(){if(!this.eventId)return;let t=this.auth.currentUser;if(!t)return;let r=et(this.firestore,`events/${this.eventId}/moderation/banned_${e}`);try{yield rf(r,{uid:e,bannedBy:t.uid,at:Ql()})}catch(i){console.error("Ban failed",i)}})}muteUser(e){return E(this,null,function*(){if(!this.eventId)return;let t=this.auth.currentUser;if(!t)return;let r=et(this.firestore,`events/${this.eventId}/moderation/muted_${e}`);try{yield rf(r,{uid:e,mutedBy:t.uid,at:Ql()})}catch(i){console.error("Mute failed",i)}})}scrollToBottom(){try{let e=document.getElementById(`chat-end-${this.eventId}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}catch{}}isCreatorMessage(e){return e?.senderUid&&this.creatorUid&&e.senderUid===this.creatorUid}canModifyMessage(e){let t=this.auth.currentUser;return t?e.senderUid===t.uid||this.creatorUid===t.uid:!1}loadMore(){this.pageSize+=this.pageIncrement,this.initMessages()}loadOlderMessages(){return E(this,null,function*(){if(!(!this.eventId||!this.oldestVisibleTimestamp))try{let e=Tn(this.firestore,this.messagesColPath()),t=Xa(e,O_("createdAt"),x_(this.oldestVisibleTimestamp),DS(this.pageIncrement)),r=yield N_(t),i=r.docs.map(o=>{let s=j({id:o.id},o.data());return s?.createdAt&&typeof s.createdAt.toDate=="function"&&(s.createdAt=s.createdAt.toDate()),s});if(i.length){this.messages.update(a=>[...i,...a]);let s=r.docs[0]?.data()?.createdAt;this.oldestVisibleTimestamp=s||this.oldestVisibleTimestamp,i.length>0&&this.subscribeToOlderMessageRange(i[0].createdAt,this.oldestVisibleTimestamp)}}catch(e){console.error("Failed to load older messages",e)}})}subscribeToOlderMessageRange(e,t){if(!this.eventId)return;let r=`${e?.toString()}_${t?.toString()}`;if(this.messageSubscriptions.has(r))return;let i=Tn(this.firestore,this.messagesColPath()),o=Xa(i,O_("createdAt"),eU(e),x_(t)),s=Za(o,a=>{let c=a.docs.map(u=>{let d=j({id:u.id},u.data());return d?.createdAt&&typeof d.createdAt.toDate=="function"&&(d.createdAt=d.createdAt.toDate()),d});this.messages.update(u=>{let d=new Map(u.map(f=>[f.id,f]));return c.forEach(f=>d.set(f.id,f)),Array.from(d.values()).sort((f,p)=>(f.createdAt?.getTime()||0)-(p.createdAt?.getTime()||0))})});this.messageSubscriptions.set(r,s)}initPresenceRTDB(){try{let e=this.auth.currentUser;if(!e||!this.eventId)return;let t=bB(),r=Ly(t,`presence/${this.eventId}/${e.uid}`),i=Ly(t,".info/connected");Bf(r,{displayName:e.displayName||e.email||""}).catch(()=>{}),wB(r).remove().catch(()=>{});let o=c=>{c.val()===!0&&Bf(r,{displayName:e.displayName||e.email||""}).catch(()=>{})};Ex(i,o);let s=Ly(t,`presence/${this.eventId}`),a=c=>{let u=c.val()||{},d=Object.keys(u).map(f=>j({uid:f},u[f]));this.onlineUsers.set(d)};Ex(s,a),this.rtdbListener=()=>{try{wx(i,"value",o)}catch{}try{wx(s,"value",a)}catch{}try{Bf(r,null)}catch{}},window.addEventListener("beforeunload",()=>{try{Bf(r,null)}catch{}})}catch(e){console.warn("RTDB presence init failed",e)}}isUserOnline(e){return e?this.onlineUsers().some(t=>t.uid===e):!1}toggleOnlineList(){this.showOnlineList.update(e=>!e)}ngOnDestroy(){this.messagesSub&&this.messagesSub.unsubscribe(),this.presenceSub&&this.presenceSub.unsubscribe(),this.rtdbListener&&this.rtdbListener();try{this.detachScrollListener()}catch{}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-event-chat"]],inputs:{eventId:"eventId",creatorUid:"creatorUid"},decls:26,vars:15,consts:[[1,"event-chat","card","mt-4"],[1,"card-body","d-flex","flex-column","p-2"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0"],[1,"small","text-muted","d-flex","align-items-center"],["title","Show online users",1,"btn","btn-sm","btn-link","p-0","d-flex","align-items-center",3,"click"],[1,"online-indicator","me-1"],[1,"fw-bold","ms-1"],["class","mb-2",4,"ngIf"],[1,"chat-messages","mb-2",2,"max-height","320px","overflow","auto"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"id"],["class","alert alert-danger py-2 mb-2",4,"ngIf"],[1,"chat-input","d-flex","gap-2","align-items-center",3,"submit"],["placeholder","Write a message...","name","message",1,"form-control","form-control-sm","flex-grow-1",3,"ngModelChange","ngModel"],["type","file","hidden","",3,"change","id"],["title","Attach file",1,"btn","btn-sm","btn-outline-secondary","attach-btn","mb-0",3,"for"],["type","button",1,"btn","btn-sm","btn-primary",3,"click","disabled"],["class","small mt-2 text-muted",4,"ngIf"],["class","avatar-popover",3,"ngStyle",4,"ngIf"],[1,"mb-2"],[1,"card","card-sm","p-2","shadow-sm"],["class","small text-muted",4,"ngIf"],["class","d-flex align-items-center gap-2 py-1",4,"ngFor","ngForOf"],[1,"small","text-muted"],[1,"d-flex","align-items-center","gap-2","py-1"],[1,"small","online-dot-list"],[1,"small"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"chat-message","mb-3"],[1,"chat-avatar","position-relative",3,"mouseenter","mouseleave","click"],["alt","",3,"src",4,"ngIf"],["class","avatar-fallback",4,"ngIf"],["class","online-dot","title","Online now",4,"ngIf"],[1,"chat-bubble","flex-fill"],[1,"d-flex","justify-content-between","align-items-start","mb-1"],[1,"chat-meta","small","text-muted"],["class","badge bg-secondary ms-1",4,"ngIf"],["class","chat-text mb-2",4,"ngIf"],["class","mt-2 d-flex gap-2 mb-2",4,"ngIf"],["class","mb-2 d-flex gap-1 flex-wrap",4,"ngIf"],[1,"d-flex","gap-2","align-items-center","flex-wrap"],[1,"reactions-picker","position-relative"],["title","Add reaction",1,"btn","btn-sm","btn-light",3,"click"],["class","emoji-picker",4,"ngIf"],[1,"ms-auto","d-flex","gap-1"],["class","btn btn-sm btn-link text-secondary",3,"click",4,"ngIf"],["class","btn btn-sm btn-link text-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger","title","Ban user",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-warning","title","Mute user",3,"click",4,"ngIf"],["class","ms-2 d-inline-flex gap-1",4,"ngIf"],["alt","",3,"src"],[1,"avatar-fallback"],["title","Online now",1,"online-dot"],[1,"badge","bg-secondary","ms-1"],[1,"chat-text","mb-2"],["target","_blank",1,"btn","btn-sm","btn-outline-primary",3,"href"],[1,"mt-2","d-flex","gap-2","mb-2"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel","name"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"mb-2","d-flex","gap-1","flex-wrap"],["class","btn btn-sm btn-outline-secondary reactions-btn",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-secondary","reactions-btn",3,"click"],[1,"ms-1"],[1,"emoji-picker"],["class","emoji-btn",3,"click",4,"ngFor","ngForOf"],[1,"emoji-btn",3,"click"],[1,"btn","btn-sm","btn-link","text-secondary",3,"click"],[1,"btn","btn-sm","btn-link","text-danger",3,"click"],["title","Ban user",1,"btn","btn-sm","btn-outline-danger",3,"click"],["title","Mute user",1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"ms-2","d-inline-flex","gap-1"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"alert","alert-danger","py-2","mb-2"],[1,"small","mt-2","text-muted"],[1,"avatar-popover",3,"ngStyle"],[1,"popover-card","p-2","shadow-sm","bg-white","rounded"],[1,"d-flex","gap-2","align-items-center"],["class","rounded-circle","style","width:48px;height:48px;object-fit:cover;",3,"src",4,"ngIf"],[1,"fw-bold"],[1,"small","mt-1","d-inline-block",3,"routerLink"],[1,"rounded-circle",2,"width","48px","height","48px","object-fit","cover",3,"src"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),b(4,"Event Chat"),v(),_(5,"div",4)(6,"button",5),H("click",function(){return r.toggleOnlineList()}),oe(7,"span",6),b(8," Online: "),_(9,"span",7),b(10),v()()()(),G(11,gte,4,2,"div",8),_(12,"div",9),G(13,mte,2,0,"button",10)(14,Nte,30,25,"ng-container",11),oe(15,"div",12),v(),G(16,kte,2,1,"div",13),_(17,"form",14),H("submit",function(o){return o.preventDefault(),r.sendMessage()}),_(18,"input",15),Tr("ngModelChange",function(o){return Qr(r.newMessage,o)||(r.newMessage=o),o}),v(),_(19,"input",16),H("change",function(o){return r.uploadAttachment(o.target.files&&o.target.files[0])}),v(),_(20,"label",17),b(21,"\u{1F4CE}"),v(),_(22,"button",18),H("click",function(){return r.sendMessage()}),b(23,"Send"),v()(),G(24,Ote,2,1,"div",19)(25,Lte,11,7,"div",20),v()()),t&2&&(w(10),xe(r.onlineUsers().length),w(),A("ngIf",r.showOnlineList()),w(2),A("ngIf",r.messages().length>=r.pageSize),w(),A("ngForOf",r.messages().concat(r.pendingMessages())),w(),A("id",Yc("chat-end-",r.eventId)),w(),A("ngIf",r.errorMessage()),w(2),Cr("ngModel",r.newMessage),w(),A("id",Yc("chat-file-input-",r.eventId)),w(),A("for",Yc("chat-file-input-",r.eventId)),w(2),A("disabled",r.loading()||!r.newMessage()&&!r.uploading()),w(2),A("ngIf",r.uploading()),w(),A("ngIf",r.popoverVisible))},dependencies:[$e,Ar,rt,Gb,Bi,ji,Vi,Vs,Ui,gf,ec,Mt,ht,Yb],styles:[".event-chat[_ngcontent-%COMP%]{--c-primary: var(--palette-primary, #5a8a3d);--c-surface: var(--palette-surface, #fff);--c-on-surface: var(--palette-on-surface, #222);--c-muted: var(--palette-muted, #6c757d);--c-accent: var(--palette-accent, #dda15e)}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background:var(--c-surface);border:1px solid rgba(0,0,0,.04);flex-shrink:0}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.event-chat[_ngcontent-%COMP%]   .avatar-fallback[_ngcontent-%COMP%]{font-weight:700;padding:6px;color:var(--c-on-surface);font-size:.9rem}.event-chat[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{background:var(--c-surface);padding:10px;border-radius:8px;box-shadow:0 1px 3px #0000000a;border:1px solid rgba(0,0,0,.03);word-break:break-word}.event-chat[_ngcontent-%COMP%]   .creator-message[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{border:1px solid rgba(90,138,61,.18);background:#dda15e0f}.event-chat[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]{white-space:pre-wrap;color:var(--c-on-surface);margin-bottom:.5rem}.event-chat[_ngcontent-%COMP%]   .chat-edited[_ngcontent-%COMP%]{font-size:.75rem;color:var(--c-muted);margin-left:.5rem}.event-chat[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{opacity:.7}.event-chat[_ngcontent-%COMP%]   .failed[_ngcontent-%COMP%]{opacity:.9;border-left:3px solid #dc3545;padding-left:.5rem}.event-chat[_ngcontent-%COMP%]   .chat-meta[_ngcontent-%COMP%]{color:var(--c-muted);font-size:.85rem}.event-chat[_ngcontent-%COMP%]   .chat-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{font-size:.85rem;color:var(--c-primary);text-decoration:none;background:transparent;border:none;cursor:pointer;padding:.25rem .5rem;transition:all .2s}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline;background:#5a8a3d14;border-radius:4px}.event-chat[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{color:#dc3545}.event-chat[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background:#dc354514}.event-chat[_ngcontent-%COMP%]   .reactions-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.5rem}.event-chat[_ngcontent-%COMP%]   .reactions-btn[_ngcontent-%COMP%]{background:#5a8a3d14;border:1px solid rgba(90,138,61,.2);color:var(--c-on-surface);padding:.25rem .5rem;font-size:.85rem;border-radius:4px;cursor:pointer;transition:all .2s}.event-chat[_ngcontent-%COMP%]   .reactions-btn[_ngcontent-%COMP%]:hover{background:#5a8a3d26;border-color:#5a8a3d4d}.event-chat[_ngcontent-%COMP%]   .reactions-btn.user-reacted[_ngcontent-%COMP%]{background:#5a8a3d33;border-color:#5a8a3d66;font-weight:600}.event-chat[_ngcontent-%COMP%]   .reactions-picker[_ngcontent-%COMP%]{position:relative;display:inline-block}.event-chat[_ngcontent-%COMP%]   .emoji-picker[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:0;background:var(--c-surface);border:1px solid rgba(0,0,0,.12);border-radius:8px;padding:.5rem;display:flex;gap:.5rem;flex-wrap:wrap;width:max-content;max-width:220px;box-shadow:0 4px 12px #00000026;z-index:1000;margin-bottom:.5rem}.event-chat[_ngcontent-%COMP%]   .emoji-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;padding:.35rem;cursor:pointer;font-size:1.25rem;transition:all .2s;border-radius:4px;line-height:1}.event-chat[_ngcontent-%COMP%]   .emoji-btn[_ngcontent-%COMP%]:hover{background:#5a8a3d1f;border-color:#5a8a3d4d}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{transition:background .2s ease;padding:.5rem;margin-bottom:1rem;border-radius:4px}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]:hover{background:#5a8a3d0a}.event-chat[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;color:var(--c-primary);text-decoration:none;font-size:.9rem;padding:.25rem .5rem;background:#5a8a3d14;border-radius:4px;margin-top:.5rem;word-break:break-all}.event-chat[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]:hover{text-decoration:underline;background:#5a8a3d1f}.event-chat[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{font-size:.75rem;color:var(--c-muted);margin-top:.25rem}.event-chat[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#dc354514;border:1px solid rgba(220,53,69,.2);color:#721c24;padding:.75rem;border-radius:4px;font-size:.9rem;margin-bottom:1rem}.event-chat[_ngcontent-%COMP%]   .online-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--c-muted)}.event-chat[_ngcontent-%COMP%]   .online-indicator[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;background:#28a745;border-radius:50%;margin-right:.25rem}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{position:relative}.event-chat[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   .online-dot[_ngcontent-%COMP%]{position:absolute;right:-2px;bottom:-2px;width:10px;height:10px;background:#28a745;border:2px solid #fff;border-radius:50%;box-shadow:0 1px 3px #0000001f}.event-chat[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{gap:.5rem}.event-chat[_ngcontent-%COMP%]   .attach-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.375rem .5rem;border-radius:6px;border:1px solid rgba(0,0,0,.08);background:transparent}.event-chat[_ngcontent-%COMP%]   .attach-btn[_ngcontent-%COMP%]:hover{background:#00000008}.event-chat[_ngcontent-%COMP%]   .online-dot-list[_ngcontent-%COMP%]{color:#28a745;font-size:.8rem;line-height:1}.event-chat[_ngcontent-%COMP%]   .card-sm[_ngcontent-%COMP%]{border-radius:8px;background:#fff}@media (max-width: 576px){.event-chat[_ngcontent-%COMP%]   .emoji-picker[_ngcontent-%COMP%]{max-width:180px}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{padding:.35rem;margin-bottom:.75rem}.event-chat[_ngcontent-%COMP%]   .chat-controls[_ngcontent-%COMP%]{gap:.35rem}.event-chat[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{font-size:.8rem;padding:.2rem .35rem}}.event-chat[_ngcontent-%COMP%]   .avatar-popover[_ngcontent-%COMP%]{position:fixed;z-index:2000}.event-chat[_ngcontent-%COMP%]   .popover-card[_ngcontent-%COMP%]{min-width:200px}.event-chat[_ngcontent-%COMP%]   .chat-bubble[_ngcontent-%COMP%]{transition:transform .12s ease,box-shadow .12s ease}.event-chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]:hover   .chat-bubble[_ngcontent-%COMP%]{transform:translateY(-2px);box-shadow:0 6px 18px #0000000f}.event-chat[_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{scroll-behavior:smooth}@media (max-width: 576px){.event-chat[_ngcontent-%COMP%]   .avatar-popover[_ngcontent-%COMP%]{position:fixed;inset:auto 8px 8px!important}.event-chat[_ngcontent-%COMP%]   .popover-card[_ngcontent-%COMP%]{width:auto}}"]})};function Ute(n,e){n&1&&(_(0,"div",7)(1,"div",8)(2,"span",9),b(3,"Loading..."),v()()())}function jte(n,e){if(n&1&&(_(0,"div",10),b(1),v()),n&2){let t=F();w(),_e(" ",t.error()," ")}}function Bte(n,e){if(n&1&&oe(0,"img",36),n&2){let t=F(2);A("alt",ho(t.creatorProfile==null?null:t.creatorProfile.displayName))("src",t.creatorProfile==null?null:t.creatorProfile.profilePicture,Ot)}}function $te(n,e){if(n&1&&(_(0,"div",37),b(1),v()),n&2){let t=F().ngIf,r=F();w(),xe(((r.creatorProfile==null?null:r.creatorProfile.displayName)||t.creator||"?").charAt(0))}}function Hte(n,e){if(n&1&&(_(0,"span",38),b(1),v()),n&2){let t=F().ngIf;w(),_e("(",t.creatorEmail,")")}}function qte(n,e){if(n&1&&(_(0,"p",26)(1,"strong"),b(2,"\u{1F527} Work Type:"),v(),b(3),v()),n&2){let t=F().ngIf;w(3),_e(" ",t.workType," ")}}function zte(n,e){if(n&1&&(_(0,"p",26)(1,"a",39),b(2,"Open in Google Maps"),v()()),n&2){let t=F().ngIf;w(),A("href","https://www.google.com/maps/search/?api=1&query="+t.latitude+","+t.longitude,Ot)}}function Wte(n,e){n&1&&(_(0,"span",40),b(1,"Full"),v())}function Gte(n,e){if(n&1&&(_(0,"div",41)(1,"h5"),b(2,"Location Preview"),v(),_(3,"div",11)(4,"div",42),oe(5,"div",43),v(),_(6,"div",42),oe(7,"iframe",44),v()()()),n&2){let t=F().ngIf;w(7),A("src","https://www.google.com/maps/embed/v1/place?key=AIzaSyDvBq_sMajKjLjjvFaYxRx8xMXviBNfXrI&q="+t.latitude+","+t.longitude,Yg)}}function Kte(n,e){if(n&1){let t=ve();_(0,"div",45)(1,"div",46)(2,"button",47),H("click",function(){Q(t);let i=F(2);return Y(i.editEvent())}),b(3," \u270F\uFE0F Edit Event "),v(),_(4,"button",48),H("click",function(){Q(t);let i=F(2);return Y(i.deleteEvent())}),b(5," \u{1F5D1}\uFE0F Delete Event "),v()()()}if(n&2){let t=F(2);w(4),A("disabled",t.isActionLoading())}}function Qte(n,e){n&1&&(_(0,"span"),b(1,"\u2705 Attend Event"),v())}function Yte(n,e){n&1&&(_(0,"span"),b(1,"\u{1F6AB} Event Full"),v())}function Zte(n,e){n&1&&(_(0,"span"),oe(1,"span",53),b(2," Joining... "),v())}function Xte(n,e){if(n&1){let t=ve();_(0,"button",52),H("click",function(){Q(t);let i=F(3);return Y(i.joinEvent())}),G(1,Qte,2,0,"span",35)(2,Yte,2,0,"span",35)(3,Zte,3,0,"span",35),v()}if(n&2){let t=F(3);A("disabled",t.isActionLoading()||t.isEventFull()),w(),A("ngIf",!t.isActionLoading()&&!t.isEventFull()),w(),A("ngIf",t.isEventFull()&&!t.isActionLoading()),w(),A("ngIf",t.isActionLoading())}}function Jte(n,e){n&1&&(_(0,"span"),b(1,"\u274C Leave Event"),v())}function ene(n,e){n&1&&(_(0,"span"),oe(1,"span",53),b(2," Leaving... "),v())}function tne(n,e){if(n&1){let t=ve();_(0,"button",54),H("click",function(){Q(t);let i=F(3);return Y(i.leaveEvent())}),G(1,Jte,2,0,"span",35)(2,ene,3,0,"span",35),v()}if(n&2){let t=F(3);A("disabled",t.isActionLoading()),w(),A("ngIf",!t.isActionLoading()),w(),A("ngIf",t.isActionLoading())}}function nne(n,e){if(n&1&&(_(0,"div",49),G(1,Xte,4,4,"button",50)(2,tne,3,3,"button",51),v()),n&2){let t=F(2);w(),A("ngIf",!t.isAttending()),w(),A("ngIf",t.isAttending())}}function rne(n,e){if(n&1&&(_(0,"div"),oe(1,"app-event-chat",55),v()),n&2){let t=e.ngIf;w(),A("eventId",t.id)("creatorUid",t.creatorUid)}}function ine(n,e){if(n&1&&(_(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div",17),G(7,Bte,1,3,"img",18)(8,$te,2,1,"div",19),v(),_(9,"div",20)(10,"h2",21),b(11),v(),_(12,"p",22),b(13," Created by "),_(14,"strong"),b(15),v(),G(16,Hte,2,1,"span",23),v()()()(),_(17,"div",24)(18,"div",11)(19,"div",25)(20,"p",26)(21,"strong"),b(22,"\u{1F4C5} Date:"),v(),b(23),v(),_(24,"p",26)(25,"strong"),b(26,"\u{1F552} Time:"),v(),b(27),v()(),_(28,"div",25)(29,"p",26)(30,"strong"),b(31,"\u{1F4CD} Location:"),v(),b(32),v(),G(33,qte,4,1,"p",27)(34,zte,3,1,"p",27),_(35,"p",26)(36,"strong"),b(37,"\u{1F465} Participants:"),v(),b(38),G(39,Wte,2,0,"span",28),v()()()(),G(40,Gte,8,1,"div",29),_(41,"div",30)(42,"h5"),b(43,"Description"),v(),_(44,"p"),b(45),v()(),G(46,Kte,6,1,"div",31)(47,nne,3,2,"div",32),v()()(),_(48,"div",33),oe(49,"app-participant-list",34),G(50,rne,2,2,"div",35),v()()),n&2){let t=e.ngIf,r=F();w(7),A("ngIf",r.creatorProfile==null?null:r.creatorProfile.profilePicture),w(),A("ngIf",!(r.creatorProfile!=null&&r.creatorProfile.profilePicture)),w(3),xe(t.title),w(4),xe((r.creatorProfile==null?null:r.creatorProfile.displayName)||t.creator),w(),A("ngIf",t.creatorEmail),w(7),_e(" ",t.date," "),w(4),_e(" ",t.time," "),w(5),_e(" ",t.location," "),w(),A("ngIf",t.workType),w(),A("ngIf",t.latitude&&t.longitude),w(4),_e(" ",r.getParticipantCountText()," "),w(),A("ngIf",r.isEventFull()),w(),A("ngIf",t.latitude&&t.longitude),w(5),xe(t.description),w(),A("ngIf",r.isCreator()),w(),A("ngIf",!r.isCreator()),w(2),A("participants",r.participants()),w(),A("ngIf",r.event())}}var Ky=class n{auth=S(Qe);eventService=S(Yn);userService=S(Zn);modalService=S(ot);route=S(wn);router=S(Xe);event=te(null);creatorProfile=null;participants=te([]);loading=te(!0);error=te("");isCreator=te(!1);isAttending=te(!1);isActionLoading=te(!1);currentUserUid;map=null;ngOnInit(){let e=this.auth.currentUser;this.currentUserUid=e?.uid,e?.emailVerified||this.modalService.openModal("unverified-email"),this.route.params.subscribe(t=>{let r=t.id;r&&this.loadEvent(r)})}ngOnDestroy(){try{this.map&&(this.map.remove(),this.map=null)}catch{}}loadEvent(e){return E(this,null,function*(){this.loading.set(!0),this.error.set("");try{let t=yield this.eventService.getEvent(e);if(t){this.event.set(t),this.isCreator.set(t.creatorUid===this.currentUserUid),this.isAttending.set(t.participants?.includes(this.currentUserUid||"")||!1);try{let r=yield this.userService.getUserByUid(t.creatorUid);r&&(this.creatorProfile={displayName:r.displayName,profilePicture:r.profilePicture})}catch(r){console.warn("Failed to load creator profile",r)}yield this.loadParticipants(e),typeof t.latitude=="number"&&typeof t.longitude=="number"&&setTimeout(()=>this.initializeMap(t.latitude,t.longitude),80)}else this.error.set("Event not found.")}catch(t){this.error.set(t?.message??"Failed to load event.")}finally{this.loading.set(!1)}})}initializeMap(e,t){try{if(typeof L>"u")return;this.map&&(this.map.remove(),this.map=null);let r=document.getElementById("event-map");if(!r)return;this.map=L.map(r).setView([e,t],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),L.marker([e,t]).addTo(this.map)}catch(r){console.warn("Failed to init map",r)}}loadParticipants(e){return E(this,null,function*(){try{let t=yield this.eventService.getParticipants(e);this.participants.set(t)}catch(t){console.error("Error loading participants:",t)}})}joinEvent(){return E(this,null,function*(){let e=this.event();if(e?.id){this.isActionLoading.set(!0);try{yield this.eventService.joinEvent(e.id),this.isAttending.set(!0),yield this.loadEvent(e.id)}catch(t){this.error.set(t.message||"Failed to join event")}finally{this.isActionLoading.set(!1)}}})}isEventFull(){let e=this.event();return!e||!e.memberCap||!e.participants?!1:e.participants.length>=e.memberCap}getParticipantCountText(){let e=this.event();if(!e)return"";let t=e.participants?.length||0;return e.memberCap?`${t} / ${e.memberCap}`:`${t}`}leaveEvent(){return E(this,null,function*(){let e=this.event();if(e?.id){this.isActionLoading.set(!0);try{yield this.eventService.leaveEvent(e.id),this.isAttending.set(!1),yield this.loadEvent(e.id)}catch(t){this.error.set(t.message||"Failed to leave event")}finally{this.isActionLoading.set(!1)}}})}deleteEvent(){return E(this,null,function*(){let e=this.event();if(e?.id&&confirm(`Are you sure you want to delete "${e.title}"?`)){this.isActionLoading.set(!0);try{yield this.eventService.deleteEvent(e.id),this.router.navigate(["/events"])}catch(t){this.error.set(t.message||"Failed to delete event")}finally{this.isActionLoading.set(!1)}}})}editEvent(){let e=this.event();e?.id&&this.router.navigate(["/edit-event",e.id])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-event-details"]],decls:8,vars:3,consts:[[1,"event-details-viewport","container","py-4"],[1,"row","mb-3"],[1,"col-12"],["routerLink","/events",1,"btn","btn-sm","btn-outline-secondary"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger"],[1,"row"],[1,"col-12","col-lg-8","mb-4"],[1,"card","shadow-sm","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"d-flex","gap-3","align-items-center","flex-grow-1"],[1,"creator-avatar","me-2"],["class","rounded-circle","style","width:56px;height:56px;object-fit:cover;",3,"src","alt",4,"ngIf"],["class","avatar-fallback rounded-circle","style","width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));color:var(--cornsilk);font-weight:700;",4,"ngIf"],[1,"flex-grow-1"],[1,"card-title","text-primary","mb-2"],[1,"text-muted","mb-0"],["class","text-muted",4,"ngIf"],[1,"event-meta","mb-4"],[1,"col-md-6"],[1,"mb-2"],["class","mb-2",4,"ngIf"],["class","badge bg-danger ms-2",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"event-description"],["class","mt-4 mb-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"col-12","col-lg-4"],[3,"participants"],[4,"ngIf"],[1,"rounded-circle",2,"width","56px","height","56px","object-fit","cover",3,"src","alt"],[1,"avatar-fallback","rounded-circle",2,"width","56px","height","56px","display","flex","align-items","center","justify-content","center","background","linear-gradient(135deg,var(--sunlit-clay),var(--copperwood))","color","var(--cornsilk)","font-weight","700"],[1,"text-muted"],["target","_blank","rel","noopener",3,"href"],[1,"badge","bg-danger","ms-2"],[1,"mb-4"],[1,"col-12","col-md-6","mb-3"],["id","event-map",2,"width","100%","height","260px","border-radius","8px","overflow","hidden","border","1px solid #ddd"],["width","100%","height","260","loading","lazy","allowfullscreen","","referrerpolicy","no-referrer-when-downgrade",2,"border-radius","8px","border","1px solid #ddd",3,"src"],[1,"mt-4","mb-4"],[1,"d-flex","flex-column","flex-sm-row","gap-2"],["type","button",1,"btn","btn-warning","text-dark","btn-sm","flex-grow-1",2,"white-space","nowrap","padding","0.5rem 1rem",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","flex-grow-1",2,"white-space","nowrap","padding","0.5rem 1rem",3,"click","disabled"],[1,"mt-4"],["class","btn btn-success btn-lg w-100",3,"disabled","click",4,"ngIf"],["class","btn btn-danger btn-lg w-100",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success","btn-lg","w-100",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"btn","btn-danger","btn-lg","w-100",3,"click","disabled"],[3,"eventId","creatorUid"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),b(4,"\u2190 Back to Events"),v()()(),G(5,Ute,4,0,"div",4)(6,jte,2,1,"div",5)(7,ine,51,18,"div",6),v()),t&2&&(w(5),A("ngIf",r.loading()),w(),A("ngIf",!r.loading()&&r.error()),w(),A("ngIf",!r.loading()&&r.event()))},dependencies:[Bi,$e,rt,Mt,ht,ey,Gy],styles:['[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.event-details-viewport[_ngcontent-%COMP%]{min-height:90vh}.profile-thumb-box[_ngcontent-%COMP%]{margin-bottom:2rem}.profile-thumb[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:12px;object-fit:cover;box-shadow:0 4px 12px #28361826;transition:transform .2s ease}.profile-thumb[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.profile-thumb-initials[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:12px;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;color:var(--cornsilk);box-shadow:0 4px 12px #28361826}.event-detail-card[_ngcontent-%COMP%]{border-radius:12px;border:2px solid rgba(40,54,24,.1);box-shadow:0 4px 12px #28361814}.event-detail-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:1.5rem;font-size:1.75rem}.event-meta[_ngcontent-%COMP%]{background:#2836180a;padding:1rem;border-radius:8px;border-left:4px solid var(--sunlit-clay)}.meta-item[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--black-forest)}.meta-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.event-description[_ngcontent-%COMP%]{margin-top:1.5rem}.event-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#283618cc;line-height:1.6;margin-top:.5rem}.event-image[_ngcontent-%COMP%]{margin-top:1.5rem}.event-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #2836181a;max-height:400px;width:100%;object-fit:cover}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--black-forest);color:var(--black-forest)}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk)}@media (max-width: 768px){.event-detail-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.5rem;left:30px;width:440px;height:120px;z-index:5}.container-2[_ngcontent-%COMP%]{min-height:480px}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}}.badge[_ngcontent-%COMP%]{font-weight:600;padding:.35rem .65rem;letter-spacing:.5px}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.event-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600}#event-map[_ngcontent-%COMP%]{box-shadow:0 2px 8px #2836181a;transition:box-shadow .3s ease}#event-map[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #28361826}iframe[src*="google.com/maps"][_ngcontent-%COMP%]{box-shadow:0 2px 8px #2836181a;transition:box-shadow .3s ease}iframe[src*="google.com/maps"][_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #28361826}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn-success[_ngcontent-%COMP%]:disabled{background-color:#6c757d;border-color:#6c757d}.btn-success[_ngcontent-%COMP%]{background-color:var(--olive-leaf);border-color:var(--olive-leaf);font-weight:600;transition:all .2s ease}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--black-forest);border-color:var(--black-forest);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-danger[_ngcontent-%COMP%]{font-weight:600;transition:all .2s ease}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dc354533}.btn-warning[_ngcontent-%COMP%]{font-weight:600;transition:all .2s ease}.btn-warning[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #dda15e33}.btn-sm[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.875rem;border-radius:6px;touch-action:manipulation;-webkit-user-select:none;user-select:none}@media (max-width: 768px){.event-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}#event-map[_ngcontent-%COMP%], iframe[src*="google.com/maps"][_ngcontent-%COMP%]{height:220px!important}.btn-sm[_ngcontent-%COMP%]{min-width:100px}}']})};function one(n,e){n&1&&(_(0,"span"),b(1,"\u2795 Create New Event"),v())}function sne(n,e){n&1&&(_(0,"span"),b(1,"\u270F\uFE0F Edit Event"),v())}function ane(n,e){if(n&1&&(_(0,"div",44),b(1),v()),n&2){let t=F();w(),_e(" ",t.errorMessage()," ")}}function cne(n,e){if(n&1&&(_(0,"div",45),b(1),v()),n&2){let t=F();w(),_e(" ",t.dateError()," ")}}function lne(n,e){n&1&&(_(0,"span"),b(1,"\u2705 Create Event"),v())}function une(n,e){n&1&&(_(0,"span"),b(1,"\u{1F4BE} Save Changes"),v())}function dne(n,e){n&1&&(_(0,"span"),b(1,"Creating..."),v())}function hne(n,e){n&1&&(_(0,"span"),b(1,"Saving..."),v())}function fne(n,e){if(n&1&&(_(0,"span"),oe(1,"span",46),G(2,dne,2,0,"span",7)(3,hne,2,0,"span",7),v()),n&2){let t=F();w(2),A("ngIf",!t.isEditMode()),w(),A("ngIf",t.isEditMode())}}var Kf=class n{auth=S(Qe);router=S(Xe);route=S(wn);modalService=S(ot);eventService=S(Yn);userService=S(Zn);dateToday=new Date;isEditMode=te(!1);editEventId=te(null);eventTitle=te("");eventDate=te("");eventTime=te("");eventLocation=te("");eventLatitude=te("");eventLongitude=te("");eventWorkType=te("");eventMemberCap=te("");eventDescription=te("");isLoading=te(!1);errorMessage=te("");dateError=te("");ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}e.emailVerified||this.modalService.openModal("unverified-email"),this.route.params.subscribe(t=>E(this,null,function*(){t.id&&(this.editEventId.set(t.id),this.isEditMode.set(!0),yield this.loadEventForEdit(t.id))}))}loadEventForEdit(e){return E(this,null,function*(){this.isLoading.set(!0);try{let t=yield this.eventService.getEvent(e);t?(this.eventTitle.set(t.title),this.eventDescription.set(t.description),this.eventLocation.set(t.location),this.eventDate.set(this.formatDateForInput(t.date)),this.eventTime.set(t.time),t.latitude&&this.eventLatitude.set(t.latitude.toString()),t.longitude&&this.eventLongitude.set(t.longitude.toString()),t.workType&&this.eventWorkType.set(t.workType),t.memberCap&&this.eventMemberCap.set(t.memberCap.toString())):this.errorMessage.set("Event not found")}catch(t){this.errorMessage.set(t.message||"Failed to load event"),console.error("Error loading event for edit:",t)}finally{this.isLoading.set(!1)}})}formatDateForInput(e){let t=new Date(e),r=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${r}-${i}-${o}`}getTodayDate(){let e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${i}`}validateEventDate(){let e=this.eventDate();if(!e)return this.dateError.set(""),!0;let t=new Date;t.setHours(0,0,0,0);let r=new Date(e);return r.setHours(0,0,0,0),r<t?(this.dateError.set("Event date cannot be in the past"),!1):(this.dateError.set(""),!0)}createEvent(){return E(this,null,function*(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(!e.emailVerified){this.modalService.openModal("unverified-email");return}let t=this.eventTitle(),r=new Date(this.eventDate()),i=this.eventTime(),o=this.eventLocation(),s=parseFloat(this.eventLatitude()||"")||void 0,a=parseFloat(this.eventLongitude()||"")||void 0,c=this.eventWorkType(),u=this.eventMemberCap()?parseInt(this.eventMemberCap()):void 0,d=this.eventDescription(),f=e.displayName||e.email||"Unknown";if(r<this.dateToday){this.errorMessage.set("Date has already passed!");return}if(!t||!r||!i||!o||!d){this.errorMessage.set("Please fill in all required fields");return}if(this.validateEventDate()){this.isLoading.set(!0),this.errorMessage.set("");try{let p;try{let I=yield this.userService.getCurrentUserProfile();I&&I.profilePicture&&(p=I.profilePicture)}catch{}let m={title:t,date:r,time:i,location:o,description:d,creator:f};if(p&&(m.creatorProfilePicture=p),s!==void 0&&(m.latitude=s),a!==void 0&&(m.longitude=a),c&&(m.workType=c),u!==void 0&&(m.memberCap=u),this.isEditMode()){let I=this.editEventId();if(!I){this.errorMessage.set("Event ID is missing");return}yield this.eventService.updateEvent(I,m)}else yield this.eventService.createEvent(m);this.eventTitle.set(""),this.eventDate.set(""),this.eventTime.set(""),this.eventLocation.set(""),this.eventDescription.set(""),this.eventMemberCap.set(""),this.eventWorkType.set(""),this.router.navigate(["/events"])}catch(p){this.errorMessage.set(p.message||"Failed to save event"),console.error("Error saving event:",p)}finally{this.isLoading.set(!1)}}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-create-events-page"]],decls:71,vars:20,consts:[["eventForm","ngForm"],[1,"container","py-4"],[1,"row","justify-content-start"],[1,"col-12","col-lg-8"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-4","text-primary"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["novalidate","",3,"ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["id","title","type","text","required","","placeholder","e.g., Community Cleanup, Basketball Tournament",1,"form-control",3,"input","value"],["for","description",1,"form-label"],["id","description","rows","5","required","","placeholder","Describe your event in detail...",1,"form-control",3,"input","value"],[1,"row"],[1,"col-md-6","mb-3"],["for","location",1,"form-label"],["id","location","type","text","required","","placeholder","Event location",1,"form-control",3,"input","value"],["for","workType",1,"form-label"],["id","workType",1,"form-select",3,"change","value"],["value",""],["value","cleanup"],["value","mentoring"],["value","food_drive"],["value","construction"],["value","other"],["for","date",1,"form-label"],[1,"text-muted",2,"font-size","0.875rem"],["id","date","type","date","required","",1,"form-control",3,"input","change","value","min"],["class","invalid-feedback d-block",4,"ngIf"],["for","memberCap",1,"form-label"],["id","memberCap","type","number","min","1","placeholder","Max participants (leave blank for no limit)",1,"form-control",3,"input","value"],[1,"mb-4"],["for","time",1,"form-label"],["id","time","type","time","required","","placeholder","Event time",1,"form-control",3,"input","value"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-primary","btn-lg",3,"click","disabled"],["routerLink","/events",1,"btn","btn-outline-secondary","btn-lg"],[1,"col-6","mb-3"],["for","latitude",1,"form-label"],["id","latitude","type","text","placeholder","Optional latitude",1,"form-control",3,"input","value"],["for","longitude",1,"form-label"],["id","longitude","type","text","placeholder","Optional longitude",1,"form-control",3,"input","value"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback","d-block"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){if(t&1){let i=ve();_(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),G(6,one,2,0,"span",7)(7,sne,2,0,"span",7),v(),G(8,ane,2,1,"div",8),_(9,"form",9,0),H("ngSubmit",function(){return Q(i),Y(r.createEvent())}),_(11,"div",10)(12,"label",11),b(13,"Event Title *"),v(),_(14,"input",12),H("input",function(s){return Q(i),Y(r.eventTitle.set(s.target.value))}),v()(),_(15,"div",10)(16,"label",13),b(17,"Description *"),v(),_(18,"textarea",14),H("input",function(s){return Q(i),Y(r.eventDescription.set(s.target.value))}),v()(),_(19,"div",15)(20,"div",16)(21,"label",17),b(22,"Location *"),v(),_(23,"input",18),H("input",function(s){return Q(i),Y(r.eventLocation.set(s.target.value))}),v()(),_(24,"div",16)(25,"label",19),b(26,"Work Type"),v(),_(27,"select",20),H("change",function(s){return Q(i),Y(r.eventWorkType.set(s.target.value))}),_(28,"option",21),b(29,"Select type (e.g., Cleanup, Tutoring, Food Drive)"),v(),_(30,"option",22),b(31,"Cleanup"),v(),_(32,"option",23),b(33,"Mentoring"),v(),_(34,"option",24),b(35,"Food Drive"),v(),_(36,"option",25),b(37,"Construction / Repair"),v(),_(38,"option",26),b(39,"Other"),v()()(),_(40,"div",16)(41,"label",27),b(42,"Date * "),_(43,"span",28),b(44,"(cannot be in the past)"),v()(),_(45,"input",29),H("input",function(s){return Q(i),r.eventDate.set(s.target.value),Y(r.validateEventDate())})("change",function(){return Q(i),Y(r.validateEventDate())}),v(),G(46,cne,2,1,"div",30),v(),_(47,"div",16)(48,"label",31),b(49,"Member Cap (Optional)"),v(),_(50,"input",32),H("input",function(s){return Q(i),Y(r.eventMemberCap.set(s.target.value))}),v()()(),_(51,"div",33)(52,"label",34),b(53,"Time *"),v(),_(54,"input",35),H("input",function(s){return Q(i),Y(r.eventTime.set(s.target.value))}),v()(),_(55,"div",36)(56,"button",37),H("click",function(){return Q(i),Y(r.createEvent())}),G(57,lne,2,0,"span",7)(58,une,2,0,"span",7)(59,fne,4,2,"span",7),v(),_(60,"a",38),b(61," Cancel "),v()()()()(),_(62,"div",15)(63,"div",39)(64,"label",40),b(65,"Latitude"),v(),_(66,"input",41),H("input",function(s){return Q(i),Y(r.eventLatitude.set(s.target.value))}),v()(),_(67,"div",39)(68,"label",42),b(69,"Longitude"),v(),_(70,"input",43),H("input",function(s){return Q(i),Y(r.eventLongitude.set(s.target.value))}),v()()()()()()}t&2&&(w(6),A("ngIf",!r.isEditMode()),w(),A("ngIf",r.isEditMode()),w(),A("ngIf",r.errorMessage()),w(6),A("value",r.eventTitle()),w(4),A("value",r.eventDescription()),w(5),A("value",r.eventLocation()),w(4),A("value",r.eventWorkType()),w(18),ct("is-invalid",r.dateError()),A("value",r.eventDate())("min",r.getTodayDate()),w(),A("ngIf",r.dateError()),w(4),A("value",r.eventMemberCap()),w(4),A("value",r.eventTime()),w(2),A("disabled",r.isLoading()||r.dateError()!==""),w(),A("ngIf",!r.isLoading()&&!r.isEditMode()),w(),A("ngIf",!r.isLoading()&&r.isEditMode()),w(),A("ngIf",r.isLoading()),w(7),A("value",r.eventLatitude()),w(4),A("value",r.eventLongitude()))},dependencies:[$e,rt,Bi,ji,PU,kU,Ui,ec,Mt,ht],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 12px 30px #2836180f;border:1px solid rgba(40,54,24,.06)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.card-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.75rem}.card[_ngcontent-%COMP%]   .mb-3[_ngcontent-%COMP%]:first-of-type{max-width:70%}.card[_ngcontent-%COMP%]   .ms-4[_ngcontent-%COMP%]{margin-left:1.5rem!important;max-width:60%}.card[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{min-height:160px;border-radius:6px;resize:vertical}.d-flex.align-items-center[_ngcontent-%COMP%]   input.form-control[type=date][_ngcontent-%COMP%]{max-width:260px;border-radius:6px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e0e0e0;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:hover, .form-select[_ngcontent-%COMP%]:hover{border-color:var(--olive-leaf)}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c3826}input[type=number][_ngcontent-%COMP%]{max-width:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(180deg,var(--sunlit-clay),var(--copperwood));border:none;color:var(--cornsilk);box-shadow:0 6px 18px #bc6c251f;font-weight:600;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #bc6c252e}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--olive-leaf);color:var(--olive-leaf);background:transparent;font-weight:600;transition:all .2s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--olive-leaf);color:#fff}label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500;margin-bottom:.5rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24;border-radius:6px}.card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c381f}@media (max-width: 576px){.card[_ngcontent-%COMP%]   .mb-3[_ngcontent-%COMP%]:first-of-type, .card[_ngcontent-%COMP%]   .ms-4[_ngcontent-%COMP%]{max-width:100%;margin-left:0!important}.d-flex.align-items-center[_ngcontent-%COMP%]   input.form-control[type=date][_ngcontent-%COMP%]{max-width:100%}}"]})};var QB=n=>["/event-details",n];function pne(n,e){if(n&1&&(_(0,"div",15),b(1),v()),n&2){let t=F();w(),_e(" ",t.getInitials()," ")}}function gne(n,e){if(n&1&&oe(0,"img",16),n&2){let t=F();A("src",t.profilePicture,Ot)}}function mne(n,e){if(n&1){let t=ve();_(0,"div",17),b(1),_(2,"button",18),H("click",function(){Q(t);let i=F();return Y(i.error="")}),v()()}if(n&2){let t=F();w(),_e(" ",t.error," ")}}function vne(n,e){if(n&1){let t=ve();_(0,"div",19),b(1),_(2,"button",18),H("click",function(){Q(t);let i=F();return Y(i.success="")}),v()()}if(n&2){let t=F();w(),_e(" ",t.success," ")}}function _ne(n,e){n&1&&(_(0,"div",20)(1,"div",21)(2,"span",22),b(3,"Loading..."),v()()())}function yne(n,e){if(n&1){let t=ve();_(0,"div",34)(1,"button",35),H("click",function(){Q(t);let i=F(2);return Y(i.toggleEdit())}),b(2,"Edit Profile"),v(),_(3,"button",36),H("click",function(){Q(t);let i=F(2);return Y(i.logout())}),b(4,"Logout"),v()()}}function Ene(n,e){n&1&&(_(0,"div",37),b(1,"No events created yet."),v())}function wne(n,e){n&1&&(_(0,"span"),b(1,"\u2026"),v())}function bne(n,e){if(n&1&&(_(0,"a",48),b(1,"Manage"),v()),n&2){let t=F().$implicit;A("routerLink",yn(1,QB,t.id))}}function Ine(n,e){if(n&1&&(_(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"h6",42),b(5),v(),_(6,"small",43),b(7),v()(),_(8,"p",44),b(9),fo(10,"slice"),G(11,wne,2,0,"span",13),v(),_(12,"div",45)(13,"a",46),b(14,"View Details"),v(),G(15,bne,2,3,"a",47),v()()()()),n&2){let t=e.$implicit,r=F(2);w(5),xe(t.title),w(2),Qc("",t.date," \xB7 ",t.time),w(2),xe(Ad(10,7,t.description||"",0,140)),w(2),A("ngIf",(t.description||"").length>140),w(2),A("routerLink",yn(11,QB,t.id)),w(2),A("ngIf",r.isOwner)}}function Cne(n,e){if(n&1&&(_(0,"div")(1,"h4",23),b(2),v(),_(3,"div",24)(4,"span",25),b(5,"Email:"),v(),_(6,"span",26),b(7),v()(),_(8,"div",24)(9,"span",25),b(10,"Phone:"),v(),_(11,"span",26),b(12),v()(),_(13,"div",24)(14,"span",25),b(15,"Location:"),v(),_(16,"span",26),b(17),v()(),_(18,"div",24)(19,"span",25),b(20,"Bio:"),v(),_(21,"p",27),b(22),v()(),G(23,yne,5,0,"div",28),_(24,"div",29)(25,"h5",30),b(26),v(),G(27,Ene,2,0,"div",31),_(28,"div",32),G(29,Ine,16,13,"div",33),v()()()),n&2){let t=F();w(2),xe(t.displayName||"No Name"),w(5),xe(t.email),w(5),xe(t.phone||"Not provided"),w(5),xe(t.location||"Not provided"),w(5),xe(t.bio||"No bio provided"),w(),A("ngIf",t.isOwner),w(3),_e("Events created by ",t.displayName||"this user"),w(),A("ngIf",t.eventsCreated.length===0),w(2),A("ngForOf",t.eventsCreated)}}function Tne(n,e){if(n&1&&(_(0,"div",30)(1,"label",62),b(2,"Upload Progress"),v(),_(3,"div",69)(4,"div",70),b(5),v()()()),n&2){let t=F(2);w(4),_i("width",t.uploadProgress,"%"),vi("aria-valuenow",t.uploadProgress),w(),_e(" ",t.uploadProgress,"% ")}}function Dne(n,e){n&1&&oe(0,"span",71)}function Sne(n,e){if(n&1){let t=ve();_(0,"form",49,0),H("ngSubmit",function(){Q(t);let i=F();return Y(i.saveProfile())}),_(2,"div",30)(3,"label",50),b(4,"Display Name"),v(),_(5,"input",51),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.displayName,i)||(o.displayName=i),Y(i)}),v()(),_(6,"div",30)(7,"label",52),b(8,"Email"),v(),_(9,"input",53),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.email,i)||(o.email=i),Y(i)}),v(),_(10,"small",43),b(11,"Email cannot be changed."),v()(),_(12,"div",30)(13,"label",54),b(14,"Phone"),v(),_(15,"input",55),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.phone,i)||(o.phone=i),Y(i)}),v()(),_(16,"div",30)(17,"label",56),b(18,"Location"),v(),_(19,"input",57),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.location,i)||(o.location=i),Y(i)}),v()(),_(20,"div",30)(21,"label",58),b(22,"Bio"),v(),_(23,"textarea",59),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.bio,i)||(o.bio=i),Y(i)}),v()(),_(24,"div",30)(25,"label",60),b(26,"Profile Picture URL"),v(),_(27,"input",61),Tr("ngModelChange",function(i){Q(t);let o=F();return Qr(o.profilePicture,i)||(o.profilePicture=i),Y(i)}),v()(),_(28,"div",30)(29,"label",62),b(30,"Upload Profile Picture"),v(),_(31,"div",63)(32,"input",64),H("change",function(i){Q(t);let o=F();return Y(o.uploadProfilePicture(i.target.files?i.target.files[0]:null))}),v(),_(33,"small",65),b(34,"Recommended: JPG or PNG, max 5 MB. Image will be cropped to circle."),v()()(),G(35,Tne,6,4,"div",66),_(36,"div",34)(37,"button",67),G(38,Dne,1,0,"span",68),b(39," Save Changes "),v(),_(40,"button",36),H("click",function(){Q(t);let i=F();return Y(i.toggleEdit())}),b(41,"Cancel"),v()()()}if(n&2){let t=_b(1),r=F();w(5),Cr("ngModel",r.displayName),w(4),Cr("ngModel",r.email),w(6),Cr("ngModel",r.phone),w(4),Cr("ngModel",r.location),w(4),Cr("ngModel",r.bio),w(4),Cr("ngModel",r.profilePicture),w(8),A("ngIf",r.uploadProgress>0&&r.uploadingPicture),w(2),A("disabled",t.invalid||r.loading),w(),A("ngIf",r.loading)}}var Qf=class n{auth=S(Qe);firestore=S(Gt);router=S(Xe);route=S(wn);modalService=S(ot);eventService=S(Yn);displayName="";email="";phone="";bio="";location="";profilePicture="";loading=!1;error="";success="";isEditing=!1;viewedUid=null;isOwner=!1;eventsCreated=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("uid");e&&(this.viewedUid=e),this.loadProfile()}loadProfile(){return E(this,null,function*(){this.loading=!0;try{let e=this.auth.currentUser,t=this.viewedUid??e?.uid??null;if(!t){this.error="No user specified and no user logged in.",e||this.modalService.openModal("login");return}this.isOwner=!!(e&&e.uid===t);let r=yield Li(et(this.firestore,"users",t));if(r.exists()){let i=r.data();this.displayName=i.displayName||"",this.email=i.email||"",this.phone=i.phone||"",this.bio=i.bio||"",this.location=i.location||"",this.profilePicture=i.profilePicture||""}else this.isOwner&&e?this.email=e.email||"":this.error="Profile not found.";try{t&&(this.isOwner?this.eventService.getMyEvents():this.eventService.getEventsByCreator(t)).subscribe(o=>{this.eventsCreated=(o||[]).slice().sort((s,a)=>{let c=s.createdAt?new Date(s.createdAt).getTime():0;return(a.createdAt?new Date(a.createdAt).getTime():0)-c})})}catch(i){console.warn("Failed to load created events",i)}}catch(e){this.error=e?.message??"Failed to load profile."}finally{this.loading=!1}})}toggleEdit(){this.isEditing=!this.isEditing,this.error="",this.success=""}saveProfile(){return E(this,null,function*(){if(this.error="",this.success="",!this.displayName){this.error="Display name is required.";return}this.loading=!0;try{let e=this.auth.currentUser;if(!e){this.error="No user logged in.";return}yield rf(et(this.firestore,"users",e.uid),{displayName:this.displayName,email:this.email,phone:this.phone,bio:this.bio,location:this.location,profilePicture:this.profilePicture,updatedAt:new Date().toISOString()}),this.success="Profile saved successfully.",this.isEditing=!1}catch(e){this.error=e?.message??"Failed to save profile."}finally{this.loading=!1}})}uploadProgress=0;uploadingPicture=!1;uploadProfilePicture(e){return E(this,null,function*(){if(!e)return;this.error="",this.success="";let t=5*1024*1024;if(!e.type||!e.type.startsWith("image/")){this.error="Only image files are allowed (JPG, PNG, WebP, etc.).";return}if(e.size>t){this.error="File is too large. Maximum size is 5 MB.";return}this.uploadingPicture=!0,this.uploadProgress=0;try{let r=this.auth.currentUser;if(!r)throw new Error("Not logged in");let i=zy(),o=qy(i,`users/${r.uid}/profile.jpg`),s=$y(o,e);s.on("state_changed",a=>{let c=a.bytesTransferred/(a.totalBytes||1)*100;this.uploadProgress=Math.round(c)},a=>{this.uploadingPicture=!1,this.uploadProgress=0,this.error=a?.message??"Upload failed.",console.error("Upload error:",a)},()=>E(this,null,function*(){try{let a=yield Hy(s.snapshot.ref);this.profilePicture=a,yield Kn(et(this.firestore,"users",r.uid),{profilePicture:a,updatedAt:new Date().toISOString()}),this.success="Profile picture uploaded successfully!",this.uploadProgress=100,setTimeout(()=>{this.uploadingPicture=!1,this.uploadProgress=0},800)}catch(a){this.uploadingPicture=!1,this.uploadProgress=0,this.error=a?.message??"Failed to save profile picture. Please try again.",console.error("Finalize error:",a)}}))}catch(r){this.uploadingPicture=!1,this.uploadProgress=0,this.error=r?.message??"Upload failed. Please try again.",console.error("Upload init error:",r)}})}logout(){return E(this,null,function*(){try{yield Ah(this.auth),yield this.router.navigate(["/"])}catch(e){this.error=e?.message??"Logout failed."}})}getInitials(){let e=(this.displayName||"").trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():(this.displayName||"").charAt(0).toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-profile-details"]],decls:14,vars:7,consts:[["profileForm","ngForm"],[1,"profile-viewport","container-fluid","py-4"],[1,"row"],[1,"col-12","col-md-3","mb-4","mb-md-0"],[1,"profile-picture-box"],["class","profile-circle-large",4,"ngIf"],["alt","Profile Picture","class","profile-image",3,"src",4,"ngIf"],[1,"col-12","col-md-9"],[1,"card","profile-card"],[1,"card-body"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[1,"profile-circle-large"],["alt","Profile Picture",1,"profile-image",3,"src"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"profile-name"],[1,"profile-info-item"],[1,"profile-label"],[1,"profile-value"],[1,"profile-value","profile-bio"],["class","button-group mt-4",4,"ngIf"],[1,"mt-4"],[1,"mb-3"],["class","alert alert-info",4,"ngIf"],[1,"row","g-3"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],[1,"button-group","mt-4"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"alert","alert-info"],[1,"col-12","col-md-6"],[1,"card"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1","text-truncate"],[1,"text-muted"],[1,"card-text","text-muted","mb-3"],[1,"mt-auto","d-flex","gap-2"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],["class","btn btn-sm btn-outline-secondary",3,"routerLink",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],["novalidate","",3,"ngSubmit"],["for","displayName",1,"form-label"],["type","text","id","displayName","name","displayName","required","","placeholder","Your full name",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","disabled","","placeholder","your@email.com",1,"form-control",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["type","tel","id","phone","name","phone","placeholder","(555) 123-4567",1,"form-control",3,"ngModelChange","ngModel"],["for","location",1,"form-label"],["type","text","id","location","name","location","placeholder","City, State",1,"form-control",3,"ngModelChange","ngModel"],["for","bio",1,"form-label"],["id","bio","name","bio","rows","4","placeholder","Tell us about yourself...",1,"form-control",3,"ngModelChange","ngModel"],["for","profilePicture",1,"form-label"],["type","url","id","profilePicture","name","profilePicture","placeholder","https://example.com/image.jpg",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"upload-picture-zone"],["type","file","id","pictureUpload","name","pictureUpload","accept","image/*",1,"form-control",3,"change"],[1,"text-muted","d-block","mt-2"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-save",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){t&1&&(_(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),G(4,pne,2,1,"div",5)(5,gne,1,1,"img",6),v()(),_(6,"div",7)(7,"div",8)(8,"div",9),G(9,mne,3,1,"div",10)(10,vne,3,1,"div",11)(11,_ne,4,0,"div",12)(12,Cne,30,9,"div",13)(13,Sne,42,9,"form",14),v()()()()()),t&2&&(w(4),A("ngIf",!r.profilePicture),w(),A("ngIf",r.profilePicture),w(4),A("ngIf",r.error),w(),A("ngIf",r.success),w(),A("ngIf",r.loading),w(),A("ngIf",!r.loading&&!r.isEditing),w(),A("ngIf",!r.loading&&r.isEditing&&r.isOwner))},dependencies:[$e,Ar,rt,Bi,ji,Vi,Vs,Ui,HS,gf,ec,Mt,ht,Ld],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.profile-viewport[_ngcontent-%COMP%]{min-height:80vh;background-color:var(--cornsilk)}.profile-picture-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:280px}.profile-circle-large[_ngcontent-%COMP%]{width:240px;height:240px;border-radius:50%;background:linear-gradient(135deg,var(--sunlit-clay),var(--copperwood));display:flex;align-items:center;justify-content:center;font-size:4rem;font-weight:600;color:var(--cornsilk);box-shadow:0 8px 24px #606c3826}.profile-image[_ngcontent-%COMP%]{width:240px;height:240px;border-radius:50%;object-fit:cover;box-shadow:0 8px 24px #606c3826}.profile-card[_ngcontent-%COMP%]{border-radius:12px;border:1px solid rgba(96,108,56,.08);box-shadow:0 12px 32px #2836180f;background:#fff}.profile-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.profile-name[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:700;margin-bottom:1.5rem;font-size:1.75rem}.profile-info-item[_ngcontent-%COMP%]{display:flex;margin-bottom:1rem;align-items:flex-start}.profile-label[_ngcontent-%COMP%]{color:var(--olive-leaf);font-weight:600;min-width:120px}.profile-value[_ngcontent-%COMP%]{color:var(--black-forest);flex:1}.profile-bio[_ngcontent-%COMP%]{line-height:1.6;margin:0}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(96,108,56,.12);border-radius:6px;color:var(--black-forest)}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--olive-leaf);box-shadow:0 0 0 .18rem #606c381a}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;margin-bottom:.5rem}.upload-picture-zone[_ngcontent-%COMP%]{border:2px dashed var(--sunlit-clay);border-radius:8px;padding:1rem;background-color:#dda15e0d;transition:all .2s ease}.upload-picture-zone[_ngcontent-%COMP%]:hover{background-color:#dda15e1a;border-color:var(--copperwood)}.upload-picture-zone[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;background:transparent;padding:.5rem;cursor:pointer}.upload-picture-zone[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;background:transparent}.upload-picture-zone[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#6c757d}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{border-radius:6px;font-weight:600;padding:.625rem 1.25rem;border:2px solid;transition:all .3s ease}.btn-edit[_ngcontent-%COMP%]{border-color:var(--olive-leaf);color:var(--olive-leaf);background:transparent}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--olive-leaf);color:var(--cornsilk)}.btn-save[_ngcontent-%COMP%]{border-color:var(--sunlit-clay);color:var(--cornsilk);background:linear-gradient(180deg,var(--sunlit-clay),var(--copperwood));border-color:transparent}.btn-save[_ngcontent-%COMP%]:hover{opacity:.9}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-cancel[_ngcontent-%COMP%]{border-color:#606c384d;color:var(--black-forest);background:transparent}.btn-cancel[_ngcontent-%COMP%]:hover{background:#606c381a;color:var(--black-forest)}.navbar-profile-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;margin-right:1rem}.profile-circle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center;font-size:1.5rem;border:2px solid rgba(255,255,255,.4);transition:all .3s ease}.navbar-profile-link[_ngcontent-%COMP%]:hover   .profile-circle[_ngcontent-%COMP%]{background:#ffffff4d;border-color:#fff9}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.profile-name[_ngcontent-%COMP%]{font-size:1.5rem}.profile-circle-large[_ngcontent-%COMP%]{width:180px;height:180px;font-size:3rem}.profile-image[_ngcontent-%COMP%]{width:180px;height:180px}.button-group[_ngcontent-%COMP%]{flex-direction:column}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};function Ane(n,e){n&1&&(_(0,"div",10)(1,"strong"),b(2,"\u26A0\uFE0F Email Not Verified"),v(),_(3,"p",11),b(4,"Please verify your email to manage your events."),v()())}function xne(n,e){n&1&&(_(0,"div",12)(1,"div",13)(2,"span",14),b(3,"Loading..."),v()(),_(4,"p",15),b(5,"Loading your events..."),v()())}function Mne(n,e){n&1&&(_(0,"div",12)(1,"div",1)(2,"span",16),b(3,"\u{1F4ED}"),v()(),_(4,"h4",3),b(5,"No Events Yet"),v(),_(6,"p",17),b(7,"You haven't created any events. Start by creating your first volunteer event!"),v(),_(8,"button",18),b(9," \u2795 Create Your First Event "),v()())}function Rne(n,e){if(n&1&&oe(0,"app-event-list",19),n&2){let t=F();A("events",t.myEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","You are not organizing any events yet.")("onDelete",t.deleteEvent.bind(t))}}var Qy=class n{auth=S(Qe);eventService=S(Yn);modalService=S(ot);router=S(Xe);myEvents=te([]);attendingEventIds=te([]);isLoading=te(!0);isVerified=!1;currentUserUid;ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(this.isVerified=e.emailVerified,this.currentUserUid=e.uid,!this.isVerified){this.isLoading.set(!1);return}this.loadEvents()}loadEvents(){this.eventService.getMyEvents().subscribe({next:e=>{this.myEvents.set(e),this.loadAttendingEventIds()},error:e=>{console.error("Error loading my events:",e),this.isLoading.set(!1)}})}loadAttendingEventIds(){this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}deleteEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.deleteEvent(e.id),this.loadEvents()}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-my-events"]],decls:15,vars:4,consts:[[1,"container","mt-5"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onDelete",4,"ngIf"],[1,"mt-4"],["routerLink","/create-event",1,"btn","btn-primary"],["routerLink","/events",1,"btn","btn-secondary","ms-2"],["role","alert",1,"alert","alert-warning"],[1,"mb-0"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[2,"font-size","3rem"],[1,"text-muted","mb-4"],["routerLink","/create-event",1,"btn","btn-primary","btn-lg"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onDelete"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"h2",2),b(3,"\u{1F4CB} My Events"),v(),_(4,"p",3),b(5,"Events you are organizing"),v()(),G(6,Ane,5,0,"div",4)(7,xne,6,0,"div",5)(8,Mne,10,0,"div",5)(9,Rne,1,5,"app-event-list",6),_(10,"div",7)(11,"button",8),b(12," \u2795 Create New Event "),v(),_(13,"button",9),b(14," \u2190 Back to All Events "),v()()()),t&2&&(w(6),A("ngIf",!r.isVerified),w(),A("ngIf",r.isLoading()),w(),A("ngIf",!r.isLoading()&&r.myEvents().length===0&&r.isVerified),w(),A("ngIf",!r.isLoading()&&r.myEvents().length>0))},dependencies:[$e,rt,Mt,ht,Us],encapsulation:2})};function Pne(n,e){n&1&&(_(0,"div",9)(1,"strong"),b(2,"\u26A0\uFE0F Email Not Verified"),v(),_(3,"p",10),b(4,"Please verify your email to attend events."),v()())}function Nne(n,e){n&1&&(_(0,"div",11)(1,"div",12)(2,"span",13),b(3,"Loading..."),v()(),_(4,"p",14),b(5,"Loading your events..."),v()())}function kne(n,e){n&1&&(_(0,"div",11)(1,"div",1)(2,"span",15),b(3,"\u{1F50D}"),v()(),_(4,"h4",3),b(5,"No Events Yet"),v(),_(6,"p",16),b(7,"You haven't joined any events yet. Explore and find events that match your interests!"),v(),_(8,"button",17),b(9," \u{1F440} Browse Events "),v()())}function One(n,e){if(n&1&&oe(0,"app-event-list",18),n&2){let t=F();A("events",t.attendingEvents())("currentUserUid",t.currentUserUid)("attendingEventIds",t.attendingEventIds())("emptyMessage","You are not attending any events yet.")("onLeave",t.leaveEvent.bind(t))}}var Yy=class n{auth=S(Qe);eventService=S(Yn);modalService=S(ot);attendingEvents=te([]);attendingEventIds=te([]);isLoading=te(!0);isVerified=!1;currentUserUid;ngOnInit(){let e=this.auth.currentUser;if(!e){this.modalService.openModal("login");return}if(this.isVerified=e.emailVerified,this.currentUserUid=e.uid,!this.isVerified){this.isLoading.set(!1);return}this.loadEvents()}loadEvents(){this.eventService.getEventsAttending().subscribe({next:e=>{this.attendingEvents.set(e),this.attendingEventIds.set(e.map(t=>t.id||"")),this.isLoading.set(!1)},error:e=>{console.error("Error loading attending events:",e),this.isLoading.set(!1)}})}leaveEvent(e){return E(this,null,function*(){try{if(!e.id)return;yield this.eventService.leaveEvent(e.id),this.loadEvents()}catch(t){console.error("Error leaving event:",t),alert("Failed to leave event")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-attending-events"]],decls:13,vars:4,consts:[[1,"container","mt-5"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onLeave",4,"ngIf"],[1,"mt-4"],["routerLink","/events",1,"btn","btn-primary"],["role","alert",1,"alert","alert-warning"],[1,"mb-0"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[2,"font-size","3rem"],[1,"text-muted","mb-4"],["routerLink","/events",1,"btn","btn-primary","btn-lg"],[3,"events","currentUserUid","attendingEventIds","emptyMessage","onLeave"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"h2",2),b(3,"\u{1F389} Events I'm Attending"),v(),_(4,"p",3),b(5,"Events you have signed up for"),v()(),G(6,Pne,5,0,"div",4)(7,Nne,6,0,"div",5)(8,kne,10,0,"div",5)(9,One,1,5,"app-event-list",6),_(10,"div",7)(11,"button",8),b(12," \u2190 Browse All Events "),v()()()),t&2&&(w(6),A("ngIf",!r.isVerified),w(),A("ngIf",r.isLoading()),w(),A("ngIf",!r.isLoading()&&r.attendingEvents().length===0&&r.isVerified),w(),A("ngIf",!r.isLoading()&&r.attendingEvents().length>0))},dependencies:[$e,rt,Mt,ht,Us],encapsulation:2})};var YB=class n{auth=S(Qe);router=S(Xe);modalService=S(ot);canActivate(){let e=this.auth.currentUser;return e?e.emailVerified?!0:(this.modalService.openModal("unverified-email"),!1):(this.modalService.openModal("login"),!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})},Yf=(n,e)=>{let t=S(Qe),r=S(Xe),i=S(ot),o=t.currentUser;return o?o.emailVerified?!0:(i.openModal("unverified-email"),!1):(i.openModal("login"),!1)};var ZB=[{path:"",component:L_},{path:"events",component:J_},{path:"event-details/:id",component:Ky},{path:"create-event",component:Kf,canActivate:[Yf]},{path:"edit-event/:id",component:Kf,canActivate:[Yf]},{path:"my-events",component:Qy,canActivate:[Yf]},{path:"attending",component:Yy,canActivate:[Yf]},{path:"profile",component:Qf},{path:"profile/:uid",component:Qf}];var XB={providers:[H0(),Db({eventCoalescing:!0}),FI(ZB),KO(()=>QO({projectId:"volunteer-events-management",appId:"1:655730869330:web:eb2e4c15b0dcf1a8c64b8b",storageBucket:"volunteer-events-management.firebasestorage.app",apiKey:"AIzaSyDAgEoKYxzPAlf3iXS1ZtCfL1M80BSrjAs",authDomain:"volunteer-events-management.firebaseapp.com",messagingSenderId:"655730869330"})),Z2(()=>X2()),rL(()=>Sv())]};var qs=class n{getErrorMessage(e){if(!e)return"An unexpected error occurred. Please try again.";let t=e.code||e.message||"";return{"auth/invalid-email":"The email address is not valid. Please check and try again.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/user-not-found":"No account found with this email. Please sign up first.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"This email is already registered. Please sign in or use a different email.","auth/weak-password":"Password is too weak. Please use at least 6 characters with a mix of letters and numbers.","auth/password-does-not-meet-requirements":"Password does not meet Firebase security requirements. Please use at least 6 characters.","auth/operation-not-allowed":"Email/password login is not enabled. Please contact support.","auth/too-many-requests":"Too many failed login attempts. Please try again later.","auth/account-exists-with-different-credential":"An account already exists with this email using a different login method.","auth/invalid-credential":"Invalid credentials. Please check your email and password.","auth/cancelled-popup-request":"Login cancelled. Please try again.","auth/popup-blocked":"Login popup was blocked. Please allow popups and try again.","auth/popup-closed-by-user":"You closed the login popup. Please try again.","auth/unauthorized-domain":"This domain is not authorized for authentication.","auth/missing-email":"Email is required for login.","auth/missing-password":"Password is required for login.","auth/network-request-failed":"Network error. Please check your internet connection and try again.","auth/invalid-api-key":"API configuration error. Please contact support.","auth/internal-error":"An internal error occurred. Please try again later.","unverified-email":"Your email address has not been verified yet. Please check your email for a verification link.","auth/user-not-verified":"Please verify your email address before logging in. Check your inbox for a verification link."}[t]||`Authentication error: ${t}. Please try again or contact support.`}extractErrorCode(e){return e?.code||e?.message||"unknown-error"}isUnverifiedEmailError(e){let t=this.extractErrorCode(e);return t==="unverified-email"||t==="auth/user-not-verified"}isNetworkError(e){return this.extractErrorCode(e)==="auth/network-request-failed"}isTooManyAttemptsError(e){return this.extractErrorCode(e)==="auth/too-many-requests"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function Fne(n,e){if(n&1){let t=ve();_(0,"div",7),b(1),_(2,"button",20),H("click",function(){Q(t);let i=F();return Y(i.errorMessage=null)}),v()()}if(n&2){let t=F();w(),_e(" ",t.errorMessage," ")}}function Lne(n,e){n&1&&(_(0,"div",12),b(1," Please enter a valid email. "),v())}function Vne(n,e){n&1&&(_(0,"div",12),b(1," Password is required. "),v())}function Une(n,e){n&1&&oe(0,"span",16)}function jne(n,e){if(n&1){let t=ve();_(0,"div",21),H("click",function(){Q(t);let i=F();return Y(i.closeModal())}),v()}}var Zy=class n{fb=S(Z_);router=S(Xe);authService=S(Pr);modalService=S(ot);errorService=S(qs);errorMessage=null;isLoading=!1;form=this.fb.nonNullable.group({email:["",[Qn.required,Qn.email]],password:["",Qn.required]});onSubmit(){if(!this.form.valid){this.errorMessage="Please fill in all required fields.";return}this.isLoading=!0,this.errorMessage=null;let{email:e,password:t}=this.form.getRawValue();this.authService.login(e,t).subscribe({next:()=>{this.isLoading=!1,this.modalService.closeModal("login"),this.router.navigateByUrl("/")},error:r=>{this.isLoading=!1,this.errorMessage=this.errorService.getErrorMessage(r)}})}openSignupModal(){this.errorMessage=null,this.form.reset(),this.modalService.closeModal("login"),this.modalService.openModal("signup")}closeModal(){this.modalService.closeModal("login"),this.errorMessage=null,this.form.reset()}isModalOpen(){return this.modalService.isOpen("login")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-login-modal"]],decls:29,vars:16,consts:[["id","loginModal","tabindex","-1","aria-labelledby","loginModalLabel","aria-modal","true","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["id","loginModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Enter your password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-login","w-100","mb-3",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"modal-backdrop","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),b(5,"Sign In"),v(),_(6,"button",5),H("click",function(){return r.closeModal()}),v()(),_(7,"div",6),vn(8,Fne,3,1,"div",7),_(9,"form",8),H("ngSubmit",function(){return r.onSubmit()}),_(10,"div",9)(11,"label",10),b(12,"Email"),v(),oe(13,"input",11),vn(14,Lne,2,0,"div",12),v(),_(15,"div",9)(16,"label",13),b(17,"Password"),v(),oe(18,"input",14),vn(19,Vne,2,0,"div",12),v(),_(20,"button",15),vn(21,Une,1,0,"span",16),b(22),v()(),_(23,"div",17)(24,"small"),b(25,"Don't have an account? "),_(26,"button",18),H("click",function(){return r.openSignupModal()}),b(27,"Sign up"),v()()()()()()(),vn(28,jne,1,0,"div",19)),t&2){let i,o,s,a;_i("display",r.isModalOpen()?"block":"none"),ct("show",r.isModalOpen()),w(8),_n(r.errorMessage?8:-1),w(),A("formGroup",r.form),w(4),ct("is-invalid",((i=r.form.get("email"))==null?null:i.invalid)&&((i=r.form.get("email"))==null?null:i.touched)),w(),_n((o=r.form.get("email"))!=null&&o.invalid&&((o=r.form.get("email"))!=null&&o.touched)?14:-1),w(4),ct("is-invalid",((s=r.form.get("password"))==null?null:s.invalid)&&((s=r.form.get("password"))==null?null:s.touched)),w(),_n((a=r.form.get("password"))!=null&&a.invalid&&((a=r.form.get("password"))!=null&&a.touched)?19:-1),w(),A("disabled",!r.form.valid||r.isLoading),w(),_n(r.isLoading?21:-1),w(),_e(" ",r.isLoading?"Signing in...":"Sign In"," "),w(6),_n(r.isModalOpen()?28:-1)}},dependencies:[X_,ji,Vi,Vs,Ui,mf,vf,$e],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.modal-content[_ngcontent-%COMP%]{border:2px solid var(--black-forest);border-radius:12px;box-shadow:0 8px 32px #28361826}.modal-header[_ngcontent-%COMP%]{background-color:#606c380d;border-bottom:1px solid rgba(40,54,24,.1)}.modal-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;font-size:1.5rem}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(40,54,24,.2);border-radius:6px;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--sunlit-clay);box-shadow:0 0 0 .2rem #dda15e26}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354526}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem}.btn-login[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.75rem 1rem;border-radius:6px;transition:all .2s ease}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{color:var(--sunlit-clay);text-decoration:none;font-weight:600}.btn-link[_ngcontent-%COMP%]:hover{color:var(--copperwood)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#28361880}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(.95);opacity:0;transition:all .3s ease}.modal.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.alert[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:.75rem 1rem;font-size:.95rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24;border-left:4px solid #dc3545}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#155724;border-left:4px solid #28a745}.btn-close[_ngcontent-%COMP%]{opacity:.5;transition:opacity .2s ease}.btn-close[_ngcontent-%COMP%]:hover{opacity:.7}"]})};function Bne(n,e){if(n&1){let t=ve();_(0,"div",7),b(1),_(2,"button",25),H("click",function(){Q(t);let i=F();return Y(i.errorMessage=null)}),v()()}if(n&2){let t=F();w(),_e(" ",t.errorMessage," ")}}function $ne(n,e){if(n&1&&(_(0,"div",8),b(1),v()),n&2){let t=F();w(),_e(" ",t.successMessage," ")}}function Hne(n,e){n&1&&(_(0,"div",13),b(1," Username must be at least 3 characters. "),v())}function qne(n,e){n&1&&(_(0,"div",13),b(1," Please enter a valid email. "),v())}function zne(n,e){n&1&&(_(0,"div",13),b(1," Password must be at least 6 characters. "),v())}function Wne(n,e){n&1&&(_(0,"div",13),b(1," Please confirm your password. "),v())}function Gne(n,e){n&1&&oe(0,"span",21)}function Kne(n,e){if(n&1){let t=ve();_(0,"div",26),H("click",function(){Q(t);let i=F();return Y(i.closeModal())}),v()}}var Xy=class n{fb=S(Z_);router=S(Xe);authService=S(Pr);modalService=S(ot);errorService=S(qs);errorMessage=null;successMessage=null;isLoading=!1;form=this.fb.nonNullable.group({username:["",[Qn.required,Qn.minLength(3)]],email:["",[Qn.required,Qn.email]],password:["",[Qn.required,Qn.minLength(6)]],confirmPassword:["",Qn.required]});onSubmit(){if(!this.form.valid){this.errorMessage="Please fill in all fields correctly.",this.successMessage=null;return}let{username:e,email:t,password:r,confirmPassword:i}=this.form.getRawValue();if(console.log("=== SIGNUP MODAL SUBMISSION ==="),console.log("Username:",e),console.log("Email:",t),console.log("Password length:",r?r.length:0),console.log("Password (raw from form):",r),console.log("Confirm Password:",i),console.log("Passwords match:",r===i),r!==i){this.errorMessage="Passwords do not match.",this.successMessage=null;return}console.log("Sending to AuthService.register() with password:",r,"Length:",r.length),this.isLoading=!0,this.errorMessage=null,this.successMessage=null,this.authService.register(t,e,r).subscribe({next:()=>{this.isLoading=!1,this.successMessage="Account created! Please check your email to verify your account.",this.form.reset(),setTimeout(()=>{this.modalService.closeModal("signup"),this.modalService.openModal("login"),this.successMessage=null},2e3)},error:o=>{this.isLoading=!1,console.error("Signup error received in SignupModal:",o),this.errorMessage=this.errorService.getErrorMessage(o),this.successMessage=null}})}openLoginModal(){this.errorMessage=null,this.successMessage=null,this.form.reset(),this.modalService.closeModal("signup"),this.modalService.openModal("login")}closeModal(){this.modalService.closeModal("signup"),this.errorMessage=null,this.successMessage=null,this.form.reset()}isModalOpen(){return this.modalService.isOpen("signup")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-signup-modal"]],decls:40,vars:23,consts:[["id","signupModal","tabindex","-1","aria-labelledby","signupModalLabel","aria-modal","true","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["id","signupModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Choose a username","formControlName","username",1,"form-control"],[1,"invalid-feedback"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Create a password (min 6 characters)","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","placeholder","Confirm your password","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-signup","w-100","mb-3",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"modal-backdrop","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),b(5,"Create Account"),v(),_(6,"button",5),H("click",function(){return r.closeModal()}),v()(),_(7,"div",6),vn(8,Bne,3,1,"div",7),vn(9,$ne,2,1,"div",8),_(10,"form",9),H("ngSubmit",function(){return r.onSubmit()}),_(11,"div",10)(12,"label",11),b(13,"Username"),v(),oe(14,"input",12),vn(15,Hne,2,0,"div",13),v(),_(16,"div",10)(17,"label",14),b(18,"Email"),v(),oe(19,"input",15),vn(20,qne,2,0,"div",13),v(),_(21,"div",10)(22,"label",16),b(23,"Password"),v(),oe(24,"input",17),vn(25,zne,2,0,"div",13),v(),_(26,"div",10)(27,"label",18),b(28,"Confirm Password"),v(),oe(29,"input",19),vn(30,Wne,2,0,"div",13),v(),_(31,"button",20),vn(32,Gne,1,0,"span",21),b(33),v()(),_(34,"div",22)(35,"small"),b(36,"Already have an account? "),_(37,"button",23),H("click",function(){return r.openLoginModal()}),b(38,"Sign in"),v()()()()()()(),vn(39,Kne,1,0,"div",24)),t&2){let i,o,s,a,c,u,d,f;_i("display",r.isModalOpen()?"block":"none"),ct("show",r.isModalOpen()),w(8),_n(r.errorMessage?8:-1),w(),_n(r.successMessage?9:-1),w(),A("formGroup",r.form),w(4),ct("is-invalid",((i=r.form.get("username"))==null?null:i.invalid)&&((i=r.form.get("username"))==null?null:i.touched)),w(),_n((o=r.form.get("username"))!=null&&o.invalid&&((o=r.form.get("username"))!=null&&o.touched)?15:-1),w(4),ct("is-invalid",((s=r.form.get("email"))==null?null:s.invalid)&&((s=r.form.get("email"))==null?null:s.touched)),w(),_n((a=r.form.get("email"))!=null&&a.invalid&&((a=r.form.get("email"))!=null&&a.touched)?20:-1),w(4),ct("is-invalid",((c=r.form.get("password"))==null?null:c.invalid)&&((c=r.form.get("password"))==null?null:c.touched)),w(),_n((u=r.form.get("password"))!=null&&u.invalid&&((u=r.form.get("password"))!=null&&u.touched)?25:-1),w(4),ct("is-invalid",((d=r.form.get("confirmPassword"))==null?null:d.invalid)&&((d=r.form.get("confirmPassword"))==null?null:d.touched)),w(),_n((f=r.form.get("confirmPassword"))!=null&&f.invalid&&((f=r.form.get("confirmPassword"))!=null&&f.touched)?30:-1),w(),A("disabled",!r.form.valid||r.isLoading),w(),_n(r.isLoading?32:-1),w(),_e(" ",r.isLoading?"Creating account...":"Sign Up"," "),w(6),_n(r.isModalOpen()?39:-1)}},dependencies:[X_,ji,Vi,Vs,Ui,mf,vf,$e],styles:["[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.modal-content[_ngcontent-%COMP%]{border:2px solid var(--black-forest);border-radius:12px;box-shadow:0 8px 32px #28361826}.modal-header[_ngcontent-%COMP%]{background-color:#606c380d;border-bottom:1px solid rgba(40,54,24,.1)}.modal-title[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:600;font-size:1.5rem}.form-label[_ngcontent-%COMP%]{color:var(--black-forest);font-weight:500}.form-control[_ngcontent-%COMP%]{border:1px solid rgba(40,54,24,.2);border-radius:6px;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--sunlit-clay);box-shadow:0 0 0 .2rem #dda15e26}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354526}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem}.btn-signup[_ngcontent-%COMP%]{background-color:var(--black-forest);border-color:var(--black-forest);color:var(--cornsilk);font-weight:600;padding:.75rem 1rem;border-radius:6px;transition:all .2s ease}.btn-signup[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--olive-leaf);border-color:var(--olive-leaf);transform:translateY(-2px);box-shadow:0 4px 12px #28361833}.btn-signup[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{color:var(--sunlit-clay);text-decoration:none;font-weight:600}.btn-link[_ngcontent-%COMP%]:hover{color:var(--copperwood)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#28361880}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(.95);opacity:0;transition:all .3s ease}.modal.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.alert[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:.75rem 1rem;font-size:.95rem}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24;border-left:4px solid #dc3545}.alert-success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#155724;border-left:4px solid #28a745}.btn-close[_ngcontent-%COMP%]{opacity:.5;transition:opacity .2s ease}.btn-close[_ngcontent-%COMP%]:hover{opacity:.7}"]})};function Qne(n,e){if(n&1&&(_(0,"div",16),b(1),v()),n&2){let t=F();w(),_e(" ",t.errorMessage," ")}}function Yne(n,e){if(n&1&&(_(0,"div",17),b(1),v()),n&2){let t=F();w(),_e(" ",t.successMessage," ")}}function Zne(n,e){n&1&&(_(0,"span"),b(1,"Resend Verification Email"),v())}function Xne(n,e){n&1&&(_(0,"span"),oe(1,"span",18),b(2," Sending... "),v())}function Jne(n,e){if(n&1&&oe(0,"div",19),n&2){let t=F();ct("show",t.isOpen)}}var Jy=class n{authService=S(Pr);modalService=S(ot);errorService=S(qs);isOpen=!1;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){setInterval(()=>{this.isOpen=this.modalService.isOpen("unverified-email")},100)}closeModal(){this.errorMessage="",this.successMessage="",this.modalService.closeModal("unverified-email")}resendVerification(){this.isLoading=!0,this.errorMessage="",this.successMessage="",this.authService.resendVerificationEmail().subscribe({next:()=>{this.successMessage="\u2705 Verification email sent! Check your inbox.",this.isLoading=!1,setTimeout(()=>this.closeModal(),3e3)},error:e=>{this.errorMessage=this.errorService.getErrorMessage(e),this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-unverified-email-modal"]],decls:21,vars:10,consts:[["tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-warning"],[1,"modal-header","bg-warning","text-dark"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"text-muted","mb-4"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning","text-dark",3,"click","disabled"],[4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-backdrop","fade"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),b(5,"\u26A0\uFE0F Email Not Verified"),v(),_(6,"button",5),H("click",function(){return r.closeModal()}),v()(),_(7,"div",6)(8,"p",7),b(9," Your email address has not been verified yet. Please verify your email to access all features. "),v(),_(10,"p",8),b(11," Check your inbox for a verification email. If you don't see it, you can request a new one below. "),v(),G(12,Qne,2,1,"div",9)(13,Yne,2,1,"div",10),v(),_(14,"div",11)(15,"button",12),H("click",function(){return r.closeModal()}),b(16,"Close"),v(),_(17,"button",13),H("click",function(){return r.resendVerification()}),G(18,Zne,2,0,"span",14)(19,Xne,3,0,"span",14),v()()()()(),G(20,Jne,1,2,"div",15)),t&2&&(_i("display",r.isOpen?"block":"none"),ct("show",r.isOpen),w(12),A("ngIf",r.errorMessage),w(),A("ngIf",r.successMessage),w(4),A("disabled",r.isLoading),w(),A("ngIf",!r.isLoading),w(),A("ngIf",r.isLoading),w(),A("ngIf",r.isOpen))},dependencies:[$e,rt],styles:[".modal.show[_ngcontent-%COMP%]{display:block}"]})};var JB=n=>["/profile",n];function ere(n,e){if(n&1){let t=ve();_(0,"li",22)(1,"button",23),H("click",function(){Q(t);let i=F();return Y(i.openLoginModal())}),b(2,"Login"),v(),_(3,"button",24),H("click",function(){Q(t);let i=F();return Y(i.openSignupModal())}),b(4,"Sign Up"),v()()}}function tre(n,e){if(n&1&&oe(0,"img",30),n&2){let t,r=F(2);A("src",(t=r.currentUserProfile())==null?null:t.profilePicture,Ot)}}function nre(n,e){n&1&&oe(0,"div",31)}function rre(n,e){if(n&1){let t=ve();_(0,"li",25)(1,"a",26),G(2,tre,1,1,"img",27)(3,nre,1,0,"div",28),v(),_(4,"button",29),H("click",function(){Q(t);let i=F();return Y(i.logout())}),b(5,"Logout"),v()()}if(n&2){let t,r,i=F();w(),A("routerLink",yn(3,JB,i.getCurrentUserUid())),w(),A("ngIf",i.currentUserProfile()&&((t=i.currentUserProfile())==null?null:t.profilePicture)),w(),A("ngIf",!i.currentUserProfile()||!((r=i.currentUserProfile())!=null&&r.profilePicture))}}function ire(n,e){if(n&1){let t=ve();_(0,"div",32),H("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),v()}}function ore(n,e){if(n&1){let t=ve();_(0,"li",17)(1,"a",33),H("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),_(2,"span",19),b(3,"\u{1F464}"),v(),b(4," My Profile "),v()()}if(n&2){let t=F();w(),A("routerLink",yn(1,JB,t.getCurrentUserUid()))}}function sre(n,e){if(n&1){let t=ve();_(0,"li",17)(1,"a",34),H("click",function(){Q(t);let i=F();return Y(i.closeSidebar())}),_(2,"span",19),b(3,"\u{1F4CC}"),v(),b(4," My Events "),v()()}}function are(n,e){if(n&1){let t=ve();_(0,"li",17)(1,"button",35),H("click",function(){Q(t);let i=F();return i.openLoginModal(),Y(i.closeSidebar())}),b(2,"Login"),v()()}}function cre(n,e){if(n&1){let t=ve();_(0,"li",17)(1,"button",36),H("click",function(){Q(t);let i=F();return i.openSignupModal(),Y(i.closeSidebar())}),b(2,"Sign Up"),v()()}}function lre(n,e){if(n&1){let t=ve();_(0,"li",37)(1,"button",38),H("click",function(){Q(t);let i=F();return i.logout(),Y(i.closeSidebar())}),b(2,"Logout"),v()()}}var eE=class n{authService=S(Pr);modalService=S(ot);auth=S(Qe);userService=S(Zn);firestore=S(Gt);currentUserProfile=te(null);sidebarOpen=te(!1);unsubscribeProfile=null;ngOnInit(){this.authService.user$.subscribe(e=>{if(e){this.authService.currentUserSig.set({email:e.email,username:e.displayName}),this.unsubscribeProfile&&this.unsubscribeProfile();let t=et(this.firestore,"users",e.uid);this.unsubscribeProfile=k_(t,r=>{if(r.exists()){let i=r.data();this.currentUserProfile.set({displayName:i.displayName,profilePicture:i.profilePicture})}},r=>{console.error("Error listening to profile changes:",r)})}else this.authService.currentUserSig.set(null),this.currentUserProfile.set(null),this.unsubscribeProfile&&(this.unsubscribeProfile(),this.unsubscribeProfile=null)})}ngOnDestroy(){this.unsubscribeProfile&&this.unsubscribeProfile()}toggleSidebar(){this.sidebarOpen.update(e=>!e)}closeSidebar(){this.sidebarOpen.set(!1)}logout(){this.closeSidebar(),this.authService.logout()}openLoginModal(){this.modalService.openModal("login")}openSignupModal(){this.modalService.openModal("signup")}getCurrentUserUid(){return this.auth.currentUser?.uid}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-root"]],decls:36,vars:11,consts:[[1,"navbar","navbar-expand-lg","navbar-custom","shadow-sm"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand","fw-bold"],["type","button","aria-controls","sidebar",1,"navbar-toggler","border-0",3,"click"],[1,"navbar-toggler-icon"],[1,"navbar-collapse","d-none","d-lg-flex","ms-auto"],[1,"navbar-nav","align-items-center"],[1,"nav-item"],["routerLink","/events","routerLinkActive","active",1,"nav-link"],["class","nav-item d-flex gap-2 ms-3",4,"ngIf"],["class","nav-item d-flex align-items-center gap-3 ms-3",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"sidebar-drawer"],[1,"sidebar-header","d-flex","justify-content-between","align-items-center"],[1,"m-0"],["aria-label","Close menu",1,"btn-close-sidebar",3,"click"],[1,"sidebar-nav"],[1,"sidebar-nav-item"],["routerLink","/events","routerLinkActive","active",1,"sidebar-nav-link",3,"click"],[1,"icon"],["class","sidebar-nav-item",4,"ngIf"],["class","sidebar-nav-item border-top mt-3 pt-3",4,"ngIf"],[1,"nav-item","d-flex","gap-2","ms-3"],[1,"btn","btn-nav-login",3,"click"],[1,"btn","btn-nav-signup",3,"click"],[1,"nav-item","d-flex","align-items-center","gap-3","ms-3"],["title","View Profile",1,"nav-profile-link",3,"routerLink"],["alt","Profile","class","nav-profile-img loaded",3,"src",4,"ngIf"],["class","nav-profile-img-skeleton",4,"ngIf"],[1,"btn","btn-nav-logout",3,"click"],["alt","Profile",1,"nav-profile-img","loaded",3,"src"],[1,"nav-profile-img-skeleton"],[1,"sidebar-overlay",3,"click"],["routerLinkActive","active",1,"sidebar-nav-link",3,"click","routerLink"],["routerLink","/my-events","routerLinkActive","active",1,"sidebar-nav-link",3,"click"],[1,"btn","btn-sidebar-auth","w-100",3,"click"],[1,"btn","btn-sidebar-auth","btn-sidebar-signup","w-100",3,"click"],[1,"sidebar-nav-item","border-top","mt-3","pt-3"],[1,"btn","btn-sidebar-logout","w-100",3,"click"]],template:function(t,r){t&1&&(_(0,"nav",0)(1,"div",1)(2,"a",2),b(3,"CommUnity"),v(),_(4,"button",3),H("click",function(){return r.toggleSidebar()}),oe(5,"span",4),v(),_(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),b(10,"Events"),v()(),G(11,ere,5,0,"li",9)(12,rre,6,5,"li",10),v()()()(),G(13,ire,1,0,"div",11),_(14,"nav",12)(15,"div",13)(16,"h5",14),b(17,"Menu"),v(),_(18,"button",15),H("click",function(){return r.closeSidebar()}),_(19,"span"),b(20,"\xD7"),v()()(),_(21,"ul",16)(22,"li",17)(23,"a",18),H("click",function(){return r.closeSidebar()}),_(24,"span",19),b(25,"\u{1F4CB}"),v(),b(26," Events "),v()(),G(27,ore,5,3,"li",20)(28,sre,5,0,"li",20)(29,are,3,0,"li",20)(30,cre,3,0,"li",20)(31,lre,3,0,"li",21),v()(),oe(32,"router-outlet")(33,"app-unverified-email-modal")(34,"app-login-modal")(35,"app-signup-modal")),t&2&&(w(4),vi("aria-expanded",r.sidebarOpen()),w(7),A("ngIf",!r.authService.currentUserSig()),w(),A("ngIf",r.authService.currentUserSig()),w(),A("ngIf",r.sidebarOpen()),w(),ct("open",r.sidebarOpen()),w(13),A("ngIf",r.authService.currentUserSig()),w(),A("ngIf",r.authService.currentUserSig()),w(),A("ngIf",!r.authService.currentUserSig()),w(),A("ngIf",!r.authService.currentUserSig()),w(),A("ngIf",r.authService.currentUserSig()))},dependencies:[Mt,nh,ht,OI,$e,rt,Zy,Xy,Jy],styles:[`[_ngcontent-%COMP%]:root{--olive-leaf: #606c38ff;--black-forest: #283618ff;--cornsilk: #fefae0ff;--sunlit-clay: #dda15eff;--copperwood: #bc6c25ff}.navbar-custom[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--black-forest) 0%,#1a2110 100%);box-shadow:0 4px 12px #28361833;padding:.5rem 0;position:sticky;top:0;z-index:999}.navbar-custom[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--cornsilk)!important;transition:all .3s cubic-bezier(.23,1,.32,1);letter-spacing:-.5px;flex-shrink:0}.navbar-brand[_ngcontent-%COMP%]:hover{color:var(--sunlit-clay)!important;transform:scale(1.05)}.navbar-collapse[_ngcontent-%COMP%]{flex:1;justify-content:flex-end}.navbar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0}.nav-link[_ngcontent-%COMP%]{color:var(--cornsilk)!important;font-weight:500;transition:all .2s ease;position:relative;margin:0 .75rem;padding:.5rem 0!important;white-space:nowrap}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{color:var(--sunlit-clay)!important}.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:6px;height:6px;background-color:var(--sunlit-clay);border-radius:50%}.nav-profile-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;text-decoration:none;border-radius:50%;transition:all .3s ease;width:40px;height:40px;min-width:40px;min-height:40px;overflow:hidden;border:2px solid transparent;flex-shrink:0}.nav-profile-link[_ngcontent-%COMP%]:hover{border-color:var(--sunlit-clay);transform:scale(1.08)}.nav-profile-link[_ngcontent-%COMP%]:focus{outline:2px solid var(--sunlit-clay);outline-offset:2px;border-radius:50%}.nav-profile-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;opacity:0;transition:opacity .3s ease}.nav-profile-img.loaded[_ngcontent-%COMP%]{opacity:1}.nav-profile-img-skeleton[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,#fefae033,#fefae066,#fefae033);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.btn-nav-login[_ngcontent-%COMP%], .btn-nav-signup[_ngcontent-%COMP%], .btn-nav-logout[_ngcontent-%COMP%]{font-weight:600;border-radius:6px;padding:.5rem 1rem;margin:0 .25rem;transition:all .2s ease;border:none;font-size:.95rem;cursor:pointer;white-space:nowrap;flex-shrink:0}.btn-nav-login[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid var(--cornsilk)}.btn-nav-login[_ngcontent-%COMP%]:hover{background-color:var(--cornsilk);color:var(--black-forest);transform:translateY(-2px);box-shadow:0 4px 12px #fefae033}.btn-nav-signup[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);color:var(--black-forest)}.btn-nav-signup[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);transform:translateY(-2px);box-shadow:0 4px 12px #dda15e4d}.btn-nav-logout[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid #dc3545;padding:.45rem .9rem;font-size:.9rem}.btn-nav-logout[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-2px)}.navbar-toggler[_ngcontent-%COMP%]{border:none!important;padding:0!important}.navbar-toggler[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:2px solid var(--sunlit-clay);outline-offset:2px;border-radius:4px}.navbar-toggler-icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%23fefae0' stroke-width='2.5' d='M6 6h18M6 15h18M6 24h18'/%3e%3c/svg%3e");width:28px;height:28px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1040;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sidebar-drawer[_ngcontent-%COMP%]{position:fixed;top:0;left:-350px;width:350px;height:100vh;background:var(--black-forest);z-index:1050;transition:left .3s cubic-bezier(.23,1,.32,1);display:flex;flex-direction:column;box-shadow:2px 0 12px #0000004d}.sidebar-drawer.open[_ngcontent-%COMP%]{left:0}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid rgba(254,250,224,.1);background:linear-gradient(135deg,var(--black-forest) 0%,#1a2110 100%)}.sidebar-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:var(--cornsilk);font-weight:700}.btn-close-sidebar[_ngcontent-%COMP%]{background:none;border:none;color:var(--cornsilk);font-size:1.75rem;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.btn-close-sidebar[_ngcontent-%COMP%]:hover{background-color:#fefae01a;color:var(--sunlit-clay)}.sidebar-nav[_ngcontent-%COMP%]{list-style:none;padding:1rem 0;margin:0;flex:1;overflow-y:auto}.sidebar-nav-item[_ngcontent-%COMP%]{margin:0;border:none}.sidebar-nav-item.border-top[_ngcontent-%COMP%]{border-top:1px solid rgba(254,250,224,.1)!important}.sidebar-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;color:var(--cornsilk);text-decoration:none;padding:.875rem 1.5rem;transition:all .2s ease;border-left:3px solid transparent;margin:0 .5rem;border-radius:0 6px 6px 0}.sidebar-nav-link[_ngcontent-%COMP%]:hover{background-color:#fefae014;color:var(--sunlit-clay);border-left-color:var(--sunlit-clay)}.sidebar-nav-link.active[_ngcontent-%COMP%]{background-color:#dda15e26;color:var(--sunlit-clay);border-left-color:var(--sunlit-clay);font-weight:600}.sidebar-nav-link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem;min-width:24px}.btn-sidebar-auth[_ngcontent-%COMP%]{background-color:transparent;color:var(--cornsilk);border:2px solid var(--cornsilk);font-weight:600;border-radius:6px;padding:.625rem 1rem;margin:0 .5rem;transition:all .2s ease}.btn-sidebar-auth[_ngcontent-%COMP%]:hover{background-color:var(--cornsilk);color:var(--black-forest)}.btn-sidebar-auth.btn-sidebar-signup[_ngcontent-%COMP%]{background-color:var(--sunlit-clay);color:var(--black-forest);border-color:var(--sunlit-clay);margin-top:.5rem}.btn-sidebar-auth.btn-sidebar-signup[_ngcontent-%COMP%]:hover{background-color:var(--copperwood);border-color:var(--copperwood)}.btn-sidebar-logout[_ngcontent-%COMP%]{background-color:transparent;color:#dc3545;border:2px solid #dc3545;font-weight:600;border-radius:6px;padding:.625rem 1rem;transition:all .2s ease}.btn-sidebar-logout[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}@media (max-width: 991px){.navbar-custom[_ngcontent-%COMP%]{padding:.4rem 0}.navbar-collapse[_ngcontent-%COMP%]{display:none!important}.nav-link[_ngcontent-%COMP%]{margin:.25rem 0}.nav-profile-link[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;min-height:36px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.25rem}.btn-nav-login[_ngcontent-%COMP%], .btn-nav-signup[_ngcontent-%COMP%], .btn-nav-logout[_ngcontent-%COMP%]{padding:.4rem .75rem;font-size:.85rem}}@media (max-width: 576px){.sidebar-drawer[_ngcontent-%COMP%]{width:280px;left:-280px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.05rem}.nav-profile-link[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px;min-height:32px}}.sidebar-nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.95rem}.sidebar-nav-link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem}.btn-sidebar-auth[_ngcontent-%COMP%]{margin:0;padding:.5rem 1rem}.event-card[_ngcontent-%COMP%]{width:100%}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:0}`]})};aI(eE,XB).catch(n=>console.error(n));
